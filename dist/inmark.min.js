!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).inMark={})}(this,(function(t){"use strict";var e=void 0!==typeof self?self:this,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function r(t,e){return t(e={exports:{}},e.exports),e.exports}var i=r((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),o={}.hasOwnProperty,a=function(t,e){return o.call(t,e)},s=function(t){try{return!!t()}catch(t){return!0}},h=!s((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),l=r((function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)})),u=(l.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),c=function(t){if(!u(t))throw TypeError(t+" is not an object!");return t},f=i.document,d=u(f)&&u(f.createElement),p=function(t){return d?f.createElement(t):{}},g=!h&&!s((function(){return 7!=Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a})),v=function(t,e){if(!u(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!u(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!u(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!u(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},_=Object.defineProperty,y={f:h?Object.defineProperty:function(t,e,n){if(c(t),e=v(e,!0),c(n),g)try{return _(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},m=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},x=h?function(t,e,n){return y.f(t,e,m(1,n))}:function(t,e,n){return t[e]=n,t},b=0,w=Math.random(),S=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++b+w).toString(36))},M=r((function(t){var e="__core-js_shared__",n=i[e]||(i[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:l.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),k=M("native-function-to-string",Function.toString),T=r((function(t){var e=S("src"),n="toString",r=(""+k).split(n);l.inspectSource=function(t){return k.call(t)},(t.exports=function(t,n,o,s){var h="function"==typeof o;h&&(a(o,"name")||x(o,"name",n)),t[n]!==o&&(h&&(a(o,e)||x(o,e,t[n]?""+t[n]:r.join(String(n)))),t===i?t[n]=o:s?t[n]?t[n]=o:x(t,n,o):(delete t[n],x(t,n,o)))})(Function.prototype,n,(function(){return"function"==typeof this&&this[e]||k.call(this)}))})),E=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},P=function(t,e,n){if(E(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},C=function(t,e,n){var r,o,a,s,h=t&C.F,u=t&C.G,c=t&C.S,f=t&C.P,d=t&C.B,p=u?i:c?i[e]||(i[e]={}):(i[e]||{}).prototype,g=u?l:l[e]||(l[e]={}),v=g.prototype||(g.prototype={});for(r in u&&(n=e),n)a=((o=!h&&p&&void 0!==p[r])?p:n)[r],s=d&&o?P(a,i):f&&"function"==typeof a?P(Function.call,a):a,p&&T(p,r,a,t&C.U),g[r]!=a&&x(g,r,s),f&&v[r]!=a&&(v[r]=a)};i.core=l,C.F=1,C.G=2,C.S=4,C.P=8,C.B=16,C.W=32,C.U=64,C.R=128;var D=C,A=r((function(t){var e=S("meta"),n=y.f,r=0,i=Object.isExtensible||function(){return!0},o=!s((function(){return i(Object.preventExtensions({}))})),h=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!u(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,e)){if(!i(t))return"F";if(!n)return"E";h(t)}return t[e].i},getWeak:function(t,n){if(!a(t,e)){if(!i(t))return!0;if(!n)return!1;h(t)}return t[e].w},onFreeze:function(t){return o&&l.NEED&&i(t)&&!a(t,e)&&h(t),t}}})),I=(A.KEY,A.NEED,A.fastKey,A.getWeak,A.onFreeze,r((function(t){var e=M("wks"),n=i.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:S)("Symbol."+t))}).store=e}))),O=y.f,L=I("toStringTag"),R=function(t,e,n){t&&!a(t=n?t:t.prototype,L)&&O(t,L,{configurable:!0,value:e})},z={f:I},N=y.f,F=function(t){var e=l.Symbol||(l.Symbol=i.Symbol||{});"_"==t.charAt(0)||t in e||N(e,t,{value:z.f(t)})},j={}.toString,B=function(t){return j.call(t).slice(8,-1)},H=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==B(t)?t.split(""):Object(t)},W=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},G=function(t){return H(W(t))},Y=Math.ceil,U=Math.floor,V=function(t){return isNaN(t=+t)?0:(t>0?U:Y)(t)},X=Math.min,q=function(t){return t>0?X(V(t),9007199254740991):0},Z=Math.max,Q=Math.min,K=function(t,e){return(t=V(t))<0?Z(t+e,0):Q(t,e)},$=function(t){return function(e,n,r){var i,o=G(e),a=q(o.length),s=K(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},J=M("keys"),tt=function(t){return J[t]||(J[t]=S(t))},et=$(!1),nt=tt("IE_PROTO"),rt=function(t,e){var n,r=G(t),i=0,o=[];for(n in r)n!=nt&&a(r,n)&&o.push(n);for(;e.length>i;)a(r,n=e[i++])&&(~et(o,n)||o.push(n));return o},it="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ot=Object.keys||function(t){return rt(t,it)},at={f:Object.getOwnPropertySymbols},st={f:{}.propertyIsEnumerable},ht=Array.isArray||function(t){return"Array"==B(t)},lt=function(t){return Object(W(t))},ut=h?Object.defineProperties:function(t,e){c(t);for(var n,r=ot(e),i=r.length,o=0;i>o;)y.f(t,n=r[o++],e[n]);return t},ct=i.document,ft=ct&&ct.documentElement,dt=tt("IE_PROTO"),pt=function(){},gt=function(){var t,e=p("iframe"),n=it.length;for(e.style.display="none",ft.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),gt=t.F;n--;)delete gt.prototype[it[n]];return gt()},vt=Object.create||function(t,e){var n;return null!==t?(pt.prototype=c(t),n=new pt,pt.prototype=null,n[dt]=t):n=gt(),void 0===e?n:ut(n,e)},_t=it.concat("length","prototype"),yt={f:Object.getOwnPropertyNames||function(t){return rt(t,_t)}},mt=yt.f,xt={}.toString,bt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wt={f:function(t){return bt&&"[object Window]"==xt.call(t)?function(t){try{return mt(t)}catch(t){return bt.slice()}}(t):mt(G(t))}},St=Object.getOwnPropertyDescriptor,Mt={f:h?St:function(t,e){if(t=G(t),e=v(e,!0),g)try{return St(t,e)}catch(t){}if(a(t,e))return m(!st.f.call(t,e),t[e])}},kt=A.KEY,Tt=Mt.f,Et=y.f,Pt=wt.f,Ct=i.Symbol,Dt=i.JSON,At=Dt&&Dt.stringify,It=I("_hidden"),Ot=I("toPrimitive"),Lt={}.propertyIsEnumerable,Rt=M("symbol-registry"),zt=M("symbols"),Nt=M("op-symbols"),Ft=Object.prototype,jt="function"==typeof Ct&&!!at.f,Bt=i.QObject,Ht=!Bt||!Bt.prototype||!Bt.prototype.findChild,Wt=h&&s((function(){return 7!=vt(Et({},"a",{get:function(){return Et(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Tt(Ft,e);r&&delete Ft[e],Et(t,e,n),r&&t!==Ft&&Et(Ft,e,r)}:Et,Gt=function(t){var e=zt[t]=vt(Ct.prototype);return e._k=t,e},Yt=jt&&"symbol"==typeof Ct.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Ct},Ut=function(t,e,n){return t===Ft&&Ut(Nt,e,n),c(t),e=v(e,!0),c(n),a(zt,e)?(n.enumerable?(a(t,It)&&t[It][e]&&(t[It][e]=!1),n=vt(n,{enumerable:m(0,!1)})):(a(t,It)||Et(t,It,m(1,{})),t[It][e]=!0),Wt(t,e,n)):Et(t,e,n)},Vt=function(t,e){c(t);for(var n,r=function(t){var e=ot(t),n=at.f;if(n)for(var r,i=n(t),o=st.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}(e=G(e)),i=0,o=r.length;o>i;)Ut(t,n=r[i++],e[n]);return t},Xt=function(t){var e=Lt.call(this,t=v(t,!0));return!(this===Ft&&a(zt,t)&&!a(Nt,t))&&(!(e||!a(this,t)||!a(zt,t)||a(this,It)&&this[It][t])||e)},qt=function(t,e){if(t=G(t),e=v(e,!0),t!==Ft||!a(zt,e)||a(Nt,e)){var n=Tt(t,e);return!n||!a(zt,e)||a(t,It)&&t[It][e]||(n.enumerable=!0),n}},Zt=function(t){for(var e,n=Pt(G(t)),r=[],i=0;n.length>i;)a(zt,e=n[i++])||e==It||e==kt||r.push(e);return r},Qt=function(t){for(var e,n=t===Ft,r=Pt(n?Nt:G(t)),i=[],o=0;r.length>o;)!a(zt,e=r[o++])||n&&!a(Ft,e)||i.push(zt[e]);return i};jt||(T((Ct=function(){if(this instanceof Ct)throw TypeError("Symbol is not a constructor!");var t=S(arguments.length>0?arguments[0]:void 0),e=function(n){this===Ft&&e.call(Nt,n),a(this,It)&&a(this[It],t)&&(this[It][t]=!1),Wt(this,t,m(1,n))};return h&&Ht&&Wt(Ft,t,{configurable:!0,set:e}),Gt(t)}).prototype,"toString",(function(){return this._k})),Mt.f=qt,y.f=Ut,yt.f=wt.f=Zt,st.f=Xt,at.f=Qt,h&&T(Ft,"propertyIsEnumerable",Xt,!0),z.f=function(t){return Gt(I(t))}),D(D.G+D.W+D.F*!jt,{Symbol:Ct});for(var Kt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),$t=0;Kt.length>$t;)I(Kt[$t++]);for(var Jt=ot(I.store),te=0;Jt.length>te;)F(Jt[te++]);D(D.S+D.F*!jt,"Symbol",{for:function(t){return a(Rt,t+="")?Rt[t]:Rt[t]=Ct(t)},keyFor:function(t){if(!Yt(t))throw TypeError(t+" is not a symbol!");for(var e in Rt)if(Rt[e]===t)return e},useSetter:function(){Ht=!0},useSimple:function(){Ht=!1}}),D(D.S+D.F*!jt,"Object",{create:function(t,e){return void 0===e?vt(t):Vt(vt(t),e)},defineProperty:Ut,defineProperties:Vt,getOwnPropertyDescriptor:qt,getOwnPropertyNames:Zt,getOwnPropertySymbols:Qt});var ee=s((function(){at.f(1)}));D(D.S+D.F*ee,"Object",{getOwnPropertySymbols:function(t){return at.f(lt(t))}}),Dt&&D(D.S+D.F*(!jt||s((function(){var t=Ct();return"[null]"!=At([t])||"{}"!=At({a:t})||"{}"!=At(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(u(e)||void 0!==t)&&!Yt(t))return ht(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Yt(e))return e}),r[1]=e,At.apply(Dt,r)}}),Ct.prototype[Ot]||x(Ct.prototype,Ot,Ct.prototype.valueOf),R(Ct,"Symbol"),R(Math,"Math",!0),R(i.JSON,"JSON",!0),D(D.S,"Object",{create:vt}),D(D.S+D.F*!h,"Object",{defineProperty:y.f}),D(D.S+D.F*!h,"Object",{defineProperties:ut});var ne=function(t,e){var n=(l.Object||{})[t]||Object[t],r={};r[t]=e(n),D(D.S+D.F*s((function(){n(1)})),"Object",r)},re=Mt.f;ne("getOwnPropertyDescriptor",(function(){return function(t,e){return re(G(t),e)}}));var ie=tt("IE_PROTO"),oe=Object.prototype,ae=Object.getPrototypeOf||function(t){return t=lt(t),a(t,ie)?t[ie]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?oe:null};ne("getPrototypeOf",(function(){return function(t){return ae(lt(t))}})),ne("keys",(function(){return function(t){return ot(lt(t))}})),ne("getOwnPropertyNames",(function(){return wt.f}));var se=A.onFreeze;ne("freeze",(function(t){return function(e){return t&&u(e)?t(se(e)):e}}));var he=A.onFreeze;ne("seal",(function(t){return function(e){return t&&u(e)?t(he(e)):e}}));var le=A.onFreeze;ne("preventExtensions",(function(t){return function(e){return t&&u(e)?t(le(e)):e}})),ne("isFrozen",(function(t){return function(e){return!u(e)||!!t&&t(e)}})),ne("isSealed",(function(t){return function(e){return!u(e)||!!t&&t(e)}})),ne("isExtensible",(function(t){return function(e){return!!u(e)&&(!t||t(e))}}));var ue=Object.assign,ce=!ue||s((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=ue({},t)[n]||Object.keys(ue({},e)).join("")!=r}))?function(t,e){for(var n=lt(t),r=arguments.length,i=1,o=at.f,a=st.f;r>i;)for(var s,l=H(arguments[i++]),u=o?ot(l).concat(o(l)):ot(l),c=u.length,f=0;c>f;)s=u[f++],h&&!a.call(l,s)||(n[s]=l[s]);return n}:ue;D(D.S+D.F,"Object",{assign:ce});var fe=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};D(D.S,"Object",{is:fe});var de=function(t,e){if(c(t),!u(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},pe={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=P(Function.call,Mt.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return de(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:de};D(D.S,"Object",{setPrototypeOf:pe.set});var ge=I("toStringTag"),ve="Arguments"==B(function(){return arguments}()),_e=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ge))?n:ve?B(e):"Object"==(r=B(e))&&"function"==typeof e.callee?"Arguments":r},ye={};ye[I("toStringTag")]="z",ye+""!="[object z]"&&T(Object.prototype,"toString",(function(){return"[object "+_e(this)+"]"}),!0);var me=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},xe=[].slice,be={},we=function(t,e,n){if(!(e in be)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";be[e]=Function("F,a","return new F("+r.join(",")+")")}return be[e](t,n)},Se=Function.bind||function(t){var e=E(this),n=xe.call(arguments,1),r=function(){var i=n.concat(xe.call(arguments));return this instanceof r?we(e,i.length,i):me(e,i,t)};return u(e.prototype)&&(r.prototype=e.prototype),r};D(D.P,"Function",{bind:Se});var Me=y.f,ke=Function.prototype,Te=/^\s*function ([^ (]*)/,Ee="name";Ee in ke||h&&Me(ke,Ee,{configurable:!0,get:function(){try{return(""+this).match(Te)[1]}catch(t){return""}}});var Pe=I("hasInstance"),Ce=Function.prototype;Pe in Ce||y.f(Ce,Pe,{value:function(t){if("function"!=typeof this||!u(t))return!1;if(!u(this.prototype))return t instanceof this;for(;t=ae(t);)if(this.prototype===t)return!0;return!1}});var De="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",Ae="["+De+"]",Ie=RegExp("^"+Ae+Ae+"*"),Oe=RegExp(Ae+Ae+"*$"),Le=function(t,e,n){var r={},i=s((function(){return!!De[t]()||"âÂ"!="âÂ"[t]()})),o=r[t]=i?e(Re):De[t];n&&(r[n]=o),D(D.P+D.F*i,"String",r)},Re=Le.trim=function(t,e){return t=String(W(t)),1&e&&(t=t.replace(Ie,"")),2&e&&(t=t.replace(Oe,"")),t},ze=Le,Ne=i.parseInt,Fe=ze.trim,je=/^[-+]?0[xX]/,Be=8!==Ne(De+"08")||22!==Ne(De+"0x16")?function(t,e){var n=Fe(String(t),3);return Ne(n,e>>>0||(je.test(n)?16:10))}:Ne;D(D.G+D.F*(parseInt!=Be),{parseInt:Be});var He=i.parseFloat,We=ze.trim,Ge=1/He(De+"-0")!=-1/0?function(t){var e=We(String(t),3),n=He(e);return 0===n&&"-"==e.charAt(0)?-0:n}:He;D(D.G+D.F*(parseFloat!=Ge),{parseFloat:Ge});var Ye=pe.set,Ue=function(t,e,n){var r,i=e.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&u(r)&&Ye&&Ye(t,r),t},Ve=yt.f,Xe=Mt.f,qe=y.f,Ze=ze.trim,Qe="Number",Ke=i.Number,$e=Ke,Je=Ke.prototype,tn=B(vt(Je))==Qe,en="trim"in String.prototype,nn=function(t){var e=v(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=en?e.trim():Ze(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,s=e.slice(2),h=0,l=s.length;h<l;h++)if((a=s.charCodeAt(h))<48||a>i)return NaN;return parseInt(s,r)}}return+e};if(!Ke(" 0o1")||!Ke("0b1")||Ke("+0x1")){Ke=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Ke&&(tn?s((function(){Je.valueOf.call(n)})):B(n)!=Qe)?Ue(new $e(nn(e)),n,Ke):nn(e)};for(var rn,on=h?Ve($e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),an=0;on.length>an;an++)a($e,rn=on[an])&&!a(Ke,rn)&&qe(Ke,rn,Xe($e,rn));Ke.prototype=Je,Je.constructor=Ke,T(i,Qe,Ke)}var sn=function(t,e){if("number"!=typeof t&&"Number"!=B(t))throw TypeError(e);return+t},hn=function(t){var e=String(W(this)),n="",r=V(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n},ln=1..toFixed,un=Math.floor,cn=[0,0,0,0,0,0],fn="Number.toFixed: incorrect invocation!",dn="0",pn=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*cn[n],cn[n]=r%1e7,r=un(r/1e7)},gn=function(t){for(var e=6,n=0;--e>=0;)n+=cn[e],cn[e]=un(n/t),n=n%t*1e7},vn=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==cn[t]){var n=String(cn[t]);e=""===e?n:e+hn.call(dn,7-n.length)+n}return e},_n=function(t,e,n){return 0===e?n:e%2==1?_n(t,e-1,n*t):_n(t*t,e/2,n)};D(D.P+D.F*(!!ln&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){ln.call({})}))),"Number",{toFixed:function(t){var e,n,r,i,o=sn(this,fn),a=V(t),s="",h=dn;if(a<0||a>20)throw RangeError(fn);if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(s="-",o=-o),o>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(o*_n(2,69,1))-69)<0?o*_n(2,-e,1):o/_n(2,e,1),n*=4503599627370496,(e=52-e)>0){for(pn(0,n),r=a;r>=7;)pn(1e7,0),r-=7;for(pn(_n(10,r,1),0),r=e-1;r>=23;)gn(1<<23),r-=23;gn(1<<r),pn(1,1),gn(2),h=vn()}else pn(0,n),pn(1<<-e,0),h=vn()+hn.call(dn,a);return h=a>0?s+((i=h.length)<=a?"0."+hn.call(dn,a-i)+h:h.slice(0,i-a)+"."+h.slice(i-a)):s+h}});var yn=1..toPrecision;D(D.P+D.F*(s((function(){return"1"!==yn.call(1,void 0)}))||!s((function(){yn.call({})}))),"Number",{toPrecision:function(t){var e=sn(this,"Number#toPrecision: incorrect invocation!");return void 0===t?yn.call(e):yn.call(e,t)}}),D(D.S,"Number",{EPSILON:Math.pow(2,-52)});var mn=i.isFinite;D(D.S,"Number",{isFinite:function(t){return"number"==typeof t&&mn(t)}});var xn=Math.floor,bn=function(t){return!u(t)&&isFinite(t)&&xn(t)===t};D(D.S,"Number",{isInteger:bn}),D(D.S,"Number",{isNaN:function(t){return t!=t}});var wn=Math.abs;D(D.S,"Number",{isSafeInteger:function(t){return bn(t)&&wn(t)<=9007199254740991}}),D(D.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),D(D.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991}),D(D.S+D.F*(Number.parseFloat!=Ge),"Number",{parseFloat:Ge}),D(D.S+D.F*(Number.parseInt!=Be),"Number",{parseInt:Be});var Sn=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)},Mn=Math.sqrt,kn=Math.acosh;D(D.S+D.F*!(kn&&710==Math.floor(kn(Number.MAX_VALUE))&&kn(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:Sn(t-1+Mn(t-1)*Mn(t+1))}});var Tn=Math.asinh;D(D.S+D.F*!(Tn&&1/Tn(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}});var En=Math.atanh;D(D.S+D.F*!(En&&1/En(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}});var Pn=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1};D(D.S,"Math",{cbrt:function(t){return Pn(t=+t)*Math.pow(Math.abs(t),1/3)}}),D(D.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}});var Cn=Math.exp;D(D.S,"Math",{cosh:function(t){return(Cn(t=+t)+Cn(-t))/2}});var Dn=Math.expm1,An=!Dn||Dn(10)>22025.465794806718||Dn(10)<22025.465794806718||-2e-17!=Dn(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:Dn;D(D.S+D.F*(An!=Math.expm1),"Math",{expm1:An});var In=Math.pow,On=In(2,-52),Ln=In(2,-23),Rn=In(2,127)*(2-Ln),zn=In(2,-126),Nn=Math.fround||function(t){var e,n,r=Math.abs(t),i=Pn(t);return r<zn?i*(r/zn/Ln+1/On-1/On)*zn*Ln:(n=(e=(1+Ln/On)*r)-(e-r))>Rn||n!=n?i*(1/0):i*n};D(D.S,"Math",{fround:Nn});var Fn=Math.abs;D(D.S,"Math",{hypot:function(t,e){for(var n,r,i=0,o=0,a=arguments.length,s=0;o<a;)s<(n=Fn(arguments[o++]))?(i=i*(r=s/n)*r+1,s=n):i+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*Math.sqrt(i)}});var jn=Math.imul;D(D.S+D.F*s((function(){return-5!=jn(4294967295,5)||2!=jn.length})),"Math",{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}}),D(D.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}}),D(D.S,"Math",{log1p:Sn}),D(D.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}}),D(D.S,"Math",{sign:Pn});var Bn=Math.exp;D(D.S+D.F*s((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(An(t)-An(-t))/2:(Bn(t-1)-Bn(-t-1))*(Math.E/2)}});var Hn=Math.exp;D(D.S,"Math",{tanh:function(t){var e=An(t=+t),n=An(-t);return e==1/0?1:n==1/0?-1:(e-n)/(Hn(t)+Hn(-t))}}),D(D.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}});var Wn=String.fromCharCode,Gn=String.fromCodePoint;D(D.S+D.F*(!!Gn&&1!=Gn.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,i=0;r>i;){if(e=+arguments[i++],K(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?Wn(e):Wn(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}}),D(D.S,"String",{raw:function(t){for(var e=G(t.raw),n=q(e.length),r=arguments.length,i=[],o=0;n>o;)i.push(String(e[o++])),o<r&&i.push(String(arguments[o]));return i.join("")}}),ze("trim",(function(t){return function(){return t(this,3)}}));var Yn=function(t){return function(e,n){var r,i,o=String(W(e)),a=V(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},Un={},Vn={};x(Vn,I("iterator"),(function(){return this}));var Xn=function(t,e,n){t.prototype=vt(Vn,{next:m(1,n)}),R(t,e+" Iterator")},qn=I("iterator"),Zn=!([].keys&&"next"in[].keys()),Qn="keys",Kn="values",$n=function(){return this},Jn=function(t,e,n,r,i,o,a){Xn(n,e,r);var s,h,l,u=function(t){if(!Zn&&t in p)return p[t];switch(t){case Qn:case Kn:return function(){return new n(this,t)}}return function(){return new n(this,t)}},c=e+" Iterator",f=i==Kn,d=!1,p=t.prototype,g=p[qn]||p["@@iterator"]||i&&p[i],v=g||u(i),_=i?f?u("entries"):v:void 0,y="Array"==e&&p.entries||g;if(y&&(l=ae(y.call(new t)))!==Object.prototype&&l.next&&(R(l,c,!0),"function"!=typeof l[qn]&&x(l,qn,$n)),f&&g&&g.name!==Kn&&(d=!0,v=function(){return g.call(this)}),(Zn||d||!p[qn])&&x(p,qn,v),Un[e]=v,Un[c]=$n,i)if(s={values:f?v:u(Kn),keys:o?v:u(Qn),entries:_},a)for(h in s)h in p||T(p,h,s[h]);else D(D.P+D.F*(Zn||d),e,s);return s},tr=Yn(!0);Jn(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=tr(e,n),this._i+=t.length,{value:t,done:!1})}));var er=Yn(!1);D(D.P,"String",{codePointAt:function(t){return er(this,t)}});var nr=I("match"),rr=function(t){var e;return u(t)&&(void 0!==(e=t[nr])?!!e:"RegExp"==B(t))},ir=function(t,e,n){if(rr(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(W(t))},or=I("match"),ar=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[or]=!1,!"/./"[t](e)}catch(t){}}return!0},sr="endsWith",hr="".endsWith;D(D.P+D.F*ar(sr),"String",{endsWith:function(t){var e=ir(this,t,sr),n=arguments.length>1?arguments[1]:void 0,r=q(e.length),i=void 0===n?r:Math.min(q(n),r),o=String(t);return hr?hr.call(e,o,i):e.slice(i-o.length,i)===o}});var lr="includes";D(D.P+D.F*ar(lr),"String",{includes:function(t){return!!~ir(this,t,lr).indexOf(t,arguments.length>1?arguments[1]:void 0)}}),D(D.P,"String",{repeat:hn});var ur="startsWith",cr="".startsWith;D(D.P+D.F*ar(ur),"String",{startsWith:function(t){var e=ir(this,t,ur),n=q(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return cr?cr.call(e,r,n):e.slice(n,n+r.length)===r}});var fr=/"/g,dr=function(t,e,n,r){var i=String(W(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(fr,"&quot;")+'"'),o+">"+i+"</"+e+">"},pr=function(t,e){var n={};n[t]=e(dr),D(D.P+D.F*s((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)};pr("anchor",(function(t){return function(e){return t(this,"a","name",e)}})),pr("big",(function(t){return function(){return t(this,"big","","")}})),pr("blink",(function(t){return function(){return t(this,"blink","","")}})),pr("bold",(function(t){return function(){return t(this,"b","","")}})),pr("fixed",(function(t){return function(){return t(this,"tt","","")}})),pr("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}})),pr("fontsize",(function(t){return function(e){return t(this,"font","size",e)}})),pr("italics",(function(t){return function(){return t(this,"i","","")}})),pr("link",(function(t){return function(e){return t(this,"a","href",e)}})),pr("small",(function(t){return function(){return t(this,"small","","")}})),pr("strike",(function(t){return function(){return t(this,"strike","","")}})),pr("sub",(function(t){return function(){return t(this,"sub","","")}})),pr("sup",(function(t){return function(){return t(this,"sup","","")}})),D(D.S,"Date",{now:function(){return(new Date).getTime()}}),D(D.P+D.F*s((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=lt(this),n=v(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}});var gr=Date.prototype.getTime,vr=Date.prototype.toISOString,_r=function(t){return t>9?t:"0"+t},yr=s((function(){return"0385-07-25T07:06:39.999Z"!=vr.call(new Date(-50000000000001))}))||!s((function(){vr.call(new Date(NaN))}))?function(){if(!isFinite(gr.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+_r(t.getUTCMonth()+1)+"-"+_r(t.getUTCDate())+"T"+_r(t.getUTCHours())+":"+_r(t.getUTCMinutes())+":"+_r(t.getUTCSeconds())+"."+(n>99?n:"0"+_r(n))+"Z"}:vr;D(D.P+D.F*(Date.prototype.toISOString!==yr),"Date",{toISOString:yr});var mr=Date.prototype,xr="Invalid Date",br="toString",wr=mr.toString,Sr=mr.getTime;new Date(NaN)+""!=xr&&T(mr,br,(function(){var t=Sr.call(this);return t==t?wr.call(this):xr}));var Mr="number",kr=I("toPrimitive"),Tr=Date.prototype;kr in Tr||x(Tr,kr,(function(t){if("string"!==t&&t!==Mr&&"default"!==t)throw TypeError("Incorrect hint");return v(c(this),t!=Mr)})),D(D.S,"Array",{isArray:ht});var Er=function(t,e,n,r){try{return r?e(c(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&c(i.call(t)),e}},Pr=I("iterator"),Cr=Array.prototype,Dr=function(t){return void 0!==t&&(Un.Array===t||Cr[Pr]===t)},Ar=function(t,e,n){e in t?y.f(t,e,m(0,n)):t[e]=n},Ir=I("iterator"),Or=l.getIteratorMethod=function(t){if(null!=t)return t[Ir]||t["@@iterator"]||Un[_e(t)]},Lr=I("iterator"),Rr=!1;try{var zr=[7][Lr]();zr.return=function(){Rr=!0},Array.from(zr,(function(){throw 2}))}catch(t){}var Nr=function(t,e){if(!e&&!Rr)return!1;var n=!1;try{var r=[7],i=r[Lr]();i.next=function(){return{done:n=!0}},r[Lr]=function(){return i},t(r)}catch(t){}return n};D(D.S+D.F*!Nr((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,i,o=lt(t),a="function"==typeof this?this:Array,s=arguments.length,h=s>1?arguments[1]:void 0,l=void 0!==h,u=0,c=Or(o);if(l&&(h=P(h,s>2?arguments[2]:void 0,2)),null==c||a==Array&&Dr(c))for(n=new a(e=q(o.length));e>u;u++)Ar(n,u,l?h(o[u],u):o[u]);else for(i=c.call(o),n=new a;!(r=i.next()).done;u++)Ar(n,u,l?Er(i,h,[r.value,u],!0):r.value);return n.length=u,n}}),D(D.S+D.F*s((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)Ar(n,t,arguments[t++]);return n.length=e,n}});var Fr=function(t,e){return!!t&&s((function(){e?t.call(null,(function(){}),1):t.call(null)}))},jr=[].join;D(D.P+D.F*(H!=Object||!Fr(jr)),"Array",{join:function(t){return jr.call(G(this),void 0===t?",":t)}});var Br=[].slice;D(D.P+D.F*s((function(){ft&&Br.call(ft)})),"Array",{slice:function(t,e){var n=q(this.length),r=B(this);if(e=void 0===e?n:e,"Array"==r)return Br.call(this,t,e);for(var i=K(t,n),o=K(e,n),a=q(o-i),s=new Array(a),h=0;h<a;h++)s[h]="String"==r?this.charAt(i+h):this[i+h];return s}});var Hr=[].sort,Wr=[1,2,3];D(D.P+D.F*(s((function(){Wr.sort(void 0)}))||!s((function(){Wr.sort(null)}))||!Fr(Hr)),"Array",{sort:function(t){return void 0===t?Hr.call(lt(this)):Hr.call(lt(this),E(t))}});var Gr=I("species"),Yr=function(t,e){return new(function(t){var e;return ht(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!ht(e.prototype)||(e=void 0),u(e)&&null===(e=e[Gr])&&(e=void 0)),void 0===e?Array:e}(t))(e)},Ur=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,s=5==t||a,h=e||Yr;return function(e,l,u){for(var c,f,d=lt(e),p=H(d),g=P(l,u,3),v=q(p.length),_=0,y=n?h(e,v):r?h(e,0):void 0;v>_;_++)if((s||_ in p)&&(f=g(c=p[_],_,d),t))if(n)y[_]=f;else if(f)switch(t){case 3:return!0;case 5:return c;case 6:return _;case 2:y.push(c)}else if(o)return!1;return a?-1:i||o?o:y}},Vr=Ur(0),Xr=Fr([].forEach,!0);D(D.P+D.F*!Xr,"Array",{forEach:function(t){return Vr(this,t,arguments[1])}});var qr=Ur(1);D(D.P+D.F*!Fr([].map,!0),"Array",{map:function(t){return qr(this,t,arguments[1])}});var Zr=Ur(2);D(D.P+D.F*!Fr([].filter,!0),"Array",{filter:function(t){return Zr(this,t,arguments[1])}});var Qr=Ur(3);D(D.P+D.F*!Fr([].some,!0),"Array",{some:function(t){return Qr(this,t,arguments[1])}});var Kr=Ur(4);D(D.P+D.F*!Fr([].every,!0),"Array",{every:function(t){return Kr(this,t,arguments[1])}});var $r=function(t,e,n,r,i){E(e);var o=lt(t),a=H(o),s=q(o.length),h=i?s-1:0,l=i?-1:1;if(n<2)for(;;){if(h in a){r=a[h],h+=l;break}if(h+=l,i?h<0:s<=h)throw TypeError("Reduce of empty array with no initial value")}for(;i?h>=0:s>h;h+=l)h in a&&(r=e(r,a[h],h,o));return r};D(D.P+D.F*!Fr([].reduce,!0),"Array",{reduce:function(t){return $r(this,t,arguments.length,arguments[1],!1)}}),D(D.P+D.F*!Fr([].reduceRight,!0),"Array",{reduceRight:function(t){return $r(this,t,arguments.length,arguments[1],!0)}});var Jr=$(!1),ti=[].indexOf,ei=!!ti&&1/[1].indexOf(1,-0)<0;D(D.P+D.F*(ei||!Fr(ti)),"Array",{indexOf:function(t){return ei?ti.apply(this,arguments)||0:Jr(this,t,arguments[1])}});var ni=[].lastIndexOf,ri=!!ni&&1/[1].lastIndexOf(1,-0)<0;D(D.P+D.F*(ri||!Fr(ni)),"Array",{lastIndexOf:function(t){if(ri)return ni.apply(this,arguments)||0;var e=G(this),n=q(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,V(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}});var ii=[].copyWithin||function(t,e){var n=lt(this),r=q(n.length),i=K(t,r),o=K(e,r),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?r:K(a,r))-o,r-i),h=1;for(o<i&&i<o+s&&(h=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:delete n[i],i+=h,o+=h;return n},oi=I("unscopables"),ai=Array.prototype;null==ai[oi]&&x(ai,oi,{});var si=function(t){ai[oi][t]=!0};D(D.P,"Array",{copyWithin:ii}),si("copyWithin");var hi=function(t){for(var e=lt(this),n=q(e.length),r=arguments.length,i=K(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:K(o,n);a>i;)e[i++]=t;return e};D(D.P,"Array",{fill:hi}),si("fill");var li=Ur(5),ui="find",ci=!0;ui in[]&&Array(1).find((function(){ci=!1})),D(D.P+D.F*ci,"Array",{find:function(t){return li(this,t,arguments.length>1?arguments[1]:void 0)}}),si(ui);var fi=Ur(6),di="findIndex",pi=!0;di in[]&&Array(1)[di]((function(){pi=!1})),D(D.P+D.F*pi,"Array",{findIndex:function(t){return fi(this,t,arguments.length>1?arguments[1]:void 0)}}),si(di);var gi=I("species"),vi=function(t){var e=i[t];h&&e&&!e[gi]&&y.f(e,gi,{configurable:!0,get:function(){return this}})};vi("Array");var _i=function(t,e){return{value:e,done:!!t}},yi=Jn(Array,"Array",(function(t,e){this._t=G(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,_i(1)):_i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values");Un.Arguments=Un.Array,si("keys"),si("values"),si("entries");var mi=function(){var t=c(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},xi=y.f,bi=yt.f,wi=i.RegExp,Si=wi,Mi=wi.prototype,ki=/a/g,Ti=/a/g,Ei=new wi(ki)!==ki;if(h&&(!Ei||s((function(){return Ti[I("match")]=!1,wi(ki)!=ki||wi(Ti)==Ti||"/a/i"!=wi(ki,"i")})))){wi=function(t,e){var n=this instanceof wi,r=rr(t),i=void 0===e;return!n&&r&&t.constructor===wi&&i?t:Ue(Ei?new Si(r&&!i?t.source:t,e):Si((r=t instanceof wi)?t.source:t,r&&i?mi.call(t):e),n?this:Mi,wi)};for(var Pi=function(t){t in wi||xi(wi,t,{configurable:!0,get:function(){return Si[t]},set:function(e){Si[t]=e}})},Ci=bi(Si),Di=0;Ci.length>Di;)Pi(Ci[Di++]);Mi.constructor=wi,wi.prototype=Mi,T(i,"RegExp",wi)}vi("RegExp");var Ai=RegExp.prototype.exec,Ii=String.prototype.replace,Oi=Ai,Li=function(){var t=/a/,e=/b*/g;return Ai.call(t,"a"),Ai.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),Ri=void 0!==/()??/.exec("")[1];(Li||Ri)&&(Oi=function(t){var e,n,r,i,o=this;return Ri&&(n=new RegExp("^"+o.source+"$(?!\\s)",mi.call(o))),Li&&(e=o.lastIndex),r=Ai.call(o,t),Li&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),Ri&&r&&r.length>1&&Ii.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var zi=Oi;D({target:"RegExp",proto:!0,forced:zi!==/./.exec},{exec:zi}),h&&"g"!=/./g.flags&&y.f(RegExp.prototype,"flags",{configurable:!0,get:mi});var Ni="toString",Fi=/./.toString,ji=function(t){T(RegExp.prototype,Ni,t,!0)};s((function(){return"/a/b"!=Fi.call({source:"a",flags:"b"})}))?ji((function(){var t=c(this);return"/".concat(t.source,"/","flags"in t?t.flags:!h&&t instanceof RegExp?mi.call(t):void 0)})):Fi.name!=Ni&&ji((function(){return Fi.call(this)}));var Bi=Yn(!0),Hi=function(t,e,n){return e+(n?Bi(t,e).length:1)},Wi=RegExp.prototype.exec,Gi=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==_e(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Wi.call(t,e)},Yi=I("species"),Ui=!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Vi=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),Xi=function(t,e,n){var r=I(t),i=!s((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),o=i?!s((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[Yi]=function(){return n}),n[r](""),!e})):void 0;if(!i||!o||"replace"===t&&!Ui||"split"===t&&!Vi){var a=/./[r],h=n(W,r,""[t],(function(t,e,n,r,o){return e.exec===zi?i&&!o?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),l=h[0],u=h[1];T(String.prototype,t,l),x(RegExp.prototype,r,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)})}};Xi("match",1,(function(t,e,n,r){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=r(n,t,this);if(e.done)return e.value;var i=c(t),o=String(this);if(!i.global)return Gi(i,o);var a=i.unicode;i.lastIndex=0;for(var s,h=[],l=0;null!==(s=Gi(i,o));){var u=String(s[0]);h[l]=u,""===u&&(i.lastIndex=Hi(o,q(i.lastIndex),a)),l++}return 0===l?null:h}]}));var qi=Math.max,Zi=Math.min,Qi=Math.floor,Ki=/\$([$&`']|\d\d?|<[^>]*>)/g,$i=/\$([$&`']|\d\d?)/g;Xi("replace",2,(function(t,e,n,r){return[function(r,i){var o=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var o=r(n,t,this,e);if(o.done)return o.value;var a=c(t),s=String(this),h="function"==typeof e;h||(e=String(e));var l=a.global;if(l){var u=a.unicode;a.lastIndex=0}for(var f=[];;){var d=Gi(a,s);if(null===d)break;if(f.push(d),!l)break;""===String(d[0])&&(a.lastIndex=Hi(s,q(a.lastIndex),u))}for(var p,g="",v=0,_=0;_<f.length;_++){d=f[_];for(var y=String(d[0]),m=qi(Zi(V(d.index),s.length),0),x=[],b=1;b<d.length;b++)x.push(void 0===(p=d[b])?p:String(p));var w=d.groups;if(h){var S=[y].concat(x,m,s);void 0!==w&&S.push(w);var M=String(e.apply(void 0,S))}else M=i(y,s,m,x,w,e);m>=v&&(g+=s.slice(v,m)+M,v=m+y.length)}return g+s.slice(v)}];function i(t,e,r,i,o,a){var s=r+t.length,h=i.length,l=$i;return void 0!==o&&(o=lt(o),l=Ki),n.call(a,l,(function(n,a){var l;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(s);case"<":l=o[a.slice(1,-1)];break;default:var u=+a;if(0===u)return n;if(u>h){var c=Qi(u/10);return 0===c?n:c<=h?void 0===i[c-1]?a.charAt(1):i[c-1]+a.charAt(1):n}l=i[u-1]}return void 0===l?"":l}))}})),Xi("search",1,(function(t,e,n,r){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=r(n,t,this);if(e.done)return e.value;var i=c(t),o=String(this),a=i.lastIndex;fe(a,0)||(i.lastIndex=0);var s=Gi(i,o);return fe(i.lastIndex,a)||(i.lastIndex=a),null===s?-1:s.index}]}));var Ji=I("species"),to=function(t,e){var n,r=c(t).constructor;return void 0===r||null==(n=c(r)[Ji])?e:E(n)},eo=Math.min,no=[].push,ro=4294967295,io=!s((function(){RegExp(ro,"y")}));Xi("split",2,(function(t,e,n,r){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!rr(t))return n.call(r,t,e);for(var i,o,a,s=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,u=void 0===e?ro:e>>>0,c=new RegExp(t.source,h+"g");(i=zi.call(c,r))&&!((o=c.lastIndex)>l&&(s.push(r.slice(l,i.index)),i.length>1&&i.index<r.length&&no.apply(s,i.slice(1)),a=i[0].length,l=o,s.length>=u));)c.lastIndex===i.index&&c.lastIndex++;return l===r.length?!a&&c.test("")||s.push(""):s.push(r.slice(l)),s.length>u?s.slice(0,u):s}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var o=t(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,o,r):i.call(String(o),n,r)},function(t,e){var o=r(i,t,this,e,i!==n);if(o.done)return o.value;var a=c(t),s=String(this),h=to(a,RegExp),l=a.unicode,u=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(io?"y":"g"),f=new h(io?a:"^(?:"+a.source+")",u),d=void 0===e?ro:e>>>0;if(0===d)return[];if(0===s.length)return null===Gi(f,s)?[s]:[];for(var p=0,g=0,v=[];g<s.length;){f.lastIndex=io?g:0;var _,y=Gi(f,io?s:s.slice(g));if(null===y||(_=eo(q(f.lastIndex+(io?0:g)),s.length))===p)g=Hi(s,g,l);else{if(v.push(s.slice(p,g)),v.length===d)return v;for(var m=1;m<=y.length-1;m++)if(v.push(y[m]),v.length===d)return v;g=p=_}}return v.push(s.slice(p)),v}]}));var oo,ao,so,ho=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t},lo=r((function(t){var e={},n={},r=t.exports=function(t,r,i,o,a){var s,h,l,u,f=a?function(){return t}:Or(t),d=P(i,o,r?2:1),p=0;if("function"!=typeof f)throw TypeError(t+" is not iterable!");if(Dr(f)){for(s=q(t.length);s>p;p++)if((u=r?d(c(h=t[p])[0],h[1]):d(t[p]))===e||u===n)return u}else for(l=f.call(t);!(h=l.next()).done;)if((u=Er(l,d,h.value,r))===e||u===n)return u};r.BREAK=e,r.RETURN=n})),uo=i.process,co=i.setImmediate,fo=i.clearImmediate,po=i.MessageChannel,go=i.Dispatch,vo=0,_o={},yo="onreadystatechange",mo=function(){var t=+this;if(_o.hasOwnProperty(t)){var e=_o[t];delete _o[t],e()}},xo=function(t){mo.call(t.data)};co&&fo||(co=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _o[++vo]=function(){me("function"==typeof t?t:Function(t),e)},oo(vo),vo},fo=function(t){delete _o[t]},"process"==B(uo)?oo=function(t){uo.nextTick(P(mo,t,1))}:go&&go.now?oo=function(t){go.now(P(mo,t,1))}:po?(so=(ao=new po).port2,ao.port1.onmessage=xo,oo=P(so.postMessage,so,1)):i.addEventListener&&"function"==typeof postMessage&&!i.importScripts?(oo=function(t){i.postMessage(t+"","*")},i.addEventListener("message",xo,!1)):oo=yo in p("script")?function(t){ft.appendChild(p("script")).onreadystatechange=function(){ft.removeChild(this),mo.call(t)}}:function(t){setTimeout(P(mo,t,1),0)});var bo={set:co,clear:fo},wo=bo.set,So=i.MutationObserver||i.WebKitMutationObserver,Mo=i.process,ko=i.Promise,To="process"==B(Mo);function Eo(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=E(e),this.reject=E(n)}var Po,Co,Do,Ao,Io={f:function(t){return new Eo(t)}},Oo=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Lo=i.navigator,Ro=Lo&&Lo.userAgent||"",zo=function(t,e){if(c(t),u(e)&&e.constructor===t)return e;var n=Io.f(t);return(0,n.resolve)(e),n.promise},No=function(t,e,n){for(var r in e)T(t,r,e[r],n);return t},Fo=bo.set,jo=function(){var t,e,n,r=function(){var r,i;for(To&&(r=Mo.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(To)n=function(){Mo.nextTick(r)};else if(!So||i.navigator&&i.navigator.standalone)if(ko&&ko.resolve){var o=ko.resolve(void 0);n=function(){o.then(r)}}else n=function(){wo.call(i,r)};else{var a=!0,s=document.createTextNode("");new So(r).observe(s,{characterData:!0}),n=function(){s.data=a=!a}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),Bo="Promise",Ho=i.TypeError,Wo=i.process,Go=Wo&&Wo.versions,Yo=Go&&Go.v8||"",Uo=i.Promise,Vo="process"==_e(Wo),Xo=function(){},qo=Co=Io.f,Zo=!!function(){try{var t=Uo.resolve(1),e=(t.constructor={})[I("species")]=function(t){t(Xo,Xo)};return(Vo||"function"==typeof PromiseRejectionEvent)&&t.then(Xo)instanceof e&&0!==Yo.indexOf("6.6")&&-1===Ro.indexOf("Chrome/66")}catch(t){}}(),Qo=function(t){var e;return!(!u(t)||"function"!=typeof(e=t.then))&&e},Ko=function(t,e){if(!t._n){t._n=!0;var n=t._c;jo((function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,h=e.resolve,l=e.reject,u=e.domain;try{s?(i||(2==t._h&&ta(t),t._h=1),!0===s?n=r:(u&&u.enter(),n=s(r),u&&(u.exit(),a=!0)),n===e.promise?l(Ho("Promise-chain cycle")):(o=Qo(n))?o.call(n,h,l):h(n)):l(r)}catch(t){u&&!a&&u.exit(),l(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&$o(t)}))}},$o=function(t){Fo.call(i,(function(){var e,n,r,o=t._v,a=Jo(t);if(a&&(e=Oo((function(){Vo?Wo.emit("unhandledRejection",o,t):(n=i.onunhandledrejection)?n({promise:t,reason:o}):(r=i.console)&&r.error&&r.error("Unhandled promise rejection",o)})),t._h=Vo||Jo(t)?2:1),t._a=void 0,a&&e.e)throw e.v}))},Jo=function(t){return 1!==t._h&&0===(t._a||t._c).length},ta=function(t){Fo.call(i,(function(){var e;Vo?Wo.emit("rejectionHandled",t):(e=i.onrejectionhandled)&&e({promise:t,reason:t._v})}))},ea=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Ko(e,!0))},na=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw Ho("Promise can't be resolved itself");(e=Qo(t))?jo((function(){var r={_w:n,_d:!1};try{e.call(t,P(na,r,1),P(ea,r,1))}catch(t){ea.call(r,t)}})):(n._v=t,n._s=1,Ko(n,!1))}catch(t){ea.call({_w:n,_d:!1},t)}}};Zo||(Uo=function(t){ho(this,Uo,Bo,"_h"),E(t),Po.call(this);try{t(P(na,this,1),P(ea,this,1))}catch(t){ea.call(this,t)}},(Po=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=No(Uo.prototype,{then:function(t,e){var n=qo(to(this,Uo));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Vo?Wo.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Ko(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Do=function(){var t=new Po;this.promise=t,this.resolve=P(na,t,1),this.reject=P(ea,t,1)},Io.f=qo=function(t){return t===Uo||t===Ao?new Do(t):Co(t)}),D(D.G+D.W+D.F*!Zo,{Promise:Uo}),R(Uo,Bo),vi(Bo),Ao=l.Promise,D(D.S+D.F*!Zo,Bo,{reject:function(t){var e=qo(this);return(0,e.reject)(t),e.promise}}),D(D.S+D.F*!Zo,Bo,{resolve:function(t){return zo(this,t)}}),D(D.S+D.F*!(Zo&&Nr((function(t){Uo.all(t).catch(Xo)}))),Bo,{all:function(t){var e=this,n=qo(e),r=n.resolve,i=n.reject,o=Oo((function(){var n=[],o=0,a=1;lo(t,!1,(function(t){var s=o++,h=!1;n.push(void 0),a++,e.resolve(t).then((function(t){h||(h=!0,n[s]=t,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=qo(e),r=n.reject,i=Oo((function(){lo(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}});var ra=function(t,e){if(!u(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t},ia=y.f,oa=A.fastKey,aa=h?"_s":"size",sa=function(t,e){var n,r=oa(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n},ha={getConstructor:function(t,e,n,r){var i=t((function(t,o){ho(t,i,e,"_i"),t._t=e,t._i=vt(null),t._f=void 0,t._l=void 0,t[aa]=0,null!=o&&lo(o,n,t[r],t)}));return No(i.prototype,{clear:function(){for(var t=ra(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[aa]=0},delete:function(t){var n=ra(this,e),r=sa(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[aa]--}return!!r},forEach:function(t){ra(this,e);for(var n,r=P(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!sa(ra(this,e),t)}}),h&&ia(i.prototype,"size",{get:function(){return ra(this,e)[aa]}}),i},def:function(t,e,n){var r,i,o=sa(t,e);return o?o.v=n:(t._l=o={i:i=oa(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[aa]++,"F"!==i&&(t._i[i]=o)),t},getEntry:sa,setStrong:function(t,e,n){Jn(t,e,(function(t,n){this._t=ra(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?_i(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,_i(1))}),n?"entries":"values",!n,!0),vi(e)}},la=function(t,e,n,r,o,a){var h=i[t],l=h,c=o?"set":"add",f=l&&l.prototype,d={},p=function(t){var e=f[t];T(f,t,"delete"==t||"has"==t?function(t){return!(a&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return a&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof l&&(a||f.forEach&&!s((function(){(new l).entries().next()})))){var g=new l,v=g[c](a?{}:-0,1)!=g,_=s((function(){g.has(1)})),y=Nr((function(t){new l(t)})),m=!a&&s((function(){for(var t=new l,e=5;e--;)t[c](e,e);return!t.has(-0)}));y||((l=e((function(e,n){ho(e,l,t);var r=Ue(new h,e,l);return null!=n&&lo(n,o,r[c],r),r}))).prototype=f,f.constructor=l),(_||m)&&(p("delete"),p("has"),o&&p("get")),(m||v)&&p(c),a&&f.clear&&delete f.clear}else l=r.getConstructor(e,t,o,c),No(l.prototype,n),A.NEED=!0;return R(l,t),d[t]=l,D(D.G+D.W+D.F*(l!=h),d),a||r.setStrong(l,t,o),l},ua="Map",ca=(la(ua,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=ha.getEntry(ra(this,ua),t);return e&&e.v},set:function(t,e){return ha.def(ra(this,ua),0===t?0:t,e)}},ha,!0),la("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return ha.def(ra(this,"Set"),t=0===t?0:t,t)}},ha),A.getWeak),fa=Ur(5),da=Ur(6),pa=0,ga=function(t){return t._l||(t._l=new va)},va=function(){this.a=[]},_a=function(t,e){return fa(t.a,(function(t){return t[0]===e}))};va.prototype={get:function(t){var e=_a(this,t);if(e)return e[1]},has:function(t){return!!_a(this,t)},set:function(t,e){var n=_a(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=da(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}};var ya={getConstructor:function(t,e,n,r){var i=t((function(t,o){ho(t,i,e,"_i"),t._t=e,t._i=pa++,t._l=void 0,null!=o&&lo(o,n,t[r],t)}));return No(i.prototype,{delete:function(t){if(!u(t))return!1;var n=ca(t);return!0===n?ga(ra(this,e)).delete(t):n&&a(n,this._i)&&delete n[this._i]},has:function(t){if(!u(t))return!1;var n=ca(t);return!0===n?ga(ra(this,e)).has(t):n&&a(n,this._i)}}),i},def:function(t,e,n){var r=ca(c(e),!0);return!0===r?ga(t).set(e,n):r[t._i]=n,t},ufstore:ga},ma=(r((function(t){var e,n=Ur(0),r=ra,o=!i.ActiveXObject&&"ActiveXObject"in i,a="WeakMap",s=A.getWeak,h=Object.isExtensible,l=ya.ufstore,c=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},f={get:function(t){if(u(t)){var e=s(t);return!0===e?l(ra(this,a)).get(t):e?e[this._i]:void 0}},set:function(t,e){return ya.def(ra(this,a),t,e)}},d=t.exports=la(a,c,f,ya,!0,!0);r&&o&&(e=ya.getConstructor(c,a),ce(e.prototype,f),A.NEED=!0,n(["delete","has","get","set"],(function(t){var n=d.prototype,r=n[t];T(n,t,(function(n,i){if(u(n)&&!h(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)}))})))})),"WeakSet");la(ma,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return ya.def(ra(this,ma),t,!0)}},ya,!1,!0);for(var xa,ba=S("typed_array"),wa=S("view"),Sa=!(!i.ArrayBuffer||!i.DataView),Ma=Sa,ka=0,Ta="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");ka<9;)(xa=i[Ta[ka++]])?(x(xa.prototype,ba,!0),x(xa.prototype,wa,!0)):Ma=!1;var Ea={ABV:Sa,CONSTR:Ma,TYPED:ba,VIEW:wa},Pa=function(t){if(void 0===t)return 0;var e=V(t),n=q(e);if(e!==n)throw RangeError("Wrong length!");return n},Ca=r((function(t,e){var n=yt.f,r=y.f,o="ArrayBuffer",a="DataView",l="Wrong index!",u=i.ArrayBuffer,c=i.DataView,f=i.Math,d=i.RangeError,p=i.Infinity,g=u,v=f.abs,_=f.pow,m=f.floor,b=f.log,w=f.LN2,S="buffer",M="byteLength",k="byteOffset",T=h?"_b":S,E=h?"_l":M,P=h?"_o":k;function C(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,h=(1<<s)-1,l=h>>1,u=23===e?_(2,-24)-_(2,-77):0,c=0,f=t<0||0===t&&1/t<0?1:0;for((t=v(t))!=t||t===p?(i=t!=t?1:0,r=h):(r=m(b(t)/w),t*(o=_(2,-r))<1&&(r--,o*=2),(t+=r+l>=1?u/o:u*_(2,1-l))*o>=2&&(r++,o/=2),r+l>=h?(i=0,r=h):r+l>=1?(i=(t*o-1)*_(2,e),r+=l):(i=t*_(2,l-1)*_(2,e),r=0));e>=8;a[c++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[c++]=255&r,r/=256,s-=8);return a[--c]|=128*f,a}function D(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,h=n-1,l=t[h--],u=127&l;for(l>>=7;s>0;u=256*u+t[h],h--,s-=8);for(r=u&(1<<-s)-1,u>>=-s,s+=e;s>0;r=256*r+t[h],h--,s-=8);if(0===u)u=1-a;else{if(u===o)return r?NaN:l?-p:p;r+=_(2,e),u-=a}return(l?-1:1)*r*_(2,u-e)}function A(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function I(t){return[255&t]}function O(t){return[255&t,t>>8&255]}function L(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function z(t){return C(t,52,8)}function N(t){return C(t,23,4)}function F(t,e,n){r(t.prototype,e,{get:function(){return this[n]}})}function j(t,e,n,r){var i=Pa(+n);if(i+e>t[E])throw d(l);var o=t[T]._b,a=i+t[P],s=o.slice(a,a+e);return r?s:s.reverse()}function B(t,e,n,r,i,o){var a=Pa(+n);if(a+e>t[E])throw d(l);for(var s=t[T]._b,h=a+t[P],u=r(+i),c=0;c<e;c++)s[h+c]=u[o?c:e-c-1]}if(Ea.ABV){if(!s((function(){u(1)}))||!s((function(){new u(-1)}))||s((function(){return new u,new u(1.5),new u(NaN),u.name!=o}))){for(var H,W=(u=function(t){return ho(this,u),new g(Pa(t))}).prototype=g.prototype,G=n(g),Y=0;G.length>Y;)(H=G[Y++])in u||x(u,H,g[H]);W.constructor=u}var U=new c(new u(2)),X=c.prototype.setInt8;U.setInt8(0,2147483648),U.setInt8(1,2147483649),!U.getInt8(0)&&U.getInt8(1)||No(c.prototype,{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},!0)}else u=function(t){ho(this,u,o);var e=Pa(t);this._b=hi.call(new Array(e),0),this[E]=e},c=function(t,e,n){ho(this,c,a),ho(t,u,a);var r=t[E],i=V(e);if(i<0||i>r)throw d("Wrong offset!");if(i+(n=void 0===n?r-i:q(n))>r)throw d("Wrong length!");this[T]=t,this[P]=i,this[E]=n},h&&(F(u,M,"_l"),F(c,S,"_b"),F(c,M,"_l"),F(c,k,"_o")),No(c.prototype,{getInt8:function(t){return j(this,1,t)[0]<<24>>24},getUint8:function(t){return j(this,1,t)[0]},getInt16:function(t){var e=j(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=j(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return A(j(this,4,t,arguments[1]))},getUint32:function(t){return A(j(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return D(j(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return D(j(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){B(this,1,t,I,e)},setUint8:function(t,e){B(this,1,t,I,e)},setInt16:function(t,e){B(this,2,t,O,e,arguments[2])},setUint16:function(t,e){B(this,2,t,O,e,arguments[2])},setInt32:function(t,e){B(this,4,t,L,e,arguments[2])},setUint32:function(t,e){B(this,4,t,L,e,arguments[2])},setFloat32:function(t,e){B(this,4,t,N,e,arguments[2])},setFloat64:function(t,e){B(this,8,t,z,e,arguments[2])}});R(u,o),R(c,a),x(c.prototype,Ea.VIEW,!0),e.ArrayBuffer=u,e.DataView=c})),Da=i.ArrayBuffer,Aa=Ca.ArrayBuffer,Ia=Ca.DataView,Oa=Ea.ABV&&Da.isView,La=Aa.prototype.slice,Ra=Ea.VIEW,za="ArrayBuffer";D(D.G+D.W+D.F*(Da!==Aa),{ArrayBuffer:Aa}),D(D.S+D.F*!Ea.CONSTR,za,{isView:function(t){return Oa&&Oa(t)||u(t)&&Ra in t}}),D(D.P+D.U+D.F*s((function(){return!new Aa(2).slice(1,void 0).byteLength})),za,{slice:function(t,e){if(void 0!==La&&void 0===e)return La.call(c(this),t);for(var n=c(this).byteLength,r=K(t,n),i=K(void 0===e?n:e,n),o=new(to(this,Aa))(q(i-r)),a=new Ia(this),s=new Ia(o),h=0;r<i;)s.setUint8(h++,a.getUint8(r++));return o}}),vi(za),D(D.G+D.W+D.F*!Ea.ABV,{DataView:Ca.DataView});var Na=r((function(t){if(h){var e=i,n=s,r=D,o=Ea,l=Ca,c=P,f=ho,d=m,p=x,g=No,_=V,b=q,w=Pa,M=K,k=v,T=a,E=_e,C=u,A=lt,O=Dr,L=vt,R=ae,z=yt.f,N=Or,F=S,j=I,B=Ur,H=$,W=to,G=yi,Y=Un,U=Nr,X=vi,Z=hi,Q=ii,J=y,tt=Mt,et=J.f,nt=tt.f,rt=e.RangeError,it=e.TypeError,ot=e.Uint8Array,at="ArrayBuffer",st="SharedArrayBuffer",ht="BYTES_PER_ELEMENT",ut=Array.prototype,ct=l.ArrayBuffer,ft=l.DataView,dt=B(0),pt=B(2),gt=B(3),_t=B(4),mt=B(5),xt=B(6),bt=H(!0),wt=H(!1),St=G.values,kt=G.keys,Tt=G.entries,Et=ut.lastIndexOf,Pt=ut.reduce,Ct=ut.reduceRight,Dt=ut.join,At=ut.sort,It=ut.slice,Ot=ut.toString,Lt=ut.toLocaleString,Rt=j("iterator"),zt=j("toStringTag"),Nt=F("typed_constructor"),Ft=F("def_constructor"),jt=o.CONSTR,Bt=o.TYPED,Ht=o.VIEW,Wt="Wrong length!",Gt=B(1,(function(t,e){return qt(W(t,t[Ft]),e)})),Yt=n((function(){return 1===new ot(new Uint16Array([1]).buffer)[0]})),Ut=!!ot&&!!ot.prototype.set&&n((function(){new ot(1).set({})})),Vt=function(t,e){var n=_(t);if(n<0||n%e)throw rt("Wrong offset!");return n},Xt=function(t){if(C(t)&&Bt in t)return t;throw it(t+" is not a typed array!")},qt=function(t,e){if(!C(t)||!(Nt in t))throw it("It is not a typed array constructor!");return new t(e)},Zt=function(t,e){return Qt(W(t,t[Ft]),e)},Qt=function(t,e){for(var n=0,r=e.length,i=qt(t,r);r>n;)i[n]=e[n++];return i},Kt=function(t,e,n){et(t,e,{get:function(){return this._d[n]}})},$t=function(t){var e,n,r,i,o,a,s=A(t),h=arguments.length,l=h>1?arguments[1]:void 0,u=void 0!==l,f=N(s);if(null!=f&&!O(f)){for(a=f.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(u&&h>2&&(l=c(l,arguments[2],2)),e=0,n=b(s.length),i=qt(this,n);n>e;e++)i[e]=u?l(s[e],e):s[e];return i},Jt=function(){for(var t=0,e=arguments.length,n=qt(this,e);e>t;)n[t]=arguments[t++];return n},te=!!ot&&n((function(){Lt.call(new ot(1))})),ee=function(){return Lt.apply(te?It.call(Xt(this)):Xt(this),arguments)},ne={copyWithin:function(t,e){return Q.call(Xt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return _t(Xt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return Z.apply(Xt(this),arguments)},filter:function(t){return Zt(this,pt(Xt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return mt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return xt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){dt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return wt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return bt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return Dt.apply(Xt(this),arguments)},lastIndexOf:function(t){return Et.apply(Xt(this),arguments)},map:function(t){return Gt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return Pt.apply(Xt(this),arguments)},reduceRight:function(t){return Ct.apply(Xt(this),arguments)},reverse:function(){for(var t,e=this,n=Xt(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return gt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return At.call(Xt(this),t)},subarray:function(t,e){var n=Xt(this),r=n.length,i=M(t,r);return new(W(n,n[Ft]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,b((void 0===e?r:M(e,r))-i))}},re=function(t,e){return Zt(this,It.call(Xt(this),t,e))},ie=function(t){Xt(this);var e=Vt(arguments[1],1),n=this.length,r=A(t),i=b(r.length),o=0;if(i+e>n)throw rt(Wt);for(;o<i;)this[e+o]=r[o++]},oe={entries:function(){return Tt.call(Xt(this))},keys:function(){return kt.call(Xt(this))},values:function(){return St.call(Xt(this))}},se=function(t,e){return C(t)&&t[Bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},he=function(t,e){return se(t,e=k(e,!0))?d(2,t[e]):nt(t,e)},le=function(t,e,n){return!(se(t,e=k(e,!0))&&C(n)&&T(n,"value"))||T(n,"get")||T(n,"set")||n.configurable||T(n,"writable")&&!n.writable||T(n,"enumerable")&&!n.enumerable?et(t,e,n):(t[e]=n.value,t)};jt||(tt.f=he,J.f=le),r(r.S+r.F*!jt,"Object",{getOwnPropertyDescriptor:he,defineProperty:le}),n((function(){Ot.call({})}))&&(Ot=Lt=function(){return Dt.call(this)});var ue=g({},ne);g(ue,oe),p(ue,Rt,oe.values),g(ue,{slice:re,set:ie,constructor:function(){},toString:Ot,toLocaleString:ee}),Kt(ue,"buffer","b"),Kt(ue,"byteOffset","o"),Kt(ue,"byteLength","l"),Kt(ue,"length","e"),et(ue,zt,{get:function(){return this[Bt]}}),t.exports=function(t,i,a,s){var h=t+((s=!!s)?"Clamped":"")+"Array",l="get"+t,u="set"+t,c=e[h],d=c||{},g=c&&R(c),v=!c||!o.ABV,_={},y=c&&c.prototype,m=function(t,e){et(t,e,{get:function(){return function(t,e){var n=t._d;return n.v[l](e*i+n.o,Yt)}(this,e)},set:function(t){return function(t,e,n){var r=t._d;s&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),r.v[u](e*i+r.o,n,Yt)}(this,e,t)},enumerable:!0})};v?(c=a((function(t,e,n,r){f(t,c,h,"_d");var o,a,s,l,u=0,d=0;if(C(e)){if(!(e instanceof ct||(l=E(e))==at||l==st))return Bt in e?Qt(c,e):$t.call(c,e);o=e,d=Vt(n,i);var g=e.byteLength;if(void 0===r){if(g%i)throw rt(Wt);if((a=g-d)<0)throw rt(Wt)}else if((a=b(r)*i)+d>g)throw rt(Wt);s=a/i}else s=w(e),o=new ct(a=s*i);for(p(t,"_d",{b:o,o:d,l:a,e:s,v:new ft(o)});u<s;)m(t,u++)})),y=c.prototype=L(ue),p(y,"constructor",c)):n((function(){c(1)}))&&n((function(){new c(-1)}))&&U((function(t){new c,new c(null),new c(1.5),new c(t)}),!0)||(c=a((function(t,e,n,r){var o;return f(t,c,h),C(e)?e instanceof ct||(o=E(e))==at||o==st?void 0!==r?new d(e,Vt(n,i),r):void 0!==n?new d(e,Vt(n,i)):new d(e):Bt in e?Qt(c,e):$t.call(c,e):new d(w(e))})),dt(g!==Function.prototype?z(d).concat(z(g)):z(d),(function(t){t in c||p(c,t,d[t])})),c.prototype=y,y.constructor=c);var x=y[Rt],S=!!x&&("values"==x.name||null==x.name),M=oe.values;p(c,Nt,!0),p(y,Bt,h),p(y,Ht,!0),p(y,Ft,c),(s?new c(1)[zt]==h:zt in y)||et(y,zt,{get:function(){return h}}),_[h]=c,r(r.G+r.W+r.F*(c!=d),_),r(r.S,h,{BYTES_PER_ELEMENT:i}),r(r.S+r.F*n((function(){d.of.call(c,1)})),h,{from:$t,of:Jt}),ht in y||p(y,ht,i),r(r.P,h,ne),X(h),r(r.P+r.F*Ut,h,{set:ie}),r(r.P+r.F*!S,h,oe),y.toString!=Ot&&(y.toString=Ot),r(r.P+r.F*n((function(){new c(1).slice()})),h,{slice:re}),r(r.P+r.F*(n((function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()}))||!n((function(){y.toLocaleString.call([1,2])}))),h,{toLocaleString:ee}),Y[h]=S?x:M,S||p(y,Rt,M)}}else t.exports=function(){}}));Na("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0),Na("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}));var Fa=(i.Reflect||{}).apply,ja=Function.apply;D(D.S+D.F*!s((function(){Fa((function(){}))})),"Reflect",{apply:function(t,e,n){var r=E(t),i=c(n);return Fa?Fa(r,e,i):ja.call(r,e,i)}});var Ba=(i.Reflect||{}).construct,Ha=s((function(){function t(){}return!(Ba((function(){}),[],t)instanceof t)})),Wa=!s((function(){Ba((function(){}))}));D(D.S+D.F*(Ha||Wa),"Reflect",{construct:function(t,e){E(t),c(e);var n=arguments.length<3?t:E(arguments[2]);if(Wa&&!Ha)return Ba(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(Se.apply(t,r))}var i=n.prototype,o=vt(u(i)?i:Object.prototype),a=Function.apply.call(t,o,e);return u(a)?a:o}}),D(D.S+D.F*s((function(){Reflect.defineProperty(y.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,n){c(t),e=v(e,!0),c(n);try{return y.f(t,e,n),!0}catch(t){return!1}}});var Ga=Mt.f;D(D.S,"Reflect",{deleteProperty:function(t,e){var n=Ga(c(t),e);return!(n&&!n.configurable)&&delete t[e]}});var Ya=function(t){this._t=c(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};Xn(Ya,"Object",(function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}})),D(D.S,"Reflect",{enumerate:function(t){return new Ya(t)}}),D(D.S,"Reflect",{get:function t(e,n){var r,i,o=arguments.length<3?e:arguments[2];return c(e)===o?e[n]:(r=Mt.f(e,n))?a(r,"value")?r.value:void 0!==r.get?r.get.call(o):void 0:u(i=ae(e))?t(i,n,o):void 0}}),D(D.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return Mt.f(c(t),e)}}),D(D.S,"Reflect",{getPrototypeOf:function(t){return ae(c(t))}}),D(D.S,"Reflect",{has:function(t,e){return e in t}});var Ua=Object.isExtensible;D(D.S,"Reflect",{isExtensible:function(t){return c(t),!Ua||Ua(t)}});var Va=i.Reflect,Xa=Va&&Va.ownKeys||function(t){var e=yt.f(c(t)),n=at.f;return n?e.concat(n(t)):e};D(D.S,"Reflect",{ownKeys:Xa});var qa=Object.preventExtensions;D(D.S,"Reflect",{preventExtensions:function(t){c(t);try{return qa&&qa(t),!0}catch(t){return!1}}}),D(D.S,"Reflect",{set:function t(e,n,r){var i,o,s=arguments.length<4?e:arguments[3],h=Mt.f(c(e),n);if(!h){if(u(o=ae(e)))return t(o,n,r,s);h=m(0)}if(a(h,"value")){if(!1===h.writable||!u(s))return!1;if(i=Mt.f(s,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,y.f(s,n,i)}else y.f(s,n,m(0,r));return!0}return void 0!==h.set&&(h.set.call(s,r),!0)}}),pe&&D(D.S,"Reflect",{setPrototypeOf:function(t,e){pe.check(t,e);try{return pe.set(t,e),!0}catch(t){return!1}}});var Za=$(!0);D(D.P,"Array",{includes:function(t){return Za(this,t,arguments.length>1?arguments[1]:void 0)}}),si("includes");l.Array.includes;var Qa=function(t,e,n,r){var i=String(W(t)),o=i.length,a=void 0===n?" ":String(n),s=q(e);if(s<=o||""==a)return i;var h=s-o,l=hn.call(a,Math.ceil(h/a.length));return l.length>h&&(l=l.slice(0,h)),r?l+i:i+l},Ka=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(Ro);D(D.P+D.F*Ka,"String",{padStart:function(t){return Qa(this,t,arguments.length>1?arguments[1]:void 0,!0)}});l.String.padStart;var $a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(Ro);D(D.P+D.F*$a,"String",{padEnd:function(t){return Qa(this,t,arguments.length>1?arguments[1]:void 0,!1)}});l.String.padEnd;F("asyncIterator");z.f("asyncIterator");D(D.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=G(t),i=Mt.f,o=Xa(r),a={},s=0;o.length>s;)void 0!==(n=i(r,e=o[s++]))&&Ar(a,e,n);return a}});l.Object.getOwnPropertyDescriptors;var Ja=st.f,ts=function(t){return function(e){for(var n,r=G(e),i=ot(r),o=i.length,a=0,s=[];o>a;)n=i[a++],h&&!Ja.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}},es=ts(!1);D(D.S,"Object",{values:function(t){return es(t)}});l.Object.values;var ns=ts(!0);D(D.S,"Object",{entries:function(t){return ns(t)}});l.Object.entries;D(D.P+D.R,"Promise",{finally:function(t){var e=to(this,l.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return zo(e,t()).then((function(){return n}))}:t,n?function(n){return zo(e,t()).then((function(){throw n}))}:t)}});l.Promise.finally;var rs=[].slice,is=/MSIE .\./.test(Ro),os=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&rs.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};D(D.G+D.B+D.F*is,{setTimeout:os(i.setTimeout),setInterval:os(i.setInterval)}),D(D.G+D.B,{setImmediate:bo.set,clearImmediate:bo.clear});for(var as=I("iterator"),ss=I("toStringTag"),hs=Un.Array,ls={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},us=ot(ls),cs=0;cs<us.length;cs++){var fs,ds=us[cs],ps=ls[ds],gs=i[ds],vs=gs&&gs.prototype;if(vs&&(vs[as]||x(vs,as,hs),vs[ss]||x(vs,ss,ds),Un[ds]=hs,ps))for(fs in yi)vs[fs]||T(vs,fs,yi[fs],!0)}r((function(t){!function(e){var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag",l=e.regeneratorRuntime;if(l)t.exports=l;else{(l=e.regeneratorRuntime=t.exports).wrap=m;var u="suspendedStart",c="suspendedYield",f="executing",d="completed",p={},g={};g[a]=function(){return this};var v=Object.getPrototypeOf,_=v&&v(v(D([])));_&&_!==r&&i.call(_,a)&&(g=_);var y=S.prototype=b.prototype=Object.create(g);w.prototype=y.constructor=S,S.constructor=w,S[h]=w.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,h in t||(t[h]="GeneratorFunction")),t.prototype=Object.create(y),t},l.awrap=function(t){return{__await:t}},M(k.prototype),k.prototype[s]=function(){return this},l.AsyncIterator=k,l.async=function(t,e,n,r){var i=new k(m(t,e,n,r));return l.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},M(y),y[h]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=D,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var h=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(h&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(h){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:D(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),p}}}function m(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(t,e,n){var r=u;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var h=x(t,e,n);if("normal"===h.type){if(r=n.done?d:c,h.arg===p)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r=d,n.method="throw",n.arg=h.arg)}}}(t,n,a),o}function x(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function b(){}function w(){}function S(){}function M(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function k(t){function e(n,r,o,a){var s=x(t[n],t,r);if("throw"!==s.type){var h=s.arg,l=h.value;return l&&"object"==typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(l).then((function(t){h.value=t,o(h)}),a)}a(s.arg)}var n;this._invoke=function(t,r){function i(){return new Promise((function(n,i){e(t,r,n,i)}))}return n=n?n.then(i,i):i()}}function T(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,T(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=x(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function D(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())}));n._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),n._babelPolyfill=!0;var _s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function ys(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ms=function(t,e,n){return e&&ys(t.prototype,e),n&&ys(t,n),t},xs=2311;var bs=function(){return xs++};var ws="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:function(t){var e={},n={},r=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge\/([\d.]+)/),a=/micromessenger/i.test(t);r&&(n.firefox=!0,n.version=r[1]);i&&(n.ie=!0,n.version=i[1]);o&&(n.edge=!0,n.version=o[1]);a&&(n.weChat=!0);return{browser:n,os:e,node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!n.ie&&!n.edge,pointerEventsSupported:"onpointerdown"in window&&(n.edge||n.ie&&n.version>=11),domSupported:"undefined"!=typeof document}}(navigator.userAgent),Ss={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},Ms={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},ks=Object.prototype.toString,Ts=Array.prototype,Es=Ts.forEach,Ps=Ts.filter,Cs=Ts.slice,Ds=Ts.map,As=Ts.reduce,Is={};function Os(t){if(null==t||"object"!=typeof t)return t;var e=t,n=ks.call(t);if("[object Array]"===n){if(!Us(t)){e=[];for(var r=0,i=t.length;r<i;r++)e[r]=Os(t[r])}}else if(Ms[n]){if(!Us(t)){var o=t.constructor;if(t.constructor.from)e=o.from(t);else{e=new o(t.length);for(r=0,i=t.length;r<i;r++)e[r]=Os(t[r])}}}else if(!Ss[n]&&!Us(t)&&!Gs(t))for(var a in e={},t)t.hasOwnProperty(a)&&(e[a]=Os(t[a]));return e}function Ls(t,e,n){if(!Hs(e)||!Hs(t))return n?Os(e):t;for(var r in e)if(e.hasOwnProperty(r)){var i=t[r],o=e[r];!Hs(o)||!Hs(i)||Bs(o)||Bs(i)||Gs(o)||Gs(i)||Ws(o)||Ws(i)||Us(o)||Us(i)?!n&&r in t||(t[r]=Os(e[r])):Ls(i,o,n)}return t}function Rs(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(n?null!=e[r]:null==t[r])&&(t[r]=e[r]);return t}var zs,Ns=function(){return Is.createCanvas()};function Fs(t,e,n){if(t&&e)if(t.forEach&&t.forEach===Es)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function js(t,e){var n=Cs.call(arguments,2);return function(){return t.apply(e,n.concat(Cs.call(arguments)))}}function Bs(t){return"[object Array]"===ks.call(t)}function Hs(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function Ws(t){return!!Ss[ks.call(t)]}function Gs(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}Is.createCanvas=function(){return document.createElement("canvas")};var Ys="__ec_primitive__";function Us(t){return t[Ys]}function Vs(t){var e=Bs(t);this.data={};var n=this;function r(t,r){e?n.set(t,r):n.set(r,t)}t instanceof Vs?t.each(r):t&&Fs(t,r)}Vs.prototype={constructor:Vs,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){for(var n in void 0!==e&&(t=js(t,e)),this.data)this.data.hasOwnProperty(n)&&t(this.data[n],n)},removeKey:function(t){delete this.data[t]}};var Xs={$override:function(t,e){"createCanvas"===t&&(zs=null),Is[t]=e},clone:Os,merge:Ls,mergeAll:function(t,e){for(var n=t[0],r=1,i=t.length;r<i;r++)n=Ls(n,t[r],e);return n},extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},defaults:Rs,createCanvas:Ns,getContext:function(){return zs||(zs=Ns().getContext("2d")),zs},indexOf:function(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1},inherits:function(t,e){var n=t.prototype;function r(){}for(var i in r.prototype=e.prototype,t.prototype=new r,n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i]);t.prototype.constructor=t,t.superClass=e},mixin:function(t,e,n){Rs(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,n)},isArrayLike:function(t){if(t)return"string"!=typeof t&&"number"==typeof t.length},each:Fs,map:function(t,e,n){if(t&&e){if(t.map&&t.map===Ds)return t.map(e,n);for(var r=[],i=0,o=t.length;i<o;i++)r.push(e.call(n,t[i],i,t));return r}},reduce:function(t,e,n,r){if(t&&e){if(t.reduce&&t.reduce===As)return t.reduce(e,n,r);for(var i=0,o=t.length;i<o;i++)n=e.call(r,n,t[i],i,t);return n}},filter:function(t,e,n){if(t&&e){if(t.filter&&t.filter===Ps)return t.filter(e,n);for(var r=[],i=0,o=t.length;i<o;i++)e.call(n,t[i],i,t)&&r.push(t[i]);return r}},find:function(t,e,n){if(t&&e)for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t))return t[r]},bind:js,curry:function(t){var e=Cs.call(arguments,1);return function(){return t.apply(this,e.concat(Cs.call(arguments)))}},isArray:Bs,isFunction:function(t){return"function"==typeof t},isString:function(t){return"[object String]"===ks.call(t)},isObject:Hs,isBuiltInObject:Ws,isTypedArray:function(t){return!!Ms[ks.call(t)]},isDom:Gs,eqNaN:function(t){return t!=t},retrieve:function(t){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]},retrieve2:function(t,e){return null!=t?t:e},retrieve3:function(t,e,n){return null!=t?t:null!=e?e:n},slice:function(){return Function.call.apply(Cs,arguments)},normalizeCssArray:function(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t},assert:function(t,e){if(!t)throw new Error(e)},trim:function(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},setAsPrimitive:function(t){t[Ys]=!0},isPrimitive:Us,createHashMap:function(t){return new Vs(t)},concatArray:function(t,e){for(var n=new t.constructor(t.length+e.length),r=0;r<t.length;r++)n[r]=t[r];var i=t.length;for(r=0;r<e.length;r++)n[r+i]=e[r];return n},noop:function(){}},qs="undefined"==typeof Float32Array?Array:Float32Array;function Zs(t){return Math.sqrt(Qs(t))}function Qs(t){return t[0]*t[0]+t[1]*t[1]}function Ks(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function $s(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var Js={create:function(t,e){var n=new qs(2);return null==t&&(t=0),null==e&&(e=0),n[0]=t,n[1]=e,n},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},clone:function(t){var e=new qs(2);return e[0]=t[0],e[1]=t[1],e},set:function(t,e,n){return t[0]=e,t[1]=n,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},sub:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},len:Zs,length:Zs,lenSquare:Qs,lengthSquare:Qs,mul:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},div:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},normalize:function(t,e){var n=Zs(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t},distance:Ks,dist:Ks,distanceSquare:$s,distSquare:$s,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:function(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t},applyTransform:function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}};function th(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function eh(t,e){return{target:t,topTarget:e&&e.topTarget}}th.prototype={constructor:th,_dragStart:function(t){var e=t.target;e&&e.draggable&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(eh(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,r=t.offsetY,i=n-this._x,o=r-this._y;this._x=n,this._y=r,e.drift(i,o,t),this.dispatchToElement(eh(e,t),"drag",t.event);var a=this.findHover(n,r,e).target,s=this._dropTarget;this._dropTarget=a,e!==a&&(s&&a!==s&&this.dispatchToElement(eh(s,t),"dragleave",t.event),a&&a!==s&&this.dispatchToElement(eh(a,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(eh(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(eh(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var nh=th,rh=Array.prototype.slice,ih=function(t){this._$handlers={},this._$eventProcessor=t};function oh(t,e,n,r,i,o){var a=t._$handlers;if("function"==typeof n&&(i=r,r=n,n=null),!r||!e)return t;n=function(t,e){var n=t._$eventProcessor;return null!=e&&n&&n.normalizeQuery&&(e=n.normalizeQuery(e)),e}(t,n),a[e]||(a[e]=[]);for(var s=0;s<a[e].length;s++)if(a[e][s].h===r)return t;var h={h:r,one:o,query:n,ctx:i||t,callAtLast:r.zrEventfulCallAtLast},l=a[e].length-1,u=a[e][l];return u&&u.callAtLast?a[e].splice(l,0,h):a[e].push(h),t}ih.prototype={constructor:ih,one:function(t,e,n,r){return oh(this,t,e,n,r,!0)},on:function(t,e,n,r){return oh(this,t,e,n,r,!1)},isSilent:function(t){var e=this._$handlers;return!e[t]||!e[t].length},off:function(t,e){var n=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var r=[],i=0,o=n[t].length;i<o;i++)n[t][i].h!==e&&r.push(n[t][i]);n[t]=r}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},trigger:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var r=arguments,i=r.length;i>3&&(r=rh.call(r,1));for(var o=e.length,a=0;a<o;){var s=e[a];if(n&&n.filter&&null!=s.query&&!n.filter(t,s.query))a++;else{switch(i){case 1:s.h.call(s.ctx);break;case 2:s.h.call(s.ctx,r[1]);break;case 3:s.h.call(s.ctx,r[1],r[2]);break;default:s.h.apply(s.ctx,r)}s.one?(e.splice(a,1),o--):a++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this},triggerWithContext:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var r=arguments,i=r.length;i>4&&(r=rh.call(r,1,r.length-1));for(var o=r[r.length-1],a=e.length,s=0;s<a;){var h=e[s];if(n&&n.filter&&null!=h.query&&!n.filter(t,h.query))s++;else{switch(i){case 1:h.h.call(o);break;case 2:h.h.call(o,r[1]);break;case 3:h.h.call(o,r[1],r[2]);break;default:h.h.apply(o,r)}h.one?(e.splice(s,1),a--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this}};var ah=ih,sh=Math.log(2);function hh(t,e,n,r,i,o){var a=r+"-"+i,s=t.length;if(o.hasOwnProperty(a))return o[a];if(1===e){var h=Math.round(Math.log((1<<s)-1&~i)/sh);return t[n][h]}for(var l=r|1<<n,u=n+1;r&1<<u;)u++;for(var c=0,f=0,d=0;f<s;f++){var p=1<<f;p&i||(c+=(d%2?-1:1)*t[n][f]*hh(t,e-1,u,l,i|p,o),d++)}return o[a]=c,c}var lh=ah,uh={buildTransformer:function(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],r={},i=hh(n,8,0,0,0,r);if(0!==i){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)null==o[s]&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*hh(n,7,0===a?1:0,1<<a,1<<s,r)/i*e[a];return function(t,e,n){var r=e*o[6]+n*o[7]+1;t[0]=(e*o[0]+n*o[1]+o[2])/r,t[1]=(e*o[3]+n*o[4]+o[5])/r}}}}.buildTransformer,ch="undefined"!=typeof window&&!!window.addEventListener,fh=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,dh=[];function ph(t,e,n,r){return n=n||{},r||!ws.canvasSupported?gh(t,e,n):ws.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):gh(t,e,n),n}function gh(t,e,n){if(t.getBoundingClientRect&&ws.domSupported){var r=e.clientX,i=e.clientY;if("CANVAS"===t.nodeName.toUpperCase()){var o=t.getBoundingClientRect();return n.zrX=r-o.left,void(n.zrY=i-o.top)}var a=t.___zrEVENTSAVED||(t.___zrEVENTSAVED={}),s=function(t,e){for(var n=e.transformer,r=e.srcCoords,i=!0,o=[],a=[],s=0;s<4;s++){var h=t[s].getBoundingClientRect(),l=2*s,u=h.left,c=h.top;o.push(u,c),i&=r&&u===r[l]&&c===r[l+1],a.push(t[s].offsetLeft,t[s].offsetTop)}return i?n:(e.srcCoords=o,e.transformer=uh(o,a))}(function(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var r=["left","right"],i=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=o%2,h=(o>>1)%2;a.style.cssText=["position:absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","width:0","height:0",r[s]+":0",i[h]+":0",r[1-s]+":auto",i[1-h]+":auto",""].join("!important;"),t.appendChild(a),n.push(a)}return n}(t,a),a);if(s)return s(dh,r,i),n.zrX=dh[0],void(n.zrY=dh[1])}n.zrX=n.zrY=0}function vh(t){return t||window.event}var _h={Dispatcher:lh,clientToLocal:ph,getNativeEvent:vh,normalizeEvent:function(t,e,n){if(null!=(e=vh(e)).zrX)return e;var r=e.type;if(r&&r.indexOf("touch")>=0){var i="touchend"!==r?e.targetTouches[0]:e.changedTouches[0];i&&ph(t,i,e,n)}else ph(t,e,e,n),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var o=e.button;return null==e.which&&void 0!==o&&fh.test(e.type)&&(e.which=1&o?1:2&o?3:4&o?2:0),e},addEventListener:function(t,e,n,r){ch?t.addEventListener(e,n,r):t.attachEvent("on"+e,n)},removeEventListener:function(t,e,n,r){ch?t.removeEventListener(e,n,r):t.detachEvent("on"+e,n)},stop:ch?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},isMiddleOrRightButtonOnMouseUpDown:function(t){return 2===t.which||3===t.which},notLeftMouse:function(t){return t.which>1}},yh=function(){this._track=[]};function mh(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}yh.prototype={constructor:yh,recognize:function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,n){var r=t.touches;if(r){for(var i={points:[],touches:[],target:e,event:t},o=0,a=r.length;o<a;o++){var s=r[o],h=_h.clientToLocal(n,s,{});i.points.push([h.zrX,h.zrY]),i.touches.push(s)}this._track.push(i)}},_recognize:function(t){for(var e in xh)if(xh.hasOwnProperty(e)){var n=xh[e](this._track,t);if(n)return n}}};var xh={pinch:function(t,e){var n=t.length;if(n){var r,i=(t[n-1]||{}).points,o=(t[n-2]||{}).points||i;if(o&&o.length>1&&i&&i.length>1){var a=mh(i)/mh(o);!isFinite(a)&&(a=1),e.pinchScale=a;var s=[((r=i)[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2];return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:t[0].target,event:e}}}}},bh=yh,wh="silent";function Sh(){_h.stop(this.event)}function Mh(){}Mh.prototype.dispose=function(){};var kh=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Th=function(t,e,n,r){ah.call(this),this.storage=t,this.painter=e,this.painterRoot=r,n=n||new Mh,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,nh.call(this),this.setHandlerProxy(n)};function Eh(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var r,i=t;i;){if(i.clipPath&&!i.clipPath.contain(e,n))return!1;i.silent&&(r=!0),i=i.parent}return!r||wh}return!1}function Ph(t,e,n){var r=t.painter;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}Th.prototype={constructor:Th,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(Xs.each(kh,(function(e){t.on&&t.on(e,this[e],this)}),this),t.handler=this),this.proxy=t},mousemove:function(t){var e=t.zrX,n=t.zrY,r=Ph(this,e,n),i=this._hovered,o=i.target;o&&!o.__zr&&(o=(i=this.findHover(i.x,i.y)).target);var a=this._hovered=r?{x:e,y:n}:this.findHover(e,n),s=a.target,h=this.proxy;h.setCursor&&h.setCursor(s?s.cursor:"default"),o&&s!==o&&this.dispatchToElement(i,"mouseout",t),this.dispatchToElement(a,"mousemove",t),s&&s!==o&&this.dispatchToElement(a,"mouseover",t)},mouseout:function(t){var e=t.zrEventControl,n=t.zrIsToLocalDOM;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&!n&&this.trigger("globalout",{type:"globalout",event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){var n=this[t];n&&n.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,n){var r=(t=t||{}).target;if(!r||!r.silent){for(var i="on"+e,o=function(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:Sh}}(e,t,n);r&&(r[i]&&(o.cancelBubble=r[i].call(r,o)),r.trigger(e,o),r=r.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(e,o),this.painter&&this.painter.eachOtherLayer((function(t){"function"==typeof t[i]&&t[i].call(t,o),t.trigger&&t.trigger(e,o)})))}},findHover:function(t,e,n){for(var r=this.storage.getDisplayList(),i={x:t,y:e},o=r.length-1;o>=0;o--){var a;if(r[o]!==n&&!r[o].ignore&&(a=Eh(r[o],t,e))&&(!i.topTarget&&(i.topTarget=r[o]),a!==wh)){i.target=r[o];break}}return i},processGesture:function(t,e){this._gestureMgr||(this._gestureMgr=new bh);var n=this._gestureMgr;"start"===e&&n.clear();var r=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&n.clear(),r){var i=r.type;t.gestureEvent=i,this.dispatchToElement({target:r.target},i,r.event)}}},Xs.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],(function(t){Th.prototype[t]=function(e){var n,r,i=e.zrX,o=e.zrY,a=Ph(this,i,o);if("mouseup"===t&&a||(r=(n=this.findHover(i,o)).target),"mousedown"===t)this._downEl=r,this._downPoint=[e.zrX,e.zrY],this._upEl=r;else if("mouseup"===t)this._upEl=r;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||Js.dist(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,t,e)}})),Xs.mixin(Th,ah),Xs.mixin(Th,nh);var Ch=Th,Dh="undefined"==typeof Float32Array?Array:Float32Array;function Ah(){var t=new Dh(6);return Ih(t),t}function Ih(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Oh(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}var Lh={create:Ah,identity:Ih,copy:Oh,mul:function(t,e,n){var r=e[0]*n[0]+e[2]*n[1],i=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],h=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=h,t},translate:function(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t},rotate:function(t,e,n){var r=e[0],i=e[2],o=e[4],a=e[1],s=e[3],h=e[5],l=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*l,t[1]=-r*l+a*u,t[2]=i*u+s*l,t[3]=-i*l+u*s,t[4]=u*o+l*h,t[5]=u*h-l*o,t},scale:function(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t},invert:function(t,e){var n=e[0],r=e[2],i=e[4],o=e[1],a=e[3],s=e[5],h=n*a-o*r;return h?(h=1/h,t[0]=a*h,t[1]=-o*h,t[2]=-r*h,t[3]=n*h,t[4]=(r*s-a*i)*h,t[5]=(o*i-n*s)*h,t):null},clone:function(t){var e=Ah();return Oh(e,t),e}},Rh=Lh.identity,zh=5e-5;function Nh(t){return t>zh||t<-5e-5}var Fh=function(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},jh=Fh.prototype;jh.transform=null,jh.needLocalTransform=function(){return Nh(this.rotation)||Nh(this.position[0])||Nh(this.position[1])||Nh(this.scale[0]-1)||Nh(this.scale[1]-1)};var Bh=[];jh.updateTransform=function(){var t=this.parent,e=t&&t.transform,n=this.needLocalTransform(),r=this.transform;if(n||e){r=r||Lh.create(),n?this.getLocalTransform(r):Rh(r),e&&(n?Lh.mul(r,t.transform,r):Lh.copy(r,t.transform)),this.transform=r;var i=this.globalScaleRatio;if(null!=i&&1!==i){this.getGlobalScale(Bh);var o=Bh[0]<0?-1:1,a=Bh[1]<0?-1:1,s=((Bh[0]-o)*i+o)/Bh[0]||0,h=((Bh[1]-a)*i+a)/Bh[1]||0;r[0]*=s,r[1]*=s,r[2]*=h,r[3]*=h}this.invTransform=this.invTransform||Lh.create(),Lh.invert(this.invTransform,r)}else r&&Rh(r)},jh.getLocalTransform=function(t){return Fh.getLocalTransform(this,t)},jh.setTransform=function(t){var e=this.transform,n=t.dpr||1;e?t.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):t.setTransform(n,0,0,n,0,0)},jh.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var Hh=[],Wh=Lh.create();jh.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],r=this.position,i=this.scale;Nh(e-1)&&(e=Math.sqrt(e)),Nh(n-1)&&(n=Math.sqrt(n)),t[0]<0&&(e=-e),t[3]<0&&(n=-n),r[0]=t[4],r[1]=t[5],i[0]=e,i[1]=n,this.rotation=Math.atan2(-t[1]/n,t[0]/e)}},jh.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(Lh.mul(Hh,t.invTransform,e),e=Hh);var n=this.origin;n&&(n[0]||n[1])&&(Wh[4]=n[0],Wh[5]=n[1],Lh.mul(Hh,e,Wh),Hh[4]-=n[0],Hh[5]-=n[1],e=Hh),this.setLocalTransform(e)}},jh.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},jh.transformCoordToLocal=function(t,e){var n=[t,e],r=this.invTransform;return r&&Js.applyTransform(n,n,r),n},jh.transformCoordToGlobal=function(t,e){var n=[t,e],r=this.transform;return r&&Js.applyTransform(n,n,r),n},Fh.getLocalTransform=function(t,e){Rh(e=e||[]);var n=t.origin,r=t.scale||[1,1],i=t.rotation||0,o=t.position||[0,0];return n&&(e[4]-=n[0],e[5]-=n[1]),Lh.scale(e,e,r),i&&Lh.rotate(e,e,i),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=o[0],e[5]+=o[1],e};var Gh=Fh,Yh={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-Yh.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*Yh.bounceIn(2*t):.5*Yh.bounceOut(2*t-1)+.5}},Uh=Yh;function Vh(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}Vh.prototype={constructor:Vh,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var n=(t-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var r=this.easing,i="string"==typeof r?Uh[r]:r,o="function"==typeof i?i(n):n;return this.fire("frame",o),1===n?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){this[t="on"+t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var Xh=Vh,qh=function(){this.head=null,this.tail=null,this._len=0},Zh=qh.prototype;Zh.insert=function(t){var e=new Qh(t);return this.insertEntry(e),e},Zh.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},Zh.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},Zh.len=function(){return this._len},Zh.clear=function(){this.head=this.tail=null,this._len=0};var Qh=function(t){this.value=t,this.next,this.prev},Kh=function(t){this._list=new qh,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},$h=Kh.prototype;$h.put=function(t,e){var n=this._list,r=this._map,i=null;if(null==r[t]){var o=n.len(),a=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var s=n.head;n.remove(s),delete r[s.key],i=s.value,this._lastRemovedEntry=s}a?a.value=e:a=new Qh(e),a.key=t,n.insertEntry(a),r[t]=a}return i},$h.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},$h.clear=function(){this._list.clear(),this._map={}};var Jh=Kh,tl={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function el(t){return(t=Math.round(t))<0?0:t>255?255:t}function nl(t){return t<0?0:t>1?1:t}function rl(t){return t.length&&"%"===t.charAt(t.length-1)?el(parseFloat(t)/100*255):el(parseInt(t,10))}function il(t){return t.length&&"%"===t.charAt(t.length-1)?nl(parseFloat(t)/100):nl(parseFloat(t))}function ol(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function al(t,e,n){return t+(e-t)*n}function sl(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function hl(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var ll=new Jh(20),ul=null;function cl(t,e){ul&&hl(ul,e),ul=ll.put(t,ul||e.slice())}function fl(t,e){if(t){e=e||[];var n=ll.get(t);if(n)return hl(e,n);var r,i=(t+="").replace(/ /g,"").toLowerCase();if(i in tl)return hl(e,tl[i]),cl(t,e),e;if("#"===i.charAt(0))return 4===i.length?(r=parseInt(i.substr(1),16))>=0&&r<=4095?(sl(e,(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1),cl(t,e),e):void sl(e,0,0,0,1):7===i.length?(r=parseInt(i.substr(1),16))>=0&&r<=16777215?(sl(e,(16711680&r)>>16,(65280&r)>>8,255&r,1),cl(t,e),e):void sl(e,0,0,0,1):void 0;var o=i.indexOf("("),a=i.indexOf(")");if(-1!==o&&a+1===i.length){var s=i.substr(0,o),h=i.substr(o+1,a-(o+1)).split(","),l=1;switch(s){case"rgba":if(4!==h.length)return void sl(e,0,0,0,1);l=il(h.pop());case"rgb":return 3!==h.length?void sl(e,0,0,0,1):(sl(e,rl(h[0]),rl(h[1]),rl(h[2]),l),cl(t,e),e);case"hsla":return 4!==h.length?void sl(e,0,0,0,1):(h[3]=il(h[3]),dl(h,e),cl(t,e),e);case"hsl":return 3!==h.length?void sl(e,0,0,0,1):(dl(h,e),cl(t,e),e);default:return}}sl(e,0,0,0,1)}}function dl(t,e){var n=(parseFloat(t[0])%360+360)%360/360,r=il(t[1]),i=il(t[2]),o=i<=.5?i*(r+1):i+r-i*r,a=2*i-o;return sl(e=e||[],el(255*ol(a,o,n+1/3)),el(255*ol(a,o,n)),el(255*ol(a,o,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function pl(t,e,n){if(e&&e.length&&t>=0&&t<=1){n=n||[];var r=t*(e.length-1),i=Math.floor(r),o=Math.ceil(r),a=e[i],s=e[o],h=r-i;return n[0]=el(al(a[0],s[0],h)),n[1]=el(al(a[1],s[1],h)),n[2]=el(al(a[2],s[2],h)),n[3]=nl(al(a[3],s[3],h)),n}}function gl(t,e,n){if(e&&e.length&&t>=0&&t<=1){var r=t*(e.length-1),i=Math.floor(r),o=Math.ceil(r),a=fl(e[i]),s=fl(e[o]),h=r-i,l=vl([el(al(a[0],s[0],h)),el(al(a[1],s[1],h)),el(al(a[2],s[2],h)),nl(al(a[3],s[3],h))],"rgba");return n?{color:l,leftIndex:i,rightIndex:o,value:r}:l}}function vl(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}var _l={parse:fl,lift:function(t,e){var n=fl(t);if(n){for(var r=0;r<3;r++)n[r]=e<0?n[r]*(1-e)|0:(255-n[r])*e+n[r]|0,n[r]>255?n[r]=255:t[r]<0&&(n[r]=0);return vl(n,4===n.length?"rgba":"rgb")}},toHex:function(t){var e=fl(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)},fastLerp:pl,fastMapToColor:pl,lerp:gl,mapToColor:gl,modifyHSL:function(t,e,n,r){if(t=fl(t))return t=function(t){if(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),h=s-a,l=(s+a)/2;if(0===h)e=0,n=0;else{n=l<.5?h/(s+a):h/(2-s-a);var u=((s-r)/6+h/2)/h,c=((s-i)/6+h/2)/h,f=((s-o)/6+h/2)/h;r===s?e=f-c:i===s?e=1/3+u-f:o===s&&(e=2/3+c-u),e<0&&(e+=1),e>1&&(e-=1)}var d=[360*e,n,l];return null!=t[3]&&d.push(t[3]),d}}(t),null!=e&&(t[0]=function(t){return(t=Math.round(t))<0?0:t>360?360:t}(e)),null!=n&&(t[1]=il(n)),null!=r&&(t[2]=il(r)),vl(dl(t),"rgba")},modifyAlpha:function(t,e){if((t=fl(t))&&null!=e)return t[3]=nl(e),vl(t,"rgba")},stringify:vl},yl=Xs.isArrayLike,ml=Array.prototype.slice;function xl(t,e){return t[e]}function bl(t,e,n){t[e]=n}function wl(t,e,n){return(e-t)*n+t}function Sl(t,e,n){return n>.5?e:t}function Ml(t,e,n,r,i){var o=t.length;if(1===i)for(var a=0;a<o;a++)r[a]=wl(t[a],e[a],n);else{var s=o&&t[0].length;for(a=0;a<o;a++)for(var h=0;h<s;h++)r[a][h]=wl(t[a][h],e[a][h],n)}}function kl(t,e,n){var r=t.length,i=e.length;if(r!==i)if(r>i)t.length=i;else for(var o=r;o<i;o++)t.push(1===n?e[o]:ml.call(e[o]));var a=t[0]&&t[0].length;for(o=0;o<t.length;o++)if(1===n)isNaN(t[o])&&(t[o]=e[o]);else for(var s=0;s<a;s++)isNaN(t[o][s])&&(t[o][s]=e[o][s])}function Tl(t,e,n){if(t===e)return!0;var r=t.length;if(r!==e.length)return!1;if(1===n){for(var i=0;i<r;i++)if(t[i]!==e[i])return!1}else{var o=t[0].length;for(i=0;i<r;i++)for(var a=0;a<o;a++)if(t[i][a]!==e[i][a])return!1}return!0}function El(t,e,n,r,i,o,a,s,h){var l=t.length;if(1===h)for(var u=0;u<l;u++)s[u]=Pl(t[u],e[u],n[u],r[u],i,o,a);else{var c=t[0].length;for(u=0;u<l;u++)for(var f=0;f<c;f++)s[u][f]=Pl(t[u][f],e[u][f],n[u][f],r[u][f],i,o,a)}}function Pl(t,e,n,r,i,o,a){var s=.5*(n-t),h=.5*(r-e);return(2*(e-n)+s+h)*a+(-3*(e-n)-2*s-h)*o+s*i+e}function Cl(t){if(yl(t)){var e=t.length;if(yl(t[0])){for(var n=[],r=0;r<e;r++)n.push(ml.call(t[r]));return n}return ml.call(t)}return t}function Dl(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function Al(t,e,n,r,i,o){var a=t._getter,s=t._setter,h="spline"===e,l=r.length;if(l){var u,c=r[0].value,f=yl(c),d=!1,p=!1,g=f?function(t){var e=t[t.length-1].value;return yl(e&&e[0])?2:1}(r):0;r.sort((function(t,e){return t.time-e.time})),u=r[l-1].time;for(var v=[],_=[],y=r[0].value,m=!0,x=0;x<l;x++){v.push(r[x].time/u);var b=r[x].value;if(f&&Tl(b,y,g)||!f&&b===y||(m=!1),y=b,"string"==typeof b){var w=_l.parse(b);w?(b=w,d=!0):p=!0}_.push(b)}if(o||!m){var S=_[l-1];for(x=0;x<l-1;x++)f?kl(_[x],S,g):!isNaN(_[x])||isNaN(S)||p||d||(_[x]=S);f&&kl(a(t._target,i),S,g);var M,k,T,E,P,C=0,D=0;if(d)var A=[0,0,0,0];var I=new Xh({target:t._target,life:u,loop:t._loop,delay:t._delay,onframe:function(t,e){var n;if(e<0)n=0;else if(e<D){for(n=Math.min(C+1,l-1);n>=0&&!(v[n]<=e);n--);n=Math.min(n,l-2)}else{for(n=C;n<l&&!(v[n]>e);n++);n=Math.min(n-1,l-2)}C=n,D=e;var r=v[n+1]-v[n];if(0!==r)if(M=(e-v[n])/r,h)if(T=_[n],k=_[0===n?n:n-1],E=_[n>l-2?l-1:n+1],P=_[n>l-3?l-1:n+2],f)El(k,T,E,P,M,M*M,M*M*M,a(t,i),g);else{if(d)o=El(k,T,E,P,M,M*M,M*M*M,A,1),o=Dl(A);else{if(p)return Sl(T,E,M);o=Pl(k,T,E,P,M,M*M,M*M*M)}s(t,i,o)}else if(f)Ml(_[n],_[n+1],M,a(t,i),g);else{var o;if(d)Ml(_[n],_[n+1],M,A,1),o=Dl(A);else{if(p)return Sl(_[n],_[n+1],M);o=wl(_[n],_[n+1],M)}s(t,i,o)}},ondestroy:n});return e&&"spline"!==e&&(I.easing=e),I}}}var Il=function(t,e,n,r){this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||xl,this._setter=r||bl,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};Il.prototype={when:function(t,e){var n=this._tracks;for(var r in e)if(e.hasOwnProperty(r)){if(!n[r]){n[r]=[];var i=this._getter(this._target,r);if(null==i)continue;0!==t&&n[r].push({time:0,value:Cl(i)})}n[r].push({time:t,value:e[r]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,n=0;n<e;n++)t[n].call(this)},start:function(t,e){var n,r=this,i=0,o=function(){--i||r._doneCallback()};for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var s=Al(this,t,o,this._tracks[a],a,e);s&&(this._clipList.push(s),i++,this.animation&&this.animation.addClip(s),n=s)}if(n){var h=n.onframe;n.onframe=function(t,e){h(t,e);for(var n=0;n<r._onframeList.length;n++)r._onframeList[n](t,e)}}return i||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,n=this.animation,r=0;r<e.length;r++){var i=e[r];t&&i.onframe(this._target,1),n&&n.removeClip(i)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var Ol=Il,Ll=1;"undefined"!=typeof window&&(Ll=Math.max(window.devicePixelRatio||1,1));var Rl={debugMode:0,devicePixelRatio:Ll},zl=function(){},Nl=Xs.isString,Fl=Xs.isFunction,jl=Xs.isObject,Bl=Xs.isArrayLike,Hl=Xs.indexOf,Wl=function(){this.animators=[]};function Gl(t,e,n,r,i,o,a,s){Nl(r)?(o=i,i=r,r=0):Fl(i)?(o=i,i="linear",r=0):Fl(r)?(o=r,r=0):Fl(n)?(o=n,n=500):n||(n=500),t.stopAnimation(),Yl(t,"",t,e,n,r,s);var h=t.animators.slice(),l=h.length;function u(){--l||o&&o()}l||o&&o();for(var c=0;c<h.length;c++)h[c].done(u).start(i,a)}function Yl(t,e,n,r,i,o,a){var s={},h=0;for(var l in r)r.hasOwnProperty(l)&&(null!=n[l]?jl(r[l])&&!Bl(r[l])?Yl(t,e?e+"."+l:l,n[l],r[l],i,o,a):(a?(s[l]=n[l],Ul(t,e,l,r[l])):s[l]=r[l],h++):null==r[l]||a||Ul(t,e,l,r[l]));h>0&&t.animate(e,!1).when(null==i?500:i,s).delay(o||0)}function Ul(t,e,n,r){if(e){var i={};i[e]={},i[e][n]=r,t.attr(i)}else t.attr(n,r)}Wl.prototype={constructor:Wl,animate:function(t,e){var n,r=!1,i=this,o=this.__zr;if(t){var a=t.split("."),s=i;r="shape"===a[0];for(var h=0,l=a.length;h<l;h++)s&&(s=s[a[h]]);s&&(n=s)}else n=i;if(n){var u=i.animators,c=new Ol(n,e);return c.during((function(t){i.dirty(r)})).done((function(){u.splice(Hl(u,c),1)})),u.push(c),o&&o.animation.addAnimator(c),c}zl('Property "'+t+'" is not existed in element '+i.id)},stopAnimation:function(t){for(var e=this.animators,n=e.length,r=0;r<n;r++)e[r].stop(t);return e.length=0,this},animateTo:function(t,e,n,r,i,o){Gl(this,t,e,n,r,i,o)},animateFrom:function(t,e,n,r,i,o){Gl(this,t,e,n,r,i,o,!0)}};var Vl=Wl,Xl=function(t){Gh.call(this,t),ah.call(this,t),Vl.call(this,t),this.id=t.id||bs()};Xl.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var n=this[t];n||(n=this[t]=[]),n[0]=e[0],n[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(Xs.isObject(t))for(var n in t)t.hasOwnProperty(n)&&this.attrKV(n,t[n]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},Xs.mixin(Xl,Vl),Xs.mixin(Xl,Gh),Xs.mixin(Xl,ah);var ql,Zl,Ql,Kl,$l=Xl,Jl=Js.applyTransform,tu=Math.min,eu=Math.max;function nu(t,e,n,r){n<0&&(t+=n,n=-n),r<0&&(e+=r,r=-r),this.x=t,this.y=e,this.width=n,this.height=r}nu.prototype={constructor:nu,union:function(t){var e=tu(t.x,this.x),n=tu(t.y,this.y);this.width=eu(t.x+t.width,this.x+this.width)-e,this.height=eu(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:(ql=[],Zl=[],Ql=[],Kl=[],function(t){if(t){ql[0]=Ql[0]=this.x,ql[1]=Kl[1]=this.y,Zl[0]=Kl[0]=this.x+this.width,Zl[1]=Ql[1]=this.y+this.height,Jl(ql,ql,t),Jl(Zl,Zl,t),Jl(Ql,Ql,t),Jl(Kl,Kl,t),this.x=tu(ql[0],Zl[0],Ql[0],Kl[0]),this.y=tu(ql[1],Zl[1],Ql[1],Kl[1]);var e=eu(ql[0],Zl[0],Ql[0],Kl[0]),n=eu(ql[1],Zl[1],Ql[1],Kl[1]);this.width=e-this.x,this.height=n-this.y}}),calculateTransform:function(t){var e=this,n=t.width/e.width,r=t.height/e.height,i=Lh.create();return Lh.translate(i,i,[-e.x,-e.y]),Lh.scale(i,i,[n,r]),Lh.translate(i,i,[t.x,t.y]),i},intersect:function(t){if(!t)return!1;t instanceof nu||(t=nu.create(t));var e=this,n=e.x,r=e.x+e.width,i=e.y,o=e.y+e.height,a=t.x,s=t.x+t.width,h=t.y,l=t.y+t.height;return!(r<a||s<n||o<h||l<i)},contain:function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},clone:function(){return new nu(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},nu.create=function(t){return new nu(t.x,t.y,t.width,t.height)};var ru=nu,iu=function(t){for(var e in t=t||{},$l.call(this,t),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};iu.prototype={constructor:iu,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,r=n.indexOf(e);r>=0&&(n.splice(r,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__storage,n=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof iu&&t.addChildrenToStorage(e)),n&&n.refresh()},remove:function(t){var e=this.__zr,n=this.__storage,r=this._children,i=Xs.indexOf(r,t);return i<0||(r.splice(i,1),t.parent=null,n&&(n.delFromStorage(t),t instanceof iu&&t.delChildrenFromStorage(n)),e&&e.refresh()),this},removeAll:function(){var t,e,n=this._children,r=this.__storage;for(e=0;e<n.length;e++)t=n[e],r&&(r.delFromStorage(t),t instanceof iu&&t.delChildrenFromStorage(r)),t.parent=null;return n.length=0,this},eachChild:function(t,e){for(var n=this._children,r=0;r<n.length;r++){var i=n[r];t.call(e,i,r)}return this},traverse:function(t,e){for(var n=0;n<this._children.length;n++){var r=this._children[n];t.call(e,r),"group"===r.type&&r.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToStorage(n),n instanceof iu&&n.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromStorage(n),n instanceof iu&&n.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,n=new ru(0,0,0,0),r=t||this._children,i=[],o=0;o<r.length;o++){var a=r[o];if(!a.ignore&&!a.invisible){var s=a.getBoundingRect(),h=a.getLocalTransform(i);h?(n.copy(s),n.applyTransform(h),(e=e||n.clone()).union(n)):(e=e||s.clone()).union(s)}}return e||n}},Xs.inherits(iu,$l);var ou=iu;function au(t,e,n,r){var i=e+1;if(i===n)return 1;if(r(t[i++],t[e])<0){for(;i<n&&r(t[i],t[i-1])<0;)i++;!function(t,e,n){n--;for(;e<n;){var r=t[e];t[e++]=t[n],t[n--]=r}}(t,e,i)}else for(;i<n&&r(t[i],t[i-1])>=0;)i++;return i-e}function su(t,e,n,r,i){for(r===e&&r++;r<n;r++){for(var o,a=t[r],s=e,h=r;s<h;)i(a,t[o=s+h>>>1])<0?h=o:s=o+1;var l=r-s;switch(l){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;l>0;)t[s+l]=t[s+l-1],l--}t[s]=a}}function hu(t,e,n,r,i,o){var a=0,s=0,h=1;if(o(t,e[n+i])>0){for(s=r-i;h<s&&o(t,e[n+i+h])>0;)a=h,(h=1+(h<<1))<=0&&(h=s);h>s&&(h=s),a+=i,h+=i}else{for(s=i+1;h<s&&o(t,e[n+i-h])<=0;)a=h,(h=1+(h<<1))<=0&&(h=s);h>s&&(h=s);var l=a;a=i-h,h=i-l}for(a++;a<h;){var u=a+(h-a>>>1);o(t,e[n+u])>0?a=u+1:h=u}return h}function lu(t,e,n,r,i,o){var a=0,s=0,h=1;if(o(t,e[n+i])<0){for(s=i+1;h<s&&o(t,e[n+i-h])<0;)a=h,(h=1+(h<<1))<=0&&(h=s);h>s&&(h=s);var l=a;a=i-h,h=i-l}else{for(s=r-i;h<s&&o(t,e[n+i+h])>=0;)a=h,(h=1+(h<<1))<=0&&(h=s);h>s&&(h=s),a+=i,h+=i}for(a++;a<h;){var u=a+(h-a>>>1);o(t,e[n+u])<0?h=u:a=u+1}return h}function uu(t,e){var n,r,i=7,o=0;t.length;var a=[];function s(s){var h=n[s],l=r[s],u=n[s+1],c=r[s+1];r[s]=l+c,s===o-3&&(n[s+1]=n[s+2],r[s+1]=r[s+2]),o--;var f=lu(t[u],t,h,l,0,e);h+=f,0!==(l-=f)&&0!==(c=hu(t[h+l-1],t,u,c,c-1,e))&&(l<=c?function(n,r,o,s){var h=0;for(h=0;h<r;h++)a[h]=t[n+h];var l=0,u=o,c=n;if(t[c++]=t[u++],0==--s){for(h=0;h<r;h++)t[c+h]=a[l+h];return}if(1===r){for(h=0;h<s;h++)t[c+h]=t[u+h];return void(t[c+s]=a[l])}var f,d,p,g=i;for(;;){f=0,d=0,p=!1;do{if(e(t[u],a[l])<0){if(t[c++]=t[u++],d++,f=0,0==--s){p=!0;break}}else if(t[c++]=a[l++],f++,d=0,1==--r){p=!0;break}}while((f|d)<g);if(p)break;do{if(0!==(f=lu(t[u],a,l,r,0,e))){for(h=0;h<f;h++)t[c+h]=a[l+h];if(c+=f,l+=f,(r-=f)<=1){p=!0;break}}if(t[c++]=t[u++],0==--s){p=!0;break}if(0!==(d=hu(a[l],t,u,s,0,e))){for(h=0;h<d;h++)t[c+h]=t[u+h];if(c+=d,u+=d,0===(s-=d)){p=!0;break}}if(t[c++]=a[l++],1==--r){p=!0;break}g--}while(f>=7||d>=7);if(p)break;g<0&&(g=0),g+=2}if((i=g)<1&&(i=1),1===r){for(h=0;h<s;h++)t[c+h]=t[u+h];t[c+s]=a[l]}else{if(0===r)throw new Error;for(h=0;h<r;h++)t[c+h]=a[l+h]}}(h,l,u,c):function(n,r,o,s){var h=0;for(h=0;h<s;h++)a[h]=t[o+h];var l=n+r-1,u=s-1,c=o+s-1,f=0,d=0;if(t[c--]=t[l--],0==--r){for(f=c-(s-1),h=0;h<s;h++)t[f+h]=a[h];return}if(1===s){for(d=(c-=r)+1,f=(l-=r)+1,h=r-1;h>=0;h--)t[d+h]=t[f+h];return void(t[c]=a[u])}var p=i;for(;;){var g=0,v=0,_=!1;do{if(e(a[u],t[l])<0){if(t[c--]=t[l--],g++,v=0,0==--r){_=!0;break}}else if(t[c--]=a[u--],v++,g=0,1==--s){_=!0;break}}while((g|v)<p);if(_)break;do{if(0!==(g=r-lu(a[u],t,n,r,r-1,e))){for(r-=g,d=(c-=g)+1,f=(l-=g)+1,h=g-1;h>=0;h--)t[d+h]=t[f+h];if(0===r){_=!0;break}}if(t[c--]=a[u--],1==--s){_=!0;break}if(0!==(v=s-hu(t[l],a,0,s,s-1,e))){for(s-=v,d=(c-=v)+1,f=(u-=v)+1,h=0;h<v;h++)t[d+h]=a[f+h];if(s<=1){_=!0;break}}if(t[c--]=t[l--],0==--r){_=!0;break}p--}while(g>=7||v>=7);if(_)break;p<0&&(p=0),p+=2}(i=p)<1&&(i=1);if(1===s){for(d=(c-=r)+1,f=(l-=r)+1,h=r-1;h>=0;h--)t[d+h]=t[f+h];t[c]=a[u]}else{if(0===s)throw new Error;for(f=c-(s-1),h=0;h<s;h++)t[f+h]=a[h]}}(h,l,u,c))}n=[],r=[],this.mergeRuns=function(){for(;o>1;){var t=o-2;if(t>=1&&r[t-1]<=r[t]+r[t+1]||t>=2&&r[t-2]<=r[t]+r[t-1])r[t-1]<r[t+1]&&t--;else if(r[t]>r[t+1])break;s(t)}},this.forceMergeRuns=function(){for(;o>1;){var t=o-2;t>0&&r[t-1]<r[t+1]&&t--,s(t)}},this.pushRun=function(t,e){n[o]=t,r[o]=e,o+=1}}var cu=function(t,e,n,r){n||(n=0),r||(r=t.length);var i=r-n;if(!(i<2)){var o=0;if(i<32)su(t,n,r,n+(o=au(t,n,r,e)),e);else{var a=new uu(t,e),s=function(t){for(var e=0;t>=32;)e|=1&t,t>>=1;return t+e}(i);do{if((o=au(t,n,r,e))<s){var h=i;h>s&&(h=s),su(t,n,n+h,n+o,e),o=h}a.pushRun(n,o),a.mergeRuns(),i-=o,n+=o}while(0!==i);a.forceMergeRuns()}}};function fu(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var du=function(){this._roots=[],this._displayList=[],this._displayListLen=0};du.prototype={constructor:du,traverse:function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,r=0,i=e.length;r<i;r++)this._updateAndAddDisplayable(e[r],null,t);n.length=this._displayListLen,ws.canvasSupported&&cu(n,fu)},_updateAndAddDisplayable:function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var r=t.clipPath;if(r){e=e?e.slice():[];for(var i=r,o=t;i;)i.parent=o,i.updateTransform(),e.push(i),o=i,i=i.clipPath}if(t.isGroup){for(var a=t._children,s=0;s<a.length;s++){var h=a[s];t.__dirty&&(h.__dirty=!0),this._updateAndAddDisplayable(h,e,n)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof ou&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof ou&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array){e=0;for(var r=t.length;e<r;e++)this.delRoot(t[e])}else{var i=Xs.indexOf(this._roots,t);i>=0&&(this.delFromStorage(t),this._roots.splice(i,1),t instanceof ou&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:fu};var pu=du,gu={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1};var vu=function(t,e,n){return gu.hasOwnProperty(e)?n*t.dpr:n},_u={ContextCachedBy:{NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},WILL_BE_RESTORED:9},yu=_u.ContextCachedBy,mu=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],xu=function(t){this.extendFrom(t,!1)};function bu(t,e,n){var r=null==e.x?0:e.x,i=null==e.x2?1:e.x2,o=null==e.y?0:e.y,a=null==e.y2?0:e.y2;return e.global||(r=r*n.width+n.x,i=i*n.width+n.x,o=o*n.height+n.y,a=a*n.height+n.y),r=isNaN(r)?0:r,i=isNaN(i)?1:i,o=isNaN(o)?0:o,a=isNaN(a)?0:a,t.createLinearGradient(r,o,i,a)}function wu(t,e,n){var r=n.width,i=n.height,o=Math.min(r,i),a=null==e.x?.5:e.x,s=null==e.y?.5:e.y,h=null==e.r?.5:e.r;return e.global||(a=a*r+n.x,s=s*i+n.y,h*=o),t.createRadialGradient(a,s,0,a,s,h)}for(var Su=xu.prototype={constructor:xu,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,n){var r=this,i=n&&n.style,o=!i||t.__attrCachedBy!==yu.STYLE_BIND;t.__attrCachedBy=yu.STYLE_BIND;for(var a=0;a<mu.length;a++){var s=mu[a],h=s[0];(o||r[h]!==i[h])&&(t[h]=vu(t,h,r[h]||s[1]))}if((o||r.fill!==i.fill)&&(t.fillStyle=r.fill),(o||r.stroke!==i.stroke)&&(t.strokeStyle=r.stroke),(o||r.opacity!==i.opacity)&&(t.globalAlpha=null==r.opacity?1:r.opacity),(o||r.blend!==i.blend)&&(t.globalCompositeOperation=r.blend||"source-over"),this.hasStroke()){var l=r.lineWidth;t.lineWidth=l/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&this.lineWidth>0},extendFrom:function(t,e){if(t)for(var n in t)!t.hasOwnProperty(n)||!0!==e&&(!1===e?this.hasOwnProperty(n):null==t[n])||(this[n]=t[n])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,n){for(var r=("radial"===e.type?wu:bu)(t,e,n),i=e.colorStops,o=0;o<i.length;o++)r.addColorStop(i[o].offset,i[o].color);return r}},Mu=0;Mu<mu.length;Mu++){var ku=mu[Mu];ku[0]in Su||(Su[ku[0]]=ku[1])}xu.getGradient=Su.getGradient;var Tu=xu,Eu=function(t,e){this.image=t,this.repeat=e,this.type="pattern"};Eu.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")};var Pu=Eu,Cu=Rl.devicePixelRatio;function Du(){return!1}function Au(t,e,n){var r=Xs.createCanvas(),i=e.getWidth(),o=e.getHeight(),a=r.style;return a&&(a.position="absolute",a.left=0,a.top=0,a.width=i+"px",a.height=o+"px",r.setAttribute("data-zr-dom-id",t)),r.width=i*n,r.height=o*n,r}var Iu=function(t,e,n){var r;n=n||Cu,"string"==typeof t?r=Au(t,e,n):Xs.isObject(t)&&(t=(r=t).id),this.id=t,this.dom=r;var i=r.style;i&&(r.onselectstart=Du,i["-webkit-user-select"]="none",i["user-select"]="none",i["-webkit-touch-callout"]="none",i["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",i.padding=0,i.margin=0,i["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n};Iu.prototype={constructor:Iu,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=Au("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},resize:function(t,e){var n=this.dpr,r=this.dom,i=r.style,o=this.domBack;i&&(i.width=t+"px",i.height=e+"px"),r.width=t*n,r.height=e*n,o&&(o.width=t*n,o.height=e*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(t,e){var n,r=this.dom,i=this.ctx,o=r.width,a=r.height,s=(e=e||this.clearColor,this.motionBlur&&!t),h=this.lastFrameAlpha,l=this.dpr;(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,o/l,a/l)),i.clearRect(0,0,o,a),e&&"transparent"!==e)&&(e.colorStops?(n=e.__canvasGradient||Tu.getGradient(i,e,{x:0,y:0,width:o,height:a}),e.__canvasGradient=n):e.image&&(n=Pu.prototype.getCanvasPattern.call(e,i)),i.save(),i.fillStyle=n||e,i.fillRect(0,0,o,a),i.restore());if(s){var u=this.domBack;i.save(),i.globalAlpha=h,i.drawImage(u,0,0,o,a),i.restore()}}};var Ou=Iu,Lu="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)},Ru=new Jh(50);function zu(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function Nu(t){return t&&t.width&&t.height}var Fu={findExistImage:function(t){if("string"==typeof t){var e=Ru.get(t);return e&&e.image}return t},createOrUpdateImage:function(t,e,n,r,i){if(t){if("string"==typeof t){if(e&&e.__zrImageSrc===t||!n)return e;var o=Ru.get(t),a={hostEl:n,cb:r,cbPayload:i};return o?!Nu(e=o.image)&&o.pending.push(a):((e=new Image).onload=e.onerror=zu,Ru.put(t,e.__cachedImgObj={image:e,pending:[a]}),e.src=e.__zrImageSrc=t),e}return t}return e},isImageReady:Nu},ju=Xs.getContext,Bu=Xs.extend,Hu=Xs.retrieve2,Wu=Xs.retrieve3,Gu=Xs.trim,Yu={},Uu=0,Vu=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,Xu="12px sans-serif",qu={};function Zu(t,e){var n=t+":"+(e=e||Xu);if(Yu[n])return Yu[n];for(var r=(t+"").split("\n"),i=0,o=0,a=r.length;o<a;o++)i=Math.max(ic(r[o],e).width,i);return Uu>5e3&&(Uu=0,Yu={}),Uu++,Yu[n]=i,i}function Qu(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function Ku(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function $u(t,e,n){var r=e.textPosition,i=e.textDistance,o=n.x,a=n.y;i=i||0;var s=n.height,h=n.width,l=s/2,u="left",c="top";switch(r){case"left":o-=i,a+=l,u="right",c="middle";break;case"right":o+=i+h,a+=l,c="middle";break;case"top":o+=h/2,a-=i,u="center",c="bottom";break;case"bottom":o+=h/2,a+=s+i,u="center";break;case"inside":o+=h/2,a+=l,u="center",c="middle";break;case"insideLeft":o+=i,a+=l,c="middle";break;case"insideRight":o+=h-i,a+=l,u="right",c="middle";break;case"insideTop":o+=h/2,a+=i,u="center";break;case"insideBottom":o+=h/2,a+=s-i,u="center",c="bottom";break;case"insideTopLeft":o+=i,a+=i;break;case"insideTopRight":o+=h-i,a+=i,u="right";break;case"insideBottomLeft":o+=i,a+=s-i,c="bottom";break;case"insideBottomRight":o+=h-i,a+=s-i,u="right",c="bottom"}return(t=t||{}).x=o,t.y=a,t.textAlign=u,t.textVerticalAlign=c,t}function Ju(t,e,n,r,i){if(!e)return"";var o=(t+"").split("\n");i=tc(e,n,r,i);for(var a=0,s=o.length;a<s;a++)o[a]=ec(o[a],i);return o.join("\n")}function tc(t,e,n,r){(r=Bu({},r)).font=e;n=Hu(n,"...");r.maxIterations=Hu(r.maxIterations,2);var i=r.minChar=Hu(r.minChar,0);r.cnCharWidth=Zu("å½",e);var o=r.ascCharWidth=Zu("a",e);r.placeholder=Hu(r.placeholder,"");for(var a=t=Math.max(0,t-1),s=0;s<i&&a>=o;s++)a-=o;var h=Zu(n,e);return h>a&&(n="",h=0),a=t-h,r.ellipsis=n,r.ellipsisWidth=h,r.contentWidth=a,r.containerWidth=t,r}function ec(t,e){var n=e.containerWidth,r=e.font,i=e.contentWidth;if(!n)return"";var o=Zu(t,r);if(o<=n)return t;for(var a=0;;a++){if(o<=i||a>=e.maxIterations){t+=e.ellipsis;break}var s=0===a?nc(t,i,e.ascCharWidth,e.cnCharWidth):o>0?Math.floor(t.length*i/o):0;o=Zu(t=t.substr(0,s),r)}return""===t&&(t=e.placeholder),t}function nc(t,e,n,r){for(var i=0,o=0,a=t.length;o<a&&i<e;o++){var s=t.charCodeAt(o);i+=0<=s&&s<=127?n:r}return o}function rc(t){return Zu("å½",t)}function ic(t,e){return qu.measureText(t,e)}function oc(t,e,n,r,i){null!=t&&(t+="");var o=Hu(r,rc(e)),a=t?t.split("\n"):[],s=a.length*o,h=s,l=!0;if(n&&(h+=n[0]+n[2]),t&&i){l=!1;var u=i.outerHeight,c=i.outerWidth;if(null!=u&&h>u)t="",a=[];else if(null!=c)for(var f=tc(c-(n?n[1]+n[3]:0),e,i.ellipsis,{minChar:i.minChar,placeholder:i.placeholder}),d=0,p=a.length;d<p;d++)a[d]=ec(a[d],f)}return{lines:a,height:s,outerHeight:h,lineHeight:o,canCacheByTextString:l}}function ac(t,e){var n={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return n;for(var r,i=Vu.lastIndex=0;null!=(r=Vu.exec(t));){var o=r.index;o>i&&sc(n,t.substring(i,o)),sc(n,r[2],r[1]),i=Vu.lastIndex}i<t.length&&sc(n,t.substring(i,t.length));var a=n.lines,s=0,h=0,l=[],u=e.textPadding,c=e.truncate,f=c&&c.outerWidth,d=c&&c.outerHeight;u&&(null!=f&&(f-=u[1]+u[3]),null!=d&&(d-=u[0]+u[2]));for(var p=0;p<a.length;p++){for(var g=a[p],v=0,_=0,y=0;y<g.tokens.length;y++){var m=(C=g.tokens[y]).styleName&&e.rich[C.styleName]||{},x=C.textPadding=m.textPadding,b=C.font=m.font||e.font,w=C.textHeight=Hu(m.textHeight,rc(b));if(x&&(w+=x[0]+x[2]),C.height=w,C.lineHeight=Wu(m.textLineHeight,e.textLineHeight,w),C.textAlign=m&&m.textAlign||e.textAlign,C.textVerticalAlign=m&&m.textVerticalAlign||"middle",null!=d&&s+C.lineHeight>d)return{lines:[],width:0,height:0};C.textWidth=Zu(C.text,b);var S=m.textWidth,M=null==S||"auto"===S;if("string"==typeof S&&"%"===S.charAt(S.length-1))C.percentWidth=S,l.push(C),S=0;else{if(M){S=C.textWidth;var k=m.textBackgroundColor,T=k&&k.image;T&&(T=Fu.findExistImage(T),Fu.isImageReady(T)&&(S=Math.max(S,T.width*w/T.height)))}var E=x?x[1]+x[3]:0;S+=E;var P=null!=f?f-_:null;null!=P&&P<S&&(!M||P<E?(C.text="",C.textWidth=S=0):(C.text=Ju(C.text,P-E,b,c.ellipsis,{minChar:c.minChar}),C.textWidth=Zu(C.text,b),S=C.textWidth+E))}_+=C.width=S,m&&(v=Math.max(v,C.lineHeight))}g.width=_,g.lineHeight=v,s+=v,h=Math.max(h,_)}n.outerWidth=n.width=Hu(e.textWidth,h),n.outerHeight=n.height=Hu(e.textHeight,s),u&&(n.outerWidth+=u[1]+u[3],n.outerHeight+=u[0]+u[2]);for(p=0;p<l.length;p++){var C,D=(C=l[p]).percentWidth;C.width=parseInt(D,10)/100*h}return n}function sc(t,e,n){for(var r=""===e,i=e.split("\n"),o=t.lines,a=0;a<i.length;a++){var s=i[a],h={styleName:n,text:s,isLineHolder:!s&&!r};if(a)o.push({tokens:[h]});else{var l=(o[o.length-1]||(o[0]={tokens:[]})).tokens,u=l.length;1===u&&l[0].isLineHolder?l[0]=h:(s||!u||r)&&l.push(h)}}}qu.measureText=function(t,e){var n=ju();return n.font=e||Xu,n.measureText(t)};var hc={DEFAULT_FONT:"12px sans-serif",$override:function(t,e){qu[t]=e},getWidth:Zu,getBoundingRect:function(t,e,n,r,i,o,a,s){return a?function(t,e,n,r,i,o,a,s){var h=ac(t,{rich:a,truncate:s,font:e,textAlign:n,textPadding:i,textLineHeight:o}),l=h.outerWidth,u=h.outerHeight,c=Qu(0,l,n),f=Ku(0,u,r);return new ru(c,f,l,u)}(t,e,n,r,i,o,a,s):function(t,e,n,r,i,o,a){var s=oc(t,e,i,o,a),h=Zu(t,e);i&&(h+=i[1]+i[3]);var l=s.outerHeight,u=Qu(0,h,n),c=Ku(0,l,r),f=new ru(u,c,h,l);return f.lineHeight=s.lineHeight,f}(t,e,n,r,i,o,s)},adjustTextX:Qu,adjustTextY:Ku,calculateTextPosition:$u,adjustTextPositionOnRect:function(t,e,n){return $u({},{textPosition:t,textDistance:n},e)},truncateText:Ju,getLineHeight:rc,measureText:ic,parsePlainText:oc,parseRichText:ac,makeFont:function(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&Gu(e)||t.textFont||t.font}};var lc={buildPath:function(t,e){var n,r,i,o,a,s=e.x,h=e.y,l=e.width,u=e.height,c=e.r;l<0&&(s+=l,l=-l),u<0&&(h+=u,u=-u),"number"==typeof c?n=r=i=o=c:c instanceof Array?1===c.length?n=r=i=o=c[0]:2===c.length?(n=i=c[0],r=o=c[1]):3===c.length?(n=c[0],r=o=c[1],i=c[2]):(n=c[0],r=c[1],i=c[2],o=c[3]):n=r=i=o=0,n+r>l&&(n*=l/(a=n+r),r*=l/a),i+o>l&&(i*=l/(a=i+o),o*=l/a),r+i>u&&(r*=u/(a=r+i),i*=u/a),n+o>u&&(n*=u/(a=n+o),o*=u/a),t.moveTo(s+n,h),t.lineTo(s+l-r,h),0!==r&&t.arc(s+l-r,h+r,r,-Math.PI/2,0),t.lineTo(s+l,h+u-i),0!==i&&t.arc(s+l-i,h+u-i,i,0,Math.PI/2),t.lineTo(s+o,h+u),0!==o&&t.arc(s+o,h+u-o,o,Math.PI/2,Math.PI),t.lineTo(s,h+n),0!==n&&t.arc(s+n,h+n,n,Math.PI,1.5*Math.PI)}},uc=Xs.retrieve2,cc=Xs.retrieve3,fc=Xs.each,dc=Xs.normalizeCssArray,pc=Xs.isString,gc=Xs.isObject,vc=_u.ContextCachedBy,_c=_u.WILL_BE_RESTORED,yc=hc.DEFAULT_FONT,mc={left:1,right:1,center:1},xc={top:1,bottom:1,middle:1},bc=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],wc={},Sc={};function Mc(t){if(t){t.font=hc.makeFont(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||mc[e]?e:"left";var n=t.textVerticalAlign||t.textBaseline;"center"===n&&(n="middle"),t.textVerticalAlign=null==n||xc[n]?n:"top",t.textPadding&&(t.textPadding=dc(t.textPadding))}}function kc(t,e,n,r,i,o){var a,s=Cc(r),h=!1,l=e.__attrCachedBy===vc.PLAIN_TEXT;o!==_c?(o&&(a=o.style,h=!s&&l&&a),e.__attrCachedBy=s?vc.NONE:vc.PLAIN_TEXT):l&&(e.__attrCachedBy=vc.NONE);var u=r.font||yc;h&&u===(a.font||yc)||(e.font=u);var c=t.__computedFont;t.__styleFont!==u&&(t.__styleFont=u,c=t.__computedFont=e.font);var f=r.textPadding,d=r.textLineHeight,p=t.__textCotentBlock;p&&!t.__dirtyText||(p=t.__textCotentBlock=hc.parsePlainText(n,c,f,d,r.truncate));var g=p.outerHeight,v=p.lines,_=p.lineHeight,y=Ic(Sc,t,r,i),m=y.baseX,x=y.baseY,b=y.textAlign||"left",w=y.textVerticalAlign;Ec(e,r,i,m,x);var S=hc.adjustTextY(x,g,w),M=m,k=S;if(s||f){var T=hc.getWidth(n,c);f&&(T+=f[1]+f[3]);var E=hc.adjustTextX(m,T,b);s&&Dc(t,e,r,E,S,T,g),f&&(M=Nc(m,b,f),k+=f[0])}e.textAlign=b,e.textBaseline="middle",e.globalAlpha=r.opacity||1;for(var P=0;P<bc.length;P++){var C=bc[P],D=C[0],A=C[1],I=r[D];h&&I===a[D]||(e[A]=vu(e,A,I||C[2]))}k+=_/2;var O=r.textStrokeWidth,L=h?a.textStrokeWidth:null,R=!h||O!==L,z=!h||R||r.textStroke!==a.textStroke,N=Lc(r.textStroke,O),F=Rc(r.textFill);if(N&&(R&&(e.lineWidth=O),z&&(e.strokeStyle=N)),F&&(h&&r.textFill===a.textFill||(e.fillStyle=F)),1===v.length)N&&e.strokeText(v[0],M,k),F&&e.fillText(v[0],M,k);else for(P=0;P<v.length;P++)N&&e.strokeText(v[P],M,k),F&&e.fillText(v[P],M,k),k+=_}function Tc(t,e,n,r,i,o){o!==_c&&(e.__attrCachedBy=vc.NONE);var a=t.__textCotentBlock;a&&!t.__dirtyText||(a=t.__textCotentBlock=hc.parseRichText(n,r)),function(t,e,n,r,i){var o=n.width,a=n.outerWidth,s=n.outerHeight,h=r.textPadding,l=Ic(Sc,t,r,i),u=l.baseX,c=l.baseY,f=l.textAlign,d=l.textVerticalAlign;Ec(e,r,i,u,c);var p=hc.adjustTextX(u,a,f),g=hc.adjustTextY(c,s,d),v=p,_=g;h&&(v+=h[3],_+=h[0]);var y=v+o;Cc(r)&&Dc(t,e,r,p,g,a,s);for(var m=0;m<n.lines.length;m++){for(var x,b=n.lines[m],w=b.tokens,S=w.length,M=b.lineHeight,k=b.width,T=0,E=v,P=y,C=S-1;T<S&&(!(x=w[T]).textAlign||"left"===x.textAlign);)Pc(t,e,x,r,M,_,E,"left"),k-=x.width,E+=x.width,T++;for(;C>=0&&"right"===(x=w[C]).textAlign;)Pc(t,e,x,r,M,_,P,"right"),k-=x.width,P-=x.width,C--;for(E+=(o-(E-v)-(y-P)-k)/2;T<=C;)Pc(t,e,x=w[T],r,M,_,E+x.width/2,"center"),E+=x.width,T++;_+=M}}(t,e,a,r,i)}function Ec(t,e,n,r,i){if(n&&e.textRotation){var o=e.textOrigin;"center"===o?(r=n.width/2+n.x,i=n.height/2+n.y):o&&(r=o[0]+n.x,i=o[1]+n.y),t.translate(r,i),t.rotate(-e.textRotation),t.translate(-r,-i)}}function Pc(t,e,n,r,i,o,a,s){var h=r.rich[n.styleName]||{};h.text=n.text;var l=n.textVerticalAlign,u=o+i/2;"top"===l?u=o+n.height/2:"bottom"===l&&(u=o+i-n.height/2),!n.isLineHolder&&Cc(h)&&Dc(t,e,h,"right"===s?a-n.width:"center"===s?a-n.width/2:a,u-n.height/2,n.width,n.height);var c=n.textPadding;c&&(a=Nc(a,s,c),u-=n.height/2-c[2]-n.textHeight/2),Oc(e,"shadowBlur",cc(h.textShadowBlur,r.textShadowBlur,0)),Oc(e,"shadowColor",h.textShadowColor||r.textShadowColor||"transparent"),Oc(e,"shadowOffsetX",cc(h.textShadowOffsetX,r.textShadowOffsetX,0)),Oc(e,"shadowOffsetY",cc(h.textShadowOffsetY,r.textShadowOffsetY,0)),Oc(e,"textAlign",s),Oc(e,"textBaseline","middle"),Oc(e,"font",n.font||yc);var f=Lc(h.textStroke||r.textStroke,p),d=Rc(h.textFill||r.textFill),p=uc(h.textStrokeWidth,r.textStrokeWidth);f&&(Oc(e,"lineWidth",p),Oc(e,"strokeStyle",f),e.strokeText(n.text,a,u)),d&&(Oc(e,"fillStyle",d),e.fillText(n.text,a,u))}function Cc(t){return!!(t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor)}function Dc(t,e,n,r,i,o,a){var s=n.textBackgroundColor,h=n.textBorderWidth,l=n.textBorderColor,u=pc(s);if(Oc(e,"shadowBlur",n.textBoxShadowBlur||0),Oc(e,"shadowColor",n.textBoxShadowColor||"transparent"),Oc(e,"shadowOffsetX",n.textBoxShadowOffsetX||0),Oc(e,"shadowOffsetY",n.textBoxShadowOffsetY||0),u||h&&l){e.beginPath();var c=n.textBorderRadius;c?lc.buildPath(e,{x:r,y:i,width:o,height:a,r:c}):e.rect(r,i,o,a),e.closePath()}if(u)if(Oc(e,"fillStyle",s),null!=n.fillOpacity){var f=e.globalAlpha;e.globalAlpha=n.fillOpacity*n.opacity,e.fill(),e.globalAlpha=f}else e.fill();else if(gc(s)){var d=s.image;(d=Fu.createOrUpdateImage(d,null,t,Ac,s))&&Fu.isImageReady(d)&&e.drawImage(d,r,i,o,a)}if(h&&l)if(Oc(e,"lineWidth",h),Oc(e,"strokeStyle",l),null!=n.strokeOpacity){f=e.globalAlpha;e.globalAlpha=n.strokeOpacity*n.opacity,e.stroke(),e.globalAlpha=f}else e.stroke()}function Ac(t,e){e.image=t}function Ic(t,e,n,r){var i=n.x||0,o=n.y||0,a=n.textAlign,s=n.textVerticalAlign;if(r){var h=n.textPosition;if(h instanceof Array)i=r.x+zc(h[0],r.width),o=r.y+zc(h[1],r.height);else{var l=e&&e.calculateTextPosition?e.calculateTextPosition(wc,n,r):hc.calculateTextPosition(wc,n,r);i=l.x,o=l.y,a=a||l.textAlign,s=s||l.textVerticalAlign}var u=n.textOffset;u&&(i+=u[0],o+=u[1])}return(t=t||{}).baseX=i,t.baseY=o,t.textAlign=a,t.textVerticalAlign=s,t}function Oc(t,e,n){return t[e]=vu(t,e,n),t[e]}function Lc(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function Rc(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function zc(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function Nc(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}var Fc={normalizeTextStyle:function(t){return Mc(t),fc(t.rich,Mc),t},renderText:function(t,e,n,r,i,o){r.rich?Tc(t,e,n,r,i,o):kc(t,e,n,r,i,o)},getBoxPosition:Ic,getStroke:Lc,getFill:Rc,parsePercent:zc,needDrawText:function(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}},jc=_u.WILL_BE_RESTORED,Bc=new ru,Hc=function(){};Hc.prototype={constructor:Hc,drawRectText:function(t,e){var n=this.style;e=n.textRect||e,this.__dirty&&Fc.normalizeTextStyle(n,!0);var r=n.text;if(null!=r&&(r+=""),Fc.needDrawText(r,n)){t.save();var i=this.transform;n.transformText?this.setTransform(t):i&&(Bc.copy(e),Bc.applyTransform(i),e=Bc),Fc.renderText(this,t,r,n,e,jc),t.restore()}}};var Wc=Hc;function Gc(t){for(var e in t=t||{},$l.call(this,t),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new Tu(t.style,this),this._rect=null,this.__clipPaths=null}Gc.prototype={constructor:Gc,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var n=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?$l.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new Tu(t,this),this.dirty(!1),this},calculateTextPosition:null},Xs.inherits(Gc,$l),Xs.mixin(Gc,Wc);var Yc=Gc;function Uc(t){Yc.call(this,t)}Uc.prototype={constructor:Uc,type:"image",brush:function(t,e){var n=this.style,r=n.image;n.bind(t,this,e);var i=this._image=Fu.createOrUpdateImage(r,this._image,this,this.onload);if(i&&Fu.isImageReady(i)){var o=n.x||0,a=n.y||0,s=n.width,h=n.height,l=i.width/i.height;if(null==s&&null!=h?s=h*l:null==h&&null!=s?h=s/l:null==s&&null==h&&(s=i.width,h=i.height),this.setTransform(t),n.sWidth&&n.sHeight){var u=n.sx||0,c=n.sy||0;t.drawImage(i,u,c,n.sWidth,n.sHeight,o,a,s,h)}else if(n.sx&&n.sy){var f=s-(u=n.sx),d=h-(c=n.sy);t.drawImage(i,u,c,f,d,o,a,s,h)}else t.drawImage(i,o,a,s,h);null!=n.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new ru(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},Xs.inherits(Uc,Yc);var Vc=Uc,Xc=Rl.devicePixelRatio,qc=1e5,Zc=314159;function Qc(t){return parseInt(t,10)}var Kc=new ru(0,0,0,0),$c=new ru(0,0,0,0);var Jc=function(t,e,n){this.type="canvas";var r=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=Xs.extend({},n||{}),this.dpr=n.devicePixelRatio||Xc,this._singleCanvas=r,this.root=t;var i=t.style;i&&(i["-webkit-tap-highlight-color"]="transparent",i["-webkit-user-select"]=i["user-select"]=i["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var o=this._zlevelList=[],a=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,r){var s=t.width,h=t.height;null!=n.width&&(s=n.width),null!=n.height&&(h=n.height),this.dpr=n.devicePixelRatio||1,t.width=s*this.dpr,t.height=h*this.dpr,this._width=s,this._height=h;var l=new Ou(t,this,this.dpr);l.__builtin__=!0,l.initContext(),a[314159]=l,l.zlevel=Zc,o.push(Zc),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var u=this._domRoot=function(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);t.appendChild(u)}this._hoverlayer=null,this._hoverElements=[]};Jc.prototype={constructor:Jc,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var r=0;r<n.length;r++){var i=n[r],o=this._layers[i];if(!o.__builtin__&&o.refresh){var a=0===r?this._backgroundColor:null;o.refresh(a)}}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){var n=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});return n.__from=t,t.__hoverMir=n,e&&n.setStyle(e),this._hoverElements.push(n),n}},removeHover:function(t){var e=t.__hoverMir,n=this._hoverElements,r=Xs.indexOf(n,e);r>=0&&n.splice(r,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,n=0;n<e.length;n++){var r=e[n].__from;r&&(r.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){cu(t,this.storage.displayableSortFunc),n||(n=this._hoverlayer=this.getLayer(qc));var r={};n.ctx.save();for(var i=0;i<e;){var o=t[i],a=o.__from;a&&a.__zr?(i++,a.invisible||(o.transform=a.transform,o.invTransform=a.invTransform,o.__clipPaths=a.__clipPaths,this._doPaintEl(o,n,!0,r))):(t.splice(i,1),a.__hoverMir=null,e--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(qc)},_paintList:function(t,e,n){if(this._redrawId===n){e=e||!1,this._updateLayerStatus(t);var r=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!r){var i=this;Lu((function(){i._paintList(t,e,n)}))}}},_compositeManually:function(){var t=this.getLayer(Zc).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer((function(r){r.virtual&&t.drawImage(r.dom,0,0,e,n)}))},_doPaintList:function(t,e){for(var n=[],r=0;r<this._zlevelList.length;r++){var i=this._zlevelList[r];(s=this._layers[i]).__builtin__&&s!==this._hoverlayer&&(s.__dirty||e)&&n.push(s)}for(var o=!0,a=0;a<n.length;a++){var s,h=(s=n[a]).ctx,l={};h.save();var u=e?s.__startIndex:s.__drawIndex,c=!e&&s.incremental&&Date.now,f=c&&Date.now(),d=s.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(s.__startIndex===s.__endIndex)s.clear(!1,d);else if(u===s.__startIndex){var p=t[u];p.incremental&&p.notClear&&!e||s.clear(!1,d)}-1===u&&(console.error("For some unknown reason. drawIndex is -1"),u=s.__startIndex);for(var g=u;g<s.__endIndex;g++){var v=t[g];if(this._doPaintEl(v,s,e,l),v.__dirty=v.__dirtyText=!1,c)if(Date.now()-f>15)break}s.__drawIndex=g,s.__drawIndex<s.__endIndex&&(o=!1),l.prevElClipPaths&&h.restore(),h.restore()}return ws.wxa&&Xs.each(this._layers,(function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()})),o},_doPaintEl:function(t,e,n,r){var i=e.ctx,o=t.transform;if((e.__dirty||n)&&!t.invisible&&0!==t.style.opacity&&(!o||o[0]||o[3])&&(!t.culling||!function(t,e,n){return Kc.copy(t.getBoundingRect()),t.transform&&Kc.applyTransform(t.transform),$c.width=e,$c.height=n,!Kc.intersect($c)}(t,this._width,this._height))){var a=t.__clipPaths,s=r.prevElClipPaths;s&&!function(t,e){if(t===e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}(a,s)||(s&&(i.restore(),r.prevElClipPaths=null,r.prevEl=null),a&&(i.save(),function(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.setTransform(e),e.beginPath(),r.buildPath(e,r.shape),e.clip(),r.restoreTransform(e)}}(a,i),r.prevElClipPaths=a)),t.beforeBrush&&t.beforeBrush(i),t.brush(i,r.prevEl||null),r.prevEl=t,t.afterBrush&&t.afterBrush(i)}},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Zc);var n=this._layers[t];return n||((n=new Ou("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]&&Xs.merge(n,this._layerConfig[t],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},insertLayer:function(t,e){var n=this._layers,r=this._zlevelList,i=r.length,o=null,a=-1,s=this._domRoot;if(!n[t]&&function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(i>0&&t>r[0]){for(a=0;a<i-1&&!(r[a]<t&&r[a+1]>t);a++);o=n[r[a]]}if(r.splice(a+1,0,t),n[t]=e,!e.virtual)if(o){var h=o.dom;h.nextSibling?s.insertBefore(e.dom,h.nextSibling):s.appendChild(e.dom)}else s.firstChild?s.insertBefore(e.dom,s.firstChild):s.appendChild(e.dom)}},eachLayer:function(t,e){var n,r,i=this._zlevelList;for(r=0;r<i.length;r++)n=i[r],t.call(e,this._layers[n],n)},eachBuiltinLayer:function(t,e){var n,r,i,o=this._zlevelList;for(i=0;i<o.length;i++)r=o[i],(n=this._layers[r]).__builtin__&&t.call(e,n,r)},eachOtherLayer:function(t,e){var n,r,i,o=this._zlevelList;for(i=0;i<o.length;i++)r=o[i],(n=this._layers[r]).__builtin__||t.call(e,n,r)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(t){r&&(r.__endIndex!==t&&(r.__dirty=!0),r.__endIndex=t)}if(this.eachBuiltinLayer((function(t,e){t.__dirty=t.__used=!1})),this._singleCanvas)for(var n=1;n<t.length;n++){if((o=t[n]).zlevel!==t[n-1].zlevel||o.incremental){this._needsManuallyCompositing=!0;break}}var r=null,i=0;for(n=0;n<t.length;n++){var o,a,s=(o=t[n]).zlevel;o.incremental?((a=this.getLayer(s+.001,this._needsManuallyCompositing)).incremental=!0,i=1):a=this.getLayer(s+(i>0?.01:0),this._needsManuallyCompositing),a.__builtin__||zl("ZLevel "+s+" has been used by unkown layer "+a.id),a!==r&&(a.__used=!0,a.__startIndex!==n&&(a.__dirty=!0),a.__startIndex=n,a.incremental?a.__drawIndex=-1:a.__drawIndex=n,e(n),r=a),o.__dirty&&(a.__dirty=!0,a.incremental&&a.__drawIndex<0&&(a.__drawIndex=n))}e(n),this.eachBuiltinLayer((function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)}))},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var n=this._layerConfig;n[t]?Xs.merge(n[t],e,!0):n[t]=e;for(var r=0;r<this._zlevelList.length;r++){var i=this._zlevelList[r];if(i===t||i===t+.01){var o=this._layers[i];Xs.merge(o,n[t],!0)}}}},delLayer:function(t){var e=this._layers,n=this._zlevelList,r=e[t];r&&(r.dom.parentNode.removeChild(r.dom),delete e[t],n.splice(Xs.indexOf(n,t),1))},resize:function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var r=this._opts;if(null!=t&&(r.width=t),null!=e&&(r.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||e!==this._height){for(var i in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(i)&&this._layers[i].resize(t,e);Xs.each(this._progressiveLayers,(function(n){n.resize(t,e)})),this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(Zc).resize(t,e)}return this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new Ou("image",this,t.pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,r=e.dom.height,i=e.ctx;this.eachLayer((function(t){t.__builtin__?i.drawImage(t.dom,0,0,n,r):t.renderToCanvas&&(e.ctx.save(),t.renderToCanvas(e.ctx),e.ctx.restore())}))}else for(var o={},a=this.storage.getDisplayList(!0),s=0;s<a.length;s++){var h=a[s];this._doPaintEl(h,e,!0,o)}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],r=["clientWidth","clientHeight"][t],i=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[r]||Qc(s[n])||Qc(a.style[n]))-(Qc(s[i])||0)-(Qc(s[o])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),r=n.getContext("2d"),i=t.getBoundingRect(),o=t.style,a=o.shadowBlur*e,s=o.shadowOffsetX*e,h=o.shadowOffsetY*e,l=o.hasStroke()?o.lineWidth:0,u=Math.max(l/2,-s+a),c=Math.max(l/2,s+a),f=Math.max(l/2,-h+a),d=Math.max(l/2,h+a),p=i.width+u+c,g=i.height+f+d;n.width=p*e,n.height=g*e,r.scale(e,e),r.clearRect(0,0,p,g),r.dpr=e;var v={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[u-i.x,f-i.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(r);var _=new Vc({style:{x:0,y:0,image:n}});return null!=v.position&&(_.position=t.position=v.position),null!=v.rotation&&(_.rotation=t.rotation=v.rotation),null!=v.scale&&(_.scale=t.scale=v.scale),_}};var tf=Jc,ef=_h.Dispatcher,nf=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,ef.call(this)};nf.prototype={constructor:nf,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),n=0;n<e.length;n++)this.addClip(e[n])},removeClip:function(t){var e=Xs.indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),n=0;n<e.length;n++)this.removeClip(e[n]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,n=this._clips,r=n.length,i=[],o=[],a=0;a<r;a++){var s=n[a],h=s.step(t,e);h&&(i.push(h),o.push(s))}for(a=0;a<r;)n[a]._needsRemove?(n[a]=n[r-1],n.pop(),r--):a++;r=i.length;for(a=0;a<r;a++)o[a].fire(i[a]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var t=this;this._running=!0,Lu((function e(){t._running&&(Lu(e),!t._paused&&t._update())}))},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){var n=new Ol(t,(e=e||{}).loop,e.getter,e.setter);return this.addAnimator(n),n}},Xs.mixin(nf,ef);var rf,of,af=nf,sf=_h.addEventListener,hf=_h.removeEventListener,lf=_h.normalizeEvent,uf=_h.getNativeEvent,cf=ws.domSupported,ff=(of={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:rf=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:Xs.map(rf,(function(t){var e=t.replace("mouse","pointer");return of.hasOwnProperty(e)?e:t}))}),df=["mousemove","mouseup"],pf=["pointermove","pointerup"];function gf(t){return"mousewheel"===t&&ws.browser.firefox?"DOMMouseScroll":t}function vf(t){var e=t.pointerType;return"pen"===e||"touch"===e}function _f(t){t&&(t.zrByTouch=!0)}function yf(t,e){var n=!1;do{e=e&&e.parentNode}while(e&&9!==e.nodeType&&!(n=e===t.painterRoot));return n}function mf(t,e){this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}var xf=mf.prototype;xf.stopPropagation=xf.stopImmediatePropagation=xf.preventDefault=Xs.noop;var bf={mousedown:function(t){t=lf(this.dom,t),this._mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=lf(this.dom,t);var e=this._mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||Ef(this,!0),this.trigger("mousemove",t)},mouseup:function(t){t=lf(this.dom,t),Ef(this,!1),this.trigger("mouseup",t)},mouseout:function(t){t=lf(this.dom,t),this._pointerCapturing&&(t.zrEventControl="no_globalout");var e=t.toElement||t.relatedTarget;t.zrIsToLocalDOM=yf(this,e),this.trigger("mouseout",t)},touchstart:function(t){_f(t=lf(this.dom,t)),this._lastTouchMoment=new Date,this.handler.processGesture(t,"start"),bf.mousemove.call(this,t),bf.mousedown.call(this,t)},touchmove:function(t){_f(t=lf(this.dom,t)),this.handler.processGesture(t,"change"),bf.mousemove.call(this,t)},touchend:function(t){_f(t=lf(this.dom,t)),this.handler.processGesture(t,"end"),bf.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&bf.click.call(this,t)},pointerdown:function(t){bf.mousedown.call(this,t)},pointermove:function(t){vf(t)||bf.mousemove.call(this,t)},pointerup:function(t){bf.mouseup.call(this,t)},pointerout:function(t){vf(t)||bf.mouseout.call(this,t)}};Xs.each(["click","mousewheel","dblclick","contextmenu"],(function(t){bf[t]=function(e){e=lf(this.dom,e),this.trigger(t,e)}}));var wf={pointermove:function(t){vf(t)||wf.mousemove.call(this,t)},pointerup:function(t){wf.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this._pointerCapturing;Ef(this,!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function Sf(t,e){var n=e.domHandlers;ws.pointerEventsSupported?Xs.each(ff.pointer,(function(r){kf(e,r,(function(e){n[r].call(t,e)}))})):(ws.touchEventsSupported&&Xs.each(ff.touch,(function(r){kf(e,r,(function(i){n[r].call(t,i),function(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout((function(){t.touching=!1,t.touchTimer=null}),700)}(e)}))})),Xs.each(ff.mouse,(function(r){kf(e,r,(function(i){i=uf(i),e.touching||n[r].call(t,i)}))})))}function Mf(t,e){function n(n){kf(e,n,(function(r){r=uf(r),yf(t,r.target)||(r=function(t,e){return lf(t.dom,new mf(t,e),!0)}(t,r),e.domHandlers[n].call(t,r))}),{capture:!0})}ws.pointerEventsSupported?Xs.each(pf,n):ws.touchEventsSupported||Xs.each(df,n)}function kf(t,e,n,r){t.mounted[e]=n,t.listenerOpts[e]=r,sf(t.domTarget,gf(e),n,r)}function Tf(t){var e=t.mounted;for(var n in e)e.hasOwnProperty(n)&&hf(t.domTarget,gf(n),e[n],t.listenerOpts[n]);t.mounted={}}function Ef(t,e){if(t._mayPointerCapture=null,cf&&t._pointerCapturing^e){t._pointerCapturing=e;var n=t._globalHandlerScope;e?Mf(t,n):Tf(n)}}function Pf(t,e){this.domTarget=t,this.domHandlers=e,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function Cf(t,e){ah.call(this),this.dom=t,this.painterRoot=e,this._localHandlerScope=new Pf(t,bf),cf&&(this._globalHandlerScope=new Pf(document,wf)),this._pointerCapturing=!1,this._mayPointerCapture=null,Sf(this,this._localHandlerScope)}var Df=Cf.prototype;Df.dispose=function(){Tf(this._localHandlerScope),cf&&Tf(this._globalHandlerScope)},Df.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},Xs.mixin(Cf,ah);var Af=Cf,If=!ws.canvasSupported,Of={canvas:tf},Lf={};var Rf=function(t,e,n){n=n||{},this.dom=e,this.id=t;var r=this,i=new pu,o=n.renderer;if(If){if(!Of.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");o="vml"}else o&&Of[o]||(o="canvas");var a=new Of[o](e,i,n,t);this.storage=i,this.painter=a;var s=ws.node||ws.worker?null:new Af(a.getViewportRoot(),a.root);this.handler=new Ch(i,a,s,a.root),this.animation=new af({stage:{update:Xs.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var h=i.delFromStorage,l=i.addToStorage;i.delFromStorage=function(t){h.call(i,t),t&&t.removeSelfFromZr(r)},i.addToStorage=function(t){l.call(i,t),t.addSelfToZr(r)}};Rf.prototype={constructor:Rf,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){var n=this.painter.addHover(t,e);return this.refreshHover(),n}},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,n){this.handler.on(t,e,n)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(t){delete Lf[t]}(this.id)}};var zf={version:"4.2.0",init:function(t,e){var n=new Rf(bs(),t,e);return Lf[n.id]=n,n},dispose:function(t){if(t)t.dispose();else{for(var e in Lf)Lf.hasOwnProperty(e)&&Lf[e].dispose();Lf={}}return this},getInstance:function(t){return Lf[t]},registerPainter:function(t,e){Of[t]=e}},Nf=Js.create,Ff=Js.distSquare,jf=Math.pow,Bf=Math.sqrt,Hf=1e-8,Wf=1e-4,Gf=Bf(3),Yf=1/3,Uf=Nf(),Vf=Nf(),Xf=Nf();function qf(t){return t>-1e-8&&t<Hf}function Zf(t){return t>Hf||t<-1e-8}function Qf(t,e,n,r,i){var o=1-i;return o*o*(o*t+3*i*e)+i*i*(i*r+3*o*n)}function Kf(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}var $f={cubicAt:Qf,cubicDerivativeAt:function(t,e,n,r,i){var o=1-i;return 3*(((e-t)*o+2*(n-e)*i)*o+(r-n)*i*i)},cubicRootAt:function(t,e,n,r,i,o){var a=r+3*(e-n)-t,s=3*(n-2*e+t),h=3*(e-t),l=t-i,u=s*s-3*a*h,c=s*h-9*a*l,f=h*h-3*s*l,d=0;if(qf(u)&&qf(c)){if(qf(s))o[0]=0;else(M=-h/s)>=0&&M<=1&&(o[d++]=M)}else{var p=c*c-4*u*f;if(qf(p)){var g=c/u,v=-g/2;(M=-s/a+g)>=0&&M<=1&&(o[d++]=M),v>=0&&v<=1&&(o[d++]=v)}else if(p>0){var _=Bf(p),y=u*s+1.5*a*(-c+_),m=u*s+1.5*a*(-c-_);(M=(-s-((y=y<0?-jf(-y,Yf):jf(y,Yf))+(m=m<0?-jf(-m,Yf):jf(m,Yf))))/(3*a))>=0&&M<=1&&(o[d++]=M)}else{var x=(2*u*s-3*a*c)/(2*Bf(u*u*u)),b=Math.acos(x)/3,w=Bf(u),S=Math.cos(b),M=(-s-2*w*S)/(3*a),k=(v=(-s+w*(S+Gf*Math.sin(b)))/(3*a),(-s+w*(S-Gf*Math.sin(b)))/(3*a));M>=0&&M<=1&&(o[d++]=M),v>=0&&v<=1&&(o[d++]=v),k>=0&&k<=1&&(o[d++]=k)}}return d},cubicExtrema:function(t,e,n,r,i){var o=6*n-12*e+6*t,a=9*e+3*r-3*t-9*n,s=3*e-3*t,h=0;if(qf(a)){if(Zf(o))(u=-s/o)>=0&&u<=1&&(i[h++]=u)}else{var l=o*o-4*a*s;if(qf(l))i[0]=-o/(2*a);else if(l>0){var u,c=Bf(l),f=(-o-c)/(2*a);(u=(-o+c)/(2*a))>=0&&u<=1&&(i[h++]=u),f>=0&&f<=1&&(i[h++]=f)}}return h},cubicSubdivide:function(t,e,n,r,i,o){var a=(e-t)*i+t,s=(n-e)*i+e,h=(r-n)*i+n,l=(s-a)*i+a,u=(h-s)*i+s,c=(u-l)*i+l;o[0]=t,o[1]=a,o[2]=l,o[3]=c,o[4]=c,o[5]=u,o[6]=h,o[7]=r},cubicProjectPoint:function(t,e,n,r,i,o,a,s,h,l,u){var c,f,d,p,g,v=.005,_=1/0;Uf[0]=h,Uf[1]=l;for(var y=0;y<1;y+=.05)Vf[0]=Qf(t,n,i,a,y),Vf[1]=Qf(e,r,o,s,y),(p=Ff(Uf,Vf))<_&&(c=y,_=p);_=1/0;for(var m=0;m<32&&!(v<Wf);m++)f=c-v,d=c+v,Vf[0]=Qf(t,n,i,a,f),Vf[1]=Qf(e,r,o,s,f),p=Ff(Vf,Uf),f>=0&&p<_?(c=f,_=p):(Xf[0]=Qf(t,n,i,a,d),Xf[1]=Qf(e,r,o,s,d),g=Ff(Xf,Uf),d<=1&&g<_?(c=d,_=g):v*=.5);return u&&(u[0]=Qf(t,n,i,a,c),u[1]=Qf(e,r,o,s,c)),Bf(_)},quadraticAt:Kf,quadraticDerivativeAt:function(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))},quadraticRootAt:function(t,e,n,r,i){var o=t-2*e+n,a=2*(e-t),s=t-r,h=0;if(qf(o)){if(Zf(a))(u=-s/a)>=0&&u<=1&&(i[h++]=u)}else{var l=a*a-4*o*s;if(qf(l))(u=-a/(2*o))>=0&&u<=1&&(i[h++]=u);else if(l>0){var u,c=Bf(l),f=(-a-c)/(2*o);(u=(-a+c)/(2*o))>=0&&u<=1&&(i[h++]=u),f>=0&&f<=1&&(i[h++]=f)}}return h},quadraticExtremum:function(t,e,n){var r=t+n-2*e;return 0===r?.5:(t-e)/r},quadraticSubdivide:function(t,e,n,r,i){var o=(e-t)*r+t,a=(n-e)*r+e,s=(a-o)*r+o;i[0]=t,i[1]=o,i[2]=s,i[3]=s,i[4]=a,i[5]=n},quadraticProjectPoint:function(t,e,n,r,i,o,a,s,h){var l,u=.005,c=1/0;Uf[0]=a,Uf[1]=s;for(var f=0;f<1;f+=.05){Vf[0]=Kf(t,n,i,f),Vf[1]=Kf(e,r,o,f),(v=Ff(Uf,Vf))<c&&(l=f,c=v)}c=1/0;for(var d=0;d<32&&!(u<Wf);d++){var p=l-u,g=l+u;Vf[0]=Kf(t,n,i,p),Vf[1]=Kf(e,r,o,p);var v=Ff(Vf,Uf);if(p>=0&&v<c)l=p,c=v;else{Xf[0]=Kf(t,n,i,g),Xf[1]=Kf(e,r,o,g);var _=Ff(Xf,Uf);g<=1&&_<c?(l=g,c=_):u*=.5}}return h&&(h[0]=Kf(t,n,i,l),h[1]=Kf(e,r,o,l)),Bf(c)}},Jf=Math.min,td=Math.max,ed=Math.sin,nd=Math.cos,rd=2*Math.PI,id=Js.create(),od=Js.create(),ad=Js.create();var sd=[],hd=[];var ld={fromPoints:function(t,e,n){if(0!==t.length){var r,i=t[0],o=i[0],a=i[0],s=i[1],h=i[1];for(r=1;r<t.length;r++)i=t[r],o=Jf(o,i[0]),a=td(a,i[0]),s=Jf(s,i[1]),h=td(h,i[1]);e[0]=o,e[1]=s,n[0]=a,n[1]=h}},fromLine:function(t,e,n,r,i,o){i[0]=Jf(t,n),i[1]=Jf(e,r),o[0]=td(t,n),o[1]=td(e,r)},fromCubic:function(t,e,n,r,i,o,a,s,h,l){var u,c=$f.cubicExtrema,f=$f.cubicAt,d=c(t,n,i,a,sd);for(h[0]=1/0,h[1]=1/0,l[0]=-1/0,l[1]=-1/0,u=0;u<d;u++){var p=f(t,n,i,a,sd[u]);h[0]=Jf(p,h[0]),l[0]=td(p,l[0])}for(d=c(e,r,o,s,hd),u=0;u<d;u++){var g=f(e,r,o,s,hd[u]);h[1]=Jf(g,h[1]),l[1]=td(g,l[1])}h[0]=Jf(t,h[0]),l[0]=td(t,l[0]),h[0]=Jf(a,h[0]),l[0]=td(a,l[0]),h[1]=Jf(e,h[1]),l[1]=td(e,l[1]),h[1]=Jf(s,h[1]),l[1]=td(s,l[1])},fromQuadratic:function(t,e,n,r,i,o,a,s){var h=$f.quadraticExtremum,l=$f.quadraticAt,u=td(Jf(h(t,n,i),1),0),c=td(Jf(h(e,r,o),1),0),f=l(t,n,i,u),d=l(e,r,o,c);a[0]=Jf(t,i,f),a[1]=Jf(e,o,d),s[0]=td(t,i,f),s[1]=td(e,o,d)},fromArc:function(t,e,n,r,i,o,a,s,h){var l=Js.min,u=Js.max,c=Math.abs(i-o);if(c%rd<1e-4&&c>1e-4)return s[0]=t-n,s[1]=e-r,h[0]=t+n,void(h[1]=e+r);if(id[0]=nd(i)*n+t,id[1]=ed(i)*r+e,od[0]=nd(o)*n+t,od[1]=ed(o)*r+e,l(s,id,od),u(h,id,od),(i%=rd)<0&&(i+=rd),(o%=rd)<0&&(o+=rd),i>o&&!a?o+=rd:i<o&&a&&(i+=rd),a){var f=o;o=i,i=f}for(var d=0;d<o;d+=Math.PI/2)d>i&&(ad[0]=nd(d)*n+t,ad[1]=ed(d)*r+e,l(s,ad,s),u(h,ad,h))}},ud=Rl.devicePixelRatio,cd={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},fd=[],dd=[],pd=[],gd=[],vd=Math.min,_d=Math.max,yd=Math.cos,md=Math.sin,xd=Math.sqrt,bd=Math.abs,wd="undefined"!=typeof Float32Array,Sd=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};Sd.prototype={constructor:Sd,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e,n){n=n||0,this._ux=bd(n/ud/t)||0,this._uy=bd(n/ud/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return this._ctx=t,t&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(cd.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var n=bd(t-this._xi)>this._ux||bd(e-this._yi)>this._uy||this._len<5;return this.addData(cd.L,t,e),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),n&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,n,r,i,o){return this.addData(cd.C,t,e,n,r,i,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,n,r,i,o):this._ctx.bezierCurveTo(t,e,n,r,i,o)),this._xi=i,this._yi=o,this},quadraticCurveTo:function(t,e,n,r){return this.addData(cd.Q,t,e,n,r),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,n,r):this._ctx.quadraticCurveTo(t,e,n,r)),this._xi=n,this._yi=r,this},arc:function(t,e,n,r,i,o){return this.addData(cd.A,t,e,n,n,r,i-r,0,o?0:1),this._ctx&&this._ctx.arc(t,e,n,r,i,o),this._xi=yd(i)*n+t,this._yi=md(i)*n+e,this},arcTo:function(t,e,n,r,i){return this._ctx&&this._ctx.arcTo(t,e,n,r,i),this},rect:function(t,e,n,r){return this._ctx&&this._ctx.rect(t,e,n,r),this.addData(cd.R,t,e,n,r),this},closePath:function(){this.addData(cd.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length===e||!wd||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,r=this._len,i=0;i<e;i++)n+=t[i].len();wd&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+n));for(i=0;i<e;i++)for(var o=t[i].data,a=0;a<o.length;a++)this.data[r++]=o[a];this._len=r},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var n=0;n<arguments.length;n++)e[this._len++]=arguments[n];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var n,r,i=this._dashSum,o=this._dashOffset,a=this._lineDash,s=this._ctx,h=this._xi,l=this._yi,u=t-h,c=e-l,f=xd(u*u+c*c),d=h,p=l,g=a.length;for(o<0&&(o=i+o),d-=(o%=i)*(u/=f),p-=o*(c/=f);u>0&&d<=t||u<0&&d>=t||0===u&&(c>0&&p<=e||c<0&&p>=e);)d+=u*(n=a[r=this._dashIdx]),p+=c*n,this._dashIdx=(r+1)%g,u>0&&d<h||u<0&&d>h||c>0&&p<l||c<0&&p>l||s[r%2?"moveTo":"lineTo"](u>=0?vd(d,t):_d(d,t),c>=0?vd(p,e):_d(p,e));u=d-t,c=p-e,this._dashOffset=-xd(u*u+c*c)},_dashedBezierTo:function(t,e,n,r,i,o){var a,s,h,l,u,c=this._dashSum,f=this._dashOffset,d=this._lineDash,p=this._ctx,g=this._xi,v=this._yi,_=$f.cubicAt,y=0,m=this._dashIdx,x=d.length,b=0;for(f<0&&(f=c+f),f%=c,a=0;a<1;a+=.1)s=_(g,t,n,i,a+.1)-_(g,t,n,i,a),h=_(v,e,r,o,a+.1)-_(v,e,r,o,a),y+=xd(s*s+h*h);for(;m<x&&!((b+=d[m])>f);m++);for(a=(b-f)/y;a<=1;)l=_(g,t,n,i,a),u=_(v,e,r,o,a),m%2?p.moveTo(l,u):p.lineTo(l,u),a+=d[m]/y,m=(m+1)%x;m%2!=0&&p.lineTo(i,o),s=i-l,h=o-u,this._dashOffset=-xd(s*s+h*h)},_dashedQuadraticTo:function(t,e,n,r){var i=n,o=r;n=(n+2*t)/3,r=(r+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,n,r,i,o)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,wd&&(this.data=new Float32Array(t)))},getBoundingRect:function(){fd[0]=fd[1]=pd[0]=pd[1]=Number.MAX_VALUE,dd[0]=dd[1]=gd[0]=gd[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,n=0,r=0,i=0,o=0;o<t.length;){var a=t[o++];switch(1===o&&(r=e=t[o],i=n=t[o+1]),a){case cd.M:e=r=t[o++],n=i=t[o++],pd[0]=r,pd[1]=i,gd[0]=r,gd[1]=i;break;case cd.L:ld.fromLine(e,n,t[o],t[o+1],pd,gd),e=t[o++],n=t[o++];break;case cd.C:ld.fromCubic(e,n,t[o++],t[o++],t[o++],t[o++],t[o],t[o+1],pd,gd),e=t[o++],n=t[o++];break;case cd.Q:ld.fromQuadratic(e,n,t[o++],t[o++],t[o],t[o+1],pd,gd),e=t[o++],n=t[o++];break;case cd.A:var s=t[o++],h=t[o++],l=t[o++],u=t[o++],c=t[o++],f=t[o++]+c;o+=1;var d=1-t[o++];1===o&&(r=yd(c)*l+s,i=md(c)*u+h),ld.fromArc(s,h,l,u,c,f,d,pd,gd),e=yd(f)*l+s,n=md(f)*u+h;break;case cd.R:r=e=t[o++],i=n=t[o++];var p=t[o++],g=t[o++];ld.fromLine(r,i,r+p,i+g,pd,gd);break;case cd.Z:e=r,n=i}Js.min(fd,fd,pd),Js.max(dd,dd,gd)}return 0===o&&(fd[0]=fd[1]=dd[0]=dd[1]=0),new ru(fd[0],fd[1],dd[0]-fd[0],dd[1]-fd[1])},rebuildPath:function(t){for(var e,n,r,i,o,a,s=this.data,h=this._ux,l=this._uy,u=this._len,c=0;c<u;){var f=s[c++];switch(1===c&&(e=r=s[c],n=i=s[c+1]),f){case cd.M:e=r=s[c++],n=i=s[c++],t.moveTo(r,i);break;case cd.L:o=s[c++],a=s[c++],(bd(o-r)>h||bd(a-i)>l||c===u-1)&&(t.lineTo(o,a),r=o,i=a);break;case cd.C:t.bezierCurveTo(s[c++],s[c++],s[c++],s[c++],s[c++],s[c++]),r=s[c-2],i=s[c-1];break;case cd.Q:t.quadraticCurveTo(s[c++],s[c++],s[c++],s[c++]),r=s[c-2],i=s[c-1];break;case cd.A:var d=s[c++],p=s[c++],g=s[c++],v=s[c++],_=s[c++],y=s[c++],m=s[c++],x=s[c++],b=g>v?g:v,w=g>v?1:g/v,S=g>v?v/g:1,M=_+y;Math.abs(g-v)>.001?(t.translate(d,p),t.rotate(m),t.scale(w,S),t.arc(0,0,b,_,M,1-x),t.scale(1/w,1/S),t.rotate(-m),t.translate(-d,-p)):t.arc(d,p,b,_,M,1-x),1===c&&(e=yd(_)*g+d,n=md(_)*v+p),r=yd(M)*g+d,i=md(M)*v+p;break;case cd.R:e=r=s[c],n=i=s[c+1],t.rect(s[c++],s[c++],s[c++],s[c++]);break;case cd.Z:t.closePath(),r=e,i=n}}}},Sd.CMD=cd;var Md=Sd;var kd={containStroke:function(t,e,n,r,i,o,a){if(0===i)return!1;var s=i,h=0;if(a>e+s&&a>r+s||a<e-s&&a<r-s||o>t+s&&o>n+s||o<t-s&&o<n-s)return!1;if(t===n)return Math.abs(o-t)<=s/2;var l=(h=(e-r)/(t-n))*o-a+(t*r-n*e)/(t-n);return l*l/(h*h+1)<=s/2*s/2}};var Td={containStroke:function(t,e,n,r,i,o,a,s,h,l,u){if(0===h)return!1;var c=h;return!(u>e+c&&u>r+c&&u>o+c&&u>s+c||u<e-c&&u<r-c&&u<o-c&&u<s-c||l>t+c&&l>n+c&&l>i+c&&l>a+c||l<t-c&&l<n-c&&l<i-c&&l<a-c)&&$f.cubicProjectPoint(t,e,n,r,i,o,a,s,l,u,null)<=c/2}},Ed=$f.quadraticProjectPoint;var Pd={containStroke:function(t,e,n,r,i,o,a,s,h){if(0===a)return!1;var l=a;return!(h>e+l&&h>r+l&&h>o+l||h<e-l&&h<r-l&&h<o-l||s>t+l&&s>n+l&&s>i+l||s<t-l&&s<n-l&&s<i-l)&&Ed(t,e,n,r,i,o,s,h,null)<=l/2}},Cd=2*Math.PI;var Dd={normalizeRadian:function(t){return(t%=Cd)<0&&(t+=Cd),t}},Ad=Dd.normalizeRadian,Id=2*Math.PI;var Od={containStroke:function(t,e,n,r,i,o,a,s,h){if(0===a)return!1;var l=a;s-=t,h-=e;var u=Math.sqrt(s*s+h*h);if(u-l>n||u+l<n)return!1;if(Math.abs(r-i)%Id<1e-4)return!0;if(o){var c=r;r=Ad(i),i=Ad(c)}else r=Ad(r),i=Ad(i);r>i&&(i+=Id);var f=Math.atan2(h,s);return f<0&&(f+=Id),f>=r&&f<=i||f+Id>=r&&f+Id<=i}};var Ld=function(t,e,n,r,i,o){if(o>e&&o>r||o<e&&o<r)return 0;if(r===e)return 0;var a=r<e?1:-1,s=(o-e)/(r-e);1!==s&&0!==s||(a=r<e?.5:-.5);var h=s*(n-t)+t;return h===i?1/0:h>i?a:0},Rd=Dd.normalizeRadian,zd=Md.CMD,Nd=2*Math.PI;var Fd=[-1,-1,-1],jd=[-1,-1];function Bd(t,e,n,r,i,o,a,s,h,l){if(l>e&&l>r&&l>o&&l>s||l<e&&l<r&&l<o&&l<s)return 0;var u,c=$f.cubicRootAt(e,r,o,s,l,Fd);if(0===c)return 0;for(var f,d,p=0,g=-1,v=0;v<c;v++){var _=Fd[v],y=0===_||1===_?.5:1;$f.cubicAt(t,n,i,a,_)<h||(g<0&&(g=$f.cubicExtrema(e,r,o,s,jd),jd[1]<jd[0]&&g>1&&(u=void 0,u=jd[0],jd[0]=jd[1],jd[1]=u),f=$f.cubicAt(e,r,o,s,jd[0]),g>1&&(d=$f.cubicAt(e,r,o,s,jd[1]))),2===g?_<jd[0]?p+=f<e?y:-y:_<jd[1]?p+=d<f?y:-y:p+=s<d?y:-y:_<jd[0]?p+=f<e?y:-y:p+=s<f?y:-y)}return p}function Hd(t,e,n,r,i,o,a,s){if(s>e&&s>r&&s>o||s<e&&s<r&&s<o)return 0;var h=$f.quadraticRootAt(e,r,o,s,Fd);if(0===h)return 0;var l=$f.quadraticExtremum(e,r,o);if(l>=0&&l<=1){for(var u=0,c=$f.quadraticAt(e,r,o,l),f=0;f<h;f++){var d=0===Fd[f]||1===Fd[f]?.5:1;$f.quadraticAt(t,n,i,Fd[f])<a||(Fd[f]<l?u+=c<e?d:-d:u+=o<c?d:-d)}return u}d=0===Fd[0]||1===Fd[0]?.5:1;return $f.quadraticAt(t,n,i,Fd[0])<a?0:o<e?d:-d}function Wd(t,e,n,r,i,o,a,s){if((s-=e)>n||s<-n)return 0;var h=Math.sqrt(n*n-s*s);Fd[0]=-h,Fd[1]=h;var l=Math.abs(r-i);if(l<1e-4)return 0;if(l%Nd<1e-4){r=0,i=Nd;var u=o?1:-1;return a>=Fd[0]+t&&a<=Fd[1]+t?u:0}if(o){h=r;r=Rd(i),i=Rd(h)}else r=Rd(r),i=Rd(i);r>i&&(i+=Nd);for(var c=0,f=0;f<2;f++){var d=Fd[f];if(d+t>a){var p=Math.atan2(s,d);u=o?1:-1;p<0&&(p=Nd+p),(p>=r&&p<=i||p+Nd>=r&&p+Nd<=i)&&(p>Math.PI/2&&p<1.5*Math.PI&&(u=-u),c+=u)}}return c}function Gd(t,e,n,r,i){for(var o,a,s=0,h=0,l=0,u=0,c=0,f=0;f<t.length;){var d=t[f++];switch(d===zd.M&&f>1&&(n||(s+=Ld(h,l,u,c,r,i))),1===f&&(u=h=t[f],c=l=t[f+1]),d){case zd.M:h=u=t[f++],l=c=t[f++];break;case zd.L:if(n){if(kd.containStroke(h,l,t[f],t[f+1],e,r,i))return!0}else s+=Ld(h,l,t[f],t[f+1],r,i)||0;h=t[f++],l=t[f++];break;case zd.C:if(n){if(Td.containStroke(h,l,t[f++],t[f++],t[f++],t[f++],t[f],t[f+1],e,r,i))return!0}else s+=Bd(h,l,t[f++],t[f++],t[f++],t[f++],t[f],t[f+1],r,i)||0;h=t[f++],l=t[f++];break;case zd.Q:if(n){if(Pd.containStroke(h,l,t[f++],t[f++],t[f],t[f+1],e,r,i))return!0}else s+=Hd(h,l,t[f++],t[f++],t[f],t[f+1],r,i)||0;h=t[f++],l=t[f++];break;case zd.A:var p=t[f++],g=t[f++],v=t[f++],_=t[f++],y=t[f++],m=t[f++];f+=1;var x=1-t[f++],b=Math.cos(y)*v+p,w=Math.sin(y)*_+g;f>1?s+=Ld(h,l,b,w,r,i):(u=b,c=w);var S=(r-p)*_/v+p;if(n){if(Od.containStroke(p,g,_,y,y+m,x,e,S,i))return!0}else s+=Wd(p,g,_,y,y+m,x,S,i);h=Math.cos(y+m)*v+p,l=Math.sin(y+m)*_+g;break;case zd.R:u=h=t[f++],c=l=t[f++];b=u+t[f++],w=c+t[f++];if(n){if(kd.containStroke(u,c,b,c,e,r,i)||kd.containStroke(b,c,b,w,e,r,i)||kd.containStroke(b,w,u,w,e,r,i)||kd.containStroke(u,w,u,c,e,r,i))return!0}else s+=Ld(b,c,b,w,r,i),s+=Ld(u,w,u,c,r,i);break;case zd.Z:if(n){if(kd.containStroke(h,l,u,c,e,r,i))return!0}else s+=Ld(h,l,u,c,r,i);h=u,l=c}}return n||(o=l,a=c,Math.abs(o-a)<1e-4)||(s+=Ld(h,l,u,c,r,i)||0),0!==s}var Yd={contain:function(t,e,n){return Gd(t,0,!1,e,n)},containStroke:function(t,e,n,r){return Gd(t,e,!0,n,r)}},Ud=Pu.prototype.getCanvasPattern,Vd=Math.abs,Xd=new Md(!0);function qd(t){Yc.call(this,t),this.path=null}qd.prototype={constructor:qd,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(t,e){var n,r=this.style,i=this.path||Xd,o=r.hasStroke(),a=r.hasFill(),s=r.fill,h=r.stroke,l=a&&!!s.colorStops,u=o&&!!h.colorStops,c=a&&!!s.image,f=o&&!!h.image;(r.bind(t,this,e),this.setTransform(t),this.__dirty)&&(l&&(n=n||this.getBoundingRect(),this._fillGradient=r.getGradient(t,s,n)),u&&(n=n||this.getBoundingRect(),this._strokeGradient=r.getGradient(t,h,n)));l?t.fillStyle=this._fillGradient:c&&(t.fillStyle=Ud.call(s,t)),u?t.strokeStyle=this._strokeGradient:f&&(t.strokeStyle=Ud.call(h,t));var d=r.lineDash,p=r.lineDashOffset,g=!!t.setLineDash,v=this.getGlobalScale();if(i.setScale(v[0],v[1],this.segmentIgnoreThreshold),this.__dirtyPath||d&&!g&&o?(i.beginPath(t),d&&!g&&(i.setLineDash(d),i.setLineDashOffset(p)),this.buildPath(i,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),a)if(null!=r.fillOpacity){var _=t.globalAlpha;t.globalAlpha=r.fillOpacity*r.opacity,i.fill(t),t.globalAlpha=_}else i.fill(t);if(d&&g&&(t.setLineDash(d),t.lineDashOffset=p),o)if(null!=r.strokeOpacity){_=t.globalAlpha;t.globalAlpha=r.strokeOpacity*r.opacity,i.stroke(t),t.globalAlpha=_}else i.stroke(t);d&&g&&t.setLineDash([]),null!=r.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPath:function(t,e,n){},createPathProxy:function(){this.path=new Md},getBoundingRect:function(){var t=this._rect,e=this.style,n=!t;if(n){var r=this.path;r||(r=this.path=new Md),this.__dirtyPath&&(r.beginPath(),this.buildPath(r,this.shape,!1)),t=r.getBoundingRect()}if(this._rect=t,e.hasStroke()){var i=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){i.copy(t);var o=e.lineWidth,a=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(o=Math.max(o,this.strokeContainThreshold||4)),a>1e-10&&(i.width+=o/a,i.height+=o/a,i.x-=o/a/2,i.y-=o/a/2)}return i}return t},contain:function(t,e){var n=this.transformCoordToLocal(t,e),r=this.getBoundingRect(),i=this.style;if(t=n[0],e=n[1],r.contain(t,e)){var o=this.path.data;if(i.hasStroke()){var a=i.lineWidth,s=i.strokeNoScale?this.getLineScale():1;if(s>1e-10&&(i.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),Yd.containStroke(o,a/s,t,e)))return!0}if(i.hasFill())return Yd.contain(o,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):Yc.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var n=this.shape;if(n){if(Xs.isObject(t))for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);else n[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&Vd(t[0]-1)>1e-10&&Vd(t[3]-1)>1e-10?Math.sqrt(Vd(t[0]*t[3]-t[2]*t[1])):1}},qd.extend=function(t){var e=function(e){qd.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var n=t.shape;if(n){this.shape=this.shape||{};var r=this.shape;for(var i in n)!r.hasOwnProperty(i)&&n.hasOwnProperty(i)&&(r[i]=n[i])}t.init&&t.init.call(this,e)};for(var n in Xs.inherits(e,qd),t)"style"!==n&&"shape"!==n&&(e.prototype[n]=t[n]);return e},Xs.inherits(qd,Yc);var Zd=qd,Qd=Js.applyTransform,Kd=Md.CMD,$d=[[],[],[]],Jd=Math.sqrt,tp=Math.atan2;var ep=function(t,e){var n,r,i,o,a,s=t.data,h=Kd.M,l=Kd.C,u=Kd.L,c=Kd.R,f=Kd.A,d=Kd.Q;for(i=0,o=0;i<s.length;){switch(n=s[i++],o=i,r=0,n){case h:case u:r=1;break;case l:r=3;break;case d:r=2;break;case f:var p=e[4],g=e[5],v=Jd(e[0]*e[0]+e[1]*e[1]),_=Jd(e[2]*e[2]+e[3]*e[3]),y=tp(-e[1]/_,e[0]/v);s[i]*=v,s[i++]+=p,s[i]*=_,s[i++]+=g,s[i++]*=v,s[i++]*=_,s[i++]+=y,s[i++]+=y,o=i+=2;break;case c:m[0]=s[i++],m[1]=s[i++],Qd(m,m,e),s[o++]=m[0],s[o++]=m[1],m[0]+=s[i++],m[1]+=s[i++],Qd(m,m,e),s[o++]=m[0],s[o++]=m[1]}for(a=0;a<r;a++){var m;(m=$d[a])[0]=s[i++],m[1]=s[i++],Qd(m,m,e),s[o++]=m[0],s[o++]=m[1]}}},np=Math.sqrt,rp=Math.sin,ip=Math.cos,op=Math.PI,ap=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},sp=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(ap(t)*ap(e))},hp=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(sp(t,e))};function lp(t,e,n,r,i,o,a,s,h,l,u){var c=h*(op/180),f=ip(c)*(t-n)/2+rp(c)*(e-r)/2,d=-1*rp(c)*(t-n)/2+ip(c)*(e-r)/2,p=f*f/(a*a)+d*d/(s*s);p>1&&(a*=np(p),s*=np(p));var g=(i===o?-1:1)*np((a*a*(s*s)-a*a*(d*d)-s*s*(f*f))/(a*a*(d*d)+s*s*(f*f)))||0,v=g*a*d/s,_=g*-s*f/a,y=(t+n)/2+ip(c)*v-rp(c)*_,m=(e+r)/2+rp(c)*v+ip(c)*_,x=hp([1,0],[(f-v)/a,(d-_)/s]),b=[(f-v)/a,(d-_)/s],w=[(-1*f-v)/a,(-1*d-_)/s],S=hp(b,w);sp(b,w)<=-1&&(S=op),sp(b,w)>=1&&(S=0),0===o&&S>0&&(S-=2*op),1===o&&S<0&&(S+=2*op),u.addData(l,y,m,a,s,x,S,c,o)}var up=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,cp=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function fp(t,e){var n=function(t){if(!t)return new Md;for(var e,n=0,r=0,i=n,o=r,a=new Md,s=Md.CMD,h=t.match(up),l=0;l<h.length;l++){for(var u,c=h[l],f=c.charAt(0),d=c.match(cp)||[],p=d.length,g=0;g<p;g++)d[g]=parseFloat(d[g]);for(var v=0;v<p;){var _,y,m,x,b,w,S,M=n,k=r;switch(f){case"l":n+=d[v++],r+=d[v++],u=s.L,a.addData(u,n,r);break;case"L":n=d[v++],r=d[v++],u=s.L,a.addData(u,n,r);break;case"m":n+=d[v++],r+=d[v++],u=s.M,a.addData(u,n,r),i=n,o=r,f="l";break;case"M":n=d[v++],r=d[v++],u=s.M,a.addData(u,n,r),i=n,o=r,f="L";break;case"h":n+=d[v++],u=s.L,a.addData(u,n,r);break;case"H":n=d[v++],u=s.L,a.addData(u,n,r);break;case"v":r+=d[v++],u=s.L,a.addData(u,n,r);break;case"V":r=d[v++],u=s.L,a.addData(u,n,r);break;case"C":u=s.C,a.addData(u,d[v++],d[v++],d[v++],d[v++],d[v++],d[v++]),n=d[v-2],r=d[v-1];break;case"c":u=s.C,a.addData(u,d[v++]+n,d[v++]+r,d[v++]+n,d[v++]+r,d[v++]+n,d[v++]+r),n+=d[v-2],r+=d[v-1];break;case"S":_=n,y=r;var T=a.len(),E=a.data;e===s.C&&(_+=n-E[T-4],y+=r-E[T-3]),u=s.C,M=d[v++],k=d[v++],n=d[v++],r=d[v++],a.addData(u,_,y,M,k,n,r);break;case"s":_=n,y=r,T=a.len(),E=a.data,e===s.C&&(_+=n-E[T-4],y+=r-E[T-3]),u=s.C,M=n+d[v++],k=r+d[v++],n+=d[v++],r+=d[v++],a.addData(u,_,y,M,k,n,r);break;case"Q":M=d[v++],k=d[v++],n=d[v++],r=d[v++],u=s.Q,a.addData(u,M,k,n,r);break;case"q":M=d[v++]+n,k=d[v++]+r,n+=d[v++],r+=d[v++],u=s.Q,a.addData(u,M,k,n,r);break;case"T":_=n,y=r,T=a.len(),E=a.data,e===s.Q&&(_+=n-E[T-4],y+=r-E[T-3]),n=d[v++],r=d[v++],u=s.Q,a.addData(u,_,y,n,r);break;case"t":_=n,y=r,T=a.len(),E=a.data,e===s.Q&&(_+=n-E[T-4],y+=r-E[T-3]),n+=d[v++],r+=d[v++],u=s.Q,a.addData(u,_,y,n,r);break;case"A":m=d[v++],x=d[v++],b=d[v++],w=d[v++],S=d[v++],lp(M=n,k=r,n=d[v++],r=d[v++],w,S,m,x,b,u=s.A,a);break;case"a":m=d[v++],x=d[v++],b=d[v++],w=d[v++],S=d[v++],lp(M=n,k=r,n+=d[v++],r+=d[v++],w,S,m,x,b,u=s.A,a)}}"z"!==f&&"Z"!==f||(u=s.Z,a.addData(u),n=i,r=o),e=u}return a.toStatic(),a}(t);return(e=e||{}).buildPath=function(t){if(t.setData){t.setData(n.data),(e=t.getContext())&&t.rebuildPath(e)}else{var e=t;n.rebuildPath(e)}},e.applyTransform=function(t){ep(n,t),this.dirty(!0)},e}var dp={createFromString:function(t,e){return new Zd(fp(t,e))},extendFromString:function(t,e){return Zd.extend(fp(t,e))},mergePath:function(t,e){for(var n=[],r=t.length,i=0;i<r;i++){var o=t[i];o.path||o.createPathProxy(),o.__dirtyPath&&o.buildPath(o.path,o.shape,!0),n.push(o.path)}var a=new Zd(e);return a.createPathProxy(),a.buildPath=function(t){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e)},a}},pp=_u.ContextCachedBy,gp=function(t){Yc.call(this,t)};gp.prototype={constructor:gp,type:"text",brush:function(t,e){var n=this.style;this.__dirty&&Fc.normalizeTextStyle(n,!0),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var r=n.text;null!=r&&(r+=""),Fc.needDrawText(r,n)?(this.setTransform(t),Fc.renderText(this,t,r,n,null,e),this.restoreTransform(t)):t.__attrCachedBy=pp.NONE},getBoundingRect:function(){var t=this.style;if(this.__dirty&&Fc.normalizeTextStyle(t,!0),!this._rect){var e=t.text;null!=e?e+="":e="";var n=hc.getBoundingRect(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich);if(n.x+=t.x||0,n.y+=t.y||0,Fc.getStroke(t.textStroke,t.textStrokeWidth)){var r=t.textStrokeWidth;n.x-=r/2,n.y-=r/2,n.width+=r,n.height+=r}this._rect=n}return this._rect}},Xs.inherits(gp,Yc);var vp=gp,_p=Zd.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}}),yp=Math.round;function mp(t,e,n){var r=yp(2*t);return(r+yp(e))%2==0?r/2:(r+(n?1:-1))/2}var xp={subPixelOptimizeLine:function(t,e,n){var r=n&&n.lineWidth;if(e&&r){var i=e.x1,o=e.x2,a=e.y1,s=e.y2;yp(2*i)===yp(2*o)?t.x1=t.x2=mp(i,r,!0):(t.x1=i,t.x2=o),yp(2*a)===yp(2*s)?t.y1=t.y2=mp(a,r,!0):(t.y1=a,t.y2=s)}},subPixelOptimizeRect:function(t,e,n){var r=n&&n.lineWidth;if(e&&r){var i=e.x,o=e.y,a=e.width,s=e.height;t.x=mp(i,r,!0),t.y=mp(o,r,!0),t.width=Math.max(mp(i+a,r,!1)-t.x,0===a?0:1),t.height=Math.max(mp(o+s,r,!1)-t.y,0===s?0:1)}},subPixelOptimize:mp},bp=xp.subPixelOptimizeRect,wp={},Sp=Zd.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var n,r,i,o;this.subPixelOptimize?(bp(wp,e,this.style),n=wp.x,r=wp.y,i=wp.width,o=wp.height,wp.r=e.r,e=wp):(n=e.x,r=e.y,i=e.width,o=e.height),e.r?lc.buildPath(t,e):t.rect(n,r,i,o),t.closePath()}}),Mp=Zd.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var n=.5522848,r=e.cx,i=e.cy,o=e.rx,a=e.ry,s=o*n,h=a*n;t.moveTo(r-o,i),t.bezierCurveTo(r-o,i-h,r-s,i-a,r,i-a),t.bezierCurveTo(r+s,i-a,r+o,i-h,r+o,i),t.bezierCurveTo(r+o,i+h,r+s,i+a,r,i+a),t.bezierCurveTo(r-s,i+a,r-o,i+h,r-o,i),t.closePath()}}),kp=xp.subPixelOptimizeLine,Tp={},Ep=Zd.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n,r,i,o;this.subPixelOptimize?(kp(Tp,e,this.style),n=Tp.x1,r=Tp.y1,i=Tp.x2,o=Tp.y2):(n=e.x1,r=e.y1,i=e.x2,o=e.y2);var a=e.percent;0!==a&&(t.moveTo(n,r),a<1&&(i=n*(1-a)+i*a,o=r*(1-a)+o*a),t.lineTo(i,o))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}}),Pp=Js.distance;function Cp(t,e,n,r,i,o,a){var s=.5*(n-t),h=.5*(r-e);return(2*(e-n)+s+h)*a+(-3*(e-n)-2*s-h)*o+s*i+e}var Dp=function(t,e){for(var n=t.length,r=[],i=0,o=1;o<n;o++)i+=Pp(t[o-1],t[o]);var a=i/2;for(a=a<n?n:a,o=0;o<a;o++){var s,h,l,u=o/(a-1)*(e?n:n-1),c=Math.floor(u),f=u-c,d=t[c%n];e?(s=t[(c-1+n)%n],h=t[(c+1)%n],l=t[(c+2)%n]):(s=t[0===c?c:c-1],h=t[c>n-2?n-1:c+1],l=t[c>n-3?n-1:c+2]);var p=f*f,g=f*p;r.push([Cp(s[0],d[0],h[0],l[0],f,p,g),Cp(s[1],d[1],h[1],l[1],f,p,g)])}return r},Ap=Js.min,Ip=Js.max,Op=Js.scale,Lp=Js.distance,Rp=Js.add,zp=Js.clone,Np=Js.sub;var Fp=function(t,e,n,r){var i,o,a,s,h=[],l=[],u=[],c=[];if(r){a=[1/0,1/0],s=[-1/0,-1/0];for(var f=0,d=t.length;f<d;f++)Ap(a,a,t[f]),Ip(s,s,t[f]);Ap(a,a,r[0]),Ip(s,s,r[1])}for(f=0,d=t.length;f<d;f++){var p=t[f];if(n)i=t[f?f-1:d-1],o=t[(f+1)%d];else{if(0===f||f===d-1){h.push(zp(t[f]));continue}i=t[f-1],o=t[f+1]}Np(l,o,i),Op(l,l,e);var g=Lp(p,i),v=Lp(p,o),_=g+v;0!==_&&(g/=_,v/=_),Op(u,l,-g),Op(c,l,v);var y=Rp([],p,u),m=Rp([],p,c);r&&(Ip(y,y,a),Ap(y,y,s),Ip(m,m,a),Ap(m,m,s)),h.push(y),h.push(m)}return n&&h.push(h.shift()),h};var jp={buildPath:function(t,e,n){var r=e.points,i=e.smooth;if(r&&r.length>=2){if(i&&"spline"!==i){var o=Fp(r,i,n,e.smoothConstraint);t.moveTo(r[0][0],r[0][1]);for(var a=r.length,s=0;s<(n?a:a-1);s++){var h=o[2*s],l=o[2*s+1],u=r[(s+1)%a];t.bezierCurveTo(h[0],h[1],l[0],l[1],u[0],u[1])}}else{"spline"===i&&(r=Dp(r,n)),t.moveTo(r[0][0],r[0][1]);s=1;for(var c=r.length;s<c;s++)t.lineTo(r[s][0],r[s][1])}n&&t.closePath()}}},Bp=Zd.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){jp.buildPath(t,e,!0)}}),Hp=Zd.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){jp.buildPath(t,e,!1)}}),Wp=function(t){this.colorStops=t||[]};Wp.prototype={constructor:Wp,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var Gp=Wp,Yp=function(t,e,n,r,i,o){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==n?1:n,this.y2=null==r?0:r,this.type="linear",this.global=o||!1,Gp.call(this,i)};Yp.prototype={constructor:Yp},Xs.inherits(Yp,Gp);var Up=Yp,Vp=dp.createFromString,Xp=Xs.isString,qp=Xs.extend,Zp=Xs.defaults,Qp=Xs.trim,Kp=Xs.each,$p=/[\s,]+/;function Jp(t){Xp(t)&&(t=(new DOMParser).parseFromString(t,"text/xml"));for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}function tg(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}tg.prototype.parse=function(t,e){e=e||{};var n=Jp(t);if(!n)throw new Error("Illegal svg");var r=new ou;this._root=r;var i=n.getAttribute("viewBox")||"",o=parseFloat(n.getAttribute("width")||e.width),a=parseFloat(n.getAttribute("height")||e.height);isNaN(o)&&(o=null),isNaN(a)&&(a=null),ag(n,r,null,!0);for(var s,h,l=n.firstChild;l;)this._parseNode(l,r),l=l.nextSibling;if(i){var u=Qp(i).split($p);u.length>=4&&(s={x:parseFloat(u[0]||0),y:parseFloat(u[1]||0),width:parseFloat(u[2]),height:parseFloat(u[3])})}if(s&&null!=o&&null!=a&&(h=cg(s,o,a),!e.ignoreViewBox)){var c=r;(r=new ou).add(c),c.scale=h.scale.slice(),c.position=h.position.slice()}return e.ignoreRootClip||null==o||null==a||r.setClipPath(new Sp({shape:{x:0,y:0,width:o,height:a}})),{root:r,width:o,height:a,viewBoxRect:s,viewBoxTransform:h}},tg.prototype._parseNode=function(t,e){var n,r,i=t.nodeName.toLowerCase();if("defs"===i?this._isDefine=!0:"text"===i&&(this._isText=!0),this._isDefine){if(r=ng[i]){var o=r.call(this,t),a=t.getAttribute("id");a&&(this._defs[a]=o)}}else(r=eg[i])&&(n=r.call(this,t,e),e.add(n));for(var s=t.firstChild;s;)1===s.nodeType&&this._parseNode(s,n),3===s.nodeType&&this._isText&&this._parseText(s,n),s=s.nextSibling;"defs"===i?this._isDefine=!1:"text"===i&&(this._isText=!1)},tg.prototype._parseText=function(t,e){if(1===t.nodeType){var n=t.getAttribute("dx")||0,r=t.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(r)}var i=new vp({style:{text:t.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});rg(e,i),ag(t,i,this._defs);var o=i.style.fontSize;o&&o<9&&(i.style.fontSize=9,i.scale=i.scale||[1,1],i.scale[0]*=o/9,i.scale[1]*=o/9);var a=i.getBoundingRect();return this._textX+=a.width,e.add(i),i};var eg={g:function(t,e){var n=new ou;return rg(e,n),ag(t,n,this._defs),n},rect:function(t,e){var n=new Sp;return rg(e,n),ag(t,n,this._defs),n.setShape({x:parseFloat(t.getAttribute("x")||0),y:parseFloat(t.getAttribute("y")||0),width:parseFloat(t.getAttribute("width")||0),height:parseFloat(t.getAttribute("height")||0)}),n},circle:function(t,e){var n=new _p;return rg(e,n),ag(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),r:parseFloat(t.getAttribute("r")||0)}),n},line:function(t,e){var n=new Ep;return rg(e,n),ag(t,n,this._defs),n.setShape({x1:parseFloat(t.getAttribute("x1")||0),y1:parseFloat(t.getAttribute("y1")||0),x2:parseFloat(t.getAttribute("x2")||0),y2:parseFloat(t.getAttribute("y2")||0)}),n},ellipse:function(t,e){var n=new Mp;return rg(e,n),ag(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),rx:parseFloat(t.getAttribute("rx")||0),ry:parseFloat(t.getAttribute("ry")||0)}),n},polygon:function(t,e){var n=t.getAttribute("points");n&&(n=ig(n));var r=new Bp({shape:{points:n||[]}});return rg(e,r),ag(t,r,this._defs),r},polyline:function(t,e){var n=new Zd;rg(e,n),ag(t,n,this._defs);var r=t.getAttribute("points");return r&&(r=ig(r)),new Hp({shape:{points:r||[]}})},image:function(t,e){var n=new Vc;return rg(e,n),ag(t,n,this._defs),n.setStyle({image:t.getAttribute("xlink:href"),x:t.getAttribute("x"),y:t.getAttribute("y"),width:t.getAttribute("width"),height:t.getAttribute("height")}),n},text:function(t,e){var n=t.getAttribute("x")||0,r=t.getAttribute("y")||0,i=t.getAttribute("dx")||0,o=t.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(i),this._textY=parseFloat(r)+parseFloat(o);var a=new ou;return rg(e,a),ag(t,a,this._defs),a},tspan:function(t,e){var n=t.getAttribute("x"),r=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=r&&(this._textY=parseFloat(r));var i=t.getAttribute("dx")||0,o=t.getAttribute("dy")||0,a=new ou;return rg(e,a),ag(t,a,this._defs),this._textX+=i,this._textY+=o,a},path:function(t,e){var n=t.getAttribute("d")||"",r=Vp(n);return rg(e,r),ag(t,r,this._defs),r}},ng={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||0,10),n=parseInt(t.getAttribute("y1")||0,10),r=parseInt(t.getAttribute("x2")||10,10),i=parseInt(t.getAttribute("y2")||0,10),o=new Up(e,n,r,i);return function(t,e){var n=t.firstChild;for(;n;){if(1===n.nodeType){var r=n.getAttribute("offset");r=r.indexOf("%")>0?parseInt(r,10)/100:r?parseFloat(r):0;var i=n.getAttribute("stop-color")||"#000000";e.addColorStop(r,i)}n=n.nextSibling}}(t,o),o},radialgradient:function(t){}};function rg(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),Zp(e.__inheritedStyle,t.__inheritedStyle))}function ig(t){for(var e=Qp(t).split($p),n=[],r=0;r<e.length;r+=2){var i=parseFloat(e[r]),o=parseFloat(e[r+1]);n.push([i,o])}return n}var og={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function ag(t,e,n,r){var i=e.__inheritedStyle||{},o="text"===e.type;if(1===t.nodeType&&(function(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var r=null,i=[];n.replace(lg,(function(t,e,n){i.push(e,n)}));for(var o=i.length-1;o>0;o-=2){var a=i[o],s=i[o-1];switch(r=r||Lh.create(),s){case"translate":a=Qp(a).split($p),Lh.translate(r,r,[parseFloat(a[0]),parseFloat(a[1]||0)]);break;case"scale":a=Qp(a).split($p),Lh.scale(r,r,[parseFloat(a[0]),parseFloat(a[1]||a[0])]);break;case"rotate":a=Qp(a).split($p),Lh.rotate(r,r,parseFloat(a[0]));break;case"skew":a=Qp(a).split($p),console.warn("Skew transform is not supported yet");break;case"matrix":a=Qp(a).split($p);r[0]=parseFloat(a[0]),r[1]=parseFloat(a[1]),r[2]=parseFloat(a[2]),r[3]=parseFloat(a[3]),r[4]=parseFloat(a[4]),r[5]=parseFloat(a[5])}}e.setLocalTransform(r)}}(t,e),qp(i,function(t){var e=t.getAttribute("style"),n={};if(!e)return n;var r,i={};ug.lastIndex=0;for(;null!=(r=ug.exec(e));)i[r[1]]=r[2];for(var o in og)og.hasOwnProperty(o)&&null!=i[o]&&(n[og[o]]=i[o]);return n}(t)),!r))for(var a in og)if(og.hasOwnProperty(a)){var s=t.getAttribute(a);null!=s&&(i[og[a]]=s)}var h=o?"textFill":"fill",l=o?"textStroke":"stroke";e.style=e.style||new Tu;var u=e.style;null!=i.fill&&u.set(h,hg(i.fill,n)),null!=i.stroke&&u.set(l,hg(i.stroke,n)),Kp(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(t){var e="lineWidth"===t&&o?"textStrokeWidth":t;null!=i[t]&&u.set(e,parseFloat(i[t]))})),i.textBaseline&&"auto"!==i.textBaseline||(i.textBaseline="alphabetic"),"alphabetic"===i.textBaseline&&(i.textBaseline="bottom"),"start"===i.textAlign&&(i.textAlign="left"),"end"===i.textAlign&&(i.textAlign="right"),Kp(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],(function(t){null!=i[t]&&u.set(t,i[t])})),i.lineDash&&(e.style.lineDash=Qp(i.lineDash).split($p)),u[l]&&"none"!==u[l]&&(e[l]=!0),e.__inheritedStyle=i}var sg=/url\(\s*#(.*?)\)/;function hg(t,e){var n=e&&t&&t.match(sg);return n?e[Qp(n[1])]:t}var lg=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g;var ug=/([^\s:;]+)\s*:\s*([^:;]+)/g;function cg(t,e,n){var r=e/t.width,i=n/t.height,o=Math.min(r,i);return{scale:[o,o],position:[-(t.x+t.width/2)*o+e/2,-(t.y+t.height/2)*o+n/2]}}var fg={parseXML:Jp,makeViewBoxTransform:cg,parseSVG:function(t,e){return(new tg).parse(t,e)}},dg=Zd.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,n=0;n<e.length;n++)t=t||e[n].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1],t[n].segmentIgnoreThreshold)},buildPath:function(t,e){for(var n=e.paths||[],r=0;r<n.length;r++)n[r].buildPath(t,n[r].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),Zd.prototype.getBoundingRect.call(this)}}),pg=Xs.inherits;function gg(t){Yc.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}gg.prototype.incremental=!0,gg.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},gg.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.dirty()},gg.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},gg.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},gg.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){(e=this._displayables[t]).parent=this,e.update(),e.parent=null}for(t=0;t<this._temporaryDisplayables.length;t++){var e;(e=this._temporaryDisplayables[t]).parent=this,e.update(),e.parent=null}},gg.prototype.brush=function(t,e){for(var n=this._cursor;n<this._displayables.length;n++){(r=this._displayables[n]).beforeBrush&&r.beforeBrush(t),r.brush(t,n===this._cursor?null:this._displayables[n-1]),r.afterBrush&&r.afterBrush(t)}this._cursor=n;for(n=0;n<this._temporaryDisplayables.length;n++){var r;(r=this._temporaryDisplayables[n]).beforeBrush&&r.beforeBrush(t),r.brush(t,0===n?null:this._temporaryDisplayables[n-1]),r.afterBrush&&r.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0};var vg=[];gg.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new ru(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],r=n.getBoundingRect().clone();n.needLocalTransform()&&r.applyTransform(n.getLocalTransform(vg)),t.union(r)}this._rect=t}return this._rect},gg.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(n[0],n[1]))for(var r=0;r<this._displayables.length;r++){if(this._displayables[r].contain(t,e))return!0}return!1},pg(gg,Yc);var _g=gg,yg=Zd.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.cx,r=e.cy,i=Math.max(e.r,0),o=e.startAngle,a=e.endAngle,s=e.clockwise,h=Math.cos(o),l=Math.sin(o);t.moveTo(h*i+n,l*i+r),t.arc(n,r,i,o,a,!s)}}),mg=$f.quadraticSubdivide,xg=$f.cubicSubdivide,bg=$f.quadraticAt,wg=$f.cubicAt,Sg=$f.quadraticDerivativeAt,Mg=$f.cubicDerivativeAt,kg=[];function Tg(t,e,n){var r=t.cpx2,i=t.cpy2;return null===r||null===i?[(n?Mg:wg)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?Mg:wg)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?Sg:bg)(t.x1,t.cpx1,t.x2,e),(n?Sg:bg)(t.y1,t.cpy1,t.y2,e)]}var Eg=Zd.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.cpx1,s=e.cpy1,h=e.cpx2,l=e.cpy2,u=e.percent;0!==u&&(t.moveTo(n,r),null==h||null==l?(u<1&&(mg(n,a,i,u,kg),a=kg[1],i=kg[2],mg(r,s,o,u,kg),s=kg[1],o=kg[2]),t.quadraticCurveTo(a,s,i,o)):(u<1&&(xg(n,a,h,i,u,kg),a=kg[1],h=kg[2],i=kg[3],xg(r,s,l,o,u,kg),s=kg[1],l=kg[2],o=kg[3]),t.bezierCurveTo(a,s,h,l,i,o)))},pointAt:function(t){return Tg(this.shape,t,!1)},tangentAt:function(t){var e=Tg(this.shape,t,!0);return Js.normalize(e,e)}}),Pg=Zd.extend({type:"droplet",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width,o=e.height;t.moveTo(n,r+i),t.bezierCurveTo(n+i,r+i,n+3*i/2,r-i/3,n,r-o),t.bezierCurveTo(n-3*i/2,r-i/3,n-i,r+i,n,r+i),t.closePath()}}),Cg=Zd.extend({type:"heart",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width,o=e.height;t.moveTo(n,r),t.bezierCurveTo(n+i/2,r-2*o/3,n+2*i,r+o/3,n,r+o),t.bezierCurveTo(n-2*i,r+o/3,n-i/2,r-2*o/3,n,r)}}),Dg=Math.PI,Ag=Math.sin,Ig=Math.cos,Og=Zd.extend({type:"isogon",shape:{x:0,y:0,r:0,n:0},buildPath:function(t,e){var n=e.n;if(n&&!(n<2)){var r=e.x,i=e.y,o=e.r,a=2*Dg/n,s=-Dg/2;t.moveTo(r+o*Ig(s),i+o*Ag(s));for(var h=0,l=n-1;h<l;h++)s+=a,t.lineTo(r+o*Ig(s),i+o*Ag(s));t.closePath()}}}),Lg=Zd.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=2*Math.PI;t.moveTo(n+e.r,r),t.arc(n,r,e.r,0,i,!1),t.moveTo(n+e.r0,r),t.arc(n,r,e.r0,0,i,!0)}}),Rg=Math.sin,zg=Math.cos,Ng=Math.PI/180,Fg=Zd.extend({type:"rose",shape:{cx:0,cy:0,r:[],k:0,n:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n,r,i,o=e.r,a=e.k,s=e.n,h=e.cx,l=e.cy;t.moveTo(h,l);for(var u=0,c=o.length;u<c;u++){i=o[u];for(var f=0;f<=360*s;f++)n=i*Rg(a/s*f%360*Ng)*zg(f*Ng)+h,r=i*Rg(a/s*f%360*Ng)*Rg(f*Ng)+l,t.lineTo(n,r)}}}),jg=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];var Bg=function(t){return ws.browser.ie&&ws.browser.version>=11?function(){var e,n=this.__clipPaths,r=this.style;if(n)for(var i=0;i<n.length;i++){var o=n[i],a=o&&o.shape,s=o&&o.type;if(a&&("sector"===s&&a.startAngle===a.endAngle||"rect"===s&&(!a.width||!a.height))){for(var h=0;h<jg.length;h++)jg[h][2]=r[jg[h][0]],r[jg[h][0]]=jg[h][1];e=!0;break}}if(t.apply(this,arguments),e)for(h=0;h<jg.length;h++)r[jg[h][0]]=jg[h][2]}:t},Hg=Zd.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:Bg(Zd.prototype.brush),buildPath:function(t,e){var n=e.cx,r=e.cy,i=Math.max(e.r0||0,0),o=Math.max(e.r,0),a=e.startAngle,s=e.endAngle,h=e.clockwise,l=Math.cos(a),u=Math.sin(a);t.moveTo(l*i+n,u*i+r),t.lineTo(l*o+n,u*o+r),t.arc(n,r,o,a,s,!h),t.lineTo(Math.cos(s)*i+n,Math.sin(s)*i+r),0!==i&&t.arc(n,r,i,s,a,h),t.closePath()}}),Wg=Math.PI,Gg=Math.cos,Yg=Math.sin,Ug=Zd.extend({type:"star",shape:{cx:0,cy:0,n:3,r0:null,r:0},buildPath:function(t,e){var n=e.n;if(n&&!(n<2)){var r=e.cx,i=e.cy,o=e.r,a=e.r0;null==a&&(a=n>4?o*Gg(2*Wg/n)/Gg(Wg/n):o/3);var s=Wg/n,h=-Wg/2,l=r+o*Gg(h),u=i+o*Yg(h);h+=s,t.moveTo(l,u);for(var c,f=0,d=2*n-1;f<d;f++)c=f%2==0?a:o,t.lineTo(r+c*Gg(h),i+c*Yg(h)),h+=s;t.closePath()}}}),Vg=Math.cos,Xg=Math.sin,qg=Zd.extend({type:"trochoid",shape:{cx:0,cy:0,r:0,r0:0,d:0,location:"out"},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n,r,i,o,a=e.r,s=e.r0,h=e.d,l=e.cx,u=e.cy,c="out"===e.location?1:-1;if(!(e.location&&a<=s)){var f,d=0,p=1;n=(a+c*s)*Vg(0)-c*h*Vg(0)+l,r=(a+c*s)*Xg(0)-h*Xg(0)+u,t.moveTo(n,r);do{d++}while(s*d%(a+c*s)!=0);do{f=Math.PI/180*p,i=(a+c*s)*Vg(f)-c*h*Vg((a/s+c)*f)+l,o=(a+c*s)*Xg(f)-h*Xg((a/s+c)*f)+u,t.lineTo(i,o),p++}while(p<=s*d/(a+c*s)*360)}}}),Zg=function(t,e,n,r,i){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==n?.5:n,this.type="radial",this.global=i||!1,Gp.call(this,r)};Zg.prototype={constructor:Zg},Xs.inherits(Zg,Gp);var Qg={util:Xs,matrix:Lh,vector:Js,color:_l,path:dp,parseSVG:fg.parseSVG,Group:ou,Path:Zd,Image:Vc,CompoundPath:dg,Text:vp,IncrementalDisplayable:_g,Arc:yg,BezierCurve:Eg,Circle:_p,Droplet:Pg,Ellipse:Mp,Heart:Cg,Isogon:Og,Line:Ep,Polygon:Bp,Polyline:Hp,Rect:Sp,Ring:Lg,Rose:Fg,Sector:Hg,Star:Ug,Trochoid:qg,LinearGradient:Up,RadialGradient:Zg,Pattern:Pu,BoundingRect:ru};var Kg={createElement:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}},$g=Kg.createElement,Jg=Md.CMD,tv=Array.prototype.join,ev="none",nv=Math.round,rv=Math.sin,iv=Math.cos,ov=Math.PI,av=2*Math.PI,sv=180/ov,hv=1e-4;function lv(t){return nv(1e4*t)/1e4}function uv(t){return t<hv&&t>-1e-4}function cv(t,e){e&&fv(t,"transform","matrix("+tv.call(e,",")+")")}function fv(t,e,n){(!n||"linear"!==n.type&&"radial"!==n.type)&&t.setAttribute(e,n)}function dv(t,e,n,r){if(function(t,e){var n=e?t.textFill:t.fill;return null!=n&&n!==ev}(e,n)){var i=n?e.textFill:e.fill;fv(t,"fill",i="transparent"===i?ev:i),fv(t,"fill-opacity",null!=e.fillOpacity?e.fillOpacity*e.opacity:e.opacity)}else fv(t,"fill",ev);if(function(t,e){var n=e?t.textStroke:t.stroke;return null!=n&&n!==ev}(e,n)){var o=n?e.textStroke:e.stroke;fv(t,"stroke",o="transparent"===o?ev:o),fv(t,"stroke-width",(n?e.textStrokeWidth:e.lineWidth)/(!n&&e.strokeNoScale?r.getLineScale():1)),fv(t,"paint-order",n?"stroke":"fill"),fv(t,"stroke-opacity",null!=e.strokeOpacity?e.strokeOpacity:e.opacity),e.lineDash?(fv(t,"stroke-dasharray",e.lineDash.join(",")),fv(t,"stroke-dashoffset",nv(e.lineDashOffset||0))):fv(t,"stroke-dasharray",""),e.lineCap&&fv(t,"stroke-linecap",e.lineCap),e.lineJoin&&fv(t,"stroke-linejoin",e.lineJoin),e.miterLimit&&fv(t,"stroke-miterlimit",e.miterLimit)}else fv(t,"stroke",ev)}var pv={};pv.brush=function(t){var e=t.style,n=t.__svgEl;n||(n=$g("path"),t.__svgEl=n),t.path||t.createPathProxy();var r=t.path;if(t.__dirtyPath){r.beginPath(),r.subPixelOptimize=!1,t.buildPath(r,t.shape),t.__dirtyPath=!1;var i=function(t){for(var e=[],n=t.data,r=t.len(),i=0;i<r;){var o="",a=0;switch(n[i++]){case Jg.M:o="M",a=2;break;case Jg.L:o="L",a=2;break;case Jg.Q:o="Q",a=4;break;case Jg.C:o="C",a=6;break;case Jg.A:var s=n[i++],h=n[i++],l=n[i++],u=n[i++],c=n[i++],f=n[i++],d=n[i++],p=n[i++],g=Math.abs(f),v=uv(g-av)||(p?f>=av:-f>=av),_=f>0?f%av:f%av+av,y=!1;y=!!v||!uv(g)&&_>=ov==!!p;var m=lv(s+l*iv(c)),x=lv(h+u*rv(c));v&&(f=p?av-1e-4:1e-4-av,y=!0,9===i&&e.push("M",m,x));var b=lv(s+l*iv(c+f)),w=lv(h+u*rv(c+f));e.push("A",lv(l),lv(u),nv(d*sv),+y,+p,b,w);break;case Jg.Z:o="Z";break;case Jg.R:b=lv(n[i++]),w=lv(n[i++]);var S=lv(n[i++]),M=lv(n[i++]);e.push("M",b,w,"L",b+S,w,"L",b+S,w+M,"L",b,w+M,"L",b,w)}o&&e.push(o);for(var k=0;k<a;k++)e.push(lv(n[i++]))}return e.join(" ")}(r);i.indexOf("NaN")<0&&fv(n,"d",i)}dv(n,e,!1,t),cv(n,t.transform),null!=e.text?bv(t,t.getBoundingRect()):Sv(t)};var gv={brush:function(t){var e=t.style,n=e.image;n instanceof HTMLImageElement&&(n=n.src);if(n){var r=e.x||0,i=e.y||0,o=e.width,a=e.height,s=t.__svgEl;s||(s=$g("image"),t.__svgEl=s),n!==t.__imageSrc&&(!function(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}(s,"href",n),t.__imageSrc=n),fv(s,"width",o),fv(s,"height",a),fv(s,"x",r),fv(s,"y",i),cv(s,t.transform),null!=e.text?bv(t,t.getBoundingRect()):Sv(t)}}},vv={},_v=new ru,yv={},mv=[],xv={left:"start",right:"end",center:"middle",middle:"middle"},bv=function(t,e){var n=t.style,r=t.transform,i=t instanceof vp||n.transformText;t.__dirty&&Fc.normalizeTextStyle(n,!0);var o=n.text;if(null!=o&&(o+=""),Fc.needDrawText(o,n)){null==o&&(o=""),!i&&r&&(_v.copy(e),_v.applyTransform(r),e=_v);var a=t.__textSvgEl;a||(a=$g("text"),t.__textSvgEl=a);var s=a.style,h=n.font||hc.DEFAULT_FONT,l=a.__computedFont;h!==a.__styleFont&&(s.font=a.__styleFont=h,l=a.__computedFont=s.font);var u=n.textPadding,c=n.textLineHeight,f=t.__textCotentBlock;f&&!t.__dirtyText||(f=t.__textCotentBlock=hc.parsePlainText(o,l,u,c,n.truncate));var d=f.outerHeight,p=f.lineHeight;Fc.getBoxPosition(yv,t,n,e);var g=yv.baseX,v=yv.baseY,_=yv.textAlign||"left",y=yv.textVerticalAlign;!function(t,e,n,r,i,o,a){Lh.identity(mv),e&&n&&Lh.copy(mv,n);var s=r.textRotation;if(i&&s){var h=r.textOrigin;"center"===h?(o=i.width/2+i.x,a=i.height/2+i.y):h&&(o=h[0]+i.x,a=h[1]+i.y),mv[4]-=o,mv[5]-=a,Lh.rotate(mv,mv,s),mv[4]+=o,mv[5]+=a}cv(t,mv)}(a,i,r,n,e,g,v);var m=g,x=hc.adjustTextY(v,d,y);u&&(m=function(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}(g,_,u),x+=u[0]),x+=p/2,dv(a,n,!0,t);var b=f.canCacheByTextString,w=t.__tspanList||(t.__tspanList=[]),S=w.length;if(b&&t.__canCacheByTextString&&t.__text===o){if(t.__dirtyText&&S)for(var M=0;M<S;++M)wv(w[M],_,m,x+M*p)}else{t.__text=o,t.__canCacheByTextString=b;var k=f.lines,T=k.length;for(M=0;M<T;M++){var E=w[M],P=k[M];E?E.__zrText!==P&&(E.innerHTML="",E.appendChild(document.createTextNode(P))):(E=w[M]=$g("tspan"),a.appendChild(E),E.appendChild(document.createTextNode(P))),wv(E,_,m,x+M*p)}if(S>T){for(;M<S;M++)a.removeChild(w[M]);w.length=T}}}};function wv(t,e,n,r){fv(t,"dominant-baseline","middle"),fv(t,"text-anchor",xv[e]),fv(t,"x",n),fv(t,"y",r)}function Sv(t){t&&t.__textSvgEl&&(t.__textSvgEl.parentNode&&t.__textSvgEl.parentNode.removeChild(t.__textSvgEl),t.__textSvgEl=null,t.__tspanList=[],t.__text=null)}vv.drawRectText=bv,vv.brush=function(t){null!=t.style.text?bv(t,!1):Sv(t)};var Mv={path:pv,image:gv,text:vv};function kv(){}function Tv(t,e,n,r){for(var i=0,o=e.length,a=0,s=0;i<o;i++){var h=e[i];if(h.removed){for(l=[],u=s;u<s+h.count;u++)l.push(u);h.indices=l,s+=h.count}else{for(var l=[],u=a;u<a+h.count;u++)l.push(u);h.indices=l,a+=h.count,h.added||(s+=h.count)}}return e}function Ev(t){return{newPos:t.newPos,components:t.components.slice(0)}}kv.prototype={diff:function(t,e,n){n||(n=function(t,e){return t===e}),this.equals=n;var r=this;t=t.slice();var i=(e=e.slice()).length,o=t.length,a=1,s=i+o,h=[{newPos:-1,components:[]}],l=this.extractCommon(h[0],e,t,0);if(h[0].newPos+1>=i&&l+1>=o){for(var u=[],c=0;c<e.length;c++)u.push(c);return[{indices:u,count:e.length}]}function f(){for(var n=-1*a;n<=a;n+=2){var s,l=h[n-1],u=h[n+1],c=(u?u.newPos:0)-n;l&&(h[n-1]=void 0);var f=l&&l.newPos+1<i,d=u&&0<=c&&c<o;if(f||d){if(!f||d&&l.newPos<u.newPos?(s=Ev(u),r.pushComponent(s.components,void 0,!0)):((s=l).newPos++,r.pushComponent(s.components,!0,void 0)),c=r.extractCommon(s,e,t,n),s.newPos+1>=i&&c+1>=o)return Tv(r,s.components);h[n]=s}else h[n]=void 0}a++}for(;a<=s;){var d=f();if(d)return d}},pushComponent:function(t,e,n){var r=t[t.length-1];r&&r.added===e&&r.removed===n?t[t.length-1]={count:r.count+1,added:e,removed:n}:t.push({count:1,added:e,removed:n})},extractCommon:function(t,e,n,r){for(var i=e.length,o=n.length,a=t.newPos,s=a-r,h=0;a+1<i&&s+1<o&&this.equals(e[a+1],n[s+1]);)a++,s++,h++;return h&&t.components.push({count:h}),t.newPos=a,s},tokenize:function(t){return t.slice()},join:function(t){return t.slice()}};var Pv=new kv;var Cv=function(t,e,n){return Pv.diff(t,e,n)},Dv=Kg.createElement,Av=Mv.path,Iv=Mv.image,Ov=Mv.text;function Lv(t,e,n,r,i){this._zrId=t,this._svgRoot=e,this._tagNames="string"==typeof n?[n]:n,this._markLabel=r,this._domName=i||"_dom",this.nextId=0}Lv.prototype.createElement=Dv,Lv.prototype.getDefs=function(t){var e=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?t?((n=e.insertBefore(this.createElement("defs"),e.firstChild)).contains||(n.contains=function(t){var e=n.children;if(!e)return!1;for(var r=e.length-1;r>=0;--r)if(e[r]===t)return!0;return!1}),n):null:n[0]},Lv.prototype.update=function(t,e){if(t){var n=this.getDefs(!1);if(t[this._domName]&&n.contains(t[this._domName]))"function"==typeof e&&e(t);else{var r=this.add(t);r&&(t[this._domName]=r)}}},Lv.prototype.addDom=function(t){this.getDefs(!0).appendChild(t)},Lv.prototype.removeDom=function(t){var e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},Lv.prototype.getDoms=function(){var t=this.getDefs(!1);if(!t)return[];var e=[];return Xs.each(this._tagNames,(function(n){var r=t.getElementsByTagName(n);e=e.concat([].slice.call(r))})),e},Lv.prototype.markAllUnused=function(){var t=this.getDoms(),e=this;Xs.each(t,(function(t){t[e._markLabel]="0"}))},Lv.prototype.markUsed=function(t){t&&(t[this._markLabel]="1")},Lv.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this.getDoms(),n=this;Xs.each(e,(function(e){"1"!==e[n._markLabel]&&t.removeChild(e)}))}},Lv.prototype.getSvgProxy=function(t){return t instanceof Zd?Av:t instanceof Vc?Iv:t instanceof vp?Ov:Av},Lv.prototype.getTextSvgElement=function(t){return t.__textSvgEl},Lv.prototype.getSvgElement=function(t){return t.__svgEl};var Rv=Lv;function zv(t,e){Rv.call(this,t,e,["linearGradient","radialGradient"],"__gradient_in_use__")}Xs.inherits(zv,Rv),zv.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;Xs.each(["fill","stroke"],(function(r){if(e.style[r]&&("linear"===e.style[r].type||"radial"===e.style[r].type)){var i,o=e.style[r],a=n.getDefs(!0);o._dom?(i=o._dom,a.contains(o._dom)||n.addDom(i)):i=n.add(o),n.markUsed(e);var s=i.getAttribute("id");t.setAttribute(r,"url(#"+s+")")}}))}},zv.prototype.add=function(t){var e;if("linear"===t.type)e=this.createElement("linearGradient");else{if("radial"!==t.type)return null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},zv.prototype.update=function(t){var e=this;Rv.prototype.update.call(this,t,(function(){var n=t.type,r=t._dom.tagName;"linear"===n&&"linearGradient"===r||"radial"===n&&"radialGradient"===r?e.updateDom(t,t._dom):(e.removeDom(t),e.add(t))}))},zv.prototype.updateDom=function(t,e){if("linear"===t.type)e.setAttribute("x1",t.x),e.setAttribute("y1",t.y),e.setAttribute("x2",t.x2),e.setAttribute("y2",t.y2);else{if("radial"!==t.type)return;e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("r",t.r)}t.global?e.setAttribute("gradientUnits","userSpaceOnUse"):e.setAttribute("gradientUnits","objectBoundingBox"),e.innerHTML="";for(var n=t.colorStops,r=0,i=n.length;r<i;++r){var o=this.createElement("stop");o.setAttribute("offset",100*n[r].offset+"%");var a=n[r].color;if(a.indexOf(!1)){var s=_l.parse(a)[3],h=_l.toHex(a);o.setAttribute("stop-color","#"+h),o.setAttribute("stop-opacity",s)}else o.setAttribute("stop-color",n[r].color);e.appendChild(o)}t._dom=e},zv.prototype.markUsed=function(t){if(t.style){var e=t.style.fill;e&&e._dom&&Rv.prototype.markUsed.call(this,e._dom),(e=t.style.stroke)&&e._dom&&Rv.prototype.markUsed.call(this,e._dom)}};var Nv=zv;function Fv(t,e){Rv.call(this,t,e,"clipPath","__clippath_in_use__")}Xs.inherits(Fv,Rv),Fv.prototype.update=function(t){var e=this.getSvgElement(t);e&&this.updateDom(e,t.__clipPaths,!1);var n=this.getTextSvgElement(t);n&&this.updateDom(n,t.__clipPaths,!0),this.markUsed(t)},Fv.prototype.updateDom=function(t,e,n){if(e&&e.length>0){var r,i,o=this.getDefs(!0),a=e[0],s=n?"_textDom":"_dom";a[s]?(i=a[s].getAttribute("id"),r=a[s],o.contains(r)||o.appendChild(r)):(i="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(r=this.createElement("clipPath")).setAttribute("id",i),o.appendChild(r),a[s]=r);var h=this.getSvgProxy(a);if(a.transform&&a.parent.invTransform&&!n){var l=Array.prototype.slice.call(a.transform);Lh.mul(a.transform,a.parent.invTransform,a.transform),h.brush(a),a.transform=l}else h.brush(a);var u=this.getSvgElement(a);r.innerHTML="",r.appendChild(u.cloneNode()),t.setAttribute("clip-path","url(#"+i+")"),e.length>1&&this.updateDom(r,e.slice(1),n)}else t&&t.setAttribute("clip-path","none")},Fv.prototype.markUsed=function(t){var e=this;t.__clipPaths&&Xs.each(t.__clipPaths,(function(t){t._dom&&Rv.prototype.markUsed.call(e,t._dom),t._textDom&&Rv.prototype.markUsed.call(e,t._textDom)}))};var jv=Fv;function Bv(t,e){Rv.call(this,t,e,["filter"],"__filter_in_use__","_shadowDom")}function Hv(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY||t.textShadowBlur||t.textShadowOffsetX||t.textShadowOffsetY)}Xs.inherits(Bv,Rv),Bv.prototype.addWithoutUpdate=function(t,e){if(e&&Hv(e.style)){var n;if(e._shadowDom)n=e._shadowDom,this.getDefs(!0).contains(e._shadowDom)||this.addDom(n);else n=this.add(e);this.markUsed(e);var r=n.getAttribute("id");t.style.filter="url(#"+r+")"}},Bv.prototype.add=function(t){var e=this.createElement("filter");return t._shadowDomId=t._shadowDomId||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-shadow-"+t._shadowDomId),this.updateDom(t,e),this.addDom(e),e},Bv.prototype.update=function(t,e){if(Hv(e.style)){var n=this;Rv.prototype.update.call(this,e,(function(){n.updateDom(e,e._shadowDom)}))}else this.remove(t,e)},Bv.prototype.remove=function(t,e){null!=e._shadowDomId&&(this.removeDom(t),t.style.filter="")},Bv.prototype.updateDom=function(t,e){var n=e.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var r,i,o,a,s=t.style,h=t.scale&&t.scale[0]||1,l=t.scale&&t.scale[1]||1;if(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)r=s.shadowOffsetX||0,i=s.shadowOffsetY||0,o=s.shadowBlur,a=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(e,s);r=s.textShadowOffsetX||0,i=s.textShadowOffsetY||0,o=s.textShadowBlur,a=s.textShadowColor}n.setAttribute("dx",r/h),n.setAttribute("dy",i/l),n.setAttribute("flood-color",a);var u=o/2/h+" "+o/2/l;n.setAttribute("stdDeviation",u),e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width",Math.ceil(o/2*200)+"%"),e.setAttribute("height",Math.ceil(o/2*200)+"%"),e.appendChild(n),t._shadowDom=e},Bv.prototype.markUsed=function(t){t._shadowDom&&Rv.prototype.markUsed.call(this,t._shadowDom)};var Wv=Bv,Gv=Kg.createElement,Yv=Mv.path,Uv=Mv.image,Vv=Mv.text;function Xv(t){return parseInt(t,10)}function qv(t,e){return e&&t&&e.parentNode!==t}function Zv(t,e,n){if(qv(t,e)&&n){var r=n.nextSibling;r?t.insertBefore(e,r):t.appendChild(e)}}function Qv(t,e){if(qv(t,e)){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}}function Kv(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function $v(t){return t.__textSvgEl}function Jv(t){return t.__svgEl}var t_=function(t,e,n,r){this.root=t,this.storage=e,this._opts=n=Xs.extend({},n||{});var i=Gv("svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("version","1.1"),i.setAttribute("baseProfile","full"),i.style.cssText="user-select:none;position:absolute;left:0;top:0;",this.gradientManager=new Nv(r,i),this.clipPathManager=new jv(r,i),this.shadowManager=new Wv(r,i);var o=document.createElement("div");o.style.cssText="overflow:hidden;position:relative",this._svgRoot=i,this._viewport=o,t.appendChild(o),o.appendChild(i),this.resize(n.width,n.height),this._visibleList=[]};t_.prototype={constructor:t_,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},setBackgroundColor:function(t){this._viewport.style.background=t},_paintList:function(t){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var e,n,r=this._svgRoot,i=this._visibleList,o=t.length,a=[];for(e=0;e<o;e++){var s=t[e],h=(n=s)instanceof Zd?Yv:n instanceof Vc?Uv:n instanceof vp?Vv:Yv,l=Jv(s)||$v(s);s.invisible||(s.__dirty&&(h&&h.brush(s),this.clipPathManager.update(s),s.style&&(this.gradientManager.update(s.style.fill),this.gradientManager.update(s.style.stroke),this.shadowManager.update(l,s)),s.__dirty=!1),a.push(s))}var u,c=Cv(i,a);for(e=0;e<c.length;e++){if((p=c[e]).removed)for(var f=0;f<p.count;f++){l=Jv(s=i[p.indices[f]]);var d=$v(s);Kv(r,l),Kv(r,d)}}for(e=0;e<c.length;e++){var p;if((p=c[e]).added)for(f=0;f<p.count;f++){l=Jv(s=a[p.indices[f]]),d=$v(s);u?Zv(r,l,u):Qv(r,l),l?Zv(r,d,l):u?Zv(r,d,u):Qv(r,d),Zv(r,d,l),u=d||l||u,this.gradientManager.addWithoutUpdate(l||d,s),this.shadowManager.addWithoutUpdate(l||d,s),this.clipPathManager.markUsed(s)}else if(!p.removed)for(f=0;f<p.count;f++){l=Jv(s=a[p.indices[f]]),d=$v(s),l=Jv(s),d=$v(s);this.gradientManager.markUsed(s),this.gradientManager.addWithoutUpdate(l||d,s),this.shadowManager.markUsed(s),this.shadowManager.addWithoutUpdate(l||d,s),this.clipPathManager.markUsed(s),d&&Zv(r,d,l),u=l||d||u}}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=a},_getDefs:function(t){var e,n=this._svgRoot;return 0===(e=this._svgRoot.getElementsByTagName("defs")).length?t?((e=n.insertBefore(Gv("defs"),n.firstChild)).contains||(e.contains=function(t){var n=e.children;if(!n)return!1;for(var r=n.length-1;r>=0;--r)if(n[r]===t)return!0;return!1}),e):null:e[0]},resize:function(t,e){var n=this._viewport;n.style.display="none";var r=this._opts;if(null!=t&&(r.width=t),null!=e&&(r.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var i=n.style;i.width=t+"px",i.height=e+"px";var o=this._svgRoot;o.setAttribute("width",t),o.setAttribute("height",e)}},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],r=["clientWidth","clientHeight"][t],i=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[r]||Xv(s[n])||Xv(a.style[n]))-(Xv(s[i])||0)-(Xv(s[o])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},pathToDataUrl:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+this._svgRoot.outerHTML}},Xs.each(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],(function(t){t_.prototype[t]=function(){}}));var e_=t_;(0,zf.registerPainter)("svg",e_);var n_,r_="urn:schemas-microsoft-com:vml",i_="undefined"==typeof window?null:window,o_=!1,a_=i_&&i_.document;if(a_&&!ws.canvasSupported)try{!a_.namespaces.zrvml&&a_.namespaces.add("zrvml",r_),n_=function(t){return a_.createElement("<zrvml:"+t+' class="zrvml">')}}catch(t){n_=function(t){return a_.createElement("<"+t+' xmlns="'+r_+'" class="zrvml">')}}var s_={doc:a_,createNode:function(t){return n_(t)},initVML:function(){if(!o_&&a_){o_=!0;var t=a_.styleSheets;t.length<31?a_.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):t[0].addRule(".zrvml","behavior:url(#default#VML)")}}},h_=Js.applyTransform,l_=Md.CMD,u_=Math.round,c_=Math.sqrt,f_=Math.abs,d_=Math.cos,p_=Math.sin,g_=Math.max;if(!ws.canvasSupported){var v_=",",__="progid:DXImageTransform.Microsoft",y_=21600,m_=y_/2,x_=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=y_+","+y_,t.coordorigin="0,0"},b_=function(t,e,n){return"rgb("+[t,e,n].join(",")+")"},w_=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},S_=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},M_=function(t,e,n){return 1e5*(parseFloat(t)||0)+1e3*(parseFloat(e)||0)+n},k_=Fc.parsePercent,T_=function(t,e,n){var r=_l.parse(e);n=+n,isNaN(n)&&(n=1),r&&(t.color=b_(r[0],r[1],r[2]),t.opacity=n*r[3])},E_=function(t){var e=_l.parse(t);return[b_(e[0],e[1],e[2]),e[3]]},P_=function(t,e,n,r){var i="fill"===e,o=t.getElementsByTagName(e)[0];null!=n[e]&&"none"!==n[e]&&(i||!i&&n.lineWidth)?(t[i?"filled":"stroked"]="true",n[e]instanceof Gp&&S_(t,o),o||(o=s_.createNode(e)),i?function(t,e,n){var r=e.fill;if(null!=r)if(r instanceof Gp){var i,o=0,a=[0,0],s=0,h=1,l=n.getBoundingRect(),u=l.width,c=l.height;if("linear"===r.type){i="gradient";var f=n.transform,d=[r.x*u,r.y*c],p=[r.x2*u,r.y2*c];f&&(h_(d,d,f),h_(p,p,f));var g=p[0]-d[0],v=p[1]-d[1];(o=180*Math.atan2(g,v)/Math.PI)<0&&(o+=360),o<1e-6&&(o=0)}else{i="gradientradial",d=[r.x*u,r.y*c],f=n.transform;var _=n.scale,y=u,m=c;a=[(d[0]-l.x)/y,(d[1]-l.y)/m],f&&h_(d,d,f),y/=_[0]*y_,m/=_[1]*y_;var x=g_(y,m);s=0/x,h=2*r.r/x-s}var b=r.colorStops.slice();b.sort((function(t,e){return t.offset-e.offset}));for(var w=b.length,S=[],M=[],k=0;k<w;k++){var T=b[k],E=E_(T.color);M.push(T.offset*h+s+" "+E[0]),0!==k&&k!==w-1||S.push(E)}if(w>=2){var P=S[0][0],C=S[1][0],D=S[0][1]*e.opacity,A=S[1][1]*e.opacity;t.type=i,t.method="none",t.focus="100%",t.angle=o,t.color=P,t.color2=C,t.colors=M.join(","),t.opacity=A,t.opacity2=D}"radial"===i&&(t.focusposition=a.join(","))}else T_(t,r,e.opacity)}(o,n,r):function(t,e){e.lineDash&&(t.dashstyle=e.lineDash.join(" ")),null==e.stroke||e.stroke instanceof Gp||T_(t,e.stroke,e.opacity)}(o,n),w_(t,o)):(t[i?"filled":"stroked"]="false",S_(t,o))},C_=[[],[],[]];Zd.prototype.brushVML=function(t){var e=this.style,n=this._vmlEl;n||(n=s_.createNode("shape"),x_(n),this._vmlEl=n),P_(n,"fill",e,this),P_(n,"stroke",e,this);var r=this.transform,i=null!=r,o=n.getElementsByTagName("stroke")[0];if(o){var a=e.lineWidth;if(i&&!e.strokeNoScale){var s=r[0]*r[3]-r[1]*r[2];a*=c_(f_(s))}o.weight=a+"px"}var h=this.path||(this.path=new Md);this.__dirtyPath&&(h.beginPath(),h.subPixelOptimize=!1,this.buildPath(h,this.shape),h.toStatic(),this.__dirtyPath=!1),n.path=function(t,e){var n,r,i,o,a,s,h=l_.M,l=l_.C,u=l_.L,c=l_.A,f=l_.Q,d=[],p=t.data,g=t.len();for(o=0;o<g;){switch(r="",n=0,i=p[o++]){case h:r=" m ",n=1,a=p[o++],s=p[o++],C_[0][0]=a,C_[0][1]=s;break;case u:r=" l ",n=1,a=p[o++],s=p[o++],C_[0][0]=a,C_[0][1]=s;break;case f:case l:r=" c ",n=3;var v,_,y=p[o++],m=p[o++],x=p[o++],b=p[o++];i===f?(v=x,_=b,x=(x+2*y)/3,b=(b+2*m)/3,y=(a+2*y)/3,m=(s+2*m)/3):(v=p[o++],_=p[o++]),C_[0][0]=y,C_[0][1]=m,C_[1][0]=x,C_[1][1]=b,C_[2][0]=v,C_[2][1]=_,a=v,s=_;break;case c:var w=0,S=0,M=1,k=1,T=0;e&&(w=e[4],S=e[5],M=c_(e[0]*e[0]+e[1]*e[1]),k=c_(e[2]*e[2]+e[3]*e[3]),T=Math.atan2(-e[1]/k,e[0]/M));var E=p[o++],P=p[o++],C=p[o++],D=p[o++],A=p[o++]+T,I=p[o++]+A+T;o++;var O=p[o++],L=E+d_(A)*C,R=P+p_(A)*D,z=(y=E+d_(I)*C,m=P+p_(I)*D,O?" wa ":" at ");Math.abs(L-y)<1e-4&&(Math.abs(I-A)>.01?O&&(L+=270/y_):Math.abs(R-P)<1e-4?O&&L<E||!O&&L>E?m-=270/y_:m+=270/y_:O&&R<P||!O&&R>P?y+=270/y_:y-=270/y_),d.push(z,u_(((E-C)*M+w)*y_-m_),v_,u_(((P-D)*k+S)*y_-m_),v_,u_(((E+C)*M+w)*y_-m_),v_,u_(((P+D)*k+S)*y_-m_),v_,u_((L*M+w)*y_-m_),v_,u_((R*k+S)*y_-m_),v_,u_((y*M+w)*y_-m_),v_,u_((m*k+S)*y_-m_)),a=y,s=m;break;case l_.R:var N=C_[0],F=C_[1];N[0]=p[o++],N[1]=p[o++],F[0]=N[0]+p[o++],F[1]=N[1]+p[o++],e&&(h_(N,N,e),h_(F,F,e)),N[0]=u_(N[0]*y_-m_),F[0]=u_(F[0]*y_-m_),N[1]=u_(N[1]*y_-m_),F[1]=u_(F[1]*y_-m_),d.push(" m ",N[0],v_,N[1]," l ",F[0],v_,N[1]," l ",F[0],v_,F[1]," l ",N[0],v_,F[1]);break;case l_.Z:d.push(" x ")}if(n>0){d.push(r);for(var j=0;j<n;j++){var B=C_[j];e&&h_(B,B,e),d.push(u_(B[0]*y_-m_),v_,u_(B[1]*y_-m_),j<n-1?v_:"")}}}return d.join("")}(h,this.transform),n.style.zIndex=M_(this.zlevel,this.z,this.z2),w_(t,n),null!=e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},Zd.prototype.onRemove=function(t){S_(t,this._vmlEl),this.removeRectText(t)},Zd.prototype.onAdd=function(t){w_(t,this._vmlEl),this.appendRectText(t)};Vc.prototype.brushVML=function(t){var e,n,r,i=this.style,o=i.image;if("object"==typeof(r=o)&&r.tagName&&"IMG"===r.tagName.toUpperCase()){var a=o.src;if(a===this._imageSrc)e=this._imageWidth,n=this._imageHeight;else{var s=o.runtimeStyle,h=s.width,l=s.height;s.width="auto",s.height="auto",e=o.width,n=o.height,s.width=h,s.height=l,this._imageSrc=a,this._imageWidth=e,this._imageHeight=n}o=a}else o===this._imageSrc&&(e=this._imageWidth,n=this._imageHeight);if(o){var u=i.x||0,c=i.y||0,f=i.width,d=i.height,p=i.sWidth,g=i.sHeight,v=i.sx||0,_=i.sy||0,y=p&&g,m=this._vmlEl;m||(m=s_.doc.createElement("div"),x_(m),this._vmlEl=m);var x,b=m.style,w=!1,S=1,M=1;if(this.transform&&(x=this.transform,S=c_(x[0]*x[0]+x[1]*x[1]),M=c_(x[2]*x[2]+x[3]*x[3]),w=x[1]||x[2]),w){var k=[u,c],T=[u+f,c],E=[u,c+d],P=[u+f,c+d];h_(k,k,x),h_(T,T,x),h_(E,E,x),h_(P,P,x);var C=g_(k[0],T[0],E[0],P[0]),D=g_(k[1],T[1],E[1],P[1]),A=[];A.push("M11=",x[0]/S,v_,"M12=",x[2]/M,v_,"M21=",x[1]/S,v_,"M22=",x[3]/M,v_,"Dx=",u_(u*S+x[4]),v_,"Dy=",u_(c*M+x[5])),b.padding="0 "+u_(C)+"px "+u_(D)+"px 0",b.filter=__+".Matrix("+A.join("")+", SizingMethod=clip)"}else x&&(u=u*S+x[4],c=c*M+x[5]),b.filter="",b.left=u_(u)+"px",b.top=u_(c)+"px";var I=this._imageEl,O=this._cropEl;I||(I=s_.doc.createElement("div"),this._imageEl=I);var L=I.style;if(y){if(e&&n)L.width=u_(S*e*f/p)+"px",L.height=u_(M*n*d/g)+"px";else{var R=new Image,z=this;R.onload=function(){R.onload=null,e=R.width,n=R.height,L.width=u_(S*e*f/p)+"px",L.height=u_(M*n*d/g)+"px",z._imageWidth=e,z._imageHeight=n,z._imageSrc=o},R.src=o}O||((O=s_.doc.createElement("div")).style.overflow="hidden",this._cropEl=O);var N=O.style;N.width=u_((f+v*f/p)*S),N.height=u_((d+_*d/g)*M),N.filter=__+".Matrix(Dx="+-v*f/p*S+",Dy="+-_*d/g*M+")",O.parentNode||m.appendChild(O),I.parentNode!==O&&O.appendChild(I)}else L.width=u_(S*f)+"px",L.height=u_(M*d)+"px",m.appendChild(I),O&&O.parentNode&&(m.removeChild(O),this._cropEl=null);var F="",j=i.opacity;j<1&&(F+=".Alpha(opacity="+u_(100*j)+") "),F+=__+".AlphaImageLoader(src="+o+", SizingMethod=scale)",L.filter=F,m.style.zIndex=M_(this.zlevel,this.z,this.z2),w_(t,m),null!=i.text&&this.drawRectText(t,this.getBoundingRect())}},Vc.prototype.onRemove=function(t){S_(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},Vc.prototype.onAdd=function(t){w_(t,this._vmlEl),this.appendRectText(t)};var D_,A_="normal",I_={},O_=0,L_=document.createElement("div");hc.$override("measureText",(function(t,e){var n=s_.doc;D_||((D_=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",s_.doc.body.appendChild(D_));try{D_.style.font=e}catch(t){}return D_.innerHTML="",D_.appendChild(n.createTextNode(t)),{width:D_.offsetWidth}}));for(var R_=new ru,z_=function(t,e,n,r){var i=this.style;this.__dirty&&Fc.normalizeTextStyle(i,!0);var o=i.text;if(null!=o&&(o+=""),o){if(i.rich){var a=hc.parseRichText(o,i);o=[];for(var s=0;s<a.lines.length;s++){for(var h=a.lines[s].tokens,l=[],u=0;u<h.length;u++)l.push(h[u].text);o.push(l.join(""))}o=o.join("\n")}var c,f,d=i.textAlign,p=i.textVerticalAlign,g=function(t){var e=I_[t];if(!e){O_>100&&(O_=0,I_={});var n,r=L_.style;try{r.font=t,n=r.fontFamily.split(",")[0]}catch(t){}e={style:r.fontStyle||A_,variant:r.fontVariant||A_,weight:r.fontWeight||A_,size:0|parseFloat(r.fontSize||12),family:n||"Microsoft YaHei"},I_[t]=e,O_++}return e}(i.font),v=g.style+" "+g.variant+" "+g.weight+" "+g.size+'px "'+g.family+'"';n=n||hc.getBoundingRect(o,v,d,p,i.textPadding,i.textLineHeight);var _=this.transform;if(_&&!r&&(R_.copy(e),R_.applyTransform(_),e=R_),r)c=e.x,f=e.y;else{var y=i.textPosition;if(y instanceof Array)c=e.x+k_(y[0],e.width),f=e.y+k_(y[1],e.height),d=d||"left";else{var m=this.calculateTextPosition?this.calculateTextPosition({},i,e):hc.calculateTextPosition({},i,e);c=m.x,f=m.y,d=d||m.textAlign,p=p||m.textVerticalAlign}}c=hc.adjustTextX(c,n.width,d),f=hc.adjustTextY(f,n.height,p),f+=n.height/2;var x,b,w,S=s_.createNode,M=this._textVmlEl;M?b=(x=(w=M.firstChild).nextSibling).nextSibling:(M=S("line"),x=S("path"),b=S("textpath"),w=S("skew"),b.style["v-text-align"]="left",x_(M),x.textpathok=!0,b.on=!0,M.from="0 0",M.to="1000 0.05",w_(M,w),w_(M,x),w_(M,b),this._textVmlEl=M);var k=[c,f],T=M.style;_&&r?(h_(k,k,_),w.on=!0,w.matrix=_[0].toFixed(3)+v_+_[2].toFixed(3)+v_+_[1].toFixed(3)+v_+_[3].toFixed(3)+",0,0",w.offset=(u_(k[0])||0)+","+(u_(k[1])||0),w.origin="0 0",T.left="0px",T.top="0px"):(w.on=!1,T.left=u_(c)+"px",T.top=u_(f)+"px"),b.string=String(o).replace(/&/g,"&amp;").replace(/"/g,"&quot;");try{b.style.font=v}catch(t){}P_(M,"fill",{fill:i.textFill,opacity:i.opacity},this),P_(M,"stroke",{stroke:i.textStroke,opacity:i.opacity,lineDash:i.lineDash||null},this),M.style.zIndex=M_(this.zlevel,this.z,this.z2),w_(t,M)}},N_=function(t){S_(t,this._textVmlEl),this._textVmlEl=null},F_=function(t){w_(t,this._textVmlEl)},j_=[Wc,Yc,Vc,Zd,vp],B_=0;B_<j_.length;B_++){var H_=j_[B_].prototype;H_.drawRectText=z_,H_.removeRectText=N_,H_.appendRectText=F_}vp.prototype.brushVML=function(t){var e=this.style;null!=e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},vp.prototype.onRemove=function(t){this.removeRectText(t)},vp.prototype.onAdd=function(t){this.appendRectText(t)}}var W_=Xs.each;function G_(t){return parseInt(t,10)}function Y_(t,e){s_.initVML(),this.root=t,this.storage=e;var n=document.createElement("div"),r=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",r.style.cssText="position:absolute;left:0;top:0;",t.appendChild(n),this._vmlRoot=r,this._vmlViewport=n,this.resize();var i=e.delFromStorage,o=e.addToStorage;e.delFromStorage=function(t){i.call(e,t),t&&t.onRemove&&t.onRemove(r)},e.addToStorage=function(t){t.onAdd&&t.onAdd(r),o.call(e,t)},this._firstPaint=!0}Y_.prototype={constructor:Y_,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){for(var e=this._vmlRoot,n=0;n<t.length;n++){var r=t[n];r.invisible||r.ignore?(r.__alreadyNotVisible||r.onRemove(e),r.__alreadyNotVisible=!0):(r.__alreadyNotVisible&&r.onAdd(e),r.__alreadyNotVisible=!1,r.__dirty&&(r.beforeBrush&&r.beforeBrush(),(r.brushVML||r.brush).call(r,e),r.afterBrush&&r.afterBrush())),r.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(t,e){t=null==t?this._getWidth():t,e=null==e?this._getHeight():e;if(this._width!==t||this._height!==e){this._width=t,this._height=e;var n=this._vmlViewport.style;n.width=t+"px",n.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var t=this.root,e=t.currentStyle;return(t.clientWidth||G_(e.width))-G_(e.paddingLeft)-G_(e.paddingRight)|0},_getHeight:function(){var t=this.root,e=t.currentStyle;return(t.clientHeight||G_(e.height))-G_(e.paddingTop)-G_(e.paddingBottom)|0}},W_(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],(function(t){Y_.prototype[t]=function(){}}));var U_=Y_;(0,zf.registerPainter)("vml",U_);var V_,X_=r((function(t,e){!function(){for(var t in zf){if(null==zf||!zf.hasOwnProperty(t)||"default"===t||"__esModule"===t)return;e[t]=zf[t]}}(),function(){for(var t in Qg){if(null==Qg||!Qg.hasOwnProperty(t)||"default"===t||"__esModule"===t)return;e[t]=Qg[t]}}()})),q_=(V_=X_)&&V_.__esModule&&Object.prototype.hasOwnProperty.call(V_,"default")?V_.default:V_,Z_=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===Q_}(t)}(t)};var Q_="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function K_(t,e){var n;return e&&!0===e.clone&&Z_(t)?J_((n=t,Array.isArray(n)?[]:{}),t,e):t}function $_(t,e,n){var r=t.slice();return e.forEach((function(e,i){void 0===r[i]?r[i]=K_(e,n):Z_(e)?r[i]=J_(t[i],e,n):-1===t.indexOf(e)&&r.push(K_(e,n))})),r}function J_(t,e,n){var r=Array.isArray(e);return r===Array.isArray(t)?r?((n||{arrayMerge:$_}).arrayMerge||$_)(t,e,n):function(t,e,n){var r={};return Z_(t)&&Object.keys(t).forEach((function(e){r[e]=K_(t[e],n)})),Object.keys(e).forEach((function(i){Z_(e[i])&&t[i]?r[i]=J_(t[i],e[i],n):r[i]=K_(e[i],n)})),r}(t,e,n):K_(e,n)}J_.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return J_(t,n,e)}))};var ty=J_;function ey(){var t=Array.prototype.slice.call(arguments);return ty.all(t,{arrayMerge:function(t,e){return e.length>0?e:t}})}function ny(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}function ry(t,e,n){return(Math.pow(e,2)+Math.pow(n,2)-Math.pow(t,2))/(2*e*n)}function iy(t){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object","[object AsyncFunction]":"async","[object Promise]":"promise"}[Object.prototype.toString.call(t)]}var oy,ay=Object.freeze({__proto__:null,merge:ey,calcHypotenuse:ny,cosA:ry,typeOf:iy,isNumber:function(t){return"number"==iy(t)},isBoolean:function(t){return"boolean"==iy(t)},isFunction:function(t){return"function"==iy(t)},isAsync:function(t){return"async"===iy(t)},isPromise:function(t){return"promise"===iy(t)},isString:function(t){return"string"==iy(t)},isObject:function(t){return"object"==iy(t)},isArray:function(t){return"array"==iy(t)}}),sy=function(){function t(e,n){_s(this,t),e?(this.zr=q_.init(document.getElementById(e.id)),oy=this.zr,e&&e.imgUrl&&(this.imgUrl=e.imgUrl),this._option=e):(this.zr=oy,this._option=n),this.zr.dom.oncontextmenu=function(){return!1},this.ctx={},this.ctx.canvasWidth=this.zr.getWidth(),this.ctx.canvasHeight=this.zr.getHeight(),this._zrClick=this._zrClick,this._zrMouseMove=this._zrMouseMove,this._zrMouseDown=this._zrMouseDown,this._zrMouseUp=this._zrMouseUp}return ms(t,[{key:"_bindEvent",value:function(){this.zr.on("click",this._zrClick,this),this.zr.on("mousemove",this._zrMouseMove,this),this.zr.on("mousedown",this._zrMouseDown,this),this.zr.on("mouseup",this._zrMouseUp,this),this.zr.on("dblclick",this._zrDBClick,this)}},{key:"_unBindEvent",value:function(){this.zr&&(this.zr.off("click",this._zrClick),this.zr.off("mousemove",this._zrMouseMove),this.zr.off("mousedown",this._zrMouseDown),this.zr.off("mouseup",this._zrMouseUp),this.zr.off("dblclick",this._zrDBClick))}},{key:"_zrClick",value:function(){}},{key:"_zrMouseMove",value:function(){}},{key:"_zrMouseDown",value:function(){}},{key:"_zrMouseUp",value:function(){}},{key:"_toGlobal",value:function(t,e){var n=q_.util.clone(t),r=[];return n.forEach((function(t){var n;n=e.transformCoordToGlobal(t[0],t[1]),r.push(n)})),r}},{key:"_toGlobalSave",value:function(t,e){var n=this,r=q_.util.clone(t),i=[];return r.forEach((function(t){var r,o=n.group.scale[0];r=1===o?e.transformCoordToGlobal(t[0],t[1]):[(r=e.transformCoordToGlobal(t[0],t[1]))[0]/o,r[1]/o],i.push(r)})),i}},{key:"_toLocal",value:function(t,e){var n=this,r=q_.util.clone(t),i=[];return r.forEach((function(t){var r;n.group.scale[0];r=e.transformCoordToLocal(t[0],t[1]),i.push(r)})),i}},{key:"disposeMove",value:function(){this.zr.off("mousedown",this._zrMouseDown),this.zr.off("mousemove",this._zrMouseMove),this.zr.off("click",this._zrClick)}},{key:"reset",value:function(){this.zr=null,this.image=null,this.group=null,this.polygon=null}},{key:"clear",value:function(){this.group&&this.group.removeAll(),this._unBindEvent(),this.zr&&this.zr.clear()}},{key:"dispose",value:function(){this.zr&&this.zr.dispose(),this.reset()}}]),t}();var hy=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};function ly(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var uy=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ly(Object(n),!0).forEach((function(e){hy(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ly(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t},cy=r((function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e}));var fy=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cy(t,e)},dy=r((function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e}));var py=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}},gy=r((function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e}));var vy=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var _y=function(t,e){return!e||"object"!==gy(e)&&"function"!=typeof e?vy(t):e};var yy,my,xy,by=function(t){var e=py();return function(){var n,r=dy(t);if(e){var i=dy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _y(this,n)}},wy={line:{stroke:"#408AE7"},circle:{fill:"#408AE7",stroke:"#3071E3",r:6}},Sy={shape:{x:0,y:0,width:5,height:5},data:{type:"editRect"},style:{fill:"rgba(255, 255, 255,1)",stroke:"#CC3737",lineWidth:2,strokeNoScale:!0},zlevel:3,draggable:!0},My=0,ky=0,Ty=0,Ey=0,Py=0,Cy=function(t){fy(n,t);var e=by(n);function n(t){var r;return _s(this,n),r=e.call(this,t,yy),t?(r._option={},r._option.id=t&&t.id,r._option.imgUrl=t&&t.imgUrl,r._option.offsetX=0,r._option.offsetY=0,r._option.imgZoom=2,r._option.setRate=0,r._option.widthImg=0,r._option.heightImg=0,r._option.scale=1,r._option.origin=[0,0],r._option.offsetM=0,r._option.offsetN=0,r._option.draggable=!1,r._option.rotateTime=0,r._option.center=[],r._option.rotate={radians:0,degrees:0},r._option.currentShape={},r._option.mode=t&&t.mode||"auto",r._option.exportData=[],r.handlers={},t.style?r._imgConfig=ey(wy,t.style):r._imgConfig=wy,yy=r._option):r._option=yy,r.type="IMAGE",r.image=null,r._editWidth=Sy.shape.width,r._onImageDrag=t&&t.event&&t.event.onImageDrag,r._onImageDragEnd=t&&t.event&&t.event.onImageDragEnd,r._onLoadComplete=t&&t.event&&t.event.onLoadComplete,r._onRotate=t&&t.event&&t.event.onRotate,window.INMARK_DRAWING_RECTANGLE="rectangle",window.INMARK_DRAWING_POLYGON="polygon",r.initialize(),r}return ms(n,[{key:"initialize",value:function(){this.renderImg(this.imgUrl)}},{key:"getZrender",value:function(){return this.zr}},{key:"getImage",value:function(){return this.image}},{key:"getGroup",value:function(){return this.group}},{key:"setDrag",value:function(t){this._option.draggable=t,this.group&&this.group.eachChild((function(e){"IMAGE"===e.data.type&&e.attr({draggable:t,cursor:"pointer"})}))}},{key:"getDrag",value:function(){return this._option.draggable}},{key:"addEventListener",value:function(t,e){var n="_"+t;void 0===this.handlers[n]&&(this.handlers[n]=[]),this.handlers[n].push(e)}},{key:"removeEventListener",value:function(t,e){var n="_"+t;if(this.handlers[n]){var r=this.handlers[n];if(null==e)r.length=0;else if(r.length)for(var i=0;i<r.length;i++)r[i]==e&&this.handlers[n].splice(i,1)}}},{key:"renderImg",value:function(t){var e=this;if(t){xy=new q_.Group,this.group=xy,this._option.group=xy;var n=new Image;n.setAttribute("crossorigin","anonymous"),n.src=t,n.onload=function(){if("auto"===e._option.mode){var r=e.ctx.canvasWidth/n.width,i=e.ctx.canvasHeight/n.height;e._option.setRate=r<i?r:i,e._option.setRate>e._option.imgZoom&&(e._option.setRate=e._option.imgZoom),e._option.widthImg=n.width*e._option.setRate,e._option.heightImg=n.height*e._option.setRate,e._option.offsetX=(e.ctx.canvasWidth-e._option.widthImg)/2,e._option.offsetY=(e.ctx.canvasHeight-e._option.heightImg)/2}else if("auto-rotate"===e._option.mode){var o=e.ctx.canvasWidth/n.width,a=e.ctx.canvasHeight/n.height;e._option.setRate=o<a?o:a,e._option.setRate>e._option.imgZoom&&(e._option.setRate=e._option.imgZoom),e._option.widthImg=n.width*e._option.setRate,e._option.heightImg=n.height*e._option.setRate,e._option.padding=20,e._option.offsetX=(e.ctx.canvasWidth-e._option.widthImg)/2;var s=(e.ctx.canvasHeight-e._option.heightImg)/2;e._option.offsetY=0===s?e._option.padding:parseFloat(s.toFixed(2))+e._option.padding,e._option.heightImg-=2*e._option.padding;var h=new q_.Line({shape:{x1:0,y1:e.ctx.canvasHeight/2,x2:e.ctx.canvasWidth,y2:e.ctx.canvasHeight/2},data:{type:"LINE"},style:e._imgConfig.line,zlevel:2}),l=new q_.Line({shape:{x1:e.ctx.canvasWidth/2,y1:0,x2:e.ctx.canvasWidth/2,y2:e.ctx.canvasHeight},data:{type:"LINE"},style:e._imgConfig.line,zlevel:2}),u=new q_.Circle({shape:{cx:e.ctx.canvasWidth/2,cy:e._option.padding,r:e._imgConfig.circle.r},data:{type:"CIRCLE"},style:e._imgConfig.circle,cursor:"crosshair",draggable:!1,zlevel:2}),c=new q_.Image({style:uy({image:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjAyOTM4OTgzNjkxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjEwODUiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNOTM0LjQgMjA2LjkzM2MtMTcuMDY3LTQuMjY2LTM0LjEzMyA2LjQtMzguNCAyMy40NjdsLTIzLjQ2NyA4Ny40NjdDNzk3Ljg2NyAxODMuNDY3IDY1NC45MzMgOTYgNDk3LjA2NyA5NmMtMjMyLjUzNCAwLTQyMi40IDE4NS42LTQyMi40IDQxNnMxODkuODY2IDQxNiA0MjIuNCA0MTZjMTc5LjIgMCAzMzkuMi0xMTAuOTMzIDM5OC45MzMtMjc1LjIgNi40LTE3LjA2Ny0yLjEzMy0zNC4xMzMtMTkuMi00MC41MzMtMTcuMDY3LTYuNC0zNC4xMzMgMi4xMzMtNDAuNTMzIDE5LjJDNzg1LjA2NyA3NzAuMTMzIDY0OC41MzMgODY0IDQ5Ny4wNjcgODY0Yy0xOTguNCAwLTM1OC40LTE1Ny44NjctMzU4LjQtMzUyczE2Mi4xMzMtMzUyIDM1OC40LTM1MmMxNDUuMDY2IDAgMjc3LjMzMyA4Ny40NjcgMzMwLjY2NiAyMTcuNmwtMTI4LTM2LjI2N2MtMTcuMDY2LTQuMjY2LTM0LjEzMyA2LjQtMzguNCAyMy40NjctNC4yNjYgMTcuMDY3IDYuNCAzNC4xMzMgMjMuNDY3IDM4LjRsMTg1LjYgNDkuMDY3YzIuMTMzIDAgNi40IDIuMTMzIDguNTMzIDIuMTMzIDYuNCAwIDEwLjY2Ny0yLjEzMyAxNy4wNjctNC4yNjcgNi40LTQuMjY2IDEyLjgtMTAuNjY2IDE0LjkzMy0xOS4yTDk2MCAyNDUuMzMzYzAtMTcuMDY2LTguNTMzLTM0LjEzMy0yNS42LTM4LjR6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIxMDg2Ij48L3BhdGg+PC9zdmc+",x:e.ctx.canvasWidth/2-1.2*e._imgConfig.circle.r/2,y:e._option.padding-1.2*e._imgConfig.circle.r/2,width:1.2*e._imgConfig.circle.r,height:1.2*e._imgConfig.circle.r},e._imgConfig.circle),data:{type:"ROTATEIMAGE"},cursor:"crosshair",draggable:!1,zlevel:3});e.zr.add(h),e.zr.add(l);var f=new q_.Group;f.add(u),f.add(c),e._option.rotateMouse=f,e.zr.add(f),c.on("mousedown",(function(t){e._option.rotateListen=!0})),u.on("mousedown",(function(t){e._option.rotateListen=!0}))}else e._option.setRate=1,e._option.widthImg=n.width,e._option.heightImg=n.height,e._option.offsetX=0,e._option.offsetY=0;my=new q_.Image({style:{image:t,x:e._option.offsetX,y:e._option.offsetY,width:e._option.widthImg,height:e._option.heightImg},cursor:"default",data:{type:"IMAGE",origin_width:n.width,origin_height:n.height,rate_width:e._option.widthImg,rate_height:e._option.heightImg},zlevel:1}),e._option.center=[e._option.offsetX+e._option.widthImg/2,e._option.offsetY+e._option.heightImg/2],e.image=my,e._option.image=my,xy.add(my),e.zr.add(xy),e.image.on("drag",(function(t){e._onImageDrag&&e._onImageDrag(t),e.handlers._onImageDrag&&e.handlers._onImageDrag[0](t)})),e.image.on("dragend",(function(t){e._onImageDragEnd&&e._onImageDragEnd(t),e.handlers._onImageDragEnd&&e.handlers._onImageDragEnd[0](t)})),e.handlers._onLoadComplete&&e.handlers._onLoadComplete[0](),e._onLoadComplete&&e._onLoadComplete(),e._bindEvent(),e.setDrag(!0)}}}},{key:"saveInstance",value:function(t){switch(t){case window.INMARK_DRAWING_POLYGON:this._option.polygonOverlay=this,this._bindPolylineOrPolygon();break;case window.INMARK_DRAWING_RECTANGLE:this._option.RecOverlay=this,this._bindRectangle();break;case"hander":this._option.polygonOverlay&&this._option.polygonOverlay.resetShapeStyle(),this._option.polygonOverlay&&this._option.polygonOverlay.close(),this._option.RecOverlay&&this._option.RecOverlay.resetShapeStyle(),this._option.RecOverlay&&this._option.RecOverlay.close(),this.setDrag(!0)}}},{key:"resetAllStyle",value:function(){this._option.polygonOverlay&&this._option.polygonOverlay.resetShapeStyle(),this._option.RecOverlay&&this._option.RecOverlay.resetShapeStyle()}},{key:"getData",value:function(){return this._option.exportData}},{key:"setDrawingMode",value:function(t){this._setDrawingMode(t)}},{key:"_setDrawingMode",value:function(t){this.setDrag(!1),this._option.drawingType=t,this.saveInstance(t)}},{key:"getDrawingMode",value:function(){return this._option.drawingType}},{key:"_bindPolylineOrPolygon",value:function(){}},{key:"_bindRectangle",value:function(){}},{key:"_zrClick",value:function(){}},{key:"_zrMouseMove",value:function(t){if(!t.event.target)return this._option.rotate={radians:0,degrees:0},this._onRotate&&this._onRotate(this.getRotate()),void(this.handlers._onRotate&&this.handlers._onRotate[0](this.getRotate()));if(!0===this._option.rotateListen){this.image.attr({cursor:"crosshair"});var e=this.getOrigin(),n=e[0],r=[];t.event.offsetX>=n?r[0]=t.event.offsetX-n:r[0]=-(n-t.event.offsetX),r[1]=t.event.offsetY-this._option.padding;var i=r[0],o=r[1],a=ny(Math.abs(i),Math.abs(o)),s=e[1]-this._option.padding,h=ny(Math.abs(i),Math.abs(s-o));if(!window.isNaN(a)&&!window.isNaN(s)&&!window.isNaN(h)){var l,u=ry(Math.abs(a),Math.abs(s),Math.abs(h)),c=Math.acos(u),f=180*Math.acos(u)/Math.PI;i<=0?(l=360-f,c=-Math.PI-(Math.PI-c)):(l=f,c=-c),this.group.attr({rotation:c,position:this._reSetPosition(),origin:this.getOrigin()}),this._option.rotateMouse.attr({rotation:c,position:this._reSetPosition(),origin:this.getOrigin()}),this._option.rotate={radians:c,degrees:l.toFixed(2)},this._onRotate&&this._onRotate(this.getRotate()),this.handlers._onRotate&&this.handlers._onRotate[0](this.getRotate())}}}},{key:"_zrMouseDown",value:function(t){}},{key:"_zrMouseUp",value:function(t){"auto-rotate"===this._option.mode&&(this.image.attr({cursor:"default"}),this._option.rotateListen=!1)}},{key:"_zrDBClick",value:function(){}},{key:"_reSetCenter",value:function(){var t=this.image.getBoundingRect();return this._option.widthImg=t.width*this._option.scale,this._option.heightImg=t.height*this._option.scale,this._option.offsetX=this._option.offsetM,this._option.offsetY=this._option.offsetN,this._option.center=[this._option.offsetX+this._option.widthImg/2,this._option.offsetY+this._option.heightImg/2],this._option.center}},{key:"getRotate",value:function(){return this._option.rotate}},{key:"resetRotate",value:function(){this.rotate(0)}},{key:"getOrigin",value:function(){if("auto"===this._option.mode||"auto-rotate"===this._option.mode)this._option.widthImg=this._option.widthImg*this.group.scale[0],this._option.heightImg=this._option.heightImg*this.group.scale[0],this._option.offsetX=(this.ctx.canvasWidth-this._option.widthImg)/2,this._option.offsetY=(this.ctx.canvasHeight-this._option.heightImg)/2,this._option.origin=[this.ctx.canvasWidth/2,this.ctx.canvasHeight/2];else if("original"===this._option.mode){var t=this.image.getBoundingRect();this._option.widthImg=t.width*this.group.scale[0],this._option.heightImg=t.height*this.group.scale[0],this._option.origin=[this.ctx.canvasWidth/2,this.ctx.canvasHeight/2]}return this._option.origin}},{key:"getCenter",value:function(){return this._reSetCenter()}},{key:"_getOffset",value:function(){var t=this.getOrigin();return"auto"===this._option.mode||"auto-rotate"===this._option.mode?[0,0]:[-(-t[0]*this._option.scale+t[0]),-(-t[1]*this._option.scale+t[1])]}},{key:"_reSetPosition",value:function(){var t=this._getOffset();return"auto"===this._option.mode||"auto-rotate"===this._option.mode?t:[t[0]+this._option.offsetM,t[1]+this._option.offsetN]}},{key:"rotate",value:function(t){this.setDrawingMode("hander");this.group.scale[0];var e=.003/180*Math.PI;if(0===t)return this.group.attr({rotation:e,position:this._reSetPosition(),origin:this.getOrigin()}),this._option.rotateMouse&&this._option.rotateMouse.attr({rotation:e,position:this._reSetPosition(),origin:this.getOrigin()}),void(this._option.rotate={radians:0,degrees:0});var n,r=t/180*Math.PI,i=this._option.rotate.degrees,o=this._option.rotate.radians;if(0===(i-=t))Ty=0,n=e;else{var a=i,s=o-=r;(Math.abs(a)>=360||Math.abs(ky-t)>=360)&&My++,t>0?(ky=Ey+a+360*My,Ty=Py+s+My*(2*Math.PI)):(ky=Ey+a-360*My,Ty=Py+s-My*(2*Math.PI)),ky%t!=0&&1===My&&(Ey=ky,Py=Ty),n=Ty,0===Ty&&(n=e),My=0}this.group.attr({rotation:n,position:this._reSetPosition(),origin:this.getOrigin()}),this._option.rotate={radians:this.group.rotation===e?0:this.group.rotation,degrees:(this.group.rotation===e?0:this.group.rotation)/Math.PI*180},this._onRotate&&this._onRotate(this.getRotate()),this.handlers._onRotate&&this.handlers._onRotate[0](this.getRotate())}},{key:"_limitAttributes",value:function(t){var e=this.image.getBoundingRect(),n=-e.width+this.ctx.canvasWidth/2,r=this.ctx.canvasWidth/2,i=Math.max(n,Math.min(t.x,r)),o=-e.height+this.ctx.canvasHeight/2,a=this.ctx.canvasHeight/2;return{x:i,y:Math.max(o,Math.min(t.y,a)),scale:Math.max(.05,t.scale)}}},{key:"zoomIn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.109;this.zoomStage(t)}},{key:"zoomOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.9;this.zoomStage(t)}},{key:"zoomStage",value:function(t){this.setDrawingMode("hander");var e=this.group.scale[0],n=this.ctx.canvasWidth/2,r=this.ctx.canvasHeight/2,i=n/e-this.group.position[0]/e,o=r/e-this.group.position[1]/e,a=Math.max(.05,e*t),s={x:-(i-n/a)*a,y:-(o-r/a)*a},h=this._limitAttributes(uy(uy({},s),{},{scale:a}));this.group.attr({position:[0,0],scale:[h.scale,h.scale],origin:this.getOrigin()});var l=this.group.getLocalTransform();return this._option.offsetM=l[4],this._option.offsetN=l[5],this._option.scale=h.scale,this}},{key:"zoomSlider",value:function(t){this.setDrawingMode("hander"),this.group.attr({position:[0,0],scale:[t,t],origin:this.getOrigin()});var e=this.group.getLocalTransform();return this._option.offsetM=e[4],this._option.offsetN=e[5],this._option.scale=t,this}},{key:"getOffCanvas",value:function(){return this.zr.painter.getRenderedCanvas({backgroundColor:"#fff"})}},{key:"getType",value:function(){return this.zr.painter.getType()}},{key:"removeSub",value:function(t){var e=this;this.setDrawingMode("hander"),this._option.polygonOverlay&&this._option.polygonOverlay.removeSub(t),this._option.RecOverlay&&this._option.RecOverlay.removeSub(t),this._option.exportData.forEach((function(n,r){n.id===t.id&&e._option.exportData.splice(r,1)}))}},{key:"removeAnnotation",value:function(){var t=this;return this.setDrawingMode("hander"),this._option.polygonOverlay&&this._option.polygonOverlay.removeAnnotation(),this._option.RecOverlay&&this._option.RecOverlay.removeAnnotation(),this._option.exportData.forEach((function(e,n){e.id===t._option.removeItem.data.id&&t._option.exportData.splice(n,1)})),this._option.removeItem}},{key:"removeAll",value:function(){this.setDrawingMode("hander"),this._option.polygonOverlay&&this._option.polygonOverlay.removeAll(),this._option.RecOverlay&&this._option.RecOverlay.removeAll()}},{key:"selected",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"Rectangle"===t.type?this._option.RecOverlay&&this._option.RecOverlay.selected(t,e):"Polygon"===t.type&&this._option.polygonOverlay&&this._option.polygonOverlay.selected(t,e)}},{key:"setPosition",value:function(t){"Rectangle"===t.type?this._option.RecOverlay&&this._option.RecOverlay.setPosition(t):"Polygon"===t.type&&this._option.polygonOverlay&&this._option.polygonOverlay.setPosition(t)}},{key:"_convertImageToCanvas",value:function(t){var e=document.createElement("canvas");e.width=1e3,e.height=1e3;var n=e.getContext("2d"),r={x:this._option.widthImg/2,y:this._option.heightImg/2},i=this._option.rotate.degrees;return e.width=6e3,e.height=6e3,n.rect(0,0,6e3,6e3),n.fillStyle="rgba(255, 255, 255, 1)",n.fill(),n.strokeStyle="green",n.strokeRect(0,0,6e3,6e3),n.translate(r.x,r.y),n.rotate(-this._option.rotate.radians),n.translate(-r.x,-r.y),i>=0&&i<90?n.drawImage(t,0,-this._option.heightImg):i>=90&&i<180?n.drawImage(t,-this._option.widthImg,-this._option.heightImg):(i>=180&&i<270||i>=270&&i<360)&&n.drawImage(t,-this._option.widthImg,0),e}},{key:"exportOut",value:function(){var t=this,e=new Image;e.setAttribute("crossorigin","anonymous"),e.src=this._option.imgUrl,e.width=this._option.widthImg,e.height=this._option.heightImg,e.style.background="#fff",e.onload=function(){var n=t._convertImageToCanvas(e).toDataURL("image/jpeg");t.exportImages(n)}}},{key:"base64ToBlob",value:function(t){for(var e=t.split(";base64,"),n=e[0].split(":")[1],r=window.atob(e[1]),i=r.length,o=new Uint8Array(i),a=0;a<i;++a)o[a]=r.charCodeAt(a);return new Blob([o],{type:n})}},{key:"exportImages",value:function(t){var e=document.createElement("a"),n=this.base64ToBlob(t);document.createEvent("HTMLEvents").initEvent("click",!0,!0),e.download="test.jpg",e.href=URL.createObjectURL(n),e.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}},{key:"exportSimple",value:function(){this.zr.painter.getRenderedCanvas({backgroundColor:"#fff"}).toBlob((function(t){var e=window.URL.createObjectURL(t);window.open(e)}),"image/png")}},{key:"export",value:function(){var t=this.group.getBoundingRect(),e=t.x,n=t.y,r=t.width,i=t.height,o=q_.init(document.createElement("div"),{width:r,height:i}),a=new q_.Group;return a.position=[0-e,0-n],this.group.eachChild((function(t){a.add(t)})),o.add(a),o.refreshImmediately(),o.painter.getRenderedCanvas({backgroundColor:"#fff"}).toBlob((function(t){var e=window.URL.createObjectURL(t);window.open(e)}),"image/png")}}]),n}(sy),Dy={default:{fill:"rgba(24,151,117,0.05)",stroke:"#189775",lineWidth:1,lineDash:[0,0],strokeNoScale:!0,zlevel:2},selected:{fill:"rgba(245,69,69,0.15)",stroke:"#CC3737",lineWidth:1,lineDash:[0,0],strokeNoScale:!0},hover:{fill:"rgba(24,151,117,0.05)",stroke:"#189775",lineWidth:1,lineDash:[0,0],strokeNoScale:!0}},Ay=function(t){fy(n,t);var e=by(n);function n(t){var r;return _s(this,n),(r=e.call(this)).group=r._option.group,r.image=r._option.image,r.type="RECTANGLE",r._option.isOpen=t.isOpen||!1,r._onCreate=t&&t.event&&t.event.onCreate,r._onCreateComplete=t&&t.event&&t.event.onCreateComplete,r._onRectDrag=t&&t.event&&t.event.onRectDrag,r._onRectDragComplete=t&&t.event&&t.event.onRectDragComplete,r._onEditNodeDrag=t&&t.event&&t.event.onEditNodeDrag,r._onEditNodeDragComplete=t&&t.event&&t.event.onEditNodeDragComplete,r._onSelected=t&&t.event&&t.event.onSelected,r._onHover=t&&t.event&&t.event.onHover,r._unSelect=t&&t.event&&t.event.unSelect,r._onImageDrag=t&&t.event&&t.event.onImageDrag,r._onImageDragEnd=t&&t.event&&t.event.onImageDragEnd,r.data=t.data,r._createLimit=6,r._editWidth=Sy.shape.width,t.style?r._styleConfig=ey(Dy,t.style):r._styleConfig=Dy,r._isMouseDown=!1,r._canDrawShape=!1,r._startPoint=[],r._endPoint=[],r._areaShapes=[],r._editNode=[],r._editRectStart=[],r.position=[0,0],r.bgDrag=[],r.graphic=r._createGraphicGroup(),r.tempShape={},r.handlers={},r.zlevel=r._styleConfig.default.zlevel,r.DIYStyle={},r.image&&(r.image.on("drag",(function(t){if(r._onImageDrag&&r._onImageDrag(t),r.handlers._onImageDrag&&r.handlers._onImageDrag[0](t),!0===r.getDrag()){var e=t.target.position;r.graphic.attr({position:e}),r.bgDrag=e}})),r.image.on("dragend",(function(t){r._onImageDragEnd&&r._onImageDragEnd(t),r.handlers._onImageDragEnd&&r.handlers._onImageDragEnd[0](t)}))),"object"===gy(r.data)&&r.setData(r.data),r}return ms(n,[{key:"open",value:function(){this._option.isOpen=!0,this.resetAllStyle(),this.setDrawingMode(window.INMARK_DRAWING_RECTANGLE),this._bindEvent(),this.setEdit(!0),this.group.eachChild((function(t){"IMAGE"===t.data.type&&t.attr({cursor:"crosshair"})}))}},{key:"close",value:function(){this._option.isOpen=!1,this.setEdit(!1),this.group.eachChild((function(t){"IMAGE"===t.data.type&&t.attr({cursor:"default"})})),"hander"!==this._option.drawingType&&this.setDrawingMode("hander")}},{key:"setEdit",value:function(t){t?this._areaShapes.forEach((function(t){t.attr({draggable:!0}),t.bound&&t.bound.eachChild((function(t){t.hide()}))})):this._areaShapes.forEach((function(t){t.attr({draggable:!1}),t.bound&&t.bound.eachChild((function(t){t.hide()}))}))}},{key:"addEventListener",value:function(t,e){var n="_"+t;void 0===this.handlers[n]&&(this.handlers[n]=[]),this.handlers[n].push(e)}},{key:"removeEventListener",value:function(t,e){var n="_"+t;if(this.handlers[n]){var r=this.handlers[n];if(null==e)r.length=0;else if(r.length)for(var i=0;i<r.length;i++)r[i]==e&&this.handlers[n].splice(i,1)}}},{key:"_createGraphicGroup",value:function(t,e){var n=new q_.Group;return n.data={type:"graphicGroup"},n}},{key:"_zrClick",value:function(t){t.target&&"IMAGE"===t.target.data.type&&this.resetShapeStyle()}},{key:"_zrMouseDown",value:function(t){1===t.which&&t.target&&"IMAGE"===t.target.data.type&&this._option.isOpen&&this._option.drawingType===window.INMARK_DRAWING_RECTANGLE&&(this.resetShapeStyle(),this._startPoint=this._getDrawPoint(t),this._isMouseDown=!0,this._option.currentShape=null)}},{key:"_getDrawPoint",value:function(t){var e,n,r=this.group.scale[0],i=t.target&&t.target.transform;return t.target&&i?(r=i[0],this.group.scale=[r,r],e=i[4]>0?t.offsetX/r-Math.abs(i[4])/r:t.offsetX/r+Math.abs(i[4])/r,n=i[5]>0?t.offsetY/r-Math.abs(i[5])/r:t.offsetY/r+Math.abs(i[5])/r):(e=t.offsetX/r,n=t.offsetY/r),[e,n]}},{key:"_zrMouseMove",value:function(t){if(this._isMouseDown&&this._startPoint&&t.target){var e=this._getDrawPoint(t),n=Math.abs(this._startPoint[0]-e[0]),r=Math.abs(this._startPoint[1]-e[1]);if(n<this._createLimit&&r<this._createLimit)return this._canDrawShape=!1,void(this.selectedSub=null);this._endPoint=this._getDrawPoint(t),this._canDrawShape=!0;this.group.scale[0];var i=this._changeToFourPoints(this._startPoint.concat(this._endPoint));this._option.currentShape?this._option.currentShape.attr({shape:{points:i}}):(this._option.currentShape=this._createShape(i,{notes:"",type:"Rectangle"}),this.graphic.add(this._option.currentShape),this._areaShapes.push(this._option.currentShape));var o=this._changeToPoints(i);this.handlers._onCreate&&this.handlers._onCreate[0](t,{notes:"",coordinates:o}),this._onCreate&&this._onCreate(t,{notes:"",coordinates:o})}}},{key:"_zrMouseUp",value:function(t){if(this._isMouseDown&&this._option.currentShape){var e=this._areaShapes.length-1,n=this._option.currentShape.shape.points,r=this._changeToPoints(n),i={type:"Rectangle",notes:"",id:window.btoa(Math.random())};this._areaShapes[e].attr({style:this._styleConfig.selected,data:uy({},i)}),this._editNode=r,r.length>0&&(this._createEditGroup(n,this._option.currentShape),this._option.exportData.push(uy(uy({},i),{},{coordinates:r})),this.selectedSub=t.target,this._onCreateComplete&&this._onCreateComplete(t,uy(uy({},i),{},{coordinates:r})),this.handlers._onCreateComplete&&this.handlers._onCreateComplete[0](t,{notes:"",coordinates:r}))}this._isMouseDown=!1,this._canDrawShape=!1,this._startPoint=[],this._endPoint=[]}},{key:"setData",value:function(t){this.setMarkers(t),this.saveInstance(window.INMARK_DRAWING_RECTANGLE)}},{key:"setZIndex",value:function(t){this.zlevel=t}},{key:"_filterImage",value:function(){this._areaShapes.splice(0);var t=[];this.group.eachChild((function(e){"IMAGE"===e.data.type&&t.push(e)})),this.group.removeAll(),this.group.add(t[0]),this.zr.add(this.group)}},{key:"setMarkers",value:function(t){var e=this;this.removeAll(),this._option.exportData=q_.util.clone(t),t.length>0&&t.forEach((function(t){if("Rectangle"===t.type&&"object"===gy(t.coordinates)){var n=e._calculateToRelationpix(t.coordinates),r=e._createShape(n,t);if(0===n.length)throw new Error("æ­¤å¾å½¢æ²¡æåæ æ°æ®,è¯·å é¤æ­¤å¾å½¢"+JSON.stringify(t));n.length>0&&(e._createEditGroup(n,r),e._areaShapes.push(r),e.graphic.add(r))}})),this.group.add(this.graphic),this.setEdit(!1)}},{key:"setSelectedStyle",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.attr({style:ey(this._styleConfig.selected,n)}),this._option.isOpen){t.attr({draggable:!0});var r=this._editWidth/this.group.scale[0];t.bound&&t.bound.eachChild((function(n,i){n.show(),n.attr({shape:{x:t.shape.points[i][0]-r/2,y:t.shape.points[i][1]-r/2,width:r,height:r},zlevel:e.zlevel+1})}))}}},{key:"selected",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._option.isOpen||(this.resetAllStyle(),this._areaShapes.forEach((function(r){if(r.data.id===t.id){e._option.currentShape=r;var i=e._option.currentShape.shape.points,o=e._changeToPoints(i);e._editNode=o,e.setSelectedStyle(r,n)}})))}},{key:"setPosition",value:function(t){if(!this._option.isOpen&&4===t.coordinates.length){var e,n,r=this._calculateToRelationpix(t.coordinates),i=[(r[0][0]+r[1][0])/2,(r[0][1]+r[3][1])/2],o=this.group.scale[0],a=this.zr.painter._width,s=this.zr.painter._height;0===this.bgDrag.length?(e=0,n=0):(e=this.bgDrag[0],n=this.bgDrag[1]),this.group.attr({position:[(-i[0]-e)*o+a/2*o,(-i[1]-n)*o+s/2*o]})}}},{key:"_createEditGroup",value:function(t,e){var n=new q_.Group;return n.data={type:"EditGroup"},n.bound=e,this._createEditPoint(t,n),e.bound=n,this.graphic.add(n),n}},{key:"_toShapeDragEnd",value:function(t,e){var n,r,i=this,o=[],a=q_.util.clone(t.target.shape.points),s=t.target.transform;return 0===this.bgDrag.length?(n=0,r=0):(n=this.bgDrag[0],r=this.bgDrag[1]),a.forEach((function(t){var e;s&&(s[4]-i._option.offsetM>0?t[0]=t[0]+Math.abs(s[4]-i._option.offsetM)/s[0]:t[0]=t[0]-Math.abs(s[4]-i._option.offsetM)/s[0],s[5]-i._option.offsetN>0?t[1]=t[1]+Math.abs(s[5]-i._option.offsetN)/s[0]:t[1]=t[1]-Math.abs(s[5]-i._option.offsetN)/s[0]),e=[t[0]-n,t[1]-r],o.push(e)})),o}},{key:"_createShape",value:function(t,e){var n=this,r=new q_.Polygon({shape:{points:t,smooth:0},data:e,cursor:"default",draggable:!1,style:this._styleConfig.default,zlevel:this.zlevel});return r.on("click",(function(t){1===t.which&&(n._editNode=n._toShapeDragEnd(t,t.target))})),r.on("dragstart",(function(t){1===t.which&&(n._option.currentShape=r,n.tempShape=t.target)})),r.on("drag",(function(t){var e=r.bound;e.attr({position:e.bound.position}),e.eachChild((function(t){t.hide()})),n._editNode=n._toShapeDragEnd(t,t.target),n._option.currentShape=t.target;var i=n._toGlobal(t.target.shape.points,r),o=n._changeToPoints(i);n.handlers._onRectDrag&&n.handlers._onRectDrag[0](t,uy(uy({},t.target.data),{},{coordinates:o})),n._onRectDrag&&n._onRectDrag(t,uy(uy({},t.target.data),{},{coordinates:o}))})),r.on("dragend",(function(t){if(1===t.which){var e=t.target;n.position=q_.util.clone(e.position);var r=n._toShapeDragEnd(t,e);n._option.currentShape=e,n._reCreatePoints(r);var i=n._changeToPoints(r);n._option.exportData.forEach((function(e){e.id===t.target.data.id&&(e.coordinates=i)})),n.handlers._onRectDragComplete&&n.handlers._onRectDragComplete[0](t,uy(uy({},t.target.data),{},{coordinates:i})),n._onRectDragComplete&&n._onRectDragComplete(t,uy(uy({},t.target.data),{},{coordinates:i}))}})),r.on("mousemove",(function(t){n._option.isOpen&&(r.attr({cursor:"default"}),n.tempShape=t.target)})),r.on("mouseover",(function(t){if(n._option.isOpen)return r.attr({cursor:"default"}),void(!1===n._canDrawShape&&!1===n._isMouseDown&&(n.tempShape=t.target,n._unBindEvent()));var e=n._toGlobal(t.target.shape.points,r),i=n._changeToPoints(e);n.handlers._onHover&&n.handlers._onHover[0](t,uy(uy({},t.target.data),{},{coordinates:i})),n._onHover&&n._onHover(t,uy(uy({},t.target.data),{},{coordinates:i}))})),r.on("mouseout",(function(t){n._option.isOpen&&n._bindEvent()})),r.on("mousedown",(function(t){if(!(n._option.polygonOverlay&&n._option.polygonOverlay._isMouseDown||1!==t.which)){n._option.currentShape=t.target,n.tempShape=t.target,n.selectedSub=r,n.resetAllStyle(),n.setSelectedStyle(t.target);var e=n._toGlobal(t.target.shape.points,r),i=n._changeToPoints(e);n.handlers._onSelected&&n.handlers._onSelected[0](t,uy(uy({},t.target.data),{},{coordinates:i})),n._onSelected&&n._onSelected(t,uy(uy({},t.target.data),{},{coordinates:i}))}})),r.on("mouseup",(function(t){n._option.isOpen&&n.selectedSub&&1===t.which&&(n._startPoint=[],n._option.currentShape.bound&&n._option.currentShape.bound.eachChild((function(t){t.show()})),n._bindEvent())})),r}},{key:"_reCreatePoints",value:function(t){var e=this,n=this._createShape(t,this._option.currentShape.data);this.graphic.remove(this._option.currentShape.bound),this.graphic.remove(this._option.currentShape),this._areaShapes.forEach((function(t,n){t.data.id===e._option.currentShape.data.id&&e._areaShapes.splice(n,1)})),this._option.currentShape=n,this._createEditGroup(t,n),this.selectedSub=n,this._areaShapes.push(n),this.graphic.add(n),this.setSelectedStyle(n),this._startPoint=[]}},{key:"_editElementEvent",value:function(t,e){var n=this;t.on("mouseover",(function(t){})),t.on("mouseout",(function(t){})),t.on("mouseup",(function(t){})),t.on("dragstart",(function(t){if(!n._option.polygonOverlay||!n._option.polygonOverlay._isMouseDown)if(3!==t.which){if(1===t.which){n._option.currentShape.transform;var r=n._option.currentShape.shape.points,i=q_.util.clone(r);n.oldPoint=i;var o=i[1][0]-i[0][0],a=i[2][1]-i[1][1];n.obj={width:o,height:a},n.m=q_.util.clone(n._option.currentShape.transform||[])}}else e.eachChild((function(t){t.hide()}))})),t.on("drag",(function(t){if(!(n._option.polygonOverlay&&n._option.polygonOverlay._isMouseDown||"CANVAS"!==t.event.target.tagName||1!==t.which)){var r,i,o=q_.util.clone(n._option.currentShape.shape.points),a=n.m,s=t.target.data._side;a[0]||(a[0]=1,a[4]=0,a[5]=0),0===n.bgDrag.length?(r=0,i=0):(r=n.bgDrag[0],i=n.bgDrag[1]);var h=[],l=0,u=0;n.obj.width,n.obj.height;switch(s){case"tl":l=t.event.offsetX,u=t.event.offsetY,h=[[(l-n._option.offsetM)/a[0]-r,(u-n._option.offsetN)/a[0]-i],[o[1][0],(u-n._option.offsetN)/a[0]-i],o[2],[(l-n._option.offsetM)/a[0]-r,o[3][1]]];break;case"tr":l=t.event.offsetX,u=t.event.offsetY,h=[[o[0][0],(u-n._option.offsetN)/a[0]-i],[(l-n._option.offsetM)/a[0]-r,(u-n._option.offsetN)/a[0]-i],[(l-n._option.offsetM)/a[0]-r,o[3][1]],o[3]];break;case"br":l=t.event.offsetX,u=t.event.offsetY,h=[o[0],[(l-n._option.offsetM)/a[0]-r,o[0][1]],[(l-n._option.offsetM)/a[0]-r,(u-n._option.offsetN)/a[0]-i],[o[0][0],(u-n._option.offsetN)/a[0]-i]];break;case"bl":l=t.event.offsetX,u=t.event.offsetY,h=[[(l-n._option.offsetM)/a[0]-r,o[0][1]],o[1],[o[2][0],(u-n._option.offsetN)/a[0]-i],[(l-n._option.offsetM)/a[0]-r,(u-n._option.offsetN)/a[0]-i]]}e.removeAll(),e.attr({position:[0,0],scale:[1,1]}),n._option.currentShape.attr({scale:[1,1],shape:{points:h},position:[0,0]}),n._editNode=h;var c=n._changeToPoints(h);n.handlers._onEditNodeDrag&&n.handlers._onEditNodeDrag[0](t,uy(uy({},e.bound.data),{},{coordinates:c})),n._onEditNodeDrag&&n._onEditNodeDrag(t,uy(uy({},e.bound.data),{},{coordinates:c})),n._createEditPoint(h,e)}})),t.on("dragend",(function(t){if((!n._option.polygonOverlay||!n._option.polygonOverlay._isMouseDown)&&n._editNode.length>0){n._reCreatePoints(n._editNode);var r=n._changeToPoints(n._editNode);n._option.exportData.forEach((function(t){t.id===e.bound.data.id&&(t.coordinates=r)})),n.handlers._onEditNodeDragComplete&&n.handlers._onEditNodeDragComplete[0](t,uy(uy({},e.bound.data),{},{coordinates:r})),n._onEditNodeDragComplete&&n._onEditNodeDragComplete(t,uy(uy({},e.bound.data),{},{coordinates:r}))}}))}},{key:"_createEditPoint",value:function(t,e){var n=this,r=[];r.push({_side:"tl",points:t[0]}),r.push({_side:"tr",points:t[1]}),r.push({_side:"br",points:t[2]}),r.push({_side:"bl",points:t[3]}),r.forEach((function(t){var r=n._editWidth/n.group.scale[0],i=new q_.Rect(ey(Sy,{shape:{x:t.points[0]-r/2,y:t.points[1]-r/2,width:r,height:r},data:{_side:t._side},zlevel:n.zlevel+1}));n._editElementEvent(i,e),e.add(i)}))}},{key:"setSilent",value:function(t){}},{key:"setOptionStyle",value:function(t){var e=this;this.DIYStyle=t,this._areaShapes.forEach((function(n){"Rectangle"===n.data.type&&n.attr({style:uy(uy({},e._styleConfig.default),t)})}))}},{key:"resetShapeStyle",value:function(){var t=this;this._areaShapes.forEach((function(e){"Rectangle"===e.data.type&&(e.attr({style:uy(uy({},t._styleConfig.default),t.DIYStyle),draggable:!1}),e.bound&&e.bound.eachChild((function(t){t.hide()})))}))}},{key:"removeAnnotation",value:function(){var t,e=this;if(this.selectedSub)return this._areaShapes.forEach((function(n,r){n.data.id===e.selectedSub.data.id&&(t=n,e._areaShapes.splice(r,1))})),t&&(this.graphic.remove(t.bound),t.bound=null,this.graphic.remove(this.selectedSub),this.selectedSub=null),this._option.removeItem=t,this._option.removeItem}},{key:"removeSub",value:function(t){var e,n=t.id;this._areaShapes.forEach((function(t,r){t.data.id===n&&(e=r)}));var r=this._areaShapes[e];r&&(this._areaShapes.splice(e,1),this.graphic.remove(r.bound),r.bound=null,this.graphic.remove(r))}},{key:"removeAll",value:function(){var t=this;this._areaShapes.length>0&&this._areaShapes.forEach((function(e){e.bound&&(t.graphic.remove(e.bound),e.bound=null),t.graphic.remove(e),e=null})),this._areaShapes.splice(0),this._option.exportData.splice(0)}},{key:"_calculateToRelationpix",value:function(t){var e=this,n=[];return t.forEach((function(t){var r=t[0]*e._option.setRate+e._option.offsetX,i=t[1]*e._option.setRate+e._option.offsetY;n.push([r,i])})),n}},{key:"_changeToTowPoints",value:function(t){return[(t[0][0]-this._option.offsetX)/this._option.setRate,(t[0][1]-this._option.offsetY)/this._option.setRate,(t[2][0]-this._option.offsetX)/this._option.setRate,(t[2][1]-this._option.offsetY)/this._option.setRate]}},{key:"_changeToPoints",value:function(t){var e=this,n=[];return t.forEach((function(t){n.push([(t[0]-e._option.offsetX)/e._option.setRate,(t[1]-e._option.offsetY)/e._option.setRate])})),n}},{key:"_changeToFourScalePoints",value:function(t,e){var n=[];return n[0]=[t[0]/e,t[1]/e],n[1]=[t[2]/e,t[1]/e],n[2]=[t[2]/e,t[3]/e],n[3]=[t[0]/e,t[3]/e],n}},{key:"_changeToFourPoints",value:function(t){var e=[];return t[0]<=t[2]&&t[1]<=t[3]?(e[0]=[t[0],t[1]],e[1]=[t[2],t[1]],e[2]=[t[2],t[3]],e[3]=[t[0],t[3]]):t[0]>=t[2]&&t[1]<=t[3]?(e[0]=[t[2],t[1]],e[1]=[t[0],t[1]],e[2]=[t[0],t[3]],e[3]=[t[2],t[3]]):t[0]>t[2]&&t[1]>t[3]?(e[0]=[t[2],t[3]],e[1]=[t[0],t[3]],e[2]=[t[0],t[1]],e[3]=[t[2],t[1]]):t[0]<t[2]&&t[1]>t[3]&&(e[0]=[t[0],t[3]],e[1]=[t[2],t[3]],e[2]=[t[2],t[1]],e[3]=[t[0],t[1]]),e}},{key:"addHover",value:function(t){for(var e=0;e<this._areaShapes.length;e++){var n=this._areaShapes[e];if(n.data.id==t.id){this.zr.addHover(n,t.style);break}}}},{key:"removeHover",value:function(t){for(var e=0;e<this._areaShapes.length;e++){var n=this._areaShapes[e];if(n.data.id==t.id){this.zr.removeHover(n);break}}}},{key:"reset",value:function(){}}]),n}(Cy),Iy=function(t){fy(n,t);var e=by(n);function n(t){var r;return _s(this,n),(r=e.call(this)).group=r._option.group,r.image=r._option.image,r.type="POLYGON",r._option.isOpen=t.isOpen||!1,r._onCreate=t&&t.event&&t.event.onCreate,r._onCreateComplete=t&&t.event&&t.event.onCreateComplete,r._onRectDrag=t&&t.event&&t.event.onRectDrag,r._onRectDragComplete=t&&t.event&&t.event.onRectDragComplete,r._onEditNodeDrag=t&&t.event&&t.event.onEditNodeDrag,r._onEditNodeDragComplete=t&&t.event&&t.event.onEditNodeDragComplete,r._onSelected=t&&t.event&&t.event.onSelected,r._onHover=t&&t.event&&t.event.onHover,r._unSelect=t&&t.event&&t.event.unSelect,r._onImageDrag=t&&t.event&&t.event.onImageDrag,r._onImageDragEnd=t&&t.event&&t.event.onImageDragEnd,r.data=t.data,r._editWidth=Sy.shape.width,t.style?r._styleConfig=ey(Dy,t.style):r._styleConfig=Dy,r._isMouseDown=!1,r._startPoint=[],r._endPoint=[],r._areaShapes=[],r._editNode=[],r._editRectStart=[],r.position=[0,0],r.bgDrag=[],r.graphic=r._createGraphicGroup(),r.tempShape=[],r.creatCount=0,r.handlers={},r.zlevel=r._styleConfig.default.zlevel,r.DIYStyle={},r.image&&(r.image.on("drag",(function(t){if(r._onImageDrag&&r._onImageDrag(t),!0===r.getDrag()){var e=t.target.position;r.graphic.attr({position:e}),r.bgDrag=e}})),r.image.on("dragend",(function(t){r._onImageDragEnd&&r._onImageDragEnd(t)}))),"object"===gy(r.data)&&r.setData(r.data),r}return ms(n,[{key:"open",value:function(){this._option.isOpen=!0,this.resetAllStyle(),this.setDrawingMode(window.INMARK_DRAWING_POLYGON),this._bindEvent(),this.setEdit(!0),this.group.eachChild((function(t){"IMAGE"===t.data.type&&t.attr({cursor:"crosshair"})}))}},{key:"close",value:function(){this._option.isOpen=!1,this.creatCount=0,this.setEdit(!1),this.group.eachChild((function(t){"IMAGE"===t.data.type&&t.attr({cursor:"default"})})),"hander"!==this._option.drawingType&&this.setDrawingMode("hander")}},{key:"setEdit",value:function(t){t?this._areaShapes.forEach((function(t){t.attr({draggable:!0}),t.bound&&t.bound.eachChild((function(t){t.hide()}))})):this._areaShapes.forEach((function(t){t.attr({draggable:!1}),t.bound&&t.bound.eachChild((function(t){t.hide()}))}))}},{key:"addEventListener",value:function(t,e){var n="_"+t;void 0===this.handlers[n]&&(this.handlers[n]=[]),this.handlers[n].push(e)}},{key:"removeEventListener",value:function(t,e){var n="_"+t;if(this.handlers[n]){var r=this.handlers[n];if(null==e)r.length=0;else if(r.length)for(var i=0;i<r.length;i++)r[i]==e&&this.handlers[n].splice(i,1)}}},{key:"_createGraphicGroup",value:function(t,e){var n=new q_.Group;return n.data={type:"graphicGroup"},n}},{key:"_zrClick",value:function(t){t.target&&"IMAGE"===t.target.data.type&&this.resetShapeStyle()}},{key:"_zrMouseDown",value:function(t){1===t.which&&t.target&&this._option.isOpen&&this._option.drawingType===window.INMARK_DRAWING_POLYGON&&(0!==this.creatCount&&!0===this._isMouseDown&&(this.creatCount++,this._startPoint.push(this._getDrawPoint(t))),0===this.creatCount&&!1===this._isMouseDown&&"IMAGE"===t.target.data.type&&(this.resetShapeStyle(),this._startPoint[this.creatCount]=this._getDrawPoint(t),this.creatCount++,this._isMouseDown=!0,this._option.currentShape=null))}},{key:"_zrMouseMove",value:function(t){if(this._isMouseDown&&this._startPoint&&t.target){var e;if(this._endPoint=this._getDrawPoint(t),1===this.creatCount)e=[[this._startPoint[0][0]/this._option.setRate,this._startPoint[0][1]/this._option.setRate],[this._endPoint[0]/this._option.setRate,this._endPoint[1]/this._option.setRate]];else{var n=q_.util.clone(this._startPoint),r=n.length-1;JSON.stringify(n[r])!==JSON.stringify(this._endPoint)&&n.push(this._endPoint),e=this._changeToPoints(n)}this._option.currentShape?this._option.currentShape.attr({shape:{points:e}}):(this._option.currentShape=this._createShape(e,{notes:"",type:"Polygon"}),this.graphic.add(this._option.currentShape),this._areaShapes.push(this._option.currentShape));var i=this._changeToPoints(e);this.handlers._onCreate&&this.handlers._onCreate[0](t,{notes:"",coordinates:i}),this._onCreate&&this._onCreate(t,{notes:"",coordinates:i})}}},{key:"_zrDBClick",value:function(t){if(this.creatCount<=3&&!0===this._isMouseDown)return this.creatCount--,void this._startPoint.splice(this._startPoint.length-1);if(t.target&&this._isMouseDown&&this._option.currentShape){var e=this._areaShapes.length-1,n=this._option.currentShape.shape.points,r=this._changeToPoints(n),i={type:"Polygon",notes:"",id:window.btoa(Math.random())};this._areaShapes[e].attr({style:this._styleConfig.selected,data:uy({},i)}),this._editNode=r,r.length>0&&(this._createEditGroup(r,this._option.currentShape),this._option.exportData.push(uy(uy({},i),{},{coordinates:r})),this.selectedSub=t.target,this._onCreateComplete&&this._onCreateComplete(t,uy(uy({},i),{},{coordinates:r})),this.handlers._onCreateComplete&&this.handlers._onCreateComplete[0](t,uy(uy({},i),{},{coordinates:r}))),this._isMouseDown=!1,this._startPoint=[],this._endPoint=[],this.creatCount=0}}},{key:"_zrMouseUp",value:function(t){}},{key:"_resetPoints",value:function(t){if(t[0][0]<=t[1][0])return t;var e=t[0],n=[],r=t.length-1;for(t.length;r>0;r--)n.push(t[r]);return n.unshift(e),n}},{key:"_getDrawPoint",value:function(t){var e,n,r=this.group.scale[0],i=t.target&&t.target.transform;return t.target&&i?(r=i[0],this.group.scale=[r,r],e=i[4]>0?t.offsetX/r-Math.abs(i[4])/r:t.offsetX/r+Math.abs(i[4])/r,n=i[5]>0?t.offsetY/r-Math.abs(i[5])/r:t.offsetY/r+Math.abs(i[5])/r):(e=t.offsetX/r,n=t.offsetY/r),[e,n]}},{key:"setData",value:function(t){this.setMarkers(t),this.saveInstance(window.INMARK_DRAWING_POLYGON)}},{key:"setZIndex",value:function(t){this.zlevel=t}},{key:"_filterImage",value:function(){this._areaShapes.splice(0);var t=[];this.group.eachChild((function(e){"IMAGE"===e.data.type&&t.push(e)})),this.group.removeAll(),this.group.add(t[0]),this.zr.add(this.group)}},{key:"setMarkers",value:function(t){var e=this;this.removeAll(),this._option.exportData=q_.util.clone(t),t.length>0&&t.forEach((function(t){if("Polygon"===t.type&&"object"===gy(t.coordinates)){var n=e._calculateToRelationpix(t.coordinates),r=e._createShape(n,t);if(0===n.length)throw new Error("æ­¤å¾å½¢æ²¡æåæ æ°æ®,è¯·å é¤æ­¤å¾å½¢"+JSON.stringify(t));n.length>0&&(e._createEditGroup(n,r),e._areaShapes.push(r),e.graphic.add(r))}})),this.group.add(this.graphic),this.setEdit(!1)}},{key:"setSelectedStyle",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.attr({style:ey(this._styleConfig.selected,n)}),this._option.isOpen){t.attr({draggable:!0});var r=this._editWidth/this.group.scale[0];t.bound&&t.bound.eachChild((function(n,i){n.show(),n.attr({shape:{x:t.shape.points[i][0]-r/2,y:t.shape.points[i][1]-r/2,width:r,height:r},zlevel:e.zlevel+1})}))}}},{key:"selected",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._option.isOpen||(this.resetAllStyle(),this._areaShapes.forEach((function(r){if(r.data.id===t.id){e._option.currentShape=r;var i=e._option.currentShape.shape.points,o=e._changeToPoints(i);e._editNode=o,e.setSelectedStyle(r,n)}})))}},{key:"setPosition",value:function(t){if(!this._option.isOpen&&0!==t.coordinates.length){var e=this._calculateToRelationpix(t.coordinates),n=0,r=0,i=0,o=0;e.forEach((function(t){r<=t[0]&&(r=t[0]),o<=t[1]&&(o=t[1])})),n=r,i=o,e.forEach((function(t){t[0]<n&&(n=t[0]),t[1]<i&&(i=t[1])}));var a,s,h=[(r+n)/2,(o+i)/2],l=this.group.scale[0],u=this.zr.painter._width,c=this.zr.painter._height;0===this.bgDrag.length?(a=0,s=0):(a=this.bgDrag[0],s=this.bgDrag[1]),this.group.attr({position:[(-h[0]-a)*l+u/2*l,(-h[1]-s)*l+c/2*l]})}}},{key:"_createEditGroup",value:function(t,e){var n=new q_.Group;return n.data={type:"EditGroup"},n.bound=e,this._createEditPoint(t,n),e.bound=n,this.graphic.add(n),n}},{key:"_toShapeDragEnd",value:function(t,e){var n,r,i=this,o=[],a=q_.util.clone(t.target.shape.points),s=t.target.transform;return 0===this.bgDrag.length?(n=0,r=0):(n=this.bgDrag[0],r=this.bgDrag[1]),a.forEach((function(t){var e;s&&(s[4]-i._option.offsetM>0?t[0]=t[0]+Math.abs(s[4]-i._option.offsetM)/s[0]:t[0]=t[0]-Math.abs(s[4]-i._option.offsetM)/s[0],s[5]-i._option.offsetN>0?t[1]=t[1]+Math.abs(s[5]-i._option.offsetN)/s[0]:t[1]=t[1]-Math.abs(s[5]-i._option.offsetN)/s[0]),e=[t[0]-n,t[1]-r],o.push(e)})),o}},{key:"_createShape",value:function(t,e){var n=this,r=new q_.Polygon({shape:{points:t,smooth:0},data:e,cursor:"default",draggable:!1,style:this._styleConfig.default,zlevel:this.zlevel});return r.on("click",(function(t){1===t.which&&(n._editNode=n._toShapeDragEnd(t,t.target))})),r.on("dragstart",(function(t){1===t.which&&(n._option.currentShape=r,n.tempShape=t.target)})),r.on("drag",(function(t){if(!1===n._isMouseDown){var e=r.bound;e.attr({position:e.bound.position}),e.eachChild((function(t){t.hide()})),n._editNode=n._toShapeDragEnd(t,t.target),n._option.currentShape=t.target;var i=n._toGlobal(t.target.shape.points,r),o=n._changeToPoints(i);n.handlers._onRectDrag&&n.handlers._onRectDrag[0](t,uy(uy({},t.target.data),{},{coordinates:o})),n._onRectDrag&&n._onRectDrag(t,uy(uy({},t.target.data),{},{coordinates:o}))}})),r.on("dragend",(function(t){if(1===t.which&&!1===n._isMouseDown){var e=t.target;n.position=q_.util.clone(e.position);var r=n._toShapeDragEnd(t,e);n._option.currentShape=e,n._reCreatePoints(r);var i=n._changeToPoints(r);n._option.exportData.forEach((function(e){e.id===t.target.data.id&&(e.coordinates=i)})),n.handlers._onRectDragComplete&&n.handlers._onRectDragComplete[0](t,uy(uy({},t.target.data),{},{coordinates:i})),n._onRectDragComplete&&n._onRectDragComplete(t,uy(uy({},t.target.data),{},{coordinates:i}))}})),r.on("mousemove",(function(t){n._option.isOpen&&(r.attr({cursor:"default"}),n.tempShape=t.target)})),r.on("mouseover",(function(t){if(n._option.isOpen)return r.attr({cursor:"default"}),void(!1===n._isMouseDown&&(n.tempShape=t.target,n._unBindEvent()));var e=n._toGlobal(t.target.shape.points,r),i=n._changeToPoints(e);n.handlers._onHover&&n.handlers._onHover[0](t,uy(uy({},t.target.data),{},{coordinates:i})),n._onHover&&n._onHover(t,uy(uy({},t.target.data),{},{coordinates:i}))})),r.on("mouseout",(function(t){n._option.isOpen&&n._bindEvent()})),r.on("mousedown",(function(t){if(1===t.which&&!1===n._isMouseDown){n._option.currentShape=t.target,n.tempShape=t.target,n.selectedSub=r,n.resetAllStyle(),n.setSelectedStyle(t.target);var e=n._toGlobal(t.target.shape.points,r),i=n._changeToPoints(e);n.handlers._onSelected&&n.handlers._onSelected[0](t,uy(uy({},t.target.data),{},{coordinates:i})),n._onSelected&&n._onSelected(t,uy(uy({},t.target.data),{},{coordinates:i}))}})),r.on("dblclick",(function(t){})),r.on("mouseup",(function(t){n._option.isOpen&&n.selectedSub&&1===t.which&&(n._option.currentShape.bound&&n._option.currentShape.bound.eachChild((function(t){t.show()})),n._bindEvent())})),r}},{key:"_reCreatePoints",value:function(t){var e=this,n=this._createShape(t,this._option.currentShape.data);this.graphic.remove(this._option.currentShape.bound),this.graphic.remove(this._option.currentShape),this._areaShapes.forEach((function(t,n){t.data.id===e._option.currentShape.data.id&&e._areaShapes.splice(n,1)})),this._option.currentShape=n,this._createEditGroup(t,n),this.selectedSub=n,this._areaShapes.push(n),this.graphic.add(n),this.setSelectedStyle(n),this._startPoint=[]}},{key:"_editElementEvent",value:function(t,e){var n=this;t.on("mouseover",(function(t){})),t.on("mouseout",(function(t){})),t.on("mouseup",(function(t){})),t.on("dragstart",(function(t){if(3!==t.which){if(1===t.which){n._option.currentShape.transform;var r=n._option.currentShape.shape.points,i=q_.util.clone(r);n.oldPoint=i,n.m=q_.util.clone(n._option.currentShape.transform||[])}}else e.eachChild((function(t){t.hide()}))})),t.on("drag",(function(t){if("CANVAS"===t.event.target.tagName&&1===t.which){var r,i,o=q_.util.clone(n._option.currentShape.shape.points),a=n.m,s=(t.target.data._side,t.target.data._index);t.target.data._afterIndex,t.target.data._beforeIndex;a[0]||(a[0]=1,a[4]=0,a[5]=0),0===n.bgDrag.length?(r=0,i=0):(r=n.bgDrag[0],i=n.bgDrag[1]);var h,l,u;l=t.event.offsetX,u=t.event.offsetY,o[s]=[(l-n._option.offsetM)/a[0]-r,(u-n._option.offsetN)/a[0]-i],h=o,e.removeAll(),e.attr({position:[0,0],scale:[1,1]}),n._option.currentShape.attr({scale:[1,1],shape:{points:h},position:[0,0]}),n._editNode=h;var c=n._changeToPoints(h);n.handlers._onEditNodeDrag&&n.handlers._onEditNodeDrag[0](t,uy(uy({},e.bound.data),{},{coordinates:c})),n._onEditNodeDrag&&n._onEditNodeDrag(t,uy(uy({},e.bound.data),{},{coordinates:c})),n._createEditPoint(h,e)}})),t.on("dragend",(function(t){if(n._editNode.length>0){n._reCreatePoints(n._editNode);var r=n._changeToPoints(n._editNode);n._option.exportData.forEach((function(t){t.id===e.bound.data.id&&(t.coordinates=r)})),n.handlers._onEditNodeDragComplete&&n.handlers._onEditNodeDragComplete[0](t,uy(uy({},e.bound.data),{},{coordinates:r})),n._onEditNodeDragComplete&&n._onEditNodeDragComplete(t,uy(uy({},e.bound.data),{},{coordinates:r}))}}))}},{key:"_createEditPoint",value:function(t,e){var n=this,r=[];t.forEach((function(e,n){var i=n;r.push({_side:"editNode_"+n,_index:n,_beforeIndex:0===n?t.length-1:--i,_afterIndex:n===t.length-1?0:++i,points:t[n]})})),r.forEach((function(t){var r=n._editWidth/n.group.scale[0],i=new q_.Rect(ey(Sy,{shape:{x:t.points[0]-r/2,y:t.points[1]-r/2,width:r,height:r},data:{_side:t._side,_index:t._index,_beforeIndex:t._beforeIndex,_afterIndex:t._afterIndex},zlevel:n.zlevel+1}));n._editElementEvent(i,e),e.add(i)}))}},{key:"setSilent",value:function(t){}},{key:"setOptionStyle",value:function(t){var e=this;this.DIYStyle=t,this._areaShapes.forEach((function(n){console.log(n),"POLYGON"===n.data.type&&n.attr({style:uy(uy({},e._styleConfig.default),t)})}))}},{key:"resetShapeStyle",value:function(){var t=this;this._areaShapes.forEach((function(e){"Polygon"===e.data.type&&(e.attr({style:uy(uy({},t._styleConfig.default),t.DIYStyle),draggable:!1}),e.bound&&e.bound.eachChild((function(t){t.hide()})))}))}},{key:"removeAnnotation",value:function(){var t,e=this;if(this.selectedSub)return this._areaShapes.forEach((function(n,r){n.data.id===e.selectedSub.data.id&&(t=n,e._areaShapes.splice(r,1))})),t&&(this.graphic.remove(t.bound),t.bound=null,this.graphic.remove(this.selectedSub),this.selectedSub=null),this._option.removeItem=t,this._option.removeItem}},{key:"removeSub",value:function(t){var e,n=t.id;this._areaShapes.forEach((function(t,r){t.data.id===n&&(e=r)}));var r=this._areaShapes[e];r&&(this._areaShapes.splice(e,1),this.graphic.remove(r.bound),r.bound=null,this.graphic.remove(r))}},{key:"removeAll",value:function(){var t=this;this._areaShapes.length>0&&this._areaShapes.forEach((function(e){e.bound&&(t.graphic.remove(e.bound),e.bound=null),t.graphic.remove(e),e=null})),this._areaShapes.splice(0),this._option.exportData.splice(0)}},{key:"_calculateToRelationpix",value:function(t){var e=this,n=[];return t.forEach((function(t){var r=t[0]*e._option.setRate+e._option.offsetX,i=t[1]*e._option.setRate+e._option.offsetY;n.push([r,i])})),n}},{key:"_changeToPoints",value:function(t){var e=this,n=[];return t.forEach((function(t){n.push([(t[0]-e._option.offsetX)/e._option.setRate,(t[1]-e._option.offsetY)/e._option.setRate])})),this._resetPoints(n)}},{key:"addHover",value:function(t){for(var e=0;e<this._areaShapes.length;e++){var n=this._areaShapes[e];if(n.data.id==t.id){this.zr.addHover(n,t.style);break}}}},{key:"removeHover",value:function(t){for(var e=0;e<this._areaShapes.length;e++){var n=this._areaShapes[e];if(n.data.id==t.id){this.zr.removeHover(n);break}}}},{key:"reset",value:function(){}}]),n}(Cy),Oy={default:{textAlign:"left",textPosition:"top",fontSize:12,fontFamily:"serif",fontWeight:"normal",textFill:"#000000",zlevel:2}},Ly=function(t){fy(n,t);var e=by(n);function n(t){var r;return _s(this,n),(r=e.call(this)).group=r._option.group,r.image=r._option.image,r.type="TextOverlay",r._option.isOpen=t.isOpen||!1,r.graphic=r._createGraphicGroup(),r._areaShapes=[],r._onHover=t&&t.event&&t.event.onHover,r._onImageDrag=t&&t.event&&t.event.onImageDrag,r._onImageDragEnd=t&&t.event&&t.event.onImageDragEnd,r._onSelected=t&&t.event&&t.event.onSelected,r._onHover=t&&t.event&&t.event.onHover,r.data=t.data,t.style?r._styleConfig=ey(Oy.default,t.style):r._styleConfig=Oy.default,r.zlevel=r._styleConfig.zlevel,r.handlers={},r.DIYStyle={},r.image&&(r.image.on("drag",(function(t){if(r._onImageDrag&&r._onImageDrag(t),r.handlers._onImageDrag&&r.handlers._onImageDrag[0](t),!0===r.getDrag()){var e=t.target.position;r.graphic.attr({position:e}),r.bgDrag=e}})),r.image.on("dragend",(function(t){r._onImageDragEnd&&r._onImageDragEnd(t),r.handlers._onImageDragEnd&&r.handlers._onImageDragEnd[0](t)}))),"object"===gy(r.data)&&r.setData(r.data),r}return ms(n,[{key:"open",value:function(){this._option.isOpen=!0,this.resetAllStyle(),this.setDrawingMode(window.INMARK_DRAWING_RECTANGLE),this._bindEvent(),this.setEdit(!0),this.group.eachChild((function(t){"IMAGE"===t.data.type&&t.attr({cursor:"crosshair"})}))}},{key:"close",value:function(){this._option.isOpen=!1,this.setEdit(!1),this.group.eachChild((function(t){"IMAGE"===t.data.type&&t.attr({cursor:"default"})})),"hander"!==this._option.drawingType&&this.setDrawingMode("hander")}},{key:"addEventListener",value:function(t,e){var n="_"+t;void 0===this.handlers[n]&&(this.handlers[n]=[]),this.handlers[n].push(e)}},{key:"removeEventListener",value:function(t,e){var n="_"+t;if(this.handlers[n]){var r=this.handlers[n];if(null==e)r.length=0;else if(r.length)for(var i=0;i<r.length;i++)r[i]==e&&this.handlers[n].splice(i,1)}}},{key:"_createGraphicGroup",value:function(t,e){var n=new q_.Group;return n.data={type:"TextGroup"},n}},{key:"setData",value:function(t){this._setTexts(t)}},{key:"_setTexts",value:function(t){var e=this;this.removeAll(),t.forEach((function(t){if("Text"===t.type){var n=e._setShapeWidth(t);n.on("mouseover",(function(t){e.handlers._onHover&&e.handlers._onHover[0](t,uy({},t.target.data)),e._onHover&&e._onHover(t,uy({},t.target.data))})),n.on("mousedown",(function(t){e.handlers._onSelected&&e.handlers._onSelected[0](t,uy({},t.target.data)),e._onSelected&&e._onSelected(t,uy({},t.target.data))})),e._setShapeHeight(n,t),e._areaShapes.push(n),e.graphic.add(n)}})),this.group.add(this.graphic),this.zr.add(this.group)}},{key:"setZIndex",value:function(t){this.zlevel=t}},{key:"removeAll",value:function(){var t=this;this._areaShapes.length>0&&this._areaShapes.forEach((function(e){t.graphic.remove(e),e=null})),this._areaShapes.splice(0),this._option.exportData.splice(0)}},{key:"setOptionStyle",value:function(t){var e=this;this.DIYStyle=t,this._areaShapes.forEach((function(n){console.log(n),"Text"===n.data.type&&n.attr({style:uy(uy({},e._styleConfig.default),t)})}))}},{key:"resetShapeStyle",value:function(){var t=this;this._areaShapes.forEach((function(e){"Text"===e.data.type&&e.attr({style:uy(uy({},t._styleConfig.default),t.DIYStyle),draggable:!1})}))}},{key:"_setShapeHeight",value:function(t,e){var n=t.getBoundingRect(),r=t.position;e.height>=n.height&&t.attr({position:[r[0],r[1]+(e.height-n.height)/2]})}},{key:"_setShapeWidth",value:function(t,e){var n=this._computeFontSize(t,e);t.fontSize=n;var r=this._createText(t);return r.getBoundingRect().width>=t.width?this._setShapeWidth(t,"minus"):r}},{key:"_computeFontSize",value:function(t,e){return e?(t.tHeight--,t.tHeight):t.height&&t.word?(t.tHeight=t.height,t.height):void 0}},{key:"_createText",value:function(t){return new q_.Text({style:uy(uy({},this._styleConfig),{},{text:t.word,fontSize:t.fontSize}),data:t,position:t.position,zlevel:this.zlevel})}}]),n}(Cy),Ry="1.1.5";console.log("inMark v".concat(Ry));var zy={version:Ry,utils:ay,Init:sy,Image:Cy,Rect:Ay,Polygon:Iy,Text:Ly};t.Image=Cy,t.Init=sy,t.Polygon=Iy,t.Rect=Ay,t.Text=Ly,t.default=zy,t.utils=ay,t.version=Ry,Object.defineProperty(t,"__esModule",{value:!0})}));
