!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).inMark={})}(this,(function(t){"use strict";var e=void 0!==typeof self?self:this,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function r(t,e){return t(e={exports:{}},e.exports),e.exports}var i=r((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),o={}.hasOwnProperty,a=function(t,e){return o.call(t,e)},s=function(t){try{return!!t()}catch(t){return!0}},h=!s((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),l=r((function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)})),u=(l.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),c=function(t){if(!u(t))throw TypeError(t+" is not an object!");return t},f=i.document,d=u(f)&&u(f.createElement),p=function(t){return d?f.createElement(t):{}},g=!h&&!s((function(){return 7!=Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a})),v=function(t,e){if(!u(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!u(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!u(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!u(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},_=Object.defineProperty,y={f:h?Object.defineProperty:function(t,e,n){if(c(t),e=v(e,!0),c(n),g)try{return _(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},m=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},x=h?function(t,e,n){return y.f(t,e,m(1,n))}:function(t,e,n){return t[e]=n,t},b=0,w=Math.random(),S=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++b+w).toString(36))},M=r((function(t){var e="__core-js_shared__",n=i[e]||(i[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:l.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),k=M("native-function-to-string",Function.toString),T=r((function(t){var e=S("src"),n="toString",r=(""+k).split(n);l.inspectSource=function(t){return k.call(t)},(t.exports=function(t,n,o,s){var h="function"==typeof o;h&&(a(o,"name")||x(o,"name",n)),t[n]!==o&&(h&&(a(o,e)||x(o,e,t[n]?""+t[n]:r.join(String(n)))),t===i?t[n]=o:s?t[n]?t[n]=o:x(t,n,o):(delete t[n],x(t,n,o)))})(Function.prototype,n,(function(){return"function"==typeof this&&this[e]||k.call(this)}))})),E=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},D=function(t,e,n){if(E(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},P=function(t,e,n){var r,o,a,s,h=t&P.F,u=t&P.G,c=t&P.S,f=t&P.P,d=t&P.B,p=u?i:c?i[e]||(i[e]={}):(i[e]||{}).prototype,g=u?l:l[e]||(l[e]={}),v=g.prototype||(g.prototype={});for(r in u&&(n=e),n)a=((o=!h&&p&&void 0!==p[r])?p:n)[r],s=d&&o?D(a,i):f&&"function"==typeof a?D(Function.call,a):a,p&&T(p,r,a,t&P.U),g[r]!=a&&x(g,r,s),f&&v[r]!=a&&(v[r]=a)};i.core=l,P.F=1,P.G=2,P.S=4,P.P=8,P.B=16,P.W=32,P.U=64,P.R=128;var C=P,O=r((function(t){var e=S("meta"),n=y.f,r=0,i=Object.isExtensible||function(){return!0},o=!s((function(){return i(Object.preventExtensions({}))})),h=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!u(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,e)){if(!i(t))return"F";if(!n)return"E";h(t)}return t[e].i},getWeak:function(t,n){if(!a(t,e)){if(!i(t))return!0;if(!n)return!1;h(t)}return t[e].w},onFreeze:function(t){return o&&l.NEED&&i(t)&&!a(t,e)&&h(t),t}}})),A=(O.KEY,O.NEED,O.fastKey,O.getWeak,O.onFreeze,r((function(t){var e=M("wks"),n=i.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:S)("Symbol."+t))}).store=e}))),I=y.f,L=A("toStringTag"),R=function(t,e,n){t&&!a(t=n?t:t.prototype,L)&&I(t,L,{configurable:!0,value:e})},z={f:A},N=y.f,F=function(t){var e=l.Symbol||(l.Symbol=i.Symbol||{});"_"==t.charAt(0)||t in e||N(e,t,{value:z.f(t)})},j={}.toString,B=function(t){return j.call(t).slice(8,-1)},W=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==B(t)?t.split(""):Object(t)},H=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},G=function(t){return W(H(t))},Y=Math.ceil,U=Math.floor,V=function(t){return isNaN(t=+t)?0:(t>0?U:Y)(t)},X=Math.min,q=function(t){return t>0?X(V(t),9007199254740991):0},Z=Math.max,Q=Math.min,K=function(t,e){return(t=V(t))<0?Z(t+e,0):Q(t,e)},$=function(t){return function(e,n,r){var i,o=G(e),a=q(o.length),s=K(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},J=M("keys"),tt=function(t){return J[t]||(J[t]=S(t))},et=$(!1),nt=tt("IE_PROTO"),rt=function(t,e){var n,r=G(t),i=0,o=[];for(n in r)n!=nt&&a(r,n)&&o.push(n);for(;e.length>i;)a(r,n=e[i++])&&(~et(o,n)||o.push(n));return o},it="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ot=Object.keys||function(t){return rt(t,it)},at={f:Object.getOwnPropertySymbols},st={f:{}.propertyIsEnumerable},ht=Array.isArray||function(t){return"Array"==B(t)},lt=function(t){return Object(H(t))},ut=h?Object.defineProperties:function(t,e){c(t);for(var n,r=ot(e),i=r.length,o=0;i>o;)y.f(t,n=r[o++],e[n]);return t},ct=i.document,ft=ct&&ct.documentElement,dt=tt("IE_PROTO"),pt=function(){},gt=function(){var t,e=p("iframe"),n=it.length;for(e.style.display="none",ft.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),gt=t.F;n--;)delete gt.prototype[it[n]];return gt()},vt=Object.create||function(t,e){var n;return null!==t?(pt.prototype=c(t),n=new pt,pt.prototype=null,n[dt]=t):n=gt(),void 0===e?n:ut(n,e)},_t=it.concat("length","prototype"),yt={f:Object.getOwnPropertyNames||function(t){return rt(t,_t)}},mt=yt.f,xt={}.toString,bt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wt={f:function(t){return bt&&"[object Window]"==xt.call(t)?function(t){try{return mt(t)}catch(t){return bt.slice()}}(t):mt(G(t))}},St=Object.getOwnPropertyDescriptor,Mt={f:h?St:function(t,e){if(t=G(t),e=v(e,!0),g)try{return St(t,e)}catch(t){}if(a(t,e))return m(!st.f.call(t,e),t[e])}},kt=O.KEY,Tt=Mt.f,Et=y.f,Dt=wt.f,Pt=i.Symbol,Ct=i.JSON,Ot=Ct&&Ct.stringify,At=A("_hidden"),It=A("toPrimitive"),Lt={}.propertyIsEnumerable,Rt=M("symbol-registry"),zt=M("symbols"),Nt=M("op-symbols"),Ft=Object.prototype,jt="function"==typeof Pt&&!!at.f,Bt=i.QObject,Wt=!Bt||!Bt.prototype||!Bt.prototype.findChild,Ht=h&&s((function(){return 7!=vt(Et({},"a",{get:function(){return Et(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Tt(Ft,e);r&&delete Ft[e],Et(t,e,n),r&&t!==Ft&&Et(Ft,e,r)}:Et,Gt=function(t){var e=zt[t]=vt(Pt.prototype);return e._k=t,e},Yt=jt&&"symbol"==typeof Pt.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Pt},Ut=function(t,e,n){return t===Ft&&Ut(Nt,e,n),c(t),e=v(e,!0),c(n),a(zt,e)?(n.enumerable?(a(t,At)&&t[At][e]&&(t[At][e]=!1),n=vt(n,{enumerable:m(0,!1)})):(a(t,At)||Et(t,At,m(1,{})),t[At][e]=!0),Ht(t,e,n)):Et(t,e,n)},Vt=function(t,e){c(t);for(var n,r=function(t){var e=ot(t),n=at.f;if(n)for(var r,i=n(t),o=st.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}(e=G(e)),i=0,o=r.length;o>i;)Ut(t,n=r[i++],e[n]);return t},Xt=function(t){var e=Lt.call(this,t=v(t,!0));return!(this===Ft&&a(zt,t)&&!a(Nt,t))&&(!(e||!a(this,t)||!a(zt,t)||a(this,At)&&this[At][t])||e)},qt=function(t,e){if(t=G(t),e=v(e,!0),t!==Ft||!a(zt,e)||a(Nt,e)){var n=Tt(t,e);return!n||!a(zt,e)||a(t,At)&&t[At][e]||(n.enumerable=!0),n}},Zt=function(t){for(var e,n=Dt(G(t)),r=[],i=0;n.length>i;)a(zt,e=n[i++])||e==At||e==kt||r.push(e);return r},Qt=function(t){for(var e,n=t===Ft,r=Dt(n?Nt:G(t)),i=[],o=0;r.length>o;)!a(zt,e=r[o++])||n&&!a(Ft,e)||i.push(zt[e]);return i};jt||(T((Pt=function(){if(this instanceof Pt)throw TypeError("Symbol is not a constructor!");var t=S(arguments.length>0?arguments[0]:void 0),e=function(n){this===Ft&&e.call(Nt,n),a(this,At)&&a(this[At],t)&&(this[At][t]=!1),Ht(this,t,m(1,n))};return h&&Wt&&Ht(Ft,t,{configurable:!0,set:e}),Gt(t)}).prototype,"toString",(function(){return this._k})),Mt.f=qt,y.f=Ut,yt.f=wt.f=Zt,st.f=Xt,at.f=Qt,h&&T(Ft,"propertyIsEnumerable",Xt,!0),z.f=function(t){return Gt(A(t))}),C(C.G+C.W+C.F*!jt,{Symbol:Pt});for(var Kt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),$t=0;Kt.length>$t;)A(Kt[$t++]);for(var Jt=ot(A.store),te=0;Jt.length>te;)F(Jt[te++]);C(C.S+C.F*!jt,"Symbol",{for:function(t){return a(Rt,t+="")?Rt[t]:Rt[t]=Pt(t)},keyFor:function(t){if(!Yt(t))throw TypeError(t+" is not a symbol!");for(var e in Rt)if(Rt[e]===t)return e},useSetter:function(){Wt=!0},useSimple:function(){Wt=!1}}),C(C.S+C.F*!jt,"Object",{create:function(t,e){return void 0===e?vt(t):Vt(vt(t),e)},defineProperty:Ut,defineProperties:Vt,getOwnPropertyDescriptor:qt,getOwnPropertyNames:Zt,getOwnPropertySymbols:Qt});var ee=s((function(){at.f(1)}));C(C.S+C.F*ee,"Object",{getOwnPropertySymbols:function(t){return at.f(lt(t))}}),Ct&&C(C.S+C.F*(!jt||s((function(){var t=Pt();return"[null]"!=Ot([t])||"{}"!=Ot({a:t})||"{}"!=Ot(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(u(e)||void 0!==t)&&!Yt(t))return ht(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Yt(e))return e}),r[1]=e,Ot.apply(Ct,r)}}),Pt.prototype[It]||x(Pt.prototype,It,Pt.prototype.valueOf),R(Pt,"Symbol"),R(Math,"Math",!0),R(i.JSON,"JSON",!0),C(C.S,"Object",{create:vt}),C(C.S+C.F*!h,"Object",{defineProperty:y.f}),C(C.S+C.F*!h,"Object",{defineProperties:ut});var ne=function(t,e){var n=(l.Object||{})[t]||Object[t],r={};r[t]=e(n),C(C.S+C.F*s((function(){n(1)})),"Object",r)},re=Mt.f;ne("getOwnPropertyDescriptor",(function(){return function(t,e){return re(G(t),e)}}));var ie=tt("IE_PROTO"),oe=Object.prototype,ae=Object.getPrototypeOf||function(t){return t=lt(t),a(t,ie)?t[ie]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?oe:null};ne("getPrototypeOf",(function(){return function(t){return ae(lt(t))}})),ne("keys",(function(){return function(t){return ot(lt(t))}})),ne("getOwnPropertyNames",(function(){return wt.f}));var se=O.onFreeze;ne("freeze",(function(t){return function(e){return t&&u(e)?t(se(e)):e}}));var he=O.onFreeze;ne("seal",(function(t){return function(e){return t&&u(e)?t(he(e)):e}}));var le=O.onFreeze;ne("preventExtensions",(function(t){return function(e){return t&&u(e)?t(le(e)):e}})),ne("isFrozen",(function(t){return function(e){return!u(e)||!!t&&t(e)}})),ne("isSealed",(function(t){return function(e){return!u(e)||!!t&&t(e)}})),ne("isExtensible",(function(t){return function(e){return!!u(e)&&(!t||t(e))}}));var ue=Object.assign,ce=!ue||s((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=ue({},t)[n]||Object.keys(ue({},e)).join("")!=r}))?function(t,e){for(var n=lt(t),r=arguments.length,i=1,o=at.f,a=st.f;r>i;)for(var s,l=W(arguments[i++]),u=o?ot(l).concat(o(l)):ot(l),c=u.length,f=0;c>f;)s=u[f++],h&&!a.call(l,s)||(n[s]=l[s]);return n}:ue;C(C.S+C.F,"Object",{assign:ce});var fe=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};C(C.S,"Object",{is:fe});var de=function(t,e){if(c(t),!u(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},pe={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=D(Function.call,Mt.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return de(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:de};C(C.S,"Object",{setPrototypeOf:pe.set});var ge=A("toStringTag"),ve="Arguments"==B(function(){return arguments}()),_e=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ge))?n:ve?B(e):"Object"==(r=B(e))&&"function"==typeof e.callee?"Arguments":r},ye={};ye[A("toStringTag")]="z",ye+""!="[object z]"&&T(Object.prototype,"toString",(function(){return"[object "+_e(this)+"]"}),!0);var me=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},xe=[].slice,be={},we=function(t,e,n){if(!(e in be)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";be[e]=Function("F,a","return new F("+r.join(",")+")")}return be[e](t,n)},Se=Function.bind||function(t){var e=E(this),n=xe.call(arguments,1),r=function(){var i=n.concat(xe.call(arguments));return this instanceof r?we(e,i.length,i):me(e,i,t)};return u(e.prototype)&&(r.prototype=e.prototype),r};C(C.P,"Function",{bind:Se});var Me=y.f,ke=Function.prototype,Te=/^\s*function ([^ (]*)/,Ee="name";Ee in ke||h&&Me(ke,Ee,{configurable:!0,get:function(){try{return(""+this).match(Te)[1]}catch(t){return""}}});var De=A("hasInstance"),Pe=Function.prototype;De in Pe||y.f(Pe,De,{value:function(t){if("function"!=typeof this||!u(t))return!1;if(!u(this.prototype))return t instanceof this;for(;t=ae(t);)if(this.prototype===t)return!0;return!1}});var Ce="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Oe="["+Ce+"]",Ae=RegExp("^"+Oe+Oe+"*"),Ie=RegExp(Oe+Oe+"*$"),Le=function(t,e,n){var r={},i=s((function(){return!!Ce[t]()||"​"!="​"[t]()})),o=r[t]=i?e(Re):Ce[t];n&&(r[n]=o),C(C.P+C.F*i,"String",r)},Re=Le.trim=function(t,e){return t=String(H(t)),1&e&&(t=t.replace(Ae,"")),2&e&&(t=t.replace(Ie,"")),t},ze=Le,Ne=i.parseInt,Fe=ze.trim,je=/^[-+]?0[xX]/,Be=8!==Ne(Ce+"08")||22!==Ne(Ce+"0x16")?function(t,e){var n=Fe(String(t),3);return Ne(n,e>>>0||(je.test(n)?16:10))}:Ne;C(C.G+C.F*(parseInt!=Be),{parseInt:Be});var We=i.parseFloat,He=ze.trim,Ge=1/We(Ce+"-0")!=-1/0?function(t){var e=He(String(t),3),n=We(e);return 0===n&&"-"==e.charAt(0)?-0:n}:We;C(C.G+C.F*(parseFloat!=Ge),{parseFloat:Ge});var Ye=pe.set,Ue=function(t,e,n){var r,i=e.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&u(r)&&Ye&&Ye(t,r),t},Ve=yt.f,Xe=Mt.f,qe=y.f,Ze=ze.trim,Qe="Number",Ke=i.Number,$e=Ke,Je=Ke.prototype,tn=B(vt(Je))==Qe,en="trim"in String.prototype,nn=function(t){var e=v(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=en?e.trim():Ze(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,s=e.slice(2),h=0,l=s.length;h<l;h++)if((a=s.charCodeAt(h))<48||a>i)return NaN;return parseInt(s,r)}}return+e};if(!Ke(" 0o1")||!Ke("0b1")||Ke("+0x1")){Ke=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Ke&&(tn?s((function(){Je.valueOf.call(n)})):B(n)!=Qe)?Ue(new $e(nn(e)),n,Ke):nn(e)};for(var rn,on=h?Ve($e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),an=0;on.length>an;an++)a($e,rn=on[an])&&!a(Ke,rn)&&qe(Ke,rn,Xe($e,rn));Ke.prototype=Je,Je.constructor=Ke,T(i,Qe,Ke)}var sn=function(t,e){if("number"!=typeof t&&"Number"!=B(t))throw TypeError(e);return+t},hn=function(t){var e=String(H(this)),n="",r=V(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n},ln=1..toFixed,un=Math.floor,cn=[0,0,0,0,0,0],fn="Number.toFixed: incorrect invocation!",dn="0",pn=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*cn[n],cn[n]=r%1e7,r=un(r/1e7)},gn=function(t){for(var e=6,n=0;--e>=0;)n+=cn[e],cn[e]=un(n/t),n=n%t*1e7},vn=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==cn[t]){var n=String(cn[t]);e=""===e?n:e+hn.call(dn,7-n.length)+n}return e},_n=function(t,e,n){return 0===e?n:e%2==1?_n(t,e-1,n*t):_n(t*t,e/2,n)};C(C.P+C.F*(!!ln&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){ln.call({})}))),"Number",{toFixed:function(t){var e,n,r,i,o=sn(this,fn),a=V(t),s="",h=dn;if(a<0||a>20)throw RangeError(fn);if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(s="-",o=-o),o>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(o*_n(2,69,1))-69)<0?o*_n(2,-e,1):o/_n(2,e,1),n*=4503599627370496,(e=52-e)>0){for(pn(0,n),r=a;r>=7;)pn(1e7,0),r-=7;for(pn(_n(10,r,1),0),r=e-1;r>=23;)gn(1<<23),r-=23;gn(1<<r),pn(1,1),gn(2),h=vn()}else pn(0,n),pn(1<<-e,0),h=vn()+hn.call(dn,a);return h=a>0?s+((i=h.length)<=a?"0."+hn.call(dn,a-i)+h:h.slice(0,i-a)+"."+h.slice(i-a)):s+h}});var yn=1..toPrecision;C(C.P+C.F*(s((function(){return"1"!==yn.call(1,void 0)}))||!s((function(){yn.call({})}))),"Number",{toPrecision:function(t){var e=sn(this,"Number#toPrecision: incorrect invocation!");return void 0===t?yn.call(e):yn.call(e,t)}}),C(C.S,"Number",{EPSILON:Math.pow(2,-52)});var mn=i.isFinite;C(C.S,"Number",{isFinite:function(t){return"number"==typeof t&&mn(t)}});var xn=Math.floor,bn=function(t){return!u(t)&&isFinite(t)&&xn(t)===t};C(C.S,"Number",{isInteger:bn}),C(C.S,"Number",{isNaN:function(t){return t!=t}});var wn=Math.abs;C(C.S,"Number",{isSafeInteger:function(t){return bn(t)&&wn(t)<=9007199254740991}}),C(C.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),C(C.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991}),C(C.S+C.F*(Number.parseFloat!=Ge),"Number",{parseFloat:Ge}),C(C.S+C.F*(Number.parseInt!=Be),"Number",{parseInt:Be});var Sn=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)},Mn=Math.sqrt,kn=Math.acosh;C(C.S+C.F*!(kn&&710==Math.floor(kn(Number.MAX_VALUE))&&kn(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:Sn(t-1+Mn(t-1)*Mn(t+1))}});var Tn=Math.asinh;C(C.S+C.F*!(Tn&&1/Tn(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}});var En=Math.atanh;C(C.S+C.F*!(En&&1/En(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}});var Dn=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1};C(C.S,"Math",{cbrt:function(t){return Dn(t=+t)*Math.pow(Math.abs(t),1/3)}}),C(C.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}});var Pn=Math.exp;C(C.S,"Math",{cosh:function(t){return(Pn(t=+t)+Pn(-t))/2}});var Cn=Math.expm1,On=!Cn||Cn(10)>22025.465794806718||Cn(10)<22025.465794806718||-2e-17!=Cn(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:Cn;C(C.S+C.F*(On!=Math.expm1),"Math",{expm1:On});var An=Math.pow,In=An(2,-52),Ln=An(2,-23),Rn=An(2,127)*(2-Ln),zn=An(2,-126),Nn=Math.fround||function(t){var e,n,r=Math.abs(t),i=Dn(t);return r<zn?i*(r/zn/Ln+1/In-1/In)*zn*Ln:(n=(e=(1+Ln/In)*r)-(e-r))>Rn||n!=n?i*(1/0):i*n};C(C.S,"Math",{fround:Nn});var Fn=Math.abs;C(C.S,"Math",{hypot:function(t,e){for(var n,r,i=0,o=0,a=arguments.length,s=0;o<a;)s<(n=Fn(arguments[o++]))?(i=i*(r=s/n)*r+1,s=n):i+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*Math.sqrt(i)}});var jn=Math.imul;C(C.S+C.F*s((function(){return-5!=jn(4294967295,5)||2!=jn.length})),"Math",{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}}),C(C.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}}),C(C.S,"Math",{log1p:Sn}),C(C.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}}),C(C.S,"Math",{sign:Dn});var Bn=Math.exp;C(C.S+C.F*s((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(On(t)-On(-t))/2:(Bn(t-1)-Bn(-t-1))*(Math.E/2)}});var Wn=Math.exp;C(C.S,"Math",{tanh:function(t){var e=On(t=+t),n=On(-t);return e==1/0?1:n==1/0?-1:(e-n)/(Wn(t)+Wn(-t))}}),C(C.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}});var Hn=String.fromCharCode,Gn=String.fromCodePoint;C(C.S+C.F*(!!Gn&&1!=Gn.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,i=0;r>i;){if(e=+arguments[i++],K(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?Hn(e):Hn(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}}),C(C.S,"String",{raw:function(t){for(var e=G(t.raw),n=q(e.length),r=arguments.length,i=[],o=0;n>o;)i.push(String(e[o++])),o<r&&i.push(String(arguments[o]));return i.join("")}}),ze("trim",(function(t){return function(){return t(this,3)}}));var Yn=function(t){return function(e,n){var r,i,o=String(H(e)),a=V(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},Un={},Vn={};x(Vn,A("iterator"),(function(){return this}));var Xn=function(t,e,n){t.prototype=vt(Vn,{next:m(1,n)}),R(t,e+" Iterator")},qn=A("iterator"),Zn=!([].keys&&"next"in[].keys()),Qn="keys",Kn="values",$n=function(){return this},Jn=function(t,e,n,r,i,o,a){Xn(n,e,r);var s,h,l,u=function(t){if(!Zn&&t in p)return p[t];switch(t){case Qn:case Kn:return function(){return new n(this,t)}}return function(){return new n(this,t)}},c=e+" Iterator",f=i==Kn,d=!1,p=t.prototype,g=p[qn]||p["@@iterator"]||i&&p[i],v=g||u(i),_=i?f?u("entries"):v:void 0,y="Array"==e&&p.entries||g;if(y&&(l=ae(y.call(new t)))!==Object.prototype&&l.next&&(R(l,c,!0),"function"!=typeof l[qn]&&x(l,qn,$n)),f&&g&&g.name!==Kn&&(d=!0,v=function(){return g.call(this)}),(Zn||d||!p[qn])&&x(p,qn,v),Un[e]=v,Un[c]=$n,i)if(s={values:f?v:u(Kn),keys:o?v:u(Qn),entries:_},a)for(h in s)h in p||T(p,h,s[h]);else C(C.P+C.F*(Zn||d),e,s);return s},tr=Yn(!0);Jn(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=tr(e,n),this._i+=t.length,{value:t,done:!1})}));var er=Yn(!1);C(C.P,"String",{codePointAt:function(t){return er(this,t)}});var nr=A("match"),rr=function(t){var e;return u(t)&&(void 0!==(e=t[nr])?!!e:"RegExp"==B(t))},ir=function(t,e,n){if(rr(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(H(t))},or=A("match"),ar=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[or]=!1,!"/./"[t](e)}catch(t){}}return!0},sr="endsWith",hr="".endsWith;C(C.P+C.F*ar(sr),"String",{endsWith:function(t){var e=ir(this,t,sr),n=arguments.length>1?arguments[1]:void 0,r=q(e.length),i=void 0===n?r:Math.min(q(n),r),o=String(t);return hr?hr.call(e,o,i):e.slice(i-o.length,i)===o}});var lr="includes";C(C.P+C.F*ar(lr),"String",{includes:function(t){return!!~ir(this,t,lr).indexOf(t,arguments.length>1?arguments[1]:void 0)}}),C(C.P,"String",{repeat:hn});var ur="startsWith",cr="".startsWith;C(C.P+C.F*ar(ur),"String",{startsWith:function(t){var e=ir(this,t,ur),n=q(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return cr?cr.call(e,r,n):e.slice(n,n+r.length)===r}});var fr=/"/g,dr=function(t,e,n,r){var i=String(H(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(fr,"&quot;")+'"'),o+">"+i+"</"+e+">"},pr=function(t,e){var n={};n[t]=e(dr),C(C.P+C.F*s((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)};pr("anchor",(function(t){return function(e){return t(this,"a","name",e)}})),pr("big",(function(t){return function(){return t(this,"big","","")}})),pr("blink",(function(t){return function(){return t(this,"blink","","")}})),pr("bold",(function(t){return function(){return t(this,"b","","")}})),pr("fixed",(function(t){return function(){return t(this,"tt","","")}})),pr("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}})),pr("fontsize",(function(t){return function(e){return t(this,"font","size",e)}})),pr("italics",(function(t){return function(){return t(this,"i","","")}})),pr("link",(function(t){return function(e){return t(this,"a","href",e)}})),pr("small",(function(t){return function(){return t(this,"small","","")}})),pr("strike",(function(t){return function(){return t(this,"strike","","")}})),pr("sub",(function(t){return function(){return t(this,"sub","","")}})),pr("sup",(function(t){return function(){return t(this,"sup","","")}})),C(C.S,"Date",{now:function(){return(new Date).getTime()}}),C(C.P+C.F*s((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=lt(this),n=v(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}});var gr=Date.prototype.getTime,vr=Date.prototype.toISOString,_r=function(t){return t>9?t:"0"+t},yr=s((function(){return"0385-07-25T07:06:39.999Z"!=vr.call(new Date(-50000000000001))}))||!s((function(){vr.call(new Date(NaN))}))?function(){if(!isFinite(gr.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+_r(t.getUTCMonth()+1)+"-"+_r(t.getUTCDate())+"T"+_r(t.getUTCHours())+":"+_r(t.getUTCMinutes())+":"+_r(t.getUTCSeconds())+"."+(n>99?n:"0"+_r(n))+"Z"}:vr;C(C.P+C.F*(Date.prototype.toISOString!==yr),"Date",{toISOString:yr});var mr=Date.prototype,xr="Invalid Date",br="toString",wr=mr.toString,Sr=mr.getTime;new Date(NaN)+""!=xr&&T(mr,br,(function(){var t=Sr.call(this);return t==t?wr.call(this):xr}));var Mr="number",kr=A("toPrimitive"),Tr=Date.prototype;kr in Tr||x(Tr,kr,(function(t){if("string"!==t&&t!==Mr&&"default"!==t)throw TypeError("Incorrect hint");return v(c(this),t!=Mr)})),C(C.S,"Array",{isArray:ht});var Er=function(t,e,n,r){try{return r?e(c(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&c(i.call(t)),e}},Dr=A("iterator"),Pr=Array.prototype,Cr=function(t){return void 0!==t&&(Un.Array===t||Pr[Dr]===t)},Or=function(t,e,n){e in t?y.f(t,e,m(0,n)):t[e]=n},Ar=A("iterator"),Ir=l.getIteratorMethod=function(t){if(null!=t)return t[Ar]||t["@@iterator"]||Un[_e(t)]},Lr=A("iterator"),Rr=!1;try{var zr=[7][Lr]();zr.return=function(){Rr=!0},Array.from(zr,(function(){throw 2}))}catch(t){}var Nr=function(t,e){if(!e&&!Rr)return!1;var n=!1;try{var r=[7],i=r[Lr]();i.next=function(){return{done:n=!0}},r[Lr]=function(){return i},t(r)}catch(t){}return n};C(C.S+C.F*!Nr((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,i,o=lt(t),a="function"==typeof this?this:Array,s=arguments.length,h=s>1?arguments[1]:void 0,l=void 0!==h,u=0,c=Ir(o);if(l&&(h=D(h,s>2?arguments[2]:void 0,2)),null==c||a==Array&&Cr(c))for(n=new a(e=q(o.length));e>u;u++)Or(n,u,l?h(o[u],u):o[u]);else for(i=c.call(o),n=new a;!(r=i.next()).done;u++)Or(n,u,l?Er(i,h,[r.value,u],!0):r.value);return n.length=u,n}}),C(C.S+C.F*s((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)Or(n,t,arguments[t++]);return n.length=e,n}});var Fr=function(t,e){return!!t&&s((function(){e?t.call(null,(function(){}),1):t.call(null)}))},jr=[].join;C(C.P+C.F*(W!=Object||!Fr(jr)),"Array",{join:function(t){return jr.call(G(this),void 0===t?",":t)}});var Br=[].slice;C(C.P+C.F*s((function(){ft&&Br.call(ft)})),"Array",{slice:function(t,e){var n=q(this.length),r=B(this);if(e=void 0===e?n:e,"Array"==r)return Br.call(this,t,e);for(var i=K(t,n),o=K(e,n),a=q(o-i),s=new Array(a),h=0;h<a;h++)s[h]="String"==r?this.charAt(i+h):this[i+h];return s}});var Wr=[].sort,Hr=[1,2,3];C(C.P+C.F*(s((function(){Hr.sort(void 0)}))||!s((function(){Hr.sort(null)}))||!Fr(Wr)),"Array",{sort:function(t){return void 0===t?Wr.call(lt(this)):Wr.call(lt(this),E(t))}});var Gr=A("species"),Yr=function(t,e){return new(function(t){var e;return ht(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!ht(e.prototype)||(e=void 0),u(e)&&null===(e=e[Gr])&&(e=void 0)),void 0===e?Array:e}(t))(e)},Ur=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,s=5==t||a,h=e||Yr;return function(e,l,u){for(var c,f,d=lt(e),p=W(d),g=D(l,u,3),v=q(p.length),_=0,y=n?h(e,v):r?h(e,0):void 0;v>_;_++)if((s||_ in p)&&(f=g(c=p[_],_,d),t))if(n)y[_]=f;else if(f)switch(t){case 3:return!0;case 5:return c;case 6:return _;case 2:y.push(c)}else if(o)return!1;return a?-1:i||o?o:y}},Vr=Ur(0),Xr=Fr([].forEach,!0);C(C.P+C.F*!Xr,"Array",{forEach:function(t){return Vr(this,t,arguments[1])}});var qr=Ur(1);C(C.P+C.F*!Fr([].map,!0),"Array",{map:function(t){return qr(this,t,arguments[1])}});var Zr=Ur(2);C(C.P+C.F*!Fr([].filter,!0),"Array",{filter:function(t){return Zr(this,t,arguments[1])}});var Qr=Ur(3);C(C.P+C.F*!Fr([].some,!0),"Array",{some:function(t){return Qr(this,t,arguments[1])}});var Kr=Ur(4);C(C.P+C.F*!Fr([].every,!0),"Array",{every:function(t){return Kr(this,t,arguments[1])}});var $r=function(t,e,n,r,i){E(e);var o=lt(t),a=W(o),s=q(o.length),h=i?s-1:0,l=i?-1:1;if(n<2)for(;;){if(h in a){r=a[h],h+=l;break}if(h+=l,i?h<0:s<=h)throw TypeError("Reduce of empty array with no initial value")}for(;i?h>=0:s>h;h+=l)h in a&&(r=e(r,a[h],h,o));return r};C(C.P+C.F*!Fr([].reduce,!0),"Array",{reduce:function(t){return $r(this,t,arguments.length,arguments[1],!1)}}),C(C.P+C.F*!Fr([].reduceRight,!0),"Array",{reduceRight:function(t){return $r(this,t,arguments.length,arguments[1],!0)}});var Jr=$(!1),ti=[].indexOf,ei=!!ti&&1/[1].indexOf(1,-0)<0;C(C.P+C.F*(ei||!Fr(ti)),"Array",{indexOf:function(t){return ei?ti.apply(this,arguments)||0:Jr(this,t,arguments[1])}});var ni=[].lastIndexOf,ri=!!ni&&1/[1].lastIndexOf(1,-0)<0;C(C.P+C.F*(ri||!Fr(ni)),"Array",{lastIndexOf:function(t){if(ri)return ni.apply(this,arguments)||0;var e=G(this),n=q(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,V(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}});var ii=[].copyWithin||function(t,e){var n=lt(this),r=q(n.length),i=K(t,r),o=K(e,r),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?r:K(a,r))-o,r-i),h=1;for(o<i&&i<o+s&&(h=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:delete n[i],i+=h,o+=h;return n},oi=A("unscopables"),ai=Array.prototype;null==ai[oi]&&x(ai,oi,{});var si=function(t){ai[oi][t]=!0};C(C.P,"Array",{copyWithin:ii}),si("copyWithin");var hi=function(t){for(var e=lt(this),n=q(e.length),r=arguments.length,i=K(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:K(o,n);a>i;)e[i++]=t;return e};C(C.P,"Array",{fill:hi}),si("fill");var li=Ur(5),ui="find",ci=!0;ui in[]&&Array(1).find((function(){ci=!1})),C(C.P+C.F*ci,"Array",{find:function(t){return li(this,t,arguments.length>1?arguments[1]:void 0)}}),si(ui);var fi=Ur(6),di="findIndex",pi=!0;di in[]&&Array(1)[di]((function(){pi=!1})),C(C.P+C.F*pi,"Array",{findIndex:function(t){return fi(this,t,arguments.length>1?arguments[1]:void 0)}}),si(di);var gi=A("species"),vi=function(t){var e=i[t];h&&e&&!e[gi]&&y.f(e,gi,{configurable:!0,get:function(){return this}})};vi("Array");var _i=function(t,e){return{value:e,done:!!t}},yi=Jn(Array,"Array",(function(t,e){this._t=G(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,_i(1)):_i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values");Un.Arguments=Un.Array,si("keys"),si("values"),si("entries");var mi=function(){var t=c(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},xi=y.f,bi=yt.f,wi=i.RegExp,Si=wi,Mi=wi.prototype,ki=/a/g,Ti=/a/g,Ei=new wi(ki)!==ki;if(h&&(!Ei||s((function(){return Ti[A("match")]=!1,wi(ki)!=ki||wi(Ti)==Ti||"/a/i"!=wi(ki,"i")})))){wi=function(t,e){var n=this instanceof wi,r=rr(t),i=void 0===e;return!n&&r&&t.constructor===wi&&i?t:Ue(Ei?new Si(r&&!i?t.source:t,e):Si((r=t instanceof wi)?t.source:t,r&&i?mi.call(t):e),n?this:Mi,wi)};for(var Di=function(t){t in wi||xi(wi,t,{configurable:!0,get:function(){return Si[t]},set:function(e){Si[t]=e}})},Pi=bi(Si),Ci=0;Pi.length>Ci;)Di(Pi[Ci++]);Mi.constructor=wi,wi.prototype=Mi,T(i,"RegExp",wi)}vi("RegExp");var Oi=RegExp.prototype.exec,Ai=String.prototype.replace,Ii=Oi,Li=function(){var t=/a/,e=/b*/g;return Oi.call(t,"a"),Oi.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),Ri=void 0!==/()??/.exec("")[1];(Li||Ri)&&(Ii=function(t){var e,n,r,i,o=this;return Ri&&(n=new RegExp("^"+o.source+"$(?!\\s)",mi.call(o))),Li&&(e=o.lastIndex),r=Oi.call(o,t),Li&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),Ri&&r&&r.length>1&&Ai.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var zi=Ii;C({target:"RegExp",proto:!0,forced:zi!==/./.exec},{exec:zi}),h&&"g"!=/./g.flags&&y.f(RegExp.prototype,"flags",{configurable:!0,get:mi});var Ni="toString",Fi=/./.toString,ji=function(t){T(RegExp.prototype,Ni,t,!0)};s((function(){return"/a/b"!=Fi.call({source:"a",flags:"b"})}))?ji((function(){var t=c(this);return"/".concat(t.source,"/","flags"in t?t.flags:!h&&t instanceof RegExp?mi.call(t):void 0)})):Fi.name!=Ni&&ji((function(){return Fi.call(this)}));var Bi=Yn(!0),Wi=function(t,e,n){return e+(n?Bi(t,e).length:1)},Hi=RegExp.prototype.exec,Gi=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==_e(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Hi.call(t,e)},Yi=A("species"),Ui=!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Vi=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),Xi=function(t,e,n){var r=A(t),i=!s((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),o=i?!s((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[Yi]=function(){return n}),n[r](""),!e})):void 0;if(!i||!o||"replace"===t&&!Ui||"split"===t&&!Vi){var a=/./[r],h=n(H,r,""[t],(function(t,e,n,r,o){return e.exec===zi?i&&!o?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),l=h[0],u=h[1];T(String.prototype,t,l),x(RegExp.prototype,r,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)})}};Xi("match",1,(function(t,e,n,r){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=r(n,t,this);if(e.done)return e.value;var i=c(t),o=String(this);if(!i.global)return Gi(i,o);var a=i.unicode;i.lastIndex=0;for(var s,h=[],l=0;null!==(s=Gi(i,o));){var u=String(s[0]);h[l]=u,""===u&&(i.lastIndex=Wi(o,q(i.lastIndex),a)),l++}return 0===l?null:h}]}));var qi=Math.max,Zi=Math.min,Qi=Math.floor,Ki=/\$([$&`']|\d\d?|<[^>]*>)/g,$i=/\$([$&`']|\d\d?)/g;Xi("replace",2,(function(t,e,n,r){return[function(r,i){var o=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var o=r(n,t,this,e);if(o.done)return o.value;var a=c(t),s=String(this),h="function"==typeof e;h||(e=String(e));var l=a.global;if(l){var u=a.unicode;a.lastIndex=0}for(var f=[];;){var d=Gi(a,s);if(null===d)break;if(f.push(d),!l)break;""===String(d[0])&&(a.lastIndex=Wi(s,q(a.lastIndex),u))}for(var p,g="",v=0,_=0;_<f.length;_++){d=f[_];for(var y=String(d[0]),m=qi(Zi(V(d.index),s.length),0),x=[],b=1;b<d.length;b++)x.push(void 0===(p=d[b])?p:String(p));var w=d.groups;if(h){var S=[y].concat(x,m,s);void 0!==w&&S.push(w);var M=String(e.apply(void 0,S))}else M=i(y,s,m,x,w,e);m>=v&&(g+=s.slice(v,m)+M,v=m+y.length)}return g+s.slice(v)}];function i(t,e,r,i,o,a){var s=r+t.length,h=i.length,l=$i;return void 0!==o&&(o=lt(o),l=Ki),n.call(a,l,(function(n,a){var l;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(s);case"<":l=o[a.slice(1,-1)];break;default:var u=+a;if(0===u)return n;if(u>h){var c=Qi(u/10);return 0===c?n:c<=h?void 0===i[c-1]?a.charAt(1):i[c-1]+a.charAt(1):n}l=i[u-1]}return void 0===l?"":l}))}})),Xi("search",1,(function(t,e,n,r){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=r(n,t,this);if(e.done)return e.value;var i=c(t),o=String(this),a=i.lastIndex;fe(a,0)||(i.lastIndex=0);var s=Gi(i,o);return fe(i.lastIndex,a)||(i.lastIndex=a),null===s?-1:s.index}]}));var Ji=A("species"),to=function(t,e){var n,r=c(t).constructor;return void 0===r||null==(n=c(r)[Ji])?e:E(n)},eo=Math.min,no=[].push,ro=4294967295,io=!s((function(){RegExp(ro,"y")}));Xi("split",2,(function(t,e,n,r){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!rr(t))return n.call(r,t,e);for(var i,o,a,s=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,u=void 0===e?ro:e>>>0,c=new RegExp(t.source,h+"g");(i=zi.call(c,r))&&!((o=c.lastIndex)>l&&(s.push(r.slice(l,i.index)),i.length>1&&i.index<r.length&&no.apply(s,i.slice(1)),a=i[0].length,l=o,s.length>=u));)c.lastIndex===i.index&&c.lastIndex++;return l===r.length?!a&&c.test("")||s.push(""):s.push(r.slice(l)),s.length>u?s.slice(0,u):s}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var o=t(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,o,r):i.call(String(o),n,r)},function(t,e){var o=r(i,t,this,e,i!==n);if(o.done)return o.value;var a=c(t),s=String(this),h=to(a,RegExp),l=a.unicode,u=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(io?"y":"g"),f=new h(io?a:"^(?:"+a.source+")",u),d=void 0===e?ro:e>>>0;if(0===d)return[];if(0===s.length)return null===Gi(f,s)?[s]:[];for(var p=0,g=0,v=[];g<s.length;){f.lastIndex=io?g:0;var _,y=Gi(f,io?s:s.slice(g));if(null===y||(_=eo(q(f.lastIndex+(io?0:g)),s.length))===p)g=Wi(s,g,l);else{if(v.push(s.slice(p,g)),v.length===d)return v;for(var m=1;m<=y.length-1;m++)if(v.push(y[m]),v.length===d)return v;g=p=_}}return v.push(s.slice(p)),v}]}));var oo,ao,so,ho=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t},lo=r((function(t){var e={},n={},r=t.exports=function(t,r,i,o,a){var s,h,l,u,f=a?function(){return t}:Ir(t),d=D(i,o,r?2:1),p=0;if("function"!=typeof f)throw TypeError(t+" is not iterable!");if(Cr(f)){for(s=q(t.length);s>p;p++)if((u=r?d(c(h=t[p])[0],h[1]):d(t[p]))===e||u===n)return u}else for(l=f.call(t);!(h=l.next()).done;)if((u=Er(l,d,h.value,r))===e||u===n)return u};r.BREAK=e,r.RETURN=n})),uo=i.process,co=i.setImmediate,fo=i.clearImmediate,po=i.MessageChannel,go=i.Dispatch,vo=0,_o={},yo="onreadystatechange",mo=function(){var t=+this;if(_o.hasOwnProperty(t)){var e=_o[t];delete _o[t],e()}},xo=function(t){mo.call(t.data)};co&&fo||(co=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _o[++vo]=function(){me("function"==typeof t?t:Function(t),e)},oo(vo),vo},fo=function(t){delete _o[t]},"process"==B(uo)?oo=function(t){uo.nextTick(D(mo,t,1))}:go&&go.now?oo=function(t){go.now(D(mo,t,1))}:po?(so=(ao=new po).port2,ao.port1.onmessage=xo,oo=D(so.postMessage,so,1)):i.addEventListener&&"function"==typeof postMessage&&!i.importScripts?(oo=function(t){i.postMessage(t+"","*")},i.addEventListener("message",xo,!1)):oo=yo in p("script")?function(t){ft.appendChild(p("script")).onreadystatechange=function(){ft.removeChild(this),mo.call(t)}}:function(t){setTimeout(D(mo,t,1),0)});var bo={set:co,clear:fo},wo=bo.set,So=i.MutationObserver||i.WebKitMutationObserver,Mo=i.process,ko=i.Promise,To="process"==B(Mo);function Eo(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=E(e),this.reject=E(n)}var Do,Po,Co,Oo,Ao={f:function(t){return new Eo(t)}},Io=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Lo=i.navigator,Ro=Lo&&Lo.userAgent||"",zo=function(t,e){if(c(t),u(e)&&e.constructor===t)return e;var n=Ao.f(t);return(0,n.resolve)(e),n.promise},No=function(t,e,n){for(var r in e)T(t,r,e[r],n);return t},Fo=bo.set,jo=function(){var t,e,n,r=function(){var r,i;for(To&&(r=Mo.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(To)n=function(){Mo.nextTick(r)};else if(!So||i.navigator&&i.navigator.standalone)if(ko&&ko.resolve){var o=ko.resolve(void 0);n=function(){o.then(r)}}else n=function(){wo.call(i,r)};else{var a=!0,s=document.createTextNode("");new So(r).observe(s,{characterData:!0}),n=function(){s.data=a=!a}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),Bo="Promise",Wo=i.TypeError,Ho=i.process,Go=Ho&&Ho.versions,Yo=Go&&Go.v8||"",Uo=i.Promise,Vo="process"==_e(Ho),Xo=function(){},qo=Po=Ao.f,Zo=!!function(){try{var t=Uo.resolve(1),e=(t.constructor={})[A("species")]=function(t){t(Xo,Xo)};return(Vo||"function"==typeof PromiseRejectionEvent)&&t.then(Xo)instanceof e&&0!==Yo.indexOf("6.6")&&-1===Ro.indexOf("Chrome/66")}catch(t){}}(),Qo=function(t){var e;return!(!u(t)||"function"!=typeof(e=t.then))&&e},Ko=function(t,e){if(!t._n){t._n=!0;var n=t._c;jo((function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,h=e.resolve,l=e.reject,u=e.domain;try{s?(i||(2==t._h&&ta(t),t._h=1),!0===s?n=r:(u&&u.enter(),n=s(r),u&&(u.exit(),a=!0)),n===e.promise?l(Wo("Promise-chain cycle")):(o=Qo(n))?o.call(n,h,l):h(n)):l(r)}catch(t){u&&!a&&u.exit(),l(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&$o(t)}))}},$o=function(t){Fo.call(i,(function(){var e,n,r,o=t._v,a=Jo(t);if(a&&(e=Io((function(){Vo?Ho.emit("unhandledRejection",o,t):(n=i.onunhandledrejection)?n({promise:t,reason:o}):(r=i.console)&&r.error&&r.error("Unhandled promise rejection",o)})),t._h=Vo||Jo(t)?2:1),t._a=void 0,a&&e.e)throw e.v}))},Jo=function(t){return 1!==t._h&&0===(t._a||t._c).length},ta=function(t){Fo.call(i,(function(){var e;Vo?Ho.emit("rejectionHandled",t):(e=i.onrejectionhandled)&&e({promise:t,reason:t._v})}))},ea=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Ko(e,!0))},na=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw Wo("Promise can't be resolved itself");(e=Qo(t))?jo((function(){var r={_w:n,_d:!1};try{e.call(t,D(na,r,1),D(ea,r,1))}catch(t){ea.call(r,t)}})):(n._v=t,n._s=1,Ko(n,!1))}catch(t){ea.call({_w:n,_d:!1},t)}}};Zo||(Uo=function(t){ho(this,Uo,Bo,"_h"),E(t),Do.call(this);try{t(D(na,this,1),D(ea,this,1))}catch(t){ea.call(this,t)}},(Do=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=No(Uo.prototype,{then:function(t,e){var n=qo(to(this,Uo));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Vo?Ho.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Ko(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Co=function(){var t=new Do;this.promise=t,this.resolve=D(na,t,1),this.reject=D(ea,t,1)},Ao.f=qo=function(t){return t===Uo||t===Oo?new Co(t):Po(t)}),C(C.G+C.W+C.F*!Zo,{Promise:Uo}),R(Uo,Bo),vi(Bo),Oo=l.Promise,C(C.S+C.F*!Zo,Bo,{reject:function(t){var e=qo(this);return(0,e.reject)(t),e.promise}}),C(C.S+C.F*!Zo,Bo,{resolve:function(t){return zo(this,t)}}),C(C.S+C.F*!(Zo&&Nr((function(t){Uo.all(t).catch(Xo)}))),Bo,{all:function(t){var e=this,n=qo(e),r=n.resolve,i=n.reject,o=Io((function(){var n=[],o=0,a=1;lo(t,!1,(function(t){var s=o++,h=!1;n.push(void 0),a++,e.resolve(t).then((function(t){h||(h=!0,n[s]=t,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=qo(e),r=n.reject,i=Io((function(){lo(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}});var ra=function(t,e){if(!u(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t},ia=y.f,oa=O.fastKey,aa=h?"_s":"size",sa=function(t,e){var n,r=oa(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n},ha={getConstructor:function(t,e,n,r){var i=t((function(t,o){ho(t,i,e,"_i"),t._t=e,t._i=vt(null),t._f=void 0,t._l=void 0,t[aa]=0,null!=o&&lo(o,n,t[r],t)}));return No(i.prototype,{clear:function(){for(var t=ra(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[aa]=0},delete:function(t){var n=ra(this,e),r=sa(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[aa]--}return!!r},forEach:function(t){ra(this,e);for(var n,r=D(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!sa(ra(this,e),t)}}),h&&ia(i.prototype,"size",{get:function(){return ra(this,e)[aa]}}),i},def:function(t,e,n){var r,i,o=sa(t,e);return o?o.v=n:(t._l=o={i:i=oa(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[aa]++,"F"!==i&&(t._i[i]=o)),t},getEntry:sa,setStrong:function(t,e,n){Jn(t,e,(function(t,n){this._t=ra(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?_i(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,_i(1))}),n?"entries":"values",!n,!0),vi(e)}},la=function(t,e,n,r,o,a){var h=i[t],l=h,c=o?"set":"add",f=l&&l.prototype,d={},p=function(t){var e=f[t];T(f,t,"delete"==t||"has"==t?function(t){return!(a&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return a&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof l&&(a||f.forEach&&!s((function(){(new l).entries().next()})))){var g=new l,v=g[c](a?{}:-0,1)!=g,_=s((function(){g.has(1)})),y=Nr((function(t){new l(t)})),m=!a&&s((function(){for(var t=new l,e=5;e--;)t[c](e,e);return!t.has(-0)}));y||((l=e((function(e,n){ho(e,l,t);var r=Ue(new h,e,l);return null!=n&&lo(n,o,r[c],r),r}))).prototype=f,f.constructor=l),(_||m)&&(p("delete"),p("has"),o&&p("get")),(m||v)&&p(c),a&&f.clear&&delete f.clear}else l=r.getConstructor(e,t,o,c),No(l.prototype,n),O.NEED=!0;return R(l,t),d[t]=l,C(C.G+C.W+C.F*(l!=h),d),a||r.setStrong(l,t,o),l},ua="Map",ca=(la(ua,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=ha.getEntry(ra(this,ua),t);return e&&e.v},set:function(t,e){return ha.def(ra(this,ua),0===t?0:t,e)}},ha,!0),la("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return ha.def(ra(this,"Set"),t=0===t?0:t,t)}},ha),O.getWeak),fa=Ur(5),da=Ur(6),pa=0,ga=function(t){return t._l||(t._l=new va)},va=function(){this.a=[]},_a=function(t,e){return fa(t.a,(function(t){return t[0]===e}))};va.prototype={get:function(t){var e=_a(this,t);if(e)return e[1]},has:function(t){return!!_a(this,t)},set:function(t,e){var n=_a(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=da(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}};var ya={getConstructor:function(t,e,n,r){var i=t((function(t,o){ho(t,i,e,"_i"),t._t=e,t._i=pa++,t._l=void 0,null!=o&&lo(o,n,t[r],t)}));return No(i.prototype,{delete:function(t){if(!u(t))return!1;var n=ca(t);return!0===n?ga(ra(this,e)).delete(t):n&&a(n,this._i)&&delete n[this._i]},has:function(t){if(!u(t))return!1;var n=ca(t);return!0===n?ga(ra(this,e)).has(t):n&&a(n,this._i)}}),i},def:function(t,e,n){var r=ca(c(e),!0);return!0===r?ga(t).set(e,n):r[t._i]=n,t},ufstore:ga},ma=(r((function(t){var e,n=Ur(0),r=ra,o=!i.ActiveXObject&&"ActiveXObject"in i,a="WeakMap",s=O.getWeak,h=Object.isExtensible,l=ya.ufstore,c=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},f={get:function(t){if(u(t)){var e=s(t);return!0===e?l(ra(this,a)).get(t):e?e[this._i]:void 0}},set:function(t,e){return ya.def(ra(this,a),t,e)}},d=t.exports=la(a,c,f,ya,!0,!0);r&&o&&(e=ya.getConstructor(c,a),ce(e.prototype,f),O.NEED=!0,n(["delete","has","get","set"],(function(t){var n=d.prototype,r=n[t];T(n,t,(function(n,i){if(u(n)&&!h(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)}))})))})),"WeakSet");la(ma,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return ya.def(ra(this,ma),t,!0)}},ya,!1,!0);for(var xa,ba=S("typed_array"),wa=S("view"),Sa=!(!i.ArrayBuffer||!i.DataView),Ma=Sa,ka=0,Ta="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");ka<9;)(xa=i[Ta[ka++]])?(x(xa.prototype,ba,!0),x(xa.prototype,wa,!0)):Ma=!1;var Ea={ABV:Sa,CONSTR:Ma,TYPED:ba,VIEW:wa},Da=function(t){if(void 0===t)return 0;var e=V(t),n=q(e);if(e!==n)throw RangeError("Wrong length!");return n},Pa=r((function(t,e){var n=yt.f,r=y.f,o="ArrayBuffer",a="DataView",l="Wrong index!",u=i.ArrayBuffer,c=i.DataView,f=i.Math,d=i.RangeError,p=i.Infinity,g=u,v=f.abs,_=f.pow,m=f.floor,b=f.log,w=f.LN2,S="buffer",M="byteLength",k="byteOffset",T=h?"_b":S,E=h?"_l":M,D=h?"_o":k;function P(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,h=(1<<s)-1,l=h>>1,u=23===e?_(2,-24)-_(2,-77):0,c=0,f=t<0||0===t&&1/t<0?1:0;for((t=v(t))!=t||t===p?(i=t!=t?1:0,r=h):(r=m(b(t)/w),t*(o=_(2,-r))<1&&(r--,o*=2),(t+=r+l>=1?u/o:u*_(2,1-l))*o>=2&&(r++,o/=2),r+l>=h?(i=0,r=h):r+l>=1?(i=(t*o-1)*_(2,e),r+=l):(i=t*_(2,l-1)*_(2,e),r=0));e>=8;a[c++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[c++]=255&r,r/=256,s-=8);return a[--c]|=128*f,a}function C(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,h=n-1,l=t[h--],u=127&l;for(l>>=7;s>0;u=256*u+t[h],h--,s-=8);for(r=u&(1<<-s)-1,u>>=-s,s+=e;s>0;r=256*r+t[h],h--,s-=8);if(0===u)u=1-a;else{if(u===o)return r?NaN:l?-p:p;r+=_(2,e),u-=a}return(l?-1:1)*r*_(2,u-e)}function O(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function A(t){return[255&t]}function I(t){return[255&t,t>>8&255]}function L(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function z(t){return P(t,52,8)}function N(t){return P(t,23,4)}function F(t,e,n){r(t.prototype,e,{get:function(){return this[n]}})}function j(t,e,n,r){var i=Da(+n);if(i+e>t[E])throw d(l);var o=t[T]._b,a=i+t[D],s=o.slice(a,a+e);return r?s:s.reverse()}function B(t,e,n,r,i,o){var a=Da(+n);if(a+e>t[E])throw d(l);for(var s=t[T]._b,h=a+t[D],u=r(+i),c=0;c<e;c++)s[h+c]=u[o?c:e-c-1]}if(Ea.ABV){if(!s((function(){u(1)}))||!s((function(){new u(-1)}))||s((function(){return new u,new u(1.5),new u(NaN),u.name!=o}))){for(var W,H=(u=function(t){return ho(this,u),new g(Da(t))}).prototype=g.prototype,G=n(g),Y=0;G.length>Y;)(W=G[Y++])in u||x(u,W,g[W]);H.constructor=u}var U=new c(new u(2)),X=c.prototype.setInt8;U.setInt8(0,2147483648),U.setInt8(1,2147483649),!U.getInt8(0)&&U.getInt8(1)||No(c.prototype,{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},!0)}else u=function(t){ho(this,u,o);var e=Da(t);this._b=hi.call(new Array(e),0),this[E]=e},c=function(t,e,n){ho(this,c,a),ho(t,u,a);var r=t[E],i=V(e);if(i<0||i>r)throw d("Wrong offset!");if(i+(n=void 0===n?r-i:q(n))>r)throw d("Wrong length!");this[T]=t,this[D]=i,this[E]=n},h&&(F(u,M,"_l"),F(c,S,"_b"),F(c,M,"_l"),F(c,k,"_o")),No(c.prototype,{getInt8:function(t){return j(this,1,t)[0]<<24>>24},getUint8:function(t){return j(this,1,t)[0]},getInt16:function(t){var e=j(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=j(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return O(j(this,4,t,arguments[1]))},getUint32:function(t){return O(j(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return C(j(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return C(j(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){B(this,1,t,A,e)},setUint8:function(t,e){B(this,1,t,A,e)},setInt16:function(t,e){B(this,2,t,I,e,arguments[2])},setUint16:function(t,e){B(this,2,t,I,e,arguments[2])},setInt32:function(t,e){B(this,4,t,L,e,arguments[2])},setUint32:function(t,e){B(this,4,t,L,e,arguments[2])},setFloat32:function(t,e){B(this,4,t,N,e,arguments[2])},setFloat64:function(t,e){B(this,8,t,z,e,arguments[2])}});R(u,o),R(c,a),x(c.prototype,Ea.VIEW,!0),e.ArrayBuffer=u,e.DataView=c})),Ca=i.ArrayBuffer,Oa=Pa.ArrayBuffer,Aa=Pa.DataView,Ia=Ea.ABV&&Ca.isView,La=Oa.prototype.slice,Ra=Ea.VIEW,za="ArrayBuffer";C(C.G+C.W+C.F*(Ca!==Oa),{ArrayBuffer:Oa}),C(C.S+C.F*!Ea.CONSTR,za,{isView:function(t){return Ia&&Ia(t)||u(t)&&Ra in t}}),C(C.P+C.U+C.F*s((function(){return!new Oa(2).slice(1,void 0).byteLength})),za,{slice:function(t,e){if(void 0!==La&&void 0===e)return La.call(c(this),t);for(var n=c(this).byteLength,r=K(t,n),i=K(void 0===e?n:e,n),o=new(to(this,Oa))(q(i-r)),a=new Aa(this),s=new Aa(o),h=0;r<i;)s.setUint8(h++,a.getUint8(r++));return o}}),vi(za),C(C.G+C.W+C.F*!Ea.ABV,{DataView:Pa.DataView});var Na=r((function(t){if(h){var e=i,n=s,r=C,o=Ea,l=Pa,c=D,f=ho,d=m,p=x,g=No,_=V,b=q,w=Da,M=K,k=v,T=a,E=_e,P=u,O=lt,I=Cr,L=vt,R=ae,z=yt.f,N=Ir,F=S,j=A,B=Ur,W=$,H=to,G=yi,Y=Un,U=Nr,X=vi,Z=hi,Q=ii,J=y,tt=Mt,et=J.f,nt=tt.f,rt=e.RangeError,it=e.TypeError,ot=e.Uint8Array,at="ArrayBuffer",st="SharedArrayBuffer",ht="BYTES_PER_ELEMENT",ut=Array.prototype,ct=l.ArrayBuffer,ft=l.DataView,dt=B(0),pt=B(2),gt=B(3),_t=B(4),mt=B(5),xt=B(6),bt=W(!0),wt=W(!1),St=G.values,kt=G.keys,Tt=G.entries,Et=ut.lastIndexOf,Dt=ut.reduce,Pt=ut.reduceRight,Ct=ut.join,Ot=ut.sort,At=ut.slice,It=ut.toString,Lt=ut.toLocaleString,Rt=j("iterator"),zt=j("toStringTag"),Nt=F("typed_constructor"),Ft=F("def_constructor"),jt=o.CONSTR,Bt=o.TYPED,Wt=o.VIEW,Ht="Wrong length!",Gt=B(1,(function(t,e){return qt(H(t,t[Ft]),e)})),Yt=n((function(){return 1===new ot(new Uint16Array([1]).buffer)[0]})),Ut=!!ot&&!!ot.prototype.set&&n((function(){new ot(1).set({})})),Vt=function(t,e){var n=_(t);if(n<0||n%e)throw rt("Wrong offset!");return n},Xt=function(t){if(P(t)&&Bt in t)return t;throw it(t+" is not a typed array!")},qt=function(t,e){if(!P(t)||!(Nt in t))throw it("It is not a typed array constructor!");return new t(e)},Zt=function(t,e){return Qt(H(t,t[Ft]),e)},Qt=function(t,e){for(var n=0,r=e.length,i=qt(t,r);r>n;)i[n]=e[n++];return i},Kt=function(t,e,n){et(t,e,{get:function(){return this._d[n]}})},$t=function(t){var e,n,r,i,o,a,s=O(t),h=arguments.length,l=h>1?arguments[1]:void 0,u=void 0!==l,f=N(s);if(null!=f&&!I(f)){for(a=f.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(u&&h>2&&(l=c(l,arguments[2],2)),e=0,n=b(s.length),i=qt(this,n);n>e;e++)i[e]=u?l(s[e],e):s[e];return i},Jt=function(){for(var t=0,e=arguments.length,n=qt(this,e);e>t;)n[t]=arguments[t++];return n},te=!!ot&&n((function(){Lt.call(new ot(1))})),ee=function(){return Lt.apply(te?At.call(Xt(this)):Xt(this),arguments)},ne={copyWithin:function(t,e){return Q.call(Xt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return _t(Xt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return Z.apply(Xt(this),arguments)},filter:function(t){return Zt(this,pt(Xt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return mt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return xt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){dt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return wt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return bt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return Ct.apply(Xt(this),arguments)},lastIndexOf:function(t){return Et.apply(Xt(this),arguments)},map:function(t){return Gt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return Dt.apply(Xt(this),arguments)},reduceRight:function(t){return Pt.apply(Xt(this),arguments)},reverse:function(){for(var t,e=this,n=Xt(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return gt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return Ot.call(Xt(this),t)},subarray:function(t,e){var n=Xt(this),r=n.length,i=M(t,r);return new(H(n,n[Ft]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,b((void 0===e?r:M(e,r))-i))}},re=function(t,e){return Zt(this,At.call(Xt(this),t,e))},ie=function(t){Xt(this);var e=Vt(arguments[1],1),n=this.length,r=O(t),i=b(r.length),o=0;if(i+e>n)throw rt(Ht);for(;o<i;)this[e+o]=r[o++]},oe={entries:function(){return Tt.call(Xt(this))},keys:function(){return kt.call(Xt(this))},values:function(){return St.call(Xt(this))}},se=function(t,e){return P(t)&&t[Bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},he=function(t,e){return se(t,e=k(e,!0))?d(2,t[e]):nt(t,e)},le=function(t,e,n){return!(se(t,e=k(e,!0))&&P(n)&&T(n,"value"))||T(n,"get")||T(n,"set")||n.configurable||T(n,"writable")&&!n.writable||T(n,"enumerable")&&!n.enumerable?et(t,e,n):(t[e]=n.value,t)};jt||(tt.f=he,J.f=le),r(r.S+r.F*!jt,"Object",{getOwnPropertyDescriptor:he,defineProperty:le}),n((function(){It.call({})}))&&(It=Lt=function(){return Ct.call(this)});var ue=g({},ne);g(ue,oe),p(ue,Rt,oe.values),g(ue,{slice:re,set:ie,constructor:function(){},toString:It,toLocaleString:ee}),Kt(ue,"buffer","b"),Kt(ue,"byteOffset","o"),Kt(ue,"byteLength","l"),Kt(ue,"length","e"),et(ue,zt,{get:function(){return this[Bt]}}),t.exports=function(t,i,a,s){var h=t+((s=!!s)?"Clamped":"")+"Array",l="get"+t,u="set"+t,c=e[h],d=c||{},g=c&&R(c),v=!c||!o.ABV,_={},y=c&&c.prototype,m=function(t,e){et(t,e,{get:function(){return function(t,e){var n=t._d;return n.v[l](e*i+n.o,Yt)}(this,e)},set:function(t){return function(t,e,n){var r=t._d;s&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),r.v[u](e*i+r.o,n,Yt)}(this,e,t)},enumerable:!0})};v?(c=a((function(t,e,n,r){f(t,c,h,"_d");var o,a,s,l,u=0,d=0;if(P(e)){if(!(e instanceof ct||(l=E(e))==at||l==st))return Bt in e?Qt(c,e):$t.call(c,e);o=e,d=Vt(n,i);var g=e.byteLength;if(void 0===r){if(g%i)throw rt(Ht);if((a=g-d)<0)throw rt(Ht)}else if((a=b(r)*i)+d>g)throw rt(Ht);s=a/i}else s=w(e),o=new ct(a=s*i);for(p(t,"_d",{b:o,o:d,l:a,e:s,v:new ft(o)});u<s;)m(t,u++)})),y=c.prototype=L(ue),p(y,"constructor",c)):n((function(){c(1)}))&&n((function(){new c(-1)}))&&U((function(t){new c,new c(null),new c(1.5),new c(t)}),!0)||(c=a((function(t,e,n,r){var o;return f(t,c,h),P(e)?e instanceof ct||(o=E(e))==at||o==st?void 0!==r?new d(e,Vt(n,i),r):void 0!==n?new d(e,Vt(n,i)):new d(e):Bt in e?Qt(c,e):$t.call(c,e):new d(w(e))})),dt(g!==Function.prototype?z(d).concat(z(g)):z(d),(function(t){t in c||p(c,t,d[t])})),c.prototype=y,y.constructor=c);var x=y[Rt],S=!!x&&("values"==x.name||null==x.name),M=oe.values;p(c,Nt,!0),p(y,Bt,h),p(y,Wt,!0),p(y,Ft,c),(s?new c(1)[zt]==h:zt in y)||et(y,zt,{get:function(){return h}}),_[h]=c,r(r.G+r.W+r.F*(c!=d),_),r(r.S,h,{BYTES_PER_ELEMENT:i}),r(r.S+r.F*n((function(){d.of.call(c,1)})),h,{from:$t,of:Jt}),ht in y||p(y,ht,i),r(r.P,h,ne),X(h),r(r.P+r.F*Ut,h,{set:ie}),r(r.P+r.F*!S,h,oe),y.toString!=It&&(y.toString=It),r(r.P+r.F*n((function(){new c(1).slice()})),h,{slice:re}),r(r.P+r.F*(n((function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()}))||!n((function(){y.toLocaleString.call([1,2])}))),h,{toLocaleString:ee}),Y[h]=S?x:M,S||p(y,Rt,M)}}else t.exports=function(){}}));Na("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0),Na("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Na("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}));var Fa=(i.Reflect||{}).apply,ja=Function.apply;C(C.S+C.F*!s((function(){Fa((function(){}))})),"Reflect",{apply:function(t,e,n){var r=E(t),i=c(n);return Fa?Fa(r,e,i):ja.call(r,e,i)}});var Ba=(i.Reflect||{}).construct,Wa=s((function(){function t(){}return!(Ba((function(){}),[],t)instanceof t)})),Ha=!s((function(){Ba((function(){}))}));C(C.S+C.F*(Wa||Ha),"Reflect",{construct:function(t,e){E(t),c(e);var n=arguments.length<3?t:E(arguments[2]);if(Ha&&!Wa)return Ba(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(Se.apply(t,r))}var i=n.prototype,o=vt(u(i)?i:Object.prototype),a=Function.apply.call(t,o,e);return u(a)?a:o}}),C(C.S+C.F*s((function(){Reflect.defineProperty(y.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,n){c(t),e=v(e,!0),c(n);try{return y.f(t,e,n),!0}catch(t){return!1}}});var Ga=Mt.f;C(C.S,"Reflect",{deleteProperty:function(t,e){var n=Ga(c(t),e);return!(n&&!n.configurable)&&delete t[e]}});var Ya=function(t){this._t=c(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};Xn(Ya,"Object",(function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}})),C(C.S,"Reflect",{enumerate:function(t){return new Ya(t)}}),C(C.S,"Reflect",{get:function t(e,n){var r,i,o=arguments.length<3?e:arguments[2];return c(e)===o?e[n]:(r=Mt.f(e,n))?a(r,"value")?r.value:void 0!==r.get?r.get.call(o):void 0:u(i=ae(e))?t(i,n,o):void 0}}),C(C.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return Mt.f(c(t),e)}}),C(C.S,"Reflect",{getPrototypeOf:function(t){return ae(c(t))}}),C(C.S,"Reflect",{has:function(t,e){return e in t}});var Ua=Object.isExtensible;C(C.S,"Reflect",{isExtensible:function(t){return c(t),!Ua||Ua(t)}});var Va=i.Reflect,Xa=Va&&Va.ownKeys||function(t){var e=yt.f(c(t)),n=at.f;return n?e.concat(n(t)):e};C(C.S,"Reflect",{ownKeys:Xa});var qa=Object.preventExtensions;C(C.S,"Reflect",{preventExtensions:function(t){c(t);try{return qa&&qa(t),!0}catch(t){return!1}}}),C(C.S,"Reflect",{set:function t(e,n,r){var i,o,s=arguments.length<4?e:arguments[3],h=Mt.f(c(e),n);if(!h){if(u(o=ae(e)))return t(o,n,r,s);h=m(0)}if(a(h,"value")){if(!1===h.writable||!u(s))return!1;if(i=Mt.f(s,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,y.f(s,n,i)}else y.f(s,n,m(0,r));return!0}return void 0!==h.set&&(h.set.call(s,r),!0)}}),pe&&C(C.S,"Reflect",{setPrototypeOf:function(t,e){pe.check(t,e);try{return pe.set(t,e),!0}catch(t){return!1}}});var Za=$(!0);C(C.P,"Array",{includes:function(t){return Za(this,t,arguments.length>1?arguments[1]:void 0)}}),si("includes");l.Array.includes;var Qa=function(t,e,n,r){var i=String(H(t)),o=i.length,a=void 0===n?" ":String(n),s=q(e);if(s<=o||""==a)return i;var h=s-o,l=hn.call(a,Math.ceil(h/a.length));return l.length>h&&(l=l.slice(0,h)),r?l+i:i+l},Ka=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(Ro);C(C.P+C.F*Ka,"String",{padStart:function(t){return Qa(this,t,arguments.length>1?arguments[1]:void 0,!0)}});l.String.padStart;var $a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(Ro);C(C.P+C.F*$a,"String",{padEnd:function(t){return Qa(this,t,arguments.length>1?arguments[1]:void 0,!1)}});l.String.padEnd;F("asyncIterator");z.f("asyncIterator");C(C.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=G(t),i=Mt.f,o=Xa(r),a={},s=0;o.length>s;)void 0!==(n=i(r,e=o[s++]))&&Or(a,e,n);return a}});l.Object.getOwnPropertyDescriptors;var Ja=st.f,ts=function(t){return function(e){for(var n,r=G(e),i=ot(r),o=i.length,a=0,s=[];o>a;)n=i[a++],h&&!Ja.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}},es=ts(!1);C(C.S,"Object",{values:function(t){return es(t)}});l.Object.values;var ns=ts(!0);C(C.S,"Object",{entries:function(t){return ns(t)}});l.Object.entries;C(C.P+C.R,"Promise",{finally:function(t){var e=to(this,l.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return zo(e,t()).then((function(){return n}))}:t,n?function(n){return zo(e,t()).then((function(){throw n}))}:t)}});l.Promise.finally;var rs=[].slice,is=/MSIE .\./.test(Ro),os=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&rs.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};C(C.G+C.B+C.F*is,{setTimeout:os(i.setTimeout),setInterval:os(i.setInterval)}),C(C.G+C.B,{setImmediate:bo.set,clearImmediate:bo.clear});for(var as=A("iterator"),ss=A("toStringTag"),hs=Un.Array,ls={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},us=ot(ls),cs=0;cs<us.length;cs++){var fs,ds=us[cs],ps=ls[ds],gs=i[ds],vs=gs&&gs.prototype;if(vs&&(vs[as]||x(vs,as,hs),vs[ss]||x(vs,ss,ds),Un[ds]=hs,ps))for(fs in yi)vs[fs]||T(vs,fs,yi[fs],!0)}r((function(t){!function(e){var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag",l=e.regeneratorRuntime;if(l)t.exports=l;else{(l=e.regeneratorRuntime=t.exports).wrap=m;var u="suspendedStart",c="suspendedYield",f="executing",d="completed",p={},g={};g[a]=function(){return this};var v=Object.getPrototypeOf,_=v&&v(v(C([])));_&&_!==r&&i.call(_,a)&&(g=_);var y=S.prototype=b.prototype=Object.create(g);w.prototype=y.constructor=S,S.constructor=w,S[h]=w.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,h in t||(t[h]="GeneratorFunction")),t.prototype=Object.create(y),t},l.awrap=function(t){return{__await:t}},M(k.prototype),k.prototype[s]=function(){return this},l.AsyncIterator=k,l.async=function(t,e,n,r){var i=new k(m(t,e,n,r));return l.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},M(y),y[h]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(D),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var h=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(h&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(h){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),p}}}function m(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(t,e,n){var r=u;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return O()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var h=x(t,e,n);if("normal"===h.type){if(r=n.done?d:c,h.arg===p)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r=d,n.method="throw",n.arg=h.arg)}}}(t,n,a),o}function x(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function b(){}function w(){}function S(){}function M(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function k(t){function e(n,r,o,a){var s=x(t[n],t,r);if("throw"!==s.type){var h=s.arg,l=h.value;return l&&"object"==typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(l).then((function(t){h.value=t,o(h)}),a)}a(s.arg)}var n;this._invoke=function(t,r){function i(){return new Promise((function(n,i){e(t,r,n,i)}))}return n=n?n.then(i,i):i()}}function T(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,T(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=x(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())}));n._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),n._babelPolyfill=!0;var _s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function ys(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ms=function(t,e,n){return e&&ys(t.prototype,e),n&&ys(t,n),t},xs=r((function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e}));var bs=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xs(t,e)},ws=r((function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e}));var Ss=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}},Ms=r((function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e}));var ks=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var Ts=function(t,e){return!e||"object"!==Ms(e)&&"function"!=typeof e?ks(t):e};var Es=function(t){var e=Ss();return function(){var n,r=ws(t);if(e){var i=ws(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ts(this,n)}},Ds=2311;var Ps=function(){return Ds++};var Cs="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:function(t){var e={},n={},r=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge\/([\d.]+)/),a=/micromessenger/i.test(t);r&&(n.firefox=!0,n.version=r[1]);i&&(n.ie=!0,n.version=i[1]);o&&(n.edge=!0,n.version=o[1]);a&&(n.weChat=!0);return{browser:n,os:e,node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!n.ie&&!n.edge,pointerEventsSupported:"onpointerdown"in window&&(n.edge||n.ie&&n.version>=11),domSupported:"undefined"!=typeof document}}(navigator.userAgent),Os={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},As={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},Is=Object.prototype.toString,Ls=Array.prototype,Rs=Ls.forEach,zs=Ls.filter,Ns=Ls.slice,Fs=Ls.map,js=Ls.reduce,Bs={};function Ws(t){if(null==t||"object"!=typeof t)return t;var e=t,n=Is.call(t);if("[object Array]"===n){if(!Js(t)){e=[];for(var r=0,i=t.length;r<i;r++)e[r]=Ws(t[r])}}else if(As[n]){if(!Js(t)){var o=t.constructor;if(t.constructor.from)e=o.from(t);else{e=new o(t.length);for(r=0,i=t.length;r<i;r++)e[r]=Ws(t[r])}}}else if(!Os[n]&&!Js(t)&&!Ks(t))for(var a in e={},t)t.hasOwnProperty(a)&&(e[a]=Ws(t[a]));return e}function Hs(t,e,n){if(!Zs(e)||!Zs(t))return n?Ws(e):t;for(var r in e)if(e.hasOwnProperty(r)){var i=t[r],o=e[r];!Zs(o)||!Zs(i)||qs(o)||qs(i)||Ks(o)||Ks(i)||Qs(o)||Qs(i)||Js(o)||Js(i)?!n&&r in t||(t[r]=Ws(e[r])):Hs(i,o,n)}return t}function Gs(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(n?null!=e[r]:null==t[r])&&(t[r]=e[r]);return t}var Ys,Us=function(){return Bs.createCanvas()};function Vs(t,e,n){if(t&&e)if(t.forEach&&t.forEach===Rs)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function Xs(t,e){var n=Ns.call(arguments,2);return function(){return t.apply(e,n.concat(Ns.call(arguments)))}}function qs(t){return"[object Array]"===Is.call(t)}function Zs(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function Qs(t){return!!Os[Is.call(t)]}function Ks(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}Bs.createCanvas=function(){return document.createElement("canvas")};var $s="__ec_primitive__";function Js(t){return t[$s]}function th(t){var e=qs(t);this.data={};var n=this;function r(t,r){e?n.set(t,r):n.set(r,t)}t instanceof th?t.each(r):t&&Vs(t,r)}th.prototype={constructor:th,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){for(var n in void 0!==e&&(t=Xs(t,e)),this.data)this.data.hasOwnProperty(n)&&t(this.data[n],n)},removeKey:function(t){delete this.data[t]}};var eh={$override:function(t,e){"createCanvas"===t&&(Ys=null),Bs[t]=e},clone:Ws,merge:Hs,mergeAll:function(t,e){for(var n=t[0],r=1,i=t.length;r<i;r++)n=Hs(n,t[r],e);return n},extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},defaults:Gs,createCanvas:Us,getContext:function(){return Ys||(Ys=Us().getContext("2d")),Ys},indexOf:function(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1},inherits:function(t,e){var n=t.prototype;function r(){}for(var i in r.prototype=e.prototype,t.prototype=new r,n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i]);t.prototype.constructor=t,t.superClass=e},mixin:function(t,e,n){Gs(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,n)},isArrayLike:function(t){if(t)return"string"!=typeof t&&"number"==typeof t.length},each:Vs,map:function(t,e,n){if(t&&e){if(t.map&&t.map===Fs)return t.map(e,n);for(var r=[],i=0,o=t.length;i<o;i++)r.push(e.call(n,t[i],i,t));return r}},reduce:function(t,e,n,r){if(t&&e){if(t.reduce&&t.reduce===js)return t.reduce(e,n,r);for(var i=0,o=t.length;i<o;i++)n=e.call(r,n,t[i],i,t);return n}},filter:function(t,e,n){if(t&&e){if(t.filter&&t.filter===zs)return t.filter(e,n);for(var r=[],i=0,o=t.length;i<o;i++)e.call(n,t[i],i,t)&&r.push(t[i]);return r}},find:function(t,e,n){if(t&&e)for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t))return t[r]},bind:Xs,curry:function(t){var e=Ns.call(arguments,1);return function(){return t.apply(this,e.concat(Ns.call(arguments)))}},isArray:qs,isFunction:function(t){return"function"==typeof t},isString:function(t){return"[object String]"===Is.call(t)},isObject:Zs,isBuiltInObject:Qs,isTypedArray:function(t){return!!As[Is.call(t)]},isDom:Ks,eqNaN:function(t){return t!=t},retrieve:function(t){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]},retrieve2:function(t,e){return null!=t?t:e},retrieve3:function(t,e,n){return null!=t?t:null!=e?e:n},slice:function(){return Function.call.apply(Ns,arguments)},normalizeCssArray:function(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t},assert:function(t,e){if(!t)throw new Error(e)},trim:function(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},setAsPrimitive:function(t){t[$s]=!0},isPrimitive:Js,createHashMap:function(t){return new th(t)},concatArray:function(t,e){for(var n=new t.constructor(t.length+e.length),r=0;r<t.length;r++)n[r]=t[r];var i=t.length;for(r=0;r<e.length;r++)n[r+i]=e[r];return n},noop:function(){}},nh="undefined"==typeof Float32Array?Array:Float32Array;function rh(t){return Math.sqrt(ih(t))}function ih(t){return t[0]*t[0]+t[1]*t[1]}function oh(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function ah(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var sh={create:function(t,e){var n=new nh(2);return null==t&&(t=0),null==e&&(e=0),n[0]=t,n[1]=e,n},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},clone:function(t){var e=new nh(2);return e[0]=t[0],e[1]=t[1],e},set:function(t,e,n){return t[0]=e,t[1]=n,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},sub:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},len:rh,length:rh,lenSquare:ih,lengthSquare:ih,mul:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},div:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},normalize:function(t,e){var n=rh(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t},distance:oh,dist:oh,distanceSquare:ah,distSquare:ah,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:function(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t},applyTransform:function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}};function hh(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function lh(t,e){return{target:t,topTarget:e&&e.topTarget}}hh.prototype={constructor:hh,_dragStart:function(t){var e=t.target;e&&e.draggable&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(lh(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,r=t.offsetY,i=n-this._x,o=r-this._y;this._x=n,this._y=r,e.drift(i,o,t),this.dispatchToElement(lh(e,t),"drag",t.event);var a=this.findHover(n,r,e).target,s=this._dropTarget;this._dropTarget=a,e!==a&&(s&&a!==s&&this.dispatchToElement(lh(s,t),"dragleave",t.event),a&&a!==s&&this.dispatchToElement(lh(a,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(lh(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(lh(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var uh=hh,ch=Array.prototype.slice,fh=function(t){this._$handlers={},this._$eventProcessor=t};function dh(t,e,n,r,i,o){var a=t._$handlers;if("function"==typeof n&&(i=r,r=n,n=null),!r||!e)return t;n=function(t,e){var n=t._$eventProcessor;return null!=e&&n&&n.normalizeQuery&&(e=n.normalizeQuery(e)),e}(t,n),a[e]||(a[e]=[]);for(var s=0;s<a[e].length;s++)if(a[e][s].h===r)return t;var h={h:r,one:o,query:n,ctx:i||t,callAtLast:r.zrEventfulCallAtLast},l=a[e].length-1,u=a[e][l];return u&&u.callAtLast?a[e].splice(l,0,h):a[e].push(h),t}fh.prototype={constructor:fh,one:function(t,e,n,r){return dh(this,t,e,n,r,!0)},on:function(t,e,n,r){return dh(this,t,e,n,r,!1)},isSilent:function(t){var e=this._$handlers;return!e[t]||!e[t].length},off:function(t,e){var n=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var r=[],i=0,o=n[t].length;i<o;i++)n[t][i].h!==e&&r.push(n[t][i]);n[t]=r}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},trigger:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var r=arguments,i=r.length;i>3&&(r=ch.call(r,1));for(var o=e.length,a=0;a<o;){var s=e[a];if(n&&n.filter&&null!=s.query&&!n.filter(t,s.query))a++;else{switch(i){case 1:s.h.call(s.ctx);break;case 2:s.h.call(s.ctx,r[1]);break;case 3:s.h.call(s.ctx,r[1],r[2]);break;default:s.h.apply(s.ctx,r)}s.one?(e.splice(a,1),o--):a++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this},triggerWithContext:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var r=arguments,i=r.length;i>4&&(r=ch.call(r,1,r.length-1));for(var o=r[r.length-1],a=e.length,s=0;s<a;){var h=e[s];if(n&&n.filter&&null!=h.query&&!n.filter(t,h.query))s++;else{switch(i){case 1:h.h.call(o);break;case 2:h.h.call(o,r[1]);break;case 3:h.h.call(o,r[1],r[2]);break;default:h.h.apply(o,r)}h.one?(e.splice(s,1),a--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this}};var ph=fh,gh=Math.log(2);function vh(t,e,n,r,i,o){var a=r+"-"+i,s=t.length;if(o.hasOwnProperty(a))return o[a];if(1===e){var h=Math.round(Math.log((1<<s)-1&~i)/gh);return t[n][h]}for(var l=r|1<<n,u=n+1;r&1<<u;)u++;for(var c=0,f=0,d=0;f<s;f++){var p=1<<f;p&i||(c+=(d%2?-1:1)*t[n][f]*vh(t,e-1,u,l,i|p,o),d++)}return o[a]=c,c}var _h=ph,yh={buildTransformer:function(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],r={},i=vh(n,8,0,0,0,r);if(0!==i){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)null==o[s]&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*vh(n,7,0===a?1:0,1<<a,1<<s,r)/i*e[a];return function(t,e,n){var r=e*o[6]+n*o[7]+1;t[0]=(e*o[0]+n*o[1]+o[2])/r,t[1]=(e*o[3]+n*o[4]+o[5])/r}}}}.buildTransformer,mh="undefined"!=typeof window&&!!window.addEventListener,xh=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,bh=[];function wh(t,e,n,r){return n=n||{},r||!Cs.canvasSupported?Sh(t,e,n):Cs.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):Sh(t,e,n),n}function Sh(t,e,n){if(t.getBoundingClientRect&&Cs.domSupported){var r=e.clientX,i=e.clientY;if("CANVAS"===t.nodeName.toUpperCase()){var o=t.getBoundingClientRect();return n.zrX=r-o.left,void(n.zrY=i-o.top)}var a=t.___zrEVENTSAVED||(t.___zrEVENTSAVED={}),s=function(t,e){for(var n=e.transformer,r=e.srcCoords,i=!0,o=[],a=[],s=0;s<4;s++){var h=t[s].getBoundingClientRect(),l=2*s,u=h.left,c=h.top;o.push(u,c),i&=r&&u===r[l]&&c===r[l+1],a.push(t[s].offsetLeft,t[s].offsetTop)}return i?n:(e.srcCoords=o,e.transformer=yh(o,a))}(function(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var r=["left","right"],i=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=o%2,h=(o>>1)%2;a.style.cssText=["position:absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","width:0","height:0",r[s]+":0",i[h]+":0",r[1-s]+":auto",i[1-h]+":auto",""].join("!important;"),t.appendChild(a),n.push(a)}return n}(t,a),a);if(s)return s(bh,r,i),n.zrX=bh[0],void(n.zrY=bh[1])}n.zrX=n.zrY=0}function Mh(t){return t||window.event}var kh={Dispatcher:_h,clientToLocal:wh,getNativeEvent:Mh,normalizeEvent:function(t,e,n){if(null!=(e=Mh(e)).zrX)return e;var r=e.type;if(r&&r.indexOf("touch")>=0){var i="touchend"!==r?e.targetTouches[0]:e.changedTouches[0];i&&wh(t,i,e,n)}else wh(t,e,e,n),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var o=e.button;return null==e.which&&void 0!==o&&xh.test(e.type)&&(e.which=1&o?1:2&o?3:4&o?2:0),e},addEventListener:function(t,e,n,r){mh?t.addEventListener(e,n,r):t.attachEvent("on"+e,n)},removeEventListener:function(t,e,n,r){mh?t.removeEventListener(e,n,r):t.detachEvent("on"+e,n)},stop:mh?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},isMiddleOrRightButtonOnMouseUpDown:function(t){return 2===t.which||3===t.which},notLeftMouse:function(t){return t.which>1}},Th=function(){this._track=[]};function Eh(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}Th.prototype={constructor:Th,recognize:function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,n){var r=t.touches;if(r){for(var i={points:[],touches:[],target:e,event:t},o=0,a=r.length;o<a;o++){var s=r[o],h=kh.clientToLocal(n,s,{});i.points.push([h.zrX,h.zrY]),i.touches.push(s)}this._track.push(i)}},_recognize:function(t){for(var e in Dh)if(Dh.hasOwnProperty(e)){var n=Dh[e](this._track,t);if(n)return n}}};var Dh={pinch:function(t,e){var n=t.length;if(n){var r,i=(t[n-1]||{}).points,o=(t[n-2]||{}).points||i;if(o&&o.length>1&&i&&i.length>1){var a=Eh(i)/Eh(o);!isFinite(a)&&(a=1),e.pinchScale=a;var s=[((r=i)[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2];return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:t[0].target,event:e}}}}},Ph=Th,Ch="silent";function Oh(){kh.stop(this.event)}function Ah(){}Ah.prototype.dispose=function(){};var Ih=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Lh=function(t,e,n,r){ph.call(this),this.storage=t,this.painter=e,this.painterRoot=r,n=n||new Ah,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,uh.call(this),this.setHandlerProxy(n)};function Rh(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var r,i=t;i;){if(i.clipPath&&!i.clipPath.contain(e,n))return!1;i.silent&&(r=!0),i=i.parent}return!r||Ch}return!1}function zh(t,e,n){var r=t.painter;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}Lh.prototype={constructor:Lh,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(eh.each(Ih,(function(e){t.on&&t.on(e,this[e],this)}),this),t.handler=this),this.proxy=t},mousemove:function(t){var e=t.zrX,n=t.zrY,r=zh(this,e,n),i=this._hovered,o=i.target;o&&!o.__zr&&(o=(i=this.findHover(i.x,i.y)).target);var a=this._hovered=r?{x:e,y:n}:this.findHover(e,n),s=a.target,h=this.proxy;h.setCursor&&h.setCursor(s?s.cursor:"default"),o&&s!==o&&this.dispatchToElement(i,"mouseout",t),this.dispatchToElement(a,"mousemove",t),s&&s!==o&&this.dispatchToElement(a,"mouseover",t)},mouseout:function(t){var e=t.zrEventControl,n=t.zrIsToLocalDOM;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&!n&&this.trigger("globalout",{type:"globalout",event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){var n=this[t];n&&n.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,n){var r=(t=t||{}).target;if(!r||!r.silent){for(var i="on"+e,o=function(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:Oh}}(e,t,n);r&&(r[i]&&(o.cancelBubble=r[i].call(r,o)),r.trigger(e,o),r=r.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(e,o),this.painter&&this.painter.eachOtherLayer((function(t){"function"==typeof t[i]&&t[i].call(t,o),t.trigger&&t.trigger(e,o)})))}},findHover:function(t,e,n){for(var r=this.storage.getDisplayList(),i={x:t,y:e},o=r.length-1;o>=0;o--){var a;if(r[o]!==n&&!r[o].ignore&&(a=Rh(r[o],t,e))&&(!i.topTarget&&(i.topTarget=r[o]),a!==Ch)){i.target=r[o];break}}return i},processGesture:function(t,e){this._gestureMgr||(this._gestureMgr=new Ph);var n=this._gestureMgr;"start"===e&&n.clear();var r=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&n.clear(),r){var i=r.type;t.gestureEvent=i,this.dispatchToElement({target:r.target},i,r.event)}}},eh.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],(function(t){Lh.prototype[t]=function(e){var n,r,i=e.zrX,o=e.zrY,a=zh(this,i,o);if("mouseup"===t&&a||(r=(n=this.findHover(i,o)).target),"mousedown"===t)this._downEl=r,this._downPoint=[e.zrX,e.zrY],this._upEl=r;else if("mouseup"===t)this._upEl=r;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||sh.dist(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,t,e)}})),eh.mixin(Lh,ph),eh.mixin(Lh,uh);var Nh=Lh,Fh="undefined"==typeof Float32Array?Array:Float32Array;function jh(){var t=new Fh(6);return Bh(t),t}function Bh(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Wh(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}var Hh={create:jh,identity:Bh,copy:Wh,mul:function(t,e,n){var r=e[0]*n[0]+e[2]*n[1],i=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],h=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=h,t},translate:function(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t},rotate:function(t,e,n){var r=e[0],i=e[2],o=e[4],a=e[1],s=e[3],h=e[5],l=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*l,t[1]=-r*l+a*u,t[2]=i*u+s*l,t[3]=-i*l+u*s,t[4]=u*o+l*h,t[5]=u*h-l*o,t},scale:function(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t},invert:function(t,e){var n=e[0],r=e[2],i=e[4],o=e[1],a=e[3],s=e[5],h=n*a-o*r;return h?(h=1/h,t[0]=a*h,t[1]=-o*h,t[2]=-r*h,t[3]=n*h,t[4]=(r*s-a*i)*h,t[5]=(o*i-n*s)*h,t):null},clone:function(t){var e=jh();return Wh(e,t),e}},Gh=Hh.identity,Yh=5e-5;function Uh(t){return t>Yh||t<-5e-5}var Vh=function(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},Xh=Vh.prototype;Xh.transform=null,Xh.needLocalTransform=function(){return Uh(this.rotation)||Uh(this.position[0])||Uh(this.position[1])||Uh(this.scale[0]-1)||Uh(this.scale[1]-1)};var qh=[];Xh.updateTransform=function(){var t=this.parent,e=t&&t.transform,n=this.needLocalTransform(),r=this.transform;if(n||e){r=r||Hh.create(),n?this.getLocalTransform(r):Gh(r),e&&(n?Hh.mul(r,t.transform,r):Hh.copy(r,t.transform)),this.transform=r;var i=this.globalScaleRatio;if(null!=i&&1!==i){this.getGlobalScale(qh);var o=qh[0]<0?-1:1,a=qh[1]<0?-1:1,s=((qh[0]-o)*i+o)/qh[0]||0,h=((qh[1]-a)*i+a)/qh[1]||0;r[0]*=s,r[1]*=s,r[2]*=h,r[3]*=h}this.invTransform=this.invTransform||Hh.create(),Hh.invert(this.invTransform,r)}else r&&Gh(r)},Xh.getLocalTransform=function(t){return Vh.getLocalTransform(this,t)},Xh.setTransform=function(t){var e=this.transform,n=t.dpr||1;e?t.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):t.setTransform(n,0,0,n,0,0)},Xh.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var Zh=[],Qh=Hh.create();Xh.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],r=this.position,i=this.scale;Uh(e-1)&&(e=Math.sqrt(e)),Uh(n-1)&&(n=Math.sqrt(n)),t[0]<0&&(e=-e),t[3]<0&&(n=-n),r[0]=t[4],r[1]=t[5],i[0]=e,i[1]=n,this.rotation=Math.atan2(-t[1]/n,t[0]/e)}},Xh.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(Hh.mul(Zh,t.invTransform,e),e=Zh);var n=this.origin;n&&(n[0]||n[1])&&(Qh[4]=n[0],Qh[5]=n[1],Hh.mul(Zh,e,Qh),Zh[4]-=n[0],Zh[5]-=n[1],e=Zh),this.setLocalTransform(e)}},Xh.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},Xh.transformCoordToLocal=function(t,e){var n=[t,e],r=this.invTransform;return r&&sh.applyTransform(n,n,r),n},Xh.transformCoordToGlobal=function(t,e){var n=[t,e],r=this.transform;return r&&sh.applyTransform(n,n,r),n},Vh.getLocalTransform=function(t,e){Gh(e=e||[]);var n=t.origin,r=t.scale||[1,1],i=t.rotation||0,o=t.position||[0,0];return n&&(e[4]-=n[0],e[5]-=n[1]),Hh.scale(e,e,r),i&&Hh.rotate(e,e,i),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=o[0],e[5]+=o[1],e};var Kh=Vh,$h={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-$h.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*$h.bounceIn(2*t):.5*$h.bounceOut(2*t-1)+.5}},Jh=$h;function tl(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}tl.prototype={constructor:tl,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var n=(t-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var r=this.easing,i="string"==typeof r?Jh[r]:r,o="function"==typeof i?i(n):n;return this.fire("frame",o),1===n?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){this[t="on"+t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var el=tl,nl=function(){this.head=null,this.tail=null,this._len=0},rl=nl.prototype;rl.insert=function(t){var e=new il(t);return this.insertEntry(e),e},rl.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},rl.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},rl.len=function(){return this._len},rl.clear=function(){this.head=this.tail=null,this._len=0};var il=function(t){this.value=t,this.next,this.prev},ol=function(t){this._list=new nl,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},al=ol.prototype;al.put=function(t,e){var n=this._list,r=this._map,i=null;if(null==r[t]){var o=n.len(),a=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var s=n.head;n.remove(s),delete r[s.key],i=s.value,this._lastRemovedEntry=s}a?a.value=e:a=new il(e),a.key=t,n.insertEntry(a),r[t]=a}return i},al.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},al.clear=function(){this._list.clear(),this._map={}};var sl=ol,hl={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ll(t){return(t=Math.round(t))<0?0:t>255?255:t}function ul(t){return t<0?0:t>1?1:t}function cl(t){return t.length&&"%"===t.charAt(t.length-1)?ll(parseFloat(t)/100*255):ll(parseInt(t,10))}function fl(t){return t.length&&"%"===t.charAt(t.length-1)?ul(parseFloat(t)/100):ul(parseFloat(t))}function dl(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function pl(t,e,n){return t+(e-t)*n}function gl(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function vl(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var _l=new sl(20),yl=null;function ml(t,e){yl&&vl(yl,e),yl=_l.put(t,yl||e.slice())}function xl(t,e){if(t){e=e||[];var n=_l.get(t);if(n)return vl(e,n);var r,i=(t+="").replace(/ /g,"").toLowerCase();if(i in hl)return vl(e,hl[i]),ml(t,e),e;if("#"===i.charAt(0))return 4===i.length?(r=parseInt(i.substr(1),16))>=0&&r<=4095?(gl(e,(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1),ml(t,e),e):void gl(e,0,0,0,1):7===i.length?(r=parseInt(i.substr(1),16))>=0&&r<=16777215?(gl(e,(16711680&r)>>16,(65280&r)>>8,255&r,1),ml(t,e),e):void gl(e,0,0,0,1):void 0;var o=i.indexOf("("),a=i.indexOf(")");if(-1!==o&&a+1===i.length){var s=i.substr(0,o),h=i.substr(o+1,a-(o+1)).split(","),l=1;switch(s){case"rgba":if(4!==h.length)return void gl(e,0,0,0,1);l=fl(h.pop());case"rgb":return 3!==h.length?void gl(e,0,0,0,1):(gl(e,cl(h[0]),cl(h[1]),cl(h[2]),l),ml(t,e),e);case"hsla":return 4!==h.length?void gl(e,0,0,0,1):(h[3]=fl(h[3]),bl(h,e),ml(t,e),e);case"hsl":return 3!==h.length?void gl(e,0,0,0,1):(bl(h,e),ml(t,e),e);default:return}}gl(e,0,0,0,1)}}function bl(t,e){var n=(parseFloat(t[0])%360+360)%360/360,r=fl(t[1]),i=fl(t[2]),o=i<=.5?i*(r+1):i+r-i*r,a=2*i-o;return gl(e=e||[],ll(255*dl(a,o,n+1/3)),ll(255*dl(a,o,n)),ll(255*dl(a,o,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function wl(t,e,n){if(e&&e.length&&t>=0&&t<=1){n=n||[];var r=t*(e.length-1),i=Math.floor(r),o=Math.ceil(r),a=e[i],s=e[o],h=r-i;return n[0]=ll(pl(a[0],s[0],h)),n[1]=ll(pl(a[1],s[1],h)),n[2]=ll(pl(a[2],s[2],h)),n[3]=ul(pl(a[3],s[3],h)),n}}function Sl(t,e,n){if(e&&e.length&&t>=0&&t<=1){var r=t*(e.length-1),i=Math.floor(r),o=Math.ceil(r),a=xl(e[i]),s=xl(e[o]),h=r-i,l=Ml([ll(pl(a[0],s[0],h)),ll(pl(a[1],s[1],h)),ll(pl(a[2],s[2],h)),ul(pl(a[3],s[3],h))],"rgba");return n?{color:l,leftIndex:i,rightIndex:o,value:r}:l}}function Ml(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}var kl={parse:xl,lift:function(t,e){var n=xl(t);if(n){for(var r=0;r<3;r++)n[r]=e<0?n[r]*(1-e)|0:(255-n[r])*e+n[r]|0,n[r]>255?n[r]=255:t[r]<0&&(n[r]=0);return Ml(n,4===n.length?"rgba":"rgb")}},toHex:function(t){var e=xl(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)},fastLerp:wl,fastMapToColor:wl,lerp:Sl,mapToColor:Sl,modifyHSL:function(t,e,n,r){if(t=xl(t))return t=function(t){if(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),h=s-a,l=(s+a)/2;if(0===h)e=0,n=0;else{n=l<.5?h/(s+a):h/(2-s-a);var u=((s-r)/6+h/2)/h,c=((s-i)/6+h/2)/h,f=((s-o)/6+h/2)/h;r===s?e=f-c:i===s?e=1/3+u-f:o===s&&(e=2/3+c-u),e<0&&(e+=1),e>1&&(e-=1)}var d=[360*e,n,l];return null!=t[3]&&d.push(t[3]),d}}(t),null!=e&&(t[0]=function(t){return(t=Math.round(t))<0?0:t>360?360:t}(e)),null!=n&&(t[1]=fl(n)),null!=r&&(t[2]=fl(r)),Ml(bl(t),"rgba")},modifyAlpha:function(t,e){if((t=xl(t))&&null!=e)return t[3]=ul(e),Ml(t,"rgba")},stringify:Ml},Tl=eh.isArrayLike,El=Array.prototype.slice;function Dl(t,e){return t[e]}function Pl(t,e,n){t[e]=n}function Cl(t,e,n){return(e-t)*n+t}function Ol(t,e,n){return n>.5?e:t}function Al(t,e,n,r,i){var o=t.length;if(1===i)for(var a=0;a<o;a++)r[a]=Cl(t[a],e[a],n);else{var s=o&&t[0].length;for(a=0;a<o;a++)for(var h=0;h<s;h++)r[a][h]=Cl(t[a][h],e[a][h],n)}}function Il(t,e,n){var r=t.length,i=e.length;if(r!==i)if(r>i)t.length=i;else for(var o=r;o<i;o++)t.push(1===n?e[o]:El.call(e[o]));var a=t[0]&&t[0].length;for(o=0;o<t.length;o++)if(1===n)isNaN(t[o])&&(t[o]=e[o]);else for(var s=0;s<a;s++)isNaN(t[o][s])&&(t[o][s]=e[o][s])}function Ll(t,e,n){if(t===e)return!0;var r=t.length;if(r!==e.length)return!1;if(1===n){for(var i=0;i<r;i++)if(t[i]!==e[i])return!1}else{var o=t[0].length;for(i=0;i<r;i++)for(var a=0;a<o;a++)if(t[i][a]!==e[i][a])return!1}return!0}function Rl(t,e,n,r,i,o,a,s,h){var l=t.length;if(1===h)for(var u=0;u<l;u++)s[u]=zl(t[u],e[u],n[u],r[u],i,o,a);else{var c=t[0].length;for(u=0;u<l;u++)for(var f=0;f<c;f++)s[u][f]=zl(t[u][f],e[u][f],n[u][f],r[u][f],i,o,a)}}function zl(t,e,n,r,i,o,a){var s=.5*(n-t),h=.5*(r-e);return(2*(e-n)+s+h)*a+(-3*(e-n)-2*s-h)*o+s*i+e}function Nl(t){if(Tl(t)){var e=t.length;if(Tl(t[0])){for(var n=[],r=0;r<e;r++)n.push(El.call(t[r]));return n}return El.call(t)}return t}function Fl(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function jl(t,e,n,r,i,o){var a=t._getter,s=t._setter,h="spline"===e,l=r.length;if(l){var u,c=r[0].value,f=Tl(c),d=!1,p=!1,g=f?function(t){var e=t[t.length-1].value;return Tl(e&&e[0])?2:1}(r):0;r.sort((function(t,e){return t.time-e.time})),u=r[l-1].time;for(var v=[],_=[],y=r[0].value,m=!0,x=0;x<l;x++){v.push(r[x].time/u);var b=r[x].value;if(f&&Ll(b,y,g)||!f&&b===y||(m=!1),y=b,"string"==typeof b){var w=kl.parse(b);w?(b=w,d=!0):p=!0}_.push(b)}if(o||!m){var S=_[l-1];for(x=0;x<l-1;x++)f?Il(_[x],S,g):!isNaN(_[x])||isNaN(S)||p||d||(_[x]=S);f&&Il(a(t._target,i),S,g);var M,k,T,E,D,P=0,C=0;if(d)var O=[0,0,0,0];var A=new el({target:t._target,life:u,loop:t._loop,delay:t._delay,onframe:function(t,e){var n;if(e<0)n=0;else if(e<C){for(n=Math.min(P+1,l-1);n>=0&&!(v[n]<=e);n--);n=Math.min(n,l-2)}else{for(n=P;n<l&&!(v[n]>e);n++);n=Math.min(n-1,l-2)}P=n,C=e;var r=v[n+1]-v[n];if(0!==r)if(M=(e-v[n])/r,h)if(T=_[n],k=_[0===n?n:n-1],E=_[n>l-2?l-1:n+1],D=_[n>l-3?l-1:n+2],f)Rl(k,T,E,D,M,M*M,M*M*M,a(t,i),g);else{if(d)o=Rl(k,T,E,D,M,M*M,M*M*M,O,1),o=Fl(O);else{if(p)return Ol(T,E,M);o=zl(k,T,E,D,M,M*M,M*M*M)}s(t,i,o)}else if(f)Al(_[n],_[n+1],M,a(t,i),g);else{var o;if(d)Al(_[n],_[n+1],M,O,1),o=Fl(O);else{if(p)return Ol(_[n],_[n+1],M);o=Cl(_[n],_[n+1],M)}s(t,i,o)}},ondestroy:n});return e&&"spline"!==e&&(A.easing=e),A}}}var Bl=function(t,e,n,r){this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||Dl,this._setter=r||Pl,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};Bl.prototype={when:function(t,e){var n=this._tracks;for(var r in e)if(e.hasOwnProperty(r)){if(!n[r]){n[r]=[];var i=this._getter(this._target,r);if(null==i)continue;0!==t&&n[r].push({time:0,value:Nl(i)})}n[r].push({time:t,value:e[r]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,n=0;n<e;n++)t[n].call(this)},start:function(t,e){var n,r=this,i=0,o=function(){--i||r._doneCallback()};for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var s=jl(this,t,o,this._tracks[a],a,e);s&&(this._clipList.push(s),i++,this.animation&&this.animation.addClip(s),n=s)}if(n){var h=n.onframe;n.onframe=function(t,e){h(t,e);for(var n=0;n<r._onframeList.length;n++)r._onframeList[n](t,e)}}return i||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,n=this.animation,r=0;r<e.length;r++){var i=e[r];t&&i.onframe(this._target,1),n&&n.removeClip(i)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var Wl=Bl,Hl=1;"undefined"!=typeof window&&(Hl=Math.max(window.devicePixelRatio||1,1));var Gl={debugMode:0,devicePixelRatio:Hl},Yl=function(){},Ul=eh.isString,Vl=eh.isFunction,Xl=eh.isObject,ql=eh.isArrayLike,Zl=eh.indexOf,Ql=function(){this.animators=[]};function Kl(t,e,n,r,i,o,a,s){Ul(r)?(o=i,i=r,r=0):Vl(i)?(o=i,i="linear",r=0):Vl(r)?(o=r,r=0):Vl(n)?(o=n,n=500):n||(n=500),t.stopAnimation(),$l(t,"",t,e,n,r,s);var h=t.animators.slice(),l=h.length;function u(){--l||o&&o()}l||o&&o();for(var c=0;c<h.length;c++)h[c].done(u).start(i,a)}function $l(t,e,n,r,i,o,a){var s={},h=0;for(var l in r)r.hasOwnProperty(l)&&(null!=n[l]?Xl(r[l])&&!ql(r[l])?$l(t,e?e+"."+l:l,n[l],r[l],i,o,a):(a?(s[l]=n[l],Jl(t,e,l,r[l])):s[l]=r[l],h++):null==r[l]||a||Jl(t,e,l,r[l]));h>0&&t.animate(e,!1).when(null==i?500:i,s).delay(o||0)}function Jl(t,e,n,r){if(e){var i={};i[e]={},i[e][n]=r,t.attr(i)}else t.attr(n,r)}Ql.prototype={constructor:Ql,animate:function(t,e){var n,r=!1,i=this,o=this.__zr;if(t){var a=t.split("."),s=i;r="shape"===a[0];for(var h=0,l=a.length;h<l;h++)s&&(s=s[a[h]]);s&&(n=s)}else n=i;if(n){var u=i.animators,c=new Wl(n,e);return c.during((function(t){i.dirty(r)})).done((function(){u.splice(Zl(u,c),1)})),u.push(c),o&&o.animation.addAnimator(c),c}Yl('Property "'+t+'" is not existed in element '+i.id)},stopAnimation:function(t){for(var e=this.animators,n=e.length,r=0;r<n;r++)e[r].stop(t);return e.length=0,this},animateTo:function(t,e,n,r,i,o){Kl(this,t,e,n,r,i,o)},animateFrom:function(t,e,n,r,i,o){Kl(this,t,e,n,r,i,o,!0)}};var tu=Ql,eu=function(t){Kh.call(this,t),ph.call(this,t),tu.call(this,t),this.id=t.id||Ps()};eu.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var n=this[t];n||(n=this[t]=[]),n[0]=e[0],n[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(eh.isObject(t))for(var n in t)t.hasOwnProperty(n)&&this.attrKV(n,t[n]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},eh.mixin(eu,tu),eh.mixin(eu,Kh),eh.mixin(eu,ph);var nu,ru,iu,ou,au=eu,su=sh.applyTransform,hu=Math.min,lu=Math.max;function uu(t,e,n,r){n<0&&(t+=n,n=-n),r<0&&(e+=r,r=-r),this.x=t,this.y=e,this.width=n,this.height=r}uu.prototype={constructor:uu,union:function(t){var e=hu(t.x,this.x),n=hu(t.y,this.y);this.width=lu(t.x+t.width,this.x+this.width)-e,this.height=lu(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:(nu=[],ru=[],iu=[],ou=[],function(t){if(t){nu[0]=iu[0]=this.x,nu[1]=ou[1]=this.y,ru[0]=ou[0]=this.x+this.width,ru[1]=iu[1]=this.y+this.height,su(nu,nu,t),su(ru,ru,t),su(iu,iu,t),su(ou,ou,t),this.x=hu(nu[0],ru[0],iu[0],ou[0]),this.y=hu(nu[1],ru[1],iu[1],ou[1]);var e=lu(nu[0],ru[0],iu[0],ou[0]),n=lu(nu[1],ru[1],iu[1],ou[1]);this.width=e-this.x,this.height=n-this.y}}),calculateTransform:function(t){var e=this,n=t.width/e.width,r=t.height/e.height,i=Hh.create();return Hh.translate(i,i,[-e.x,-e.y]),Hh.scale(i,i,[n,r]),Hh.translate(i,i,[t.x,t.y]),i},intersect:function(t){if(!t)return!1;t instanceof uu||(t=uu.create(t));var e=this,n=e.x,r=e.x+e.width,i=e.y,o=e.y+e.height,a=t.x,s=t.x+t.width,h=t.y,l=t.y+t.height;return!(r<a||s<n||o<h||l<i)},contain:function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},clone:function(){return new uu(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},uu.create=function(t){return new uu(t.x,t.y,t.width,t.height)};var cu=uu,fu=function(t){for(var e in t=t||{},au.call(this,t),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};fu.prototype={constructor:fu,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,r=n.indexOf(e);r>=0&&(n.splice(r,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__storage,n=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof fu&&t.addChildrenToStorage(e)),n&&n.refresh()},remove:function(t){var e=this.__zr,n=this.__storage,r=this._children,i=eh.indexOf(r,t);return i<0||(r.splice(i,1),t.parent=null,n&&(n.delFromStorage(t),t instanceof fu&&t.delChildrenFromStorage(n)),e&&e.refresh()),this},removeAll:function(){var t,e,n=this._children,r=this.__storage;for(e=0;e<n.length;e++)t=n[e],r&&(r.delFromStorage(t),t instanceof fu&&t.delChildrenFromStorage(r)),t.parent=null;return n.length=0,this},eachChild:function(t,e){for(var n=this._children,r=0;r<n.length;r++){var i=n[r];t.call(e,i,r)}return this},traverse:function(t,e){for(var n=0;n<this._children.length;n++){var r=this._children[n];t.call(e,r),"group"===r.type&&r.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToStorage(n),n instanceof fu&&n.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromStorage(n),n instanceof fu&&n.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,n=new cu(0,0,0,0),r=t||this._children,i=[],o=0;o<r.length;o++){var a=r[o];if(!a.ignore&&!a.invisible){var s=a.getBoundingRect(),h=a.getLocalTransform(i);h?(n.copy(s),n.applyTransform(h),(e=e||n.clone()).union(n)):(e=e||s.clone()).union(s)}}return e||n}},eh.inherits(fu,au);var du=fu;function pu(t,e,n,r){var i=e+1;if(i===n)return 1;if(r(t[i++],t[e])<0){for(;i<n&&r(t[i],t[i-1])<0;)i++;!function(t,e,n){n--;for(;e<n;){var r=t[e];t[e++]=t[n],t[n--]=r}}(t,e,i)}else for(;i<n&&r(t[i],t[i-1])>=0;)i++;return i-e}function gu(t,e,n,r,i){for(r===e&&r++;r<n;r++){for(var o,a=t[r],s=e,h=r;s<h;)i(a,t[o=s+h>>>1])<0?h=o:s=o+1;var l=r-s;switch(l){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;l>0;)t[s+l]=t[s+l-1],l--}t[s]=a}}function vu(t,e,n,r,i,o){var a=0,s=0,h=1;if(o(t,e[n+i])>0){for(s=r-i;h<s&&o(t,e[n+i+h])>0;)a=h,(h=1+(h<<1))<=0&&(h=s);h>s&&(h=s),a+=i,h+=i}else{for(s=i+1;h<s&&o(t,e[n+i-h])<=0;)a=h,(h=1+(h<<1))<=0&&(h=s);h>s&&(h=s);var l=a;a=i-h,h=i-l}for(a++;a<h;){var u=a+(h-a>>>1);o(t,e[n+u])>0?a=u+1:h=u}return h}function _u(t,e,n,r,i,o){var a=0,s=0,h=1;if(o(t,e[n+i])<0){for(s=i+1;h<s&&o(t,e[n+i-h])<0;)a=h,(h=1+(h<<1))<=0&&(h=s);h>s&&(h=s);var l=a;a=i-h,h=i-l}else{for(s=r-i;h<s&&o(t,e[n+i+h])>=0;)a=h,(h=1+(h<<1))<=0&&(h=s);h>s&&(h=s),a+=i,h+=i}for(a++;a<h;){var u=a+(h-a>>>1);o(t,e[n+u])<0?h=u:a=u+1}return h}function yu(t,e){var n,r,i=7,o=0;t.length;var a=[];function s(s){var h=n[s],l=r[s],u=n[s+1],c=r[s+1];r[s]=l+c,s===o-3&&(n[s+1]=n[s+2],r[s+1]=r[s+2]),o--;var f=_u(t[u],t,h,l,0,e);h+=f,0!==(l-=f)&&0!==(c=vu(t[h+l-1],t,u,c,c-1,e))&&(l<=c?function(n,r,o,s){var h=0;for(h=0;h<r;h++)a[h]=t[n+h];var l=0,u=o,c=n;if(t[c++]=t[u++],0==--s){for(h=0;h<r;h++)t[c+h]=a[l+h];return}if(1===r){for(h=0;h<s;h++)t[c+h]=t[u+h];return void(t[c+s]=a[l])}var f,d,p,g=i;for(;;){f=0,d=0,p=!1;do{if(e(t[u],a[l])<0){if(t[c++]=t[u++],d++,f=0,0==--s){p=!0;break}}else if(t[c++]=a[l++],f++,d=0,1==--r){p=!0;break}}while((f|d)<g);if(p)break;do{if(0!==(f=_u(t[u],a,l,r,0,e))){for(h=0;h<f;h++)t[c+h]=a[l+h];if(c+=f,l+=f,(r-=f)<=1){p=!0;break}}if(t[c++]=t[u++],0==--s){p=!0;break}if(0!==(d=vu(a[l],t,u,s,0,e))){for(h=0;h<d;h++)t[c+h]=t[u+h];if(c+=d,u+=d,0===(s-=d)){p=!0;break}}if(t[c++]=a[l++],1==--r){p=!0;break}g--}while(f>=7||d>=7);if(p)break;g<0&&(g=0),g+=2}if((i=g)<1&&(i=1),1===r){for(h=0;h<s;h++)t[c+h]=t[u+h];t[c+s]=a[l]}else{if(0===r)throw new Error;for(h=0;h<r;h++)t[c+h]=a[l+h]}}(h,l,u,c):function(n,r,o,s){var h=0;for(h=0;h<s;h++)a[h]=t[o+h];var l=n+r-1,u=s-1,c=o+s-1,f=0,d=0;if(t[c--]=t[l--],0==--r){for(f=c-(s-1),h=0;h<s;h++)t[f+h]=a[h];return}if(1===s){for(d=(c-=r)+1,f=(l-=r)+1,h=r-1;h>=0;h--)t[d+h]=t[f+h];return void(t[c]=a[u])}var p=i;for(;;){var g=0,v=0,_=!1;do{if(e(a[u],t[l])<0){if(t[c--]=t[l--],g++,v=0,0==--r){_=!0;break}}else if(t[c--]=a[u--],v++,g=0,1==--s){_=!0;break}}while((g|v)<p);if(_)break;do{if(0!==(g=r-_u(a[u],t,n,r,r-1,e))){for(r-=g,d=(c-=g)+1,f=(l-=g)+1,h=g-1;h>=0;h--)t[d+h]=t[f+h];if(0===r){_=!0;break}}if(t[c--]=a[u--],1==--s){_=!0;break}if(0!==(v=s-vu(t[l],a,0,s,s-1,e))){for(s-=v,d=(c-=v)+1,f=(u-=v)+1,h=0;h<v;h++)t[d+h]=a[f+h];if(s<=1){_=!0;break}}if(t[c--]=t[l--],0==--r){_=!0;break}p--}while(g>=7||v>=7);if(_)break;p<0&&(p=0),p+=2}(i=p)<1&&(i=1);if(1===s){for(d=(c-=r)+1,f=(l-=r)+1,h=r-1;h>=0;h--)t[d+h]=t[f+h];t[c]=a[u]}else{if(0===s)throw new Error;for(f=c-(s-1),h=0;h<s;h++)t[f+h]=a[h]}}(h,l,u,c))}n=[],r=[],this.mergeRuns=function(){for(;o>1;){var t=o-2;if(t>=1&&r[t-1]<=r[t]+r[t+1]||t>=2&&r[t-2]<=r[t]+r[t-1])r[t-1]<r[t+1]&&t--;else if(r[t]>r[t+1])break;s(t)}},this.forceMergeRuns=function(){for(;o>1;){var t=o-2;t>0&&r[t-1]<r[t+1]&&t--,s(t)}},this.pushRun=function(t,e){n[o]=t,r[o]=e,o+=1}}var mu=function(t,e,n,r){n||(n=0),r||(r=t.length);var i=r-n;if(!(i<2)){var o=0;if(i<32)gu(t,n,r,n+(o=pu(t,n,r,e)),e);else{var a=new yu(t,e),s=function(t){for(var e=0;t>=32;)e|=1&t,t>>=1;return t+e}(i);do{if((o=pu(t,n,r,e))<s){var h=i;h>s&&(h=s),gu(t,n,n+h,n+o,e),o=h}a.pushRun(n,o),a.mergeRuns(),i-=o,n+=o}while(0!==i);a.forceMergeRuns()}}};function xu(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var bu=function(){this._roots=[],this._displayList=[],this._displayListLen=0};bu.prototype={constructor:bu,traverse:function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,r=0,i=e.length;r<i;r++)this._updateAndAddDisplayable(e[r],null,t);n.length=this._displayListLen,Cs.canvasSupported&&mu(n,xu)},_updateAndAddDisplayable:function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var r=t.clipPath;if(r){e=e?e.slice():[];for(var i=r,o=t;i;)i.parent=o,i.updateTransform(),e.push(i),o=i,i=i.clipPath}if(t.isGroup){for(var a=t._children,s=0;s<a.length;s++){var h=a[s];t.__dirty&&(h.__dirty=!0),this._updateAndAddDisplayable(h,e,n)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof du&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof du&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array){e=0;for(var r=t.length;e<r;e++)this.delRoot(t[e])}else{var i=eh.indexOf(this._roots,t);i>=0&&(this.delFromStorage(t),this._roots.splice(i,1),t instanceof du&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:xu};var wu=bu,Su={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1};var Mu=function(t,e,n){return Su.hasOwnProperty(e)?n*t.dpr:n},ku={ContextCachedBy:{NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},WILL_BE_RESTORED:9},Tu=ku.ContextCachedBy,Eu=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],Du=function(t){this.extendFrom(t,!1)};function Pu(t,e,n){var r=null==e.x?0:e.x,i=null==e.x2?1:e.x2,o=null==e.y?0:e.y,a=null==e.y2?0:e.y2;return e.global||(r=r*n.width+n.x,i=i*n.width+n.x,o=o*n.height+n.y,a=a*n.height+n.y),r=isNaN(r)?0:r,i=isNaN(i)?1:i,o=isNaN(o)?0:o,a=isNaN(a)?0:a,t.createLinearGradient(r,o,i,a)}function Cu(t,e,n){var r=n.width,i=n.height,o=Math.min(r,i),a=null==e.x?.5:e.x,s=null==e.y?.5:e.y,h=null==e.r?.5:e.r;return e.global||(a=a*r+n.x,s=s*i+n.y,h*=o),t.createRadialGradient(a,s,0,a,s,h)}for(var Ou=Du.prototype={constructor:Du,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,n){var r=this,i=n&&n.style,o=!i||t.__attrCachedBy!==Tu.STYLE_BIND;t.__attrCachedBy=Tu.STYLE_BIND;for(var a=0;a<Eu.length;a++){var s=Eu[a],h=s[0];(o||r[h]!==i[h])&&(t[h]=Mu(t,h,r[h]||s[1]))}if((o||r.fill!==i.fill)&&(t.fillStyle=r.fill),(o||r.stroke!==i.stroke)&&(t.strokeStyle=r.stroke),(o||r.opacity!==i.opacity)&&(t.globalAlpha=null==r.opacity?1:r.opacity),(o||r.blend!==i.blend)&&(t.globalCompositeOperation=r.blend||"source-over"),this.hasStroke()){var l=r.lineWidth;t.lineWidth=l/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&this.lineWidth>0},extendFrom:function(t,e){if(t)for(var n in t)!t.hasOwnProperty(n)||!0!==e&&(!1===e?this.hasOwnProperty(n):null==t[n])||(this[n]=t[n])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,n){for(var r=("radial"===e.type?Cu:Pu)(t,e,n),i=e.colorStops,o=0;o<i.length;o++)r.addColorStop(i[o].offset,i[o].color);return r}},Au=0;Au<Eu.length;Au++){var Iu=Eu[Au];Iu[0]in Ou||(Ou[Iu[0]]=Iu[1])}Du.getGradient=Ou.getGradient;var Lu=Du,Ru=function(t,e){this.image=t,this.repeat=e,this.type="pattern"};Ru.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")};var zu=Ru,Nu=Gl.devicePixelRatio;function Fu(){return!1}function ju(t,e,n){var r=eh.createCanvas(),i=e.getWidth(),o=e.getHeight(),a=r.style;return a&&(a.position="absolute",a.left=0,a.top=0,a.width=i+"px",a.height=o+"px",r.setAttribute("data-zr-dom-id",t)),r.width=i*n,r.height=o*n,r}var Bu=function(t,e,n){var r;n=n||Nu,"string"==typeof t?r=ju(t,e,n):eh.isObject(t)&&(t=(r=t).id),this.id=t,this.dom=r;var i=r.style;i&&(r.onselectstart=Fu,i["-webkit-user-select"]="none",i["user-select"]="none",i["-webkit-touch-callout"]="none",i["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",i.padding=0,i.margin=0,i["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n};Bu.prototype={constructor:Bu,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=ju("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},resize:function(t,e){var n=this.dpr,r=this.dom,i=r.style,o=this.domBack;i&&(i.width=t+"px",i.height=e+"px"),r.width=t*n,r.height=e*n,o&&(o.width=t*n,o.height=e*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(t,e){var n,r=this.dom,i=this.ctx,o=r.width,a=r.height,s=(e=e||this.clearColor,this.motionBlur&&!t),h=this.lastFrameAlpha,l=this.dpr;(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,o/l,a/l)),i.clearRect(0,0,o,a),e&&"transparent"!==e)&&(e.colorStops?(n=e.__canvasGradient||Lu.getGradient(i,e,{x:0,y:0,width:o,height:a}),e.__canvasGradient=n):e.image&&(n=zu.prototype.getCanvasPattern.call(e,i)),i.save(),i.fillStyle=n||e,i.fillRect(0,0,o,a),i.restore());if(s){var u=this.domBack;i.save(),i.globalAlpha=h,i.drawImage(u,0,0,o,a),i.restore()}}};var Wu=Bu,Hu="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)},Gu=new sl(50);function Yu(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function Uu(t){return t&&t.width&&t.height}var Vu={findExistImage:function(t){if("string"==typeof t){var e=Gu.get(t);return e&&e.image}return t},createOrUpdateImage:function(t,e,n,r,i){if(t){if("string"==typeof t){if(e&&e.__zrImageSrc===t||!n)return e;var o=Gu.get(t),a={hostEl:n,cb:r,cbPayload:i};return o?!Uu(e=o.image)&&o.pending.push(a):((e=new Image).onload=e.onerror=Yu,Gu.put(t,e.__cachedImgObj={image:e,pending:[a]}),e.src=e.__zrImageSrc=t),e}return t}return e},isImageReady:Uu},Xu=eh.getContext,qu=eh.extend,Zu=eh.retrieve2,Qu=eh.retrieve3,Ku=eh.trim,$u={},Ju=0,tc=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,ec="12px sans-serif",nc={};function rc(t,e){var n=t+":"+(e=e||ec);if($u[n])return $u[n];for(var r=(t+"").split("\n"),i=0,o=0,a=r.length;o<a;o++)i=Math.max(fc(r[o],e).width,i);return Ju>5e3&&(Ju=0,$u={}),Ju++,$u[n]=i,i}function ic(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function oc(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function ac(t,e,n){var r=e.textPosition,i=e.textDistance,o=n.x,a=n.y;i=i||0;var s=n.height,h=n.width,l=s/2,u="left",c="top";switch(r){case"left":o-=i,a+=l,u="right",c="middle";break;case"right":o+=i+h,a+=l,c="middle";break;case"top":o+=h/2,a-=i,u="center",c="bottom";break;case"bottom":o+=h/2,a+=s+i,u="center";break;case"inside":o+=h/2,a+=l,u="center",c="middle";break;case"insideLeft":o+=i,a+=l,c="middle";break;case"insideRight":o+=h-i,a+=l,u="right",c="middle";break;case"insideTop":o+=h/2,a+=i,u="center";break;case"insideBottom":o+=h/2,a+=s-i,u="center",c="bottom";break;case"insideTopLeft":o+=i,a+=i;break;case"insideTopRight":o+=h-i,a+=i,u="right";break;case"insideBottomLeft":o+=i,a+=s-i,c="bottom";break;case"insideBottomRight":o+=h-i,a+=s-i,u="right",c="bottom"}return(t=t||{}).x=o,t.y=a,t.textAlign=u,t.textVerticalAlign=c,t}function sc(t,e,n,r,i){if(!e)return"";var o=(t+"").split("\n");i=hc(e,n,r,i);for(var a=0,s=o.length;a<s;a++)o[a]=lc(o[a],i);return o.join("\n")}function hc(t,e,n,r){(r=qu({},r)).font=e;n=Zu(n,"...");r.maxIterations=Zu(r.maxIterations,2);var i=r.minChar=Zu(r.minChar,0);r.cnCharWidth=rc("国",e);var o=r.ascCharWidth=rc("a",e);r.placeholder=Zu(r.placeholder,"");for(var a=t=Math.max(0,t-1),s=0;s<i&&a>=o;s++)a-=o;var h=rc(n,e);return h>a&&(n="",h=0),a=t-h,r.ellipsis=n,r.ellipsisWidth=h,r.contentWidth=a,r.containerWidth=t,r}function lc(t,e){var n=e.containerWidth,r=e.font,i=e.contentWidth;if(!n)return"";var o=rc(t,r);if(o<=n)return t;for(var a=0;;a++){if(o<=i||a>=e.maxIterations){t+=e.ellipsis;break}var s=0===a?uc(t,i,e.ascCharWidth,e.cnCharWidth):o>0?Math.floor(t.length*i/o):0;o=rc(t=t.substr(0,s),r)}return""===t&&(t=e.placeholder),t}function uc(t,e,n,r){for(var i=0,o=0,a=t.length;o<a&&i<e;o++){var s=t.charCodeAt(o);i+=0<=s&&s<=127?n:r}return o}function cc(t){return rc("国",t)}function fc(t,e){return nc.measureText(t,e)}function dc(t,e,n,r,i){null!=t&&(t+="");var o=Zu(r,cc(e)),a=t?t.split("\n"):[],s=a.length*o,h=s,l=!0;if(n&&(h+=n[0]+n[2]),t&&i){l=!1;var u=i.outerHeight,c=i.outerWidth;if(null!=u&&h>u)t="",a=[];else if(null!=c)for(var f=hc(c-(n?n[1]+n[3]:0),e,i.ellipsis,{minChar:i.minChar,placeholder:i.placeholder}),d=0,p=a.length;d<p;d++)a[d]=lc(a[d],f)}return{lines:a,height:s,outerHeight:h,lineHeight:o,canCacheByTextString:l}}function pc(t,e){var n={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return n;for(var r,i=tc.lastIndex=0;null!=(r=tc.exec(t));){var o=r.index;o>i&&gc(n,t.substring(i,o)),gc(n,r[2],r[1]),i=tc.lastIndex}i<t.length&&gc(n,t.substring(i,t.length));var a=n.lines,s=0,h=0,l=[],u=e.textPadding,c=e.truncate,f=c&&c.outerWidth,d=c&&c.outerHeight;u&&(null!=f&&(f-=u[1]+u[3]),null!=d&&(d-=u[0]+u[2]));for(var p=0;p<a.length;p++){for(var g=a[p],v=0,_=0,y=0;y<g.tokens.length;y++){var m=(P=g.tokens[y]).styleName&&e.rich[P.styleName]||{},x=P.textPadding=m.textPadding,b=P.font=m.font||e.font,w=P.textHeight=Zu(m.textHeight,cc(b));if(x&&(w+=x[0]+x[2]),P.height=w,P.lineHeight=Qu(m.textLineHeight,e.textLineHeight,w),P.textAlign=m&&m.textAlign||e.textAlign,P.textVerticalAlign=m&&m.textVerticalAlign||"middle",null!=d&&s+P.lineHeight>d)return{lines:[],width:0,height:0};P.textWidth=rc(P.text,b);var S=m.textWidth,M=null==S||"auto"===S;if("string"==typeof S&&"%"===S.charAt(S.length-1))P.percentWidth=S,l.push(P),S=0;else{if(M){S=P.textWidth;var k=m.textBackgroundColor,T=k&&k.image;T&&(T=Vu.findExistImage(T),Vu.isImageReady(T)&&(S=Math.max(S,T.width*w/T.height)))}var E=x?x[1]+x[3]:0;S+=E;var D=null!=f?f-_:null;null!=D&&D<S&&(!M||D<E?(P.text="",P.textWidth=S=0):(P.text=sc(P.text,D-E,b,c.ellipsis,{minChar:c.minChar}),P.textWidth=rc(P.text,b),S=P.textWidth+E))}_+=P.width=S,m&&(v=Math.max(v,P.lineHeight))}g.width=_,g.lineHeight=v,s+=v,h=Math.max(h,_)}n.outerWidth=n.width=Zu(e.textWidth,h),n.outerHeight=n.height=Zu(e.textHeight,s),u&&(n.outerWidth+=u[1]+u[3],n.outerHeight+=u[0]+u[2]);for(p=0;p<l.length;p++){var P,C=(P=l[p]).percentWidth;P.width=parseInt(C,10)/100*h}return n}function gc(t,e,n){for(var r=""===e,i=e.split("\n"),o=t.lines,a=0;a<i.length;a++){var s=i[a],h={styleName:n,text:s,isLineHolder:!s&&!r};if(a)o.push({tokens:[h]});else{var l=(o[o.length-1]||(o[0]={tokens:[]})).tokens,u=l.length;1===u&&l[0].isLineHolder?l[0]=h:(s||!u||r)&&l.push(h)}}}nc.measureText=function(t,e){var n=Xu();return n.font=e||ec,n.measureText(t)};var vc={DEFAULT_FONT:"12px sans-serif",$override:function(t,e){nc[t]=e},getWidth:rc,getBoundingRect:function(t,e,n,r,i,o,a,s){return a?function(t,e,n,r,i,o,a,s){var h=pc(t,{rich:a,truncate:s,font:e,textAlign:n,textPadding:i,textLineHeight:o}),l=h.outerWidth,u=h.outerHeight,c=ic(0,l,n),f=oc(0,u,r);return new cu(c,f,l,u)}(t,e,n,r,i,o,a,s):function(t,e,n,r,i,o,a){var s=dc(t,e,i,o,a),h=rc(t,e);i&&(h+=i[1]+i[3]);var l=s.outerHeight,u=ic(0,h,n),c=oc(0,l,r),f=new cu(u,c,h,l);return f.lineHeight=s.lineHeight,f}(t,e,n,r,i,o,s)},adjustTextX:ic,adjustTextY:oc,calculateTextPosition:ac,adjustTextPositionOnRect:function(t,e,n){return ac({},{textPosition:t,textDistance:n},e)},truncateText:sc,getLineHeight:cc,measureText:fc,parsePlainText:dc,parseRichText:pc,makeFont:function(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&Ku(e)||t.textFont||t.font}};var _c={buildPath:function(t,e){var n,r,i,o,a,s=e.x,h=e.y,l=e.width,u=e.height,c=e.r;l<0&&(s+=l,l=-l),u<0&&(h+=u,u=-u),"number"==typeof c?n=r=i=o=c:c instanceof Array?1===c.length?n=r=i=o=c[0]:2===c.length?(n=i=c[0],r=o=c[1]):3===c.length?(n=c[0],r=o=c[1],i=c[2]):(n=c[0],r=c[1],i=c[2],o=c[3]):n=r=i=o=0,n+r>l&&(n*=l/(a=n+r),r*=l/a),i+o>l&&(i*=l/(a=i+o),o*=l/a),r+i>u&&(r*=u/(a=r+i),i*=u/a),n+o>u&&(n*=u/(a=n+o),o*=u/a),t.moveTo(s+n,h),t.lineTo(s+l-r,h),0!==r&&t.arc(s+l-r,h+r,r,-Math.PI/2,0),t.lineTo(s+l,h+u-i),0!==i&&t.arc(s+l-i,h+u-i,i,0,Math.PI/2),t.lineTo(s+o,h+u),0!==o&&t.arc(s+o,h+u-o,o,Math.PI/2,Math.PI),t.lineTo(s,h+n),0!==n&&t.arc(s+n,h+n,n,Math.PI,1.5*Math.PI)}},yc=eh.retrieve2,mc=eh.retrieve3,xc=eh.each,bc=eh.normalizeCssArray,wc=eh.isString,Sc=eh.isObject,Mc=ku.ContextCachedBy,kc=ku.WILL_BE_RESTORED,Tc=vc.DEFAULT_FONT,Ec={left:1,right:1,center:1},Dc={top:1,bottom:1,middle:1},Pc=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],Cc={},Oc={};function Ac(t){if(t){t.font=vc.makeFont(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||Ec[e]?e:"left";var n=t.textVerticalAlign||t.textBaseline;"center"===n&&(n="middle"),t.textVerticalAlign=null==n||Dc[n]?n:"top",t.textPadding&&(t.textPadding=bc(t.textPadding))}}function Ic(t,e,n,r,i,o){var a,s=Nc(r),h=!1,l=e.__attrCachedBy===Mc.PLAIN_TEXT;o!==kc?(o&&(a=o.style,h=!s&&l&&a),e.__attrCachedBy=s?Mc.NONE:Mc.PLAIN_TEXT):l&&(e.__attrCachedBy=Mc.NONE);var u=r.font||Tc;h&&u===(a.font||Tc)||(e.font=u);var c=t.__computedFont;t.__styleFont!==u&&(t.__styleFont=u,c=t.__computedFont=e.font);var f=r.textPadding,d=r.textLineHeight,p=t.__textCotentBlock;p&&!t.__dirtyText||(p=t.__textCotentBlock=vc.parsePlainText(n,c,f,d,r.truncate));var g=p.outerHeight,v=p.lines,_=p.lineHeight,y=Bc(Oc,t,r,i),m=y.baseX,x=y.baseY,b=y.textAlign||"left",w=y.textVerticalAlign;Rc(e,r,i,m,x);var S=vc.adjustTextY(x,g,w),M=m,k=S;if(s||f){var T=vc.getWidth(n,c);f&&(T+=f[1]+f[3]);var E=vc.adjustTextX(m,T,b);s&&Fc(t,e,r,E,S,T,g),f&&(M=Uc(m,b,f),k+=f[0])}e.textAlign=b,e.textBaseline="middle",e.globalAlpha=r.opacity||1;for(var D=0;D<Pc.length;D++){var P=Pc[D],C=P[0],O=P[1],A=r[C];h&&A===a[C]||(e[O]=Mu(e,O,A||P[2]))}k+=_/2;var I=r.textStrokeWidth,L=h?a.textStrokeWidth:null,R=!h||I!==L,z=!h||R||r.textStroke!==a.textStroke,N=Hc(r.textStroke,I),F=Gc(r.textFill);if(N&&(R&&(e.lineWidth=I),z&&(e.strokeStyle=N)),F&&(h&&r.textFill===a.textFill||(e.fillStyle=F)),1===v.length)N&&e.strokeText(v[0],M,k),F&&e.fillText(v[0],M,k);else for(D=0;D<v.length;D++)N&&e.strokeText(v[D],M,k),F&&e.fillText(v[D],M,k),k+=_}function Lc(t,e,n,r,i,o){o!==kc&&(e.__attrCachedBy=Mc.NONE);var a=t.__textCotentBlock;a&&!t.__dirtyText||(a=t.__textCotentBlock=vc.parseRichText(n,r)),function(t,e,n,r,i){var o=n.width,a=n.outerWidth,s=n.outerHeight,h=r.textPadding,l=Bc(Oc,t,r,i),u=l.baseX,c=l.baseY,f=l.textAlign,d=l.textVerticalAlign;Rc(e,r,i,u,c);var p=vc.adjustTextX(u,a,f),g=vc.adjustTextY(c,s,d),v=p,_=g;h&&(v+=h[3],_+=h[0]);var y=v+o;Nc(r)&&Fc(t,e,r,p,g,a,s);for(var m=0;m<n.lines.length;m++){for(var x,b=n.lines[m],w=b.tokens,S=w.length,M=b.lineHeight,k=b.width,T=0,E=v,D=y,P=S-1;T<S&&(!(x=w[T]).textAlign||"left"===x.textAlign);)zc(t,e,x,r,M,_,E,"left"),k-=x.width,E+=x.width,T++;for(;P>=0&&"right"===(x=w[P]).textAlign;)zc(t,e,x,r,M,_,D,"right"),k-=x.width,D-=x.width,P--;for(E+=(o-(E-v)-(y-D)-k)/2;T<=P;)zc(t,e,x=w[T],r,M,_,E+x.width/2,"center"),E+=x.width,T++;_+=M}}(t,e,a,r,i)}function Rc(t,e,n,r,i){if(n&&e.textRotation){var o=e.textOrigin;"center"===o?(r=n.width/2+n.x,i=n.height/2+n.y):o&&(r=o[0]+n.x,i=o[1]+n.y),t.translate(r,i),t.rotate(-e.textRotation),t.translate(-r,-i)}}function zc(t,e,n,r,i,o,a,s){var h=r.rich[n.styleName]||{};h.text=n.text;var l=n.textVerticalAlign,u=o+i/2;"top"===l?u=o+n.height/2:"bottom"===l&&(u=o+i-n.height/2),!n.isLineHolder&&Nc(h)&&Fc(t,e,h,"right"===s?a-n.width:"center"===s?a-n.width/2:a,u-n.height/2,n.width,n.height);var c=n.textPadding;c&&(a=Uc(a,s,c),u-=n.height/2-c[2]-n.textHeight/2),Wc(e,"shadowBlur",mc(h.textShadowBlur,r.textShadowBlur,0)),Wc(e,"shadowColor",h.textShadowColor||r.textShadowColor||"transparent"),Wc(e,"shadowOffsetX",mc(h.textShadowOffsetX,r.textShadowOffsetX,0)),Wc(e,"shadowOffsetY",mc(h.textShadowOffsetY,r.textShadowOffsetY,0)),Wc(e,"textAlign",s),Wc(e,"textBaseline","middle"),Wc(e,"font",n.font||Tc);var f=Hc(h.textStroke||r.textStroke,p),d=Gc(h.textFill||r.textFill),p=yc(h.textStrokeWidth,r.textStrokeWidth);f&&(Wc(e,"lineWidth",p),Wc(e,"strokeStyle",f),e.strokeText(n.text,a,u)),d&&(Wc(e,"fillStyle",d),e.fillText(n.text,a,u))}function Nc(t){return!!(t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor)}function Fc(t,e,n,r,i,o,a){var s=n.textBackgroundColor,h=n.textBorderWidth,l=n.textBorderColor,u=wc(s);if(Wc(e,"shadowBlur",n.textBoxShadowBlur||0),Wc(e,"shadowColor",n.textBoxShadowColor||"transparent"),Wc(e,"shadowOffsetX",n.textBoxShadowOffsetX||0),Wc(e,"shadowOffsetY",n.textBoxShadowOffsetY||0),u||h&&l){e.beginPath();var c=n.textBorderRadius;c?_c.buildPath(e,{x:r,y:i,width:o,height:a,r:c}):e.rect(r,i,o,a),e.closePath()}if(u)if(Wc(e,"fillStyle",s),null!=n.fillOpacity){var f=e.globalAlpha;e.globalAlpha=n.fillOpacity*n.opacity,e.fill(),e.globalAlpha=f}else e.fill();else if(Sc(s)){var d=s.image;(d=Vu.createOrUpdateImage(d,null,t,jc,s))&&Vu.isImageReady(d)&&e.drawImage(d,r,i,o,a)}if(h&&l)if(Wc(e,"lineWidth",h),Wc(e,"strokeStyle",l),null!=n.strokeOpacity){f=e.globalAlpha;e.globalAlpha=n.strokeOpacity*n.opacity,e.stroke(),e.globalAlpha=f}else e.stroke()}function jc(t,e){e.image=t}function Bc(t,e,n,r){var i=n.x||0,o=n.y||0,a=n.textAlign,s=n.textVerticalAlign;if(r){var h=n.textPosition;if(h instanceof Array)i=r.x+Yc(h[0],r.width),o=r.y+Yc(h[1],r.height);else{var l=e&&e.calculateTextPosition?e.calculateTextPosition(Cc,n,r):vc.calculateTextPosition(Cc,n,r);i=l.x,o=l.y,a=a||l.textAlign,s=s||l.textVerticalAlign}var u=n.textOffset;u&&(i+=u[0],o+=u[1])}return(t=t||{}).baseX=i,t.baseY=o,t.textAlign=a,t.textVerticalAlign=s,t}function Wc(t,e,n){return t[e]=Mu(t,e,n),t[e]}function Hc(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function Gc(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function Yc(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function Uc(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}var Vc={normalizeTextStyle:function(t){return Ac(t),xc(t.rich,Ac),t},renderText:function(t,e,n,r,i,o){r.rich?Lc(t,e,n,r,i,o):Ic(t,e,n,r,i,o)},getBoxPosition:Bc,getStroke:Hc,getFill:Gc,parsePercent:Yc,needDrawText:function(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}},Xc=ku.WILL_BE_RESTORED,qc=new cu,Zc=function(){};Zc.prototype={constructor:Zc,drawRectText:function(t,e){var n=this.style;e=n.textRect||e,this.__dirty&&Vc.normalizeTextStyle(n,!0);var r=n.text;if(null!=r&&(r+=""),Vc.needDrawText(r,n)){t.save();var i=this.transform;n.transformText?this.setTransform(t):i&&(qc.copy(e),qc.applyTransform(i),e=qc),Vc.renderText(this,t,r,n,e,Xc),t.restore()}}};var Qc=Zc;function Kc(t){for(var e in t=t||{},au.call(this,t),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new Lu(t.style,this),this._rect=null,this.__clipPaths=null}Kc.prototype={constructor:Kc,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var n=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?au.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new Lu(t,this),this.dirty(!1),this},calculateTextPosition:null},eh.inherits(Kc,au),eh.mixin(Kc,Qc);var $c=Kc;function Jc(t){$c.call(this,t)}Jc.prototype={constructor:Jc,type:"image",brush:function(t,e){var n=this.style,r=n.image;n.bind(t,this,e);var i=this._image=Vu.createOrUpdateImage(r,this._image,this,this.onload);if(i&&Vu.isImageReady(i)){var o=n.x||0,a=n.y||0,s=n.width,h=n.height,l=i.width/i.height;if(null==s&&null!=h?s=h*l:null==h&&null!=s?h=s/l:null==s&&null==h&&(s=i.width,h=i.height),this.setTransform(t),n.sWidth&&n.sHeight){var u=n.sx||0,c=n.sy||0;t.drawImage(i,u,c,n.sWidth,n.sHeight,o,a,s,h)}else if(n.sx&&n.sy){var f=s-(u=n.sx),d=h-(c=n.sy);t.drawImage(i,u,c,f,d,o,a,s,h)}else t.drawImage(i,o,a,s,h);null!=n.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new cu(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},eh.inherits(Jc,$c);var tf=Jc,ef=Gl.devicePixelRatio,nf=1e5,rf=314159;function of(t){return parseInt(t,10)}var af=new cu(0,0,0,0),sf=new cu(0,0,0,0);var hf=function(t,e,n){this.type="canvas";var r=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=eh.extend({},n||{}),this.dpr=n.devicePixelRatio||ef,this._singleCanvas=r,this.root=t;var i=t.style;i&&(i["-webkit-tap-highlight-color"]="transparent",i["-webkit-user-select"]=i["user-select"]=i["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var o=this._zlevelList=[],a=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,r){var s=t.width,h=t.height;null!=n.width&&(s=n.width),null!=n.height&&(h=n.height),this.dpr=n.devicePixelRatio||1,t.width=s*this.dpr,t.height=h*this.dpr,this._width=s,this._height=h;var l=new Wu(t,this,this.dpr);l.__builtin__=!0,l.initContext(),a[314159]=l,l.zlevel=rf,o.push(rf),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var u=this._domRoot=function(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);t.appendChild(u)}this._hoverlayer=null,this._hoverElements=[]};hf.prototype={constructor:hf,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var r=0;r<n.length;r++){var i=n[r],o=this._layers[i];if(!o.__builtin__&&o.refresh){var a=0===r?this._backgroundColor:null;o.refresh(a)}}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){var n=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});return n.__from=t,t.__hoverMir=n,e&&n.setStyle(e),this._hoverElements.push(n),n}},removeHover:function(t){var e=t.__hoverMir,n=this._hoverElements,r=eh.indexOf(n,e);r>=0&&n.splice(r,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,n=0;n<e.length;n++){var r=e[n].__from;r&&(r.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){mu(t,this.storage.displayableSortFunc),n||(n=this._hoverlayer=this.getLayer(nf));var r={};n.ctx.save();for(var i=0;i<e;){var o=t[i],a=o.__from;a&&a.__zr?(i++,a.invisible||(o.transform=a.transform,o.invTransform=a.invTransform,o.__clipPaths=a.__clipPaths,this._doPaintEl(o,n,!0,r))):(t.splice(i,1),a.__hoverMir=null,e--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(nf)},_paintList:function(t,e,n){if(this._redrawId===n){e=e||!1,this._updateLayerStatus(t);var r=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!r){var i=this;Hu((function(){i._paintList(t,e,n)}))}}},_compositeManually:function(){var t=this.getLayer(rf).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer((function(r){r.virtual&&t.drawImage(r.dom,0,0,e,n)}))},_doPaintList:function(t,e){for(var n=[],r=0;r<this._zlevelList.length;r++){var i=this._zlevelList[r];(s=this._layers[i]).__builtin__&&s!==this._hoverlayer&&(s.__dirty||e)&&n.push(s)}for(var o=!0,a=0;a<n.length;a++){var s,h=(s=n[a]).ctx,l={};h.save();var u=e?s.__startIndex:s.__drawIndex,c=!e&&s.incremental&&Date.now,f=c&&Date.now(),d=s.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(s.__startIndex===s.__endIndex)s.clear(!1,d);else if(u===s.__startIndex){var p=t[u];p.incremental&&p.notClear&&!e||s.clear(!1,d)}-1===u&&(console.error("For some unknown reason. drawIndex is -1"),u=s.__startIndex);for(var g=u;g<s.__endIndex;g++){var v=t[g];if(this._doPaintEl(v,s,e,l),v.__dirty=v.__dirtyText=!1,c)if(Date.now()-f>15)break}s.__drawIndex=g,s.__drawIndex<s.__endIndex&&(o=!1),l.prevElClipPaths&&h.restore(),h.restore()}return Cs.wxa&&eh.each(this._layers,(function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()})),o},_doPaintEl:function(t,e,n,r){var i=e.ctx,o=t.transform;if((e.__dirty||n)&&!t.invisible&&0!==t.style.opacity&&(!o||o[0]||o[3])&&(!t.culling||!function(t,e,n){return af.copy(t.getBoundingRect()),t.transform&&af.applyTransform(t.transform),sf.width=e,sf.height=n,!af.intersect(sf)}(t,this._width,this._height))){var a=t.__clipPaths,s=r.prevElClipPaths;s&&!function(t,e){if(t===e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}(a,s)||(s&&(i.restore(),r.prevElClipPaths=null,r.prevEl=null),a&&(i.save(),function(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.setTransform(e),e.beginPath(),r.buildPath(e,r.shape),e.clip(),r.restoreTransform(e)}}(a,i),r.prevElClipPaths=a)),t.beforeBrush&&t.beforeBrush(i),t.brush(i,r.prevEl||null),r.prevEl=t,t.afterBrush&&t.afterBrush(i)}},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=rf);var n=this._layers[t];return n||((n=new Wu("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]&&eh.merge(n,this._layerConfig[t],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},insertLayer:function(t,e){var n=this._layers,r=this._zlevelList,i=r.length,o=null,a=-1,s=this._domRoot;if(!n[t]&&function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(i>0&&t>r[0]){for(a=0;a<i-1&&!(r[a]<t&&r[a+1]>t);a++);o=n[r[a]]}if(r.splice(a+1,0,t),n[t]=e,!e.virtual)if(o){var h=o.dom;h.nextSibling?s.insertBefore(e.dom,h.nextSibling):s.appendChild(e.dom)}else s.firstChild?s.insertBefore(e.dom,s.firstChild):s.appendChild(e.dom)}},eachLayer:function(t,e){var n,r,i=this._zlevelList;for(r=0;r<i.length;r++)n=i[r],t.call(e,this._layers[n],n)},eachBuiltinLayer:function(t,e){var n,r,i,o=this._zlevelList;for(i=0;i<o.length;i++)r=o[i],(n=this._layers[r]).__builtin__&&t.call(e,n,r)},eachOtherLayer:function(t,e){var n,r,i,o=this._zlevelList;for(i=0;i<o.length;i++)r=o[i],(n=this._layers[r]).__builtin__||t.call(e,n,r)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(t){r&&(r.__endIndex!==t&&(r.__dirty=!0),r.__endIndex=t)}if(this.eachBuiltinLayer((function(t,e){t.__dirty=t.__used=!1})),this._singleCanvas)for(var n=1;n<t.length;n++){if((o=t[n]).zlevel!==t[n-1].zlevel||o.incremental){this._needsManuallyCompositing=!0;break}}var r=null,i=0;for(n=0;n<t.length;n++){var o,a,s=(o=t[n]).zlevel;o.incremental?((a=this.getLayer(s+.001,this._needsManuallyCompositing)).incremental=!0,i=1):a=this.getLayer(s+(i>0?.01:0),this._needsManuallyCompositing),a.__builtin__||Yl("ZLevel "+s+" has been used by unkown layer "+a.id),a!==r&&(a.__used=!0,a.__startIndex!==n&&(a.__dirty=!0),a.__startIndex=n,a.incremental?a.__drawIndex=-1:a.__drawIndex=n,e(n),r=a),o.__dirty&&(a.__dirty=!0,a.incremental&&a.__drawIndex<0&&(a.__drawIndex=n))}e(n),this.eachBuiltinLayer((function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)}))},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var n=this._layerConfig;n[t]?eh.merge(n[t],e,!0):n[t]=e;for(var r=0;r<this._zlevelList.length;r++){var i=this._zlevelList[r];if(i===t||i===t+.01){var o=this._layers[i];eh.merge(o,n[t],!0)}}}},delLayer:function(t){var e=this._layers,n=this._zlevelList,r=e[t];r&&(r.dom.parentNode.removeChild(r.dom),delete e[t],n.splice(eh.indexOf(n,t),1))},resize:function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var r=this._opts;if(null!=t&&(r.width=t),null!=e&&(r.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||e!==this._height){for(var i in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(i)&&this._layers[i].resize(t,e);eh.each(this._progressiveLayers,(function(n){n.resize(t,e)})),this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(rf).resize(t,e)}return this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new Wu("image",this,t.pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,r=e.dom.height,i=e.ctx;this.eachLayer((function(t){t.__builtin__?i.drawImage(t.dom,0,0,n,r):t.renderToCanvas&&(e.ctx.save(),t.renderToCanvas(e.ctx),e.ctx.restore())}))}else for(var o={},a=this.storage.getDisplayList(!0),s=0;s<a.length;s++){var h=a[s];this._doPaintEl(h,e,!0,o)}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],r=["clientWidth","clientHeight"][t],i=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[r]||of(s[n])||of(a.style[n]))-(of(s[i])||0)-(of(s[o])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),r=n.getContext("2d"),i=t.getBoundingRect(),o=t.style,a=o.shadowBlur*e,s=o.shadowOffsetX*e,h=o.shadowOffsetY*e,l=o.hasStroke()?o.lineWidth:0,u=Math.max(l/2,-s+a),c=Math.max(l/2,s+a),f=Math.max(l/2,-h+a),d=Math.max(l/2,h+a),p=i.width+u+c,g=i.height+f+d;n.width=p*e,n.height=g*e,r.scale(e,e),r.clearRect(0,0,p,g),r.dpr=e;var v={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[u-i.x,f-i.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(r);var _=new tf({style:{x:0,y:0,image:n}});return null!=v.position&&(_.position=t.position=v.position),null!=v.rotation&&(_.rotation=t.rotation=v.rotation),null!=v.scale&&(_.scale=t.scale=v.scale),_}};var lf=hf,uf=kh.Dispatcher,cf=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,uf.call(this)};cf.prototype={constructor:cf,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),n=0;n<e.length;n++)this.addClip(e[n])},removeClip:function(t){var e=eh.indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),n=0;n<e.length;n++)this.removeClip(e[n]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,n=this._clips,r=n.length,i=[],o=[],a=0;a<r;a++){var s=n[a],h=s.step(t,e);h&&(i.push(h),o.push(s))}for(a=0;a<r;)n[a]._needsRemove?(n[a]=n[r-1],n.pop(),r--):a++;r=i.length;for(a=0;a<r;a++)o[a].fire(i[a]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var t=this;this._running=!0,Hu((function e(){t._running&&(Hu(e),!t._paused&&t._update())}))},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){var n=new Wl(t,(e=e||{}).loop,e.getter,e.setter);return this.addAnimator(n),n}},eh.mixin(cf,uf);var ff,df,pf=cf,gf=kh.addEventListener,vf=kh.removeEventListener,_f=kh.normalizeEvent,yf=kh.getNativeEvent,mf=Cs.domSupported,xf=(df={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:ff=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:eh.map(ff,(function(t){var e=t.replace("mouse","pointer");return df.hasOwnProperty(e)?e:t}))}),bf=["mousemove","mouseup"],wf=["pointermove","pointerup"];function Sf(t){return"mousewheel"===t&&Cs.browser.firefox?"DOMMouseScroll":t}function Mf(t){var e=t.pointerType;return"pen"===e||"touch"===e}function kf(t){t&&(t.zrByTouch=!0)}function Tf(t,e){var n=!1;do{e=e&&e.parentNode}while(e&&9!==e.nodeType&&!(n=e===t.painterRoot));return n}function Ef(t,e){this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}var Df=Ef.prototype;Df.stopPropagation=Df.stopImmediatePropagation=Df.preventDefault=eh.noop;var Pf={mousedown:function(t){t=_f(this.dom,t),this._mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=_f(this.dom,t);var e=this._mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||Rf(this,!0),this.trigger("mousemove",t)},mouseup:function(t){t=_f(this.dom,t),Rf(this,!1),this.trigger("mouseup",t)},mouseout:function(t){t=_f(this.dom,t),this._pointerCapturing&&(t.zrEventControl="no_globalout");var e=t.toElement||t.relatedTarget;t.zrIsToLocalDOM=Tf(this,e),this.trigger("mouseout",t)},touchstart:function(t){kf(t=_f(this.dom,t)),this._lastTouchMoment=new Date,this.handler.processGesture(t,"start"),Pf.mousemove.call(this,t),Pf.mousedown.call(this,t)},touchmove:function(t){kf(t=_f(this.dom,t)),this.handler.processGesture(t,"change"),Pf.mousemove.call(this,t)},touchend:function(t){kf(t=_f(this.dom,t)),this.handler.processGesture(t,"end"),Pf.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&Pf.click.call(this,t)},pointerdown:function(t){Pf.mousedown.call(this,t)},pointermove:function(t){Mf(t)||Pf.mousemove.call(this,t)},pointerup:function(t){Pf.mouseup.call(this,t)},pointerout:function(t){Mf(t)||Pf.mouseout.call(this,t)}};eh.each(["click","mousewheel","dblclick","contextmenu"],(function(t){Pf[t]=function(e){e=_f(this.dom,e),this.trigger(t,e)}}));var Cf={pointermove:function(t){Mf(t)||Cf.mousemove.call(this,t)},pointerup:function(t){Cf.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this._pointerCapturing;Rf(this,!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function Of(t,e){var n=e.domHandlers;Cs.pointerEventsSupported?eh.each(xf.pointer,(function(r){If(e,r,(function(e){n[r].call(t,e)}))})):(Cs.touchEventsSupported&&eh.each(xf.touch,(function(r){If(e,r,(function(i){n[r].call(t,i),function(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout((function(){t.touching=!1,t.touchTimer=null}),700)}(e)}))})),eh.each(xf.mouse,(function(r){If(e,r,(function(i){i=yf(i),e.touching||n[r].call(t,i)}))})))}function Af(t,e){function n(n){If(e,n,(function(r){r=yf(r),Tf(t,r.target)||(r=function(t,e){return _f(t.dom,new Ef(t,e),!0)}(t,r),e.domHandlers[n].call(t,r))}),{capture:!0})}Cs.pointerEventsSupported?eh.each(wf,n):Cs.touchEventsSupported||eh.each(bf,n)}function If(t,e,n,r){t.mounted[e]=n,t.listenerOpts[e]=r,gf(t.domTarget,Sf(e),n,r)}function Lf(t){var e=t.mounted;for(var n in e)e.hasOwnProperty(n)&&vf(t.domTarget,Sf(n),e[n],t.listenerOpts[n]);t.mounted={}}function Rf(t,e){if(t._mayPointerCapture=null,mf&&t._pointerCapturing^e){t._pointerCapturing=e;var n=t._globalHandlerScope;e?Af(t,n):Lf(n)}}function zf(t,e){this.domTarget=t,this.domHandlers=e,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function Nf(t,e){ph.call(this),this.dom=t,this.painterRoot=e,this._localHandlerScope=new zf(t,Pf),mf&&(this._globalHandlerScope=new zf(document,Cf)),this._pointerCapturing=!1,this._mayPointerCapture=null,Of(this,this._localHandlerScope)}var Ff=Nf.prototype;Ff.dispose=function(){Lf(this._localHandlerScope),mf&&Lf(this._globalHandlerScope)},Ff.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},eh.mixin(Nf,ph);var jf=Nf,Bf=!Cs.canvasSupported,Wf={canvas:lf},Hf={};var Gf=function(t,e,n){n=n||{},this.dom=e,this.id=t;var r=this,i=new wu,o=n.renderer;if(Bf){if(!Wf.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");o="vml"}else o&&Wf[o]||(o="canvas");var a=new Wf[o](e,i,n,t);this.storage=i,this.painter=a;var s=Cs.node||Cs.worker?null:new jf(a.getViewportRoot(),a.root);this.handler=new Nh(i,a,s,a.root),this.animation=new pf({stage:{update:eh.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var h=i.delFromStorage,l=i.addToStorage;i.delFromStorage=function(t){h.call(i,t),t&&t.removeSelfFromZr(r)},i.addToStorage=function(t){l.call(i,t),t.addSelfToZr(r)}};Gf.prototype={constructor:Gf,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){var n=this.painter.addHover(t,e);return this.refreshHover(),n}},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,n){this.handler.on(t,e,n)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(t){delete Hf[t]}(this.id)}};var Yf={version:"4.2.0",init:function(t,e){var n=new Gf(Ps(),t,e);return Hf[n.id]=n,n},dispose:function(t){if(t)t.dispose();else{for(var e in Hf)Hf.hasOwnProperty(e)&&Hf[e].dispose();Hf={}}return this},getInstance:function(t){return Hf[t]},registerPainter:function(t,e){Wf[t]=e}},Uf=sh.create,Vf=sh.distSquare,Xf=Math.pow,qf=Math.sqrt,Zf=1e-8,Qf=1e-4,Kf=qf(3),$f=1/3,Jf=Uf(),td=Uf(),ed=Uf();function nd(t){return t>-1e-8&&t<Zf}function rd(t){return t>Zf||t<-1e-8}function id(t,e,n,r,i){var o=1-i;return o*o*(o*t+3*i*e)+i*i*(i*r+3*o*n)}function od(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}var ad={cubicAt:id,cubicDerivativeAt:function(t,e,n,r,i){var o=1-i;return 3*(((e-t)*o+2*(n-e)*i)*o+(r-n)*i*i)},cubicRootAt:function(t,e,n,r,i,o){var a=r+3*(e-n)-t,s=3*(n-2*e+t),h=3*(e-t),l=t-i,u=s*s-3*a*h,c=s*h-9*a*l,f=h*h-3*s*l,d=0;if(nd(u)&&nd(c)){if(nd(s))o[0]=0;else(M=-h/s)>=0&&M<=1&&(o[d++]=M)}else{var p=c*c-4*u*f;if(nd(p)){var g=c/u,v=-g/2;(M=-s/a+g)>=0&&M<=1&&(o[d++]=M),v>=0&&v<=1&&(o[d++]=v)}else if(p>0){var _=qf(p),y=u*s+1.5*a*(-c+_),m=u*s+1.5*a*(-c-_);(M=(-s-((y=y<0?-Xf(-y,$f):Xf(y,$f))+(m=m<0?-Xf(-m,$f):Xf(m,$f))))/(3*a))>=0&&M<=1&&(o[d++]=M)}else{var x=(2*u*s-3*a*c)/(2*qf(u*u*u)),b=Math.acos(x)/3,w=qf(u),S=Math.cos(b),M=(-s-2*w*S)/(3*a),k=(v=(-s+w*(S+Kf*Math.sin(b)))/(3*a),(-s+w*(S-Kf*Math.sin(b)))/(3*a));M>=0&&M<=1&&(o[d++]=M),v>=0&&v<=1&&(o[d++]=v),k>=0&&k<=1&&(o[d++]=k)}}return d},cubicExtrema:function(t,e,n,r,i){var o=6*n-12*e+6*t,a=9*e+3*r-3*t-9*n,s=3*e-3*t,h=0;if(nd(a)){if(rd(o))(u=-s/o)>=0&&u<=1&&(i[h++]=u)}else{var l=o*o-4*a*s;if(nd(l))i[0]=-o/(2*a);else if(l>0){var u,c=qf(l),f=(-o-c)/(2*a);(u=(-o+c)/(2*a))>=0&&u<=1&&(i[h++]=u),f>=0&&f<=1&&(i[h++]=f)}}return h},cubicSubdivide:function(t,e,n,r,i,o){var a=(e-t)*i+t,s=(n-e)*i+e,h=(r-n)*i+n,l=(s-a)*i+a,u=(h-s)*i+s,c=(u-l)*i+l;o[0]=t,o[1]=a,o[2]=l,o[3]=c,o[4]=c,o[5]=u,o[6]=h,o[7]=r},cubicProjectPoint:function(t,e,n,r,i,o,a,s,h,l,u){var c,f,d,p,g,v=.005,_=1/0;Jf[0]=h,Jf[1]=l;for(var y=0;y<1;y+=.05)td[0]=id(t,n,i,a,y),td[1]=id(e,r,o,s,y),(p=Vf(Jf,td))<_&&(c=y,_=p);_=1/0;for(var m=0;m<32&&!(v<Qf);m++)f=c-v,d=c+v,td[0]=id(t,n,i,a,f),td[1]=id(e,r,o,s,f),p=Vf(td,Jf),f>=0&&p<_?(c=f,_=p):(ed[0]=id(t,n,i,a,d),ed[1]=id(e,r,o,s,d),g=Vf(ed,Jf),d<=1&&g<_?(c=d,_=g):v*=.5);return u&&(u[0]=id(t,n,i,a,c),u[1]=id(e,r,o,s,c)),qf(_)},quadraticAt:od,quadraticDerivativeAt:function(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))},quadraticRootAt:function(t,e,n,r,i){var o=t-2*e+n,a=2*(e-t),s=t-r,h=0;if(nd(o)){if(rd(a))(u=-s/a)>=0&&u<=1&&(i[h++]=u)}else{var l=a*a-4*o*s;if(nd(l))(u=-a/(2*o))>=0&&u<=1&&(i[h++]=u);else if(l>0){var u,c=qf(l),f=(-a-c)/(2*o);(u=(-a+c)/(2*o))>=0&&u<=1&&(i[h++]=u),f>=0&&f<=1&&(i[h++]=f)}}return h},quadraticExtremum:function(t,e,n){var r=t+n-2*e;return 0===r?.5:(t-e)/r},quadraticSubdivide:function(t,e,n,r,i){var o=(e-t)*r+t,a=(n-e)*r+e,s=(a-o)*r+o;i[0]=t,i[1]=o,i[2]=s,i[3]=s,i[4]=a,i[5]=n},quadraticProjectPoint:function(t,e,n,r,i,o,a,s,h){var l,u=.005,c=1/0;Jf[0]=a,Jf[1]=s;for(var f=0;f<1;f+=.05){td[0]=od(t,n,i,f),td[1]=od(e,r,o,f),(v=Vf(Jf,td))<c&&(l=f,c=v)}c=1/0;for(var d=0;d<32&&!(u<Qf);d++){var p=l-u,g=l+u;td[0]=od(t,n,i,p),td[1]=od(e,r,o,p);var v=Vf(td,Jf);if(p>=0&&v<c)l=p,c=v;else{ed[0]=od(t,n,i,g),ed[1]=od(e,r,o,g);var _=Vf(ed,Jf);g<=1&&_<c?(l=g,c=_):u*=.5}}return h&&(h[0]=od(t,n,i,l),h[1]=od(e,r,o,l)),qf(c)}},sd=Math.min,hd=Math.max,ld=Math.sin,ud=Math.cos,cd=2*Math.PI,fd=sh.create(),dd=sh.create(),pd=sh.create();var gd=[],vd=[];var _d={fromPoints:function(t,e,n){if(0!==t.length){var r,i=t[0],o=i[0],a=i[0],s=i[1],h=i[1];for(r=1;r<t.length;r++)i=t[r],o=sd(o,i[0]),a=hd(a,i[0]),s=sd(s,i[1]),h=hd(h,i[1]);e[0]=o,e[1]=s,n[0]=a,n[1]=h}},fromLine:function(t,e,n,r,i,o){i[0]=sd(t,n),i[1]=sd(e,r),o[0]=hd(t,n),o[1]=hd(e,r)},fromCubic:function(t,e,n,r,i,o,a,s,h,l){var u,c=ad.cubicExtrema,f=ad.cubicAt,d=c(t,n,i,a,gd);for(h[0]=1/0,h[1]=1/0,l[0]=-1/0,l[1]=-1/0,u=0;u<d;u++){var p=f(t,n,i,a,gd[u]);h[0]=sd(p,h[0]),l[0]=hd(p,l[0])}for(d=c(e,r,o,s,vd),u=0;u<d;u++){var g=f(e,r,o,s,vd[u]);h[1]=sd(g,h[1]),l[1]=hd(g,l[1])}h[0]=sd(t,h[0]),l[0]=hd(t,l[0]),h[0]=sd(a,h[0]),l[0]=hd(a,l[0]),h[1]=sd(e,h[1]),l[1]=hd(e,l[1]),h[1]=sd(s,h[1]),l[1]=hd(s,l[1])},fromQuadratic:function(t,e,n,r,i,o,a,s){var h=ad.quadraticExtremum,l=ad.quadraticAt,u=hd(sd(h(t,n,i),1),0),c=hd(sd(h(e,r,o),1),0),f=l(t,n,i,u),d=l(e,r,o,c);a[0]=sd(t,i,f),a[1]=sd(e,o,d),s[0]=hd(t,i,f),s[1]=hd(e,o,d)},fromArc:function(t,e,n,r,i,o,a,s,h){var l=sh.min,u=sh.max,c=Math.abs(i-o);if(c%cd<1e-4&&c>1e-4)return s[0]=t-n,s[1]=e-r,h[0]=t+n,void(h[1]=e+r);if(fd[0]=ud(i)*n+t,fd[1]=ld(i)*r+e,dd[0]=ud(o)*n+t,dd[1]=ld(o)*r+e,l(s,fd,dd),u(h,fd,dd),(i%=cd)<0&&(i+=cd),(o%=cd)<0&&(o+=cd),i>o&&!a?o+=cd:i<o&&a&&(i+=cd),a){var f=o;o=i,i=f}for(var d=0;d<o;d+=Math.PI/2)d>i&&(pd[0]=ud(d)*n+t,pd[1]=ld(d)*r+e,l(s,pd,s),u(h,pd,h))}},yd=Gl.devicePixelRatio,md={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},xd=[],bd=[],wd=[],Sd=[],Md=Math.min,kd=Math.max,Td=Math.cos,Ed=Math.sin,Dd=Math.sqrt,Pd=Math.abs,Cd="undefined"!=typeof Float32Array,Od=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};Od.prototype={constructor:Od,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e,n){n=n||0,this._ux=Pd(n/yd/t)||0,this._uy=Pd(n/yd/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return this._ctx=t,t&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(md.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var n=Pd(t-this._xi)>this._ux||Pd(e-this._yi)>this._uy||this._len<5;return this.addData(md.L,t,e),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),n&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,n,r,i,o){return this.addData(md.C,t,e,n,r,i,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,n,r,i,o):this._ctx.bezierCurveTo(t,e,n,r,i,o)),this._xi=i,this._yi=o,this},quadraticCurveTo:function(t,e,n,r){return this.addData(md.Q,t,e,n,r),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,n,r):this._ctx.quadraticCurveTo(t,e,n,r)),this._xi=n,this._yi=r,this},arc:function(t,e,n,r,i,o){return this.addData(md.A,t,e,n,n,r,i-r,0,o?0:1),this._ctx&&this._ctx.arc(t,e,n,r,i,o),this._xi=Td(i)*n+t,this._yi=Ed(i)*n+e,this},arcTo:function(t,e,n,r,i){return this._ctx&&this._ctx.arcTo(t,e,n,r,i),this},rect:function(t,e,n,r){return this._ctx&&this._ctx.rect(t,e,n,r),this.addData(md.R,t,e,n,r),this},closePath:function(){this.addData(md.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length===e||!Cd||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,r=this._len,i=0;i<e;i++)n+=t[i].len();Cd&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+n));for(i=0;i<e;i++)for(var o=t[i].data,a=0;a<o.length;a++)this.data[r++]=o[a];this._len=r},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var n=0;n<arguments.length;n++)e[this._len++]=arguments[n];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var n,r,i=this._dashSum,o=this._dashOffset,a=this._lineDash,s=this._ctx,h=this._xi,l=this._yi,u=t-h,c=e-l,f=Dd(u*u+c*c),d=h,p=l,g=a.length;for(o<0&&(o=i+o),d-=(o%=i)*(u/=f),p-=o*(c/=f);u>0&&d<=t||u<0&&d>=t||0===u&&(c>0&&p<=e||c<0&&p>=e);)d+=u*(n=a[r=this._dashIdx]),p+=c*n,this._dashIdx=(r+1)%g,u>0&&d<h||u<0&&d>h||c>0&&p<l||c<0&&p>l||s[r%2?"moveTo":"lineTo"](u>=0?Md(d,t):kd(d,t),c>=0?Md(p,e):kd(p,e));u=d-t,c=p-e,this._dashOffset=-Dd(u*u+c*c)},_dashedBezierTo:function(t,e,n,r,i,o){var a,s,h,l,u,c=this._dashSum,f=this._dashOffset,d=this._lineDash,p=this._ctx,g=this._xi,v=this._yi,_=ad.cubicAt,y=0,m=this._dashIdx,x=d.length,b=0;for(f<0&&(f=c+f),f%=c,a=0;a<1;a+=.1)s=_(g,t,n,i,a+.1)-_(g,t,n,i,a),h=_(v,e,r,o,a+.1)-_(v,e,r,o,a),y+=Dd(s*s+h*h);for(;m<x&&!((b+=d[m])>f);m++);for(a=(b-f)/y;a<=1;)l=_(g,t,n,i,a),u=_(v,e,r,o,a),m%2?p.moveTo(l,u):p.lineTo(l,u),a+=d[m]/y,m=(m+1)%x;m%2!=0&&p.lineTo(i,o),s=i-l,h=o-u,this._dashOffset=-Dd(s*s+h*h)},_dashedQuadraticTo:function(t,e,n,r){var i=n,o=r;n=(n+2*t)/3,r=(r+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,n,r,i,o)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,Cd&&(this.data=new Float32Array(t)))},getBoundingRect:function(){xd[0]=xd[1]=wd[0]=wd[1]=Number.MAX_VALUE,bd[0]=bd[1]=Sd[0]=Sd[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,n=0,r=0,i=0,o=0;o<t.length;){var a=t[o++];switch(1===o&&(r=e=t[o],i=n=t[o+1]),a){case md.M:e=r=t[o++],n=i=t[o++],wd[0]=r,wd[1]=i,Sd[0]=r,Sd[1]=i;break;case md.L:_d.fromLine(e,n,t[o],t[o+1],wd,Sd),e=t[o++],n=t[o++];break;case md.C:_d.fromCubic(e,n,t[o++],t[o++],t[o++],t[o++],t[o],t[o+1],wd,Sd),e=t[o++],n=t[o++];break;case md.Q:_d.fromQuadratic(e,n,t[o++],t[o++],t[o],t[o+1],wd,Sd),e=t[o++],n=t[o++];break;case md.A:var s=t[o++],h=t[o++],l=t[o++],u=t[o++],c=t[o++],f=t[o++]+c;o+=1;var d=1-t[o++];1===o&&(r=Td(c)*l+s,i=Ed(c)*u+h),_d.fromArc(s,h,l,u,c,f,d,wd,Sd),e=Td(f)*l+s,n=Ed(f)*u+h;break;case md.R:r=e=t[o++],i=n=t[o++];var p=t[o++],g=t[o++];_d.fromLine(r,i,r+p,i+g,wd,Sd);break;case md.Z:e=r,n=i}sh.min(xd,xd,wd),sh.max(bd,bd,Sd)}return 0===o&&(xd[0]=xd[1]=bd[0]=bd[1]=0),new cu(xd[0],xd[1],bd[0]-xd[0],bd[1]-xd[1])},rebuildPath:function(t){for(var e,n,r,i,o,a,s=this.data,h=this._ux,l=this._uy,u=this._len,c=0;c<u;){var f=s[c++];switch(1===c&&(e=r=s[c],n=i=s[c+1]),f){case md.M:e=r=s[c++],n=i=s[c++],t.moveTo(r,i);break;case md.L:o=s[c++],a=s[c++],(Pd(o-r)>h||Pd(a-i)>l||c===u-1)&&(t.lineTo(o,a),r=o,i=a);break;case md.C:t.bezierCurveTo(s[c++],s[c++],s[c++],s[c++],s[c++],s[c++]),r=s[c-2],i=s[c-1];break;case md.Q:t.quadraticCurveTo(s[c++],s[c++],s[c++],s[c++]),r=s[c-2],i=s[c-1];break;case md.A:var d=s[c++],p=s[c++],g=s[c++],v=s[c++],_=s[c++],y=s[c++],m=s[c++],x=s[c++],b=g>v?g:v,w=g>v?1:g/v,S=g>v?v/g:1,M=_+y;Math.abs(g-v)>.001?(t.translate(d,p),t.rotate(m),t.scale(w,S),t.arc(0,0,b,_,M,1-x),t.scale(1/w,1/S),t.rotate(-m),t.translate(-d,-p)):t.arc(d,p,b,_,M,1-x),1===c&&(e=Td(_)*g+d,n=Ed(_)*v+p),r=Td(M)*g+d,i=Ed(M)*v+p;break;case md.R:e=r=s[c],n=i=s[c+1],t.rect(s[c++],s[c++],s[c++],s[c++]);break;case md.Z:t.closePath(),r=e,i=n}}}},Od.CMD=md;var Ad=Od;var Id={containStroke:function(t,e,n,r,i,o,a){if(0===i)return!1;var s=i,h=0;if(a>e+s&&a>r+s||a<e-s&&a<r-s||o>t+s&&o>n+s||o<t-s&&o<n-s)return!1;if(t===n)return Math.abs(o-t)<=s/2;var l=(h=(e-r)/(t-n))*o-a+(t*r-n*e)/(t-n);return l*l/(h*h+1)<=s/2*s/2}};var Ld={containStroke:function(t,e,n,r,i,o,a,s,h,l,u){if(0===h)return!1;var c=h;return!(u>e+c&&u>r+c&&u>o+c&&u>s+c||u<e-c&&u<r-c&&u<o-c&&u<s-c||l>t+c&&l>n+c&&l>i+c&&l>a+c||l<t-c&&l<n-c&&l<i-c&&l<a-c)&&ad.cubicProjectPoint(t,e,n,r,i,o,a,s,l,u,null)<=c/2}},Rd=ad.quadraticProjectPoint;var zd={containStroke:function(t,e,n,r,i,o,a,s,h){if(0===a)return!1;var l=a;return!(h>e+l&&h>r+l&&h>o+l||h<e-l&&h<r-l&&h<o-l||s>t+l&&s>n+l&&s>i+l||s<t-l&&s<n-l&&s<i-l)&&Rd(t,e,n,r,i,o,s,h,null)<=l/2}},Nd=2*Math.PI;var Fd={normalizeRadian:function(t){return(t%=Nd)<0&&(t+=Nd),t}},jd=Fd.normalizeRadian,Bd=2*Math.PI;var Wd={containStroke:function(t,e,n,r,i,o,a,s,h){if(0===a)return!1;var l=a;s-=t,h-=e;var u=Math.sqrt(s*s+h*h);if(u-l>n||u+l<n)return!1;if(Math.abs(r-i)%Bd<1e-4)return!0;if(o){var c=r;r=jd(i),i=jd(c)}else r=jd(r),i=jd(i);r>i&&(i+=Bd);var f=Math.atan2(h,s);return f<0&&(f+=Bd),f>=r&&f<=i||f+Bd>=r&&f+Bd<=i}};var Hd=function(t,e,n,r,i,o){if(o>e&&o>r||o<e&&o<r)return 0;if(r===e)return 0;var a=r<e?1:-1,s=(o-e)/(r-e);1!==s&&0!==s||(a=r<e?.5:-.5);var h=s*(n-t)+t;return h===i?1/0:h>i?a:0},Gd=Fd.normalizeRadian,Yd=Ad.CMD,Ud=2*Math.PI;var Vd=[-1,-1,-1],Xd=[-1,-1];function qd(t,e,n,r,i,o,a,s,h,l){if(l>e&&l>r&&l>o&&l>s||l<e&&l<r&&l<o&&l<s)return 0;var u,c=ad.cubicRootAt(e,r,o,s,l,Vd);if(0===c)return 0;for(var f,d,p=0,g=-1,v=0;v<c;v++){var _=Vd[v],y=0===_||1===_?.5:1;ad.cubicAt(t,n,i,a,_)<h||(g<0&&(g=ad.cubicExtrema(e,r,o,s,Xd),Xd[1]<Xd[0]&&g>1&&(u=void 0,u=Xd[0],Xd[0]=Xd[1],Xd[1]=u),f=ad.cubicAt(e,r,o,s,Xd[0]),g>1&&(d=ad.cubicAt(e,r,o,s,Xd[1]))),2===g?_<Xd[0]?p+=f<e?y:-y:_<Xd[1]?p+=d<f?y:-y:p+=s<d?y:-y:_<Xd[0]?p+=f<e?y:-y:p+=s<f?y:-y)}return p}function Zd(t,e,n,r,i,o,a,s){if(s>e&&s>r&&s>o||s<e&&s<r&&s<o)return 0;var h=ad.quadraticRootAt(e,r,o,s,Vd);if(0===h)return 0;var l=ad.quadraticExtremum(e,r,o);if(l>=0&&l<=1){for(var u=0,c=ad.quadraticAt(e,r,o,l),f=0;f<h;f++){var d=0===Vd[f]||1===Vd[f]?.5:1;ad.quadraticAt(t,n,i,Vd[f])<a||(Vd[f]<l?u+=c<e?d:-d:u+=o<c?d:-d)}return u}d=0===Vd[0]||1===Vd[0]?.5:1;return ad.quadraticAt(t,n,i,Vd[0])<a?0:o<e?d:-d}function Qd(t,e,n,r,i,o,a,s){if((s-=e)>n||s<-n)return 0;var h=Math.sqrt(n*n-s*s);Vd[0]=-h,Vd[1]=h;var l=Math.abs(r-i);if(l<1e-4)return 0;if(l%Ud<1e-4){r=0,i=Ud;var u=o?1:-1;return a>=Vd[0]+t&&a<=Vd[1]+t?u:0}if(o){h=r;r=Gd(i),i=Gd(h)}else r=Gd(r),i=Gd(i);r>i&&(i+=Ud);for(var c=0,f=0;f<2;f++){var d=Vd[f];if(d+t>a){var p=Math.atan2(s,d);u=o?1:-1;p<0&&(p=Ud+p),(p>=r&&p<=i||p+Ud>=r&&p+Ud<=i)&&(p>Math.PI/2&&p<1.5*Math.PI&&(u=-u),c+=u)}}return c}function Kd(t,e,n,r,i){for(var o,a,s=0,h=0,l=0,u=0,c=0,f=0;f<t.length;){var d=t[f++];switch(d===Yd.M&&f>1&&(n||(s+=Hd(h,l,u,c,r,i))),1===f&&(u=h=t[f],c=l=t[f+1]),d){case Yd.M:h=u=t[f++],l=c=t[f++];break;case Yd.L:if(n){if(Id.containStroke(h,l,t[f],t[f+1],e,r,i))return!0}else s+=Hd(h,l,t[f],t[f+1],r,i)||0;h=t[f++],l=t[f++];break;case Yd.C:if(n){if(Ld.containStroke(h,l,t[f++],t[f++],t[f++],t[f++],t[f],t[f+1],e,r,i))return!0}else s+=qd(h,l,t[f++],t[f++],t[f++],t[f++],t[f],t[f+1],r,i)||0;h=t[f++],l=t[f++];break;case Yd.Q:if(n){if(zd.containStroke(h,l,t[f++],t[f++],t[f],t[f+1],e,r,i))return!0}else s+=Zd(h,l,t[f++],t[f++],t[f],t[f+1],r,i)||0;h=t[f++],l=t[f++];break;case Yd.A:var p=t[f++],g=t[f++],v=t[f++],_=t[f++],y=t[f++],m=t[f++];f+=1;var x=1-t[f++],b=Math.cos(y)*v+p,w=Math.sin(y)*_+g;f>1?s+=Hd(h,l,b,w,r,i):(u=b,c=w);var S=(r-p)*_/v+p;if(n){if(Wd.containStroke(p,g,_,y,y+m,x,e,S,i))return!0}else s+=Qd(p,g,_,y,y+m,x,S,i);h=Math.cos(y+m)*v+p,l=Math.sin(y+m)*_+g;break;case Yd.R:u=h=t[f++],c=l=t[f++];b=u+t[f++],w=c+t[f++];if(n){if(Id.containStroke(u,c,b,c,e,r,i)||Id.containStroke(b,c,b,w,e,r,i)||Id.containStroke(b,w,u,w,e,r,i)||Id.containStroke(u,w,u,c,e,r,i))return!0}else s+=Hd(b,c,b,w,r,i),s+=Hd(u,w,u,c,r,i);break;case Yd.Z:if(n){if(Id.containStroke(h,l,u,c,e,r,i))return!0}else s+=Hd(h,l,u,c,r,i);h=u,l=c}}return n||(o=l,a=c,Math.abs(o-a)<1e-4)||(s+=Hd(h,l,u,c,r,i)||0),0!==s}var $d={contain:function(t,e,n){return Kd(t,0,!1,e,n)},containStroke:function(t,e,n,r){return Kd(t,e,!0,n,r)}},Jd=zu.prototype.getCanvasPattern,tp=Math.abs,ep=new Ad(!0);function np(t){$c.call(this,t),this.path=null}np.prototype={constructor:np,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(t,e){var n,r=this.style,i=this.path||ep,o=r.hasStroke(),a=r.hasFill(),s=r.fill,h=r.stroke,l=a&&!!s.colorStops,u=o&&!!h.colorStops,c=a&&!!s.image,f=o&&!!h.image;(r.bind(t,this,e),this.setTransform(t),this.__dirty)&&(l&&(n=n||this.getBoundingRect(),this._fillGradient=r.getGradient(t,s,n)),u&&(n=n||this.getBoundingRect(),this._strokeGradient=r.getGradient(t,h,n)));l?t.fillStyle=this._fillGradient:c&&(t.fillStyle=Jd.call(s,t)),u?t.strokeStyle=this._strokeGradient:f&&(t.strokeStyle=Jd.call(h,t));var d=r.lineDash,p=r.lineDashOffset,g=!!t.setLineDash,v=this.getGlobalScale();if(i.setScale(v[0],v[1],this.segmentIgnoreThreshold),this.__dirtyPath||d&&!g&&o?(i.beginPath(t),d&&!g&&(i.setLineDash(d),i.setLineDashOffset(p)),this.buildPath(i,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),a)if(null!=r.fillOpacity){var _=t.globalAlpha;t.globalAlpha=r.fillOpacity*r.opacity,i.fill(t),t.globalAlpha=_}else i.fill(t);if(d&&g&&(t.setLineDash(d),t.lineDashOffset=p),o)if(null!=r.strokeOpacity){_=t.globalAlpha;t.globalAlpha=r.strokeOpacity*r.opacity,i.stroke(t),t.globalAlpha=_}else i.stroke(t);d&&g&&t.setLineDash([]),null!=r.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPath:function(t,e,n){},createPathProxy:function(){this.path=new Ad},getBoundingRect:function(){var t=this._rect,e=this.style,n=!t;if(n){var r=this.path;r||(r=this.path=new Ad),this.__dirtyPath&&(r.beginPath(),this.buildPath(r,this.shape,!1)),t=r.getBoundingRect()}if(this._rect=t,e.hasStroke()){var i=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){i.copy(t);var o=e.lineWidth,a=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(o=Math.max(o,this.strokeContainThreshold||4)),a>1e-10&&(i.width+=o/a,i.height+=o/a,i.x-=o/a/2,i.y-=o/a/2)}return i}return t},contain:function(t,e){var n=this.transformCoordToLocal(t,e),r=this.getBoundingRect(),i=this.style;if(t=n[0],e=n[1],r.contain(t,e)){var o=this.path.data;if(i.hasStroke()){var a=i.lineWidth,s=i.strokeNoScale?this.getLineScale():1;if(s>1e-10&&(i.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),$d.containStroke(o,a/s,t,e)))return!0}if(i.hasFill())return $d.contain(o,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):$c.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var n=this.shape;if(n){if(eh.isObject(t))for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);else n[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&tp(t[0]-1)>1e-10&&tp(t[3]-1)>1e-10?Math.sqrt(tp(t[0]*t[3]-t[2]*t[1])):1}},np.extend=function(t){var e=function(e){np.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var n=t.shape;if(n){this.shape=this.shape||{};var r=this.shape;for(var i in n)!r.hasOwnProperty(i)&&n.hasOwnProperty(i)&&(r[i]=n[i])}t.init&&t.init.call(this,e)};for(var n in eh.inherits(e,np),t)"style"!==n&&"shape"!==n&&(e.prototype[n]=t[n]);return e},eh.inherits(np,$c);var rp=np,ip=sh.applyTransform,op=Ad.CMD,ap=[[],[],[]],sp=Math.sqrt,hp=Math.atan2;var lp=function(t,e){var n,r,i,o,a,s=t.data,h=op.M,l=op.C,u=op.L,c=op.R,f=op.A,d=op.Q;for(i=0,o=0;i<s.length;){switch(n=s[i++],o=i,r=0,n){case h:case u:r=1;break;case l:r=3;break;case d:r=2;break;case f:var p=e[4],g=e[5],v=sp(e[0]*e[0]+e[1]*e[1]),_=sp(e[2]*e[2]+e[3]*e[3]),y=hp(-e[1]/_,e[0]/v);s[i]*=v,s[i++]+=p,s[i]*=_,s[i++]+=g,s[i++]*=v,s[i++]*=_,s[i++]+=y,s[i++]+=y,o=i+=2;break;case c:m[0]=s[i++],m[1]=s[i++],ip(m,m,e),s[o++]=m[0],s[o++]=m[1],m[0]+=s[i++],m[1]+=s[i++],ip(m,m,e),s[o++]=m[0],s[o++]=m[1]}for(a=0;a<r;a++){var m;(m=ap[a])[0]=s[i++],m[1]=s[i++],ip(m,m,e),s[o++]=m[0],s[o++]=m[1]}}},up=Math.sqrt,cp=Math.sin,fp=Math.cos,dp=Math.PI,pp=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},gp=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(pp(t)*pp(e))},vp=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(gp(t,e))};function _p(t,e,n,r,i,o,a,s,h,l,u){var c=h*(dp/180),f=fp(c)*(t-n)/2+cp(c)*(e-r)/2,d=-1*cp(c)*(t-n)/2+fp(c)*(e-r)/2,p=f*f/(a*a)+d*d/(s*s);p>1&&(a*=up(p),s*=up(p));var g=(i===o?-1:1)*up((a*a*(s*s)-a*a*(d*d)-s*s*(f*f))/(a*a*(d*d)+s*s*(f*f)))||0,v=g*a*d/s,_=g*-s*f/a,y=(t+n)/2+fp(c)*v-cp(c)*_,m=(e+r)/2+cp(c)*v+fp(c)*_,x=vp([1,0],[(f-v)/a,(d-_)/s]),b=[(f-v)/a,(d-_)/s],w=[(-1*f-v)/a,(-1*d-_)/s],S=vp(b,w);gp(b,w)<=-1&&(S=dp),gp(b,w)>=1&&(S=0),0===o&&S>0&&(S-=2*dp),1===o&&S<0&&(S+=2*dp),u.addData(l,y,m,a,s,x,S,c,o)}var yp=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,mp=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function xp(t,e){var n=function(t){if(!t)return new Ad;for(var e,n=0,r=0,i=n,o=r,a=new Ad,s=Ad.CMD,h=t.match(yp),l=0;l<h.length;l++){for(var u,c=h[l],f=c.charAt(0),d=c.match(mp)||[],p=d.length,g=0;g<p;g++)d[g]=parseFloat(d[g]);for(var v=0;v<p;){var _,y,m,x,b,w,S,M=n,k=r;switch(f){case"l":n+=d[v++],r+=d[v++],u=s.L,a.addData(u,n,r);break;case"L":n=d[v++],r=d[v++],u=s.L,a.addData(u,n,r);break;case"m":n+=d[v++],r+=d[v++],u=s.M,a.addData(u,n,r),i=n,o=r,f="l";break;case"M":n=d[v++],r=d[v++],u=s.M,a.addData(u,n,r),i=n,o=r,f="L";break;case"h":n+=d[v++],u=s.L,a.addData(u,n,r);break;case"H":n=d[v++],u=s.L,a.addData(u,n,r);break;case"v":r+=d[v++],u=s.L,a.addData(u,n,r);break;case"V":r=d[v++],u=s.L,a.addData(u,n,r);break;case"C":u=s.C,a.addData(u,d[v++],d[v++],d[v++],d[v++],d[v++],d[v++]),n=d[v-2],r=d[v-1];break;case"c":u=s.C,a.addData(u,d[v++]+n,d[v++]+r,d[v++]+n,d[v++]+r,d[v++]+n,d[v++]+r),n+=d[v-2],r+=d[v-1];break;case"S":_=n,y=r;var T=a.len(),E=a.data;e===s.C&&(_+=n-E[T-4],y+=r-E[T-3]),u=s.C,M=d[v++],k=d[v++],n=d[v++],r=d[v++],a.addData(u,_,y,M,k,n,r);break;case"s":_=n,y=r,T=a.len(),E=a.data,e===s.C&&(_+=n-E[T-4],y+=r-E[T-3]),u=s.C,M=n+d[v++],k=r+d[v++],n+=d[v++],r+=d[v++],a.addData(u,_,y,M,k,n,r);break;case"Q":M=d[v++],k=d[v++],n=d[v++],r=d[v++],u=s.Q,a.addData(u,M,k,n,r);break;case"q":M=d[v++]+n,k=d[v++]+r,n+=d[v++],r+=d[v++],u=s.Q,a.addData(u,M,k,n,r);break;case"T":_=n,y=r,T=a.len(),E=a.data,e===s.Q&&(_+=n-E[T-4],y+=r-E[T-3]),n=d[v++],r=d[v++],u=s.Q,a.addData(u,_,y,n,r);break;case"t":_=n,y=r,T=a.len(),E=a.data,e===s.Q&&(_+=n-E[T-4],y+=r-E[T-3]),n+=d[v++],r+=d[v++],u=s.Q,a.addData(u,_,y,n,r);break;case"A":m=d[v++],x=d[v++],b=d[v++],w=d[v++],S=d[v++],_p(M=n,k=r,n=d[v++],r=d[v++],w,S,m,x,b,u=s.A,a);break;case"a":m=d[v++],x=d[v++],b=d[v++],w=d[v++],S=d[v++],_p(M=n,k=r,n+=d[v++],r+=d[v++],w,S,m,x,b,u=s.A,a)}}"z"!==f&&"Z"!==f||(u=s.Z,a.addData(u),n=i,r=o),e=u}return a.toStatic(),a}(t);return(e=e||{}).buildPath=function(t){if(t.setData){t.setData(n.data),(e=t.getContext())&&t.rebuildPath(e)}else{var e=t;n.rebuildPath(e)}},e.applyTransform=function(t){lp(n,t),this.dirty(!0)},e}var bp={createFromString:function(t,e){return new rp(xp(t,e))},extendFromString:function(t,e){return rp.extend(xp(t,e))},mergePath:function(t,e){for(var n=[],r=t.length,i=0;i<r;i++){var o=t[i];o.path||o.createPathProxy(),o.__dirtyPath&&o.buildPath(o.path,o.shape,!0),n.push(o.path)}var a=new rp(e);return a.createPathProxy(),a.buildPath=function(t){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e)},a}},wp=ku.ContextCachedBy,Sp=function(t){$c.call(this,t)};Sp.prototype={constructor:Sp,type:"text",brush:function(t,e){var n=this.style;this.__dirty&&Vc.normalizeTextStyle(n,!0),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var r=n.text;null!=r&&(r+=""),Vc.needDrawText(r,n)?(this.setTransform(t),Vc.renderText(this,t,r,n,null,e),this.restoreTransform(t)):t.__attrCachedBy=wp.NONE},getBoundingRect:function(){var t=this.style;if(this.__dirty&&Vc.normalizeTextStyle(t,!0),!this._rect){var e=t.text;null!=e?e+="":e="";var n=vc.getBoundingRect(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich);if(n.x+=t.x||0,n.y+=t.y||0,Vc.getStroke(t.textStroke,t.textStrokeWidth)){var r=t.textStrokeWidth;n.x-=r/2,n.y-=r/2,n.width+=r,n.height+=r}this._rect=n}return this._rect}},eh.inherits(Sp,$c);var Mp=Sp,kp=rp.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}}),Tp=Math.round;function Ep(t,e,n){var r=Tp(2*t);return(r+Tp(e))%2==0?r/2:(r+(n?1:-1))/2}var Dp={subPixelOptimizeLine:function(t,e,n){var r=n&&n.lineWidth;if(e&&r){var i=e.x1,o=e.x2,a=e.y1,s=e.y2;Tp(2*i)===Tp(2*o)?t.x1=t.x2=Ep(i,r,!0):(t.x1=i,t.x2=o),Tp(2*a)===Tp(2*s)?t.y1=t.y2=Ep(a,r,!0):(t.y1=a,t.y2=s)}},subPixelOptimizeRect:function(t,e,n){var r=n&&n.lineWidth;if(e&&r){var i=e.x,o=e.y,a=e.width,s=e.height;t.x=Ep(i,r,!0),t.y=Ep(o,r,!0),t.width=Math.max(Ep(i+a,r,!1)-t.x,0===a?0:1),t.height=Math.max(Ep(o+s,r,!1)-t.y,0===s?0:1)}},subPixelOptimize:Ep},Pp=Dp.subPixelOptimizeRect,Cp={},Op=rp.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var n,r,i,o;this.subPixelOptimize?(Pp(Cp,e,this.style),n=Cp.x,r=Cp.y,i=Cp.width,o=Cp.height,Cp.r=e.r,e=Cp):(n=e.x,r=e.y,i=e.width,o=e.height),e.r?_c.buildPath(t,e):t.rect(n,r,i,o),t.closePath()}}),Ap=rp.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var n=.5522848,r=e.cx,i=e.cy,o=e.rx,a=e.ry,s=o*n,h=a*n;t.moveTo(r-o,i),t.bezierCurveTo(r-o,i-h,r-s,i-a,r,i-a),t.bezierCurveTo(r+s,i-a,r+o,i-h,r+o,i),t.bezierCurveTo(r+o,i+h,r+s,i+a,r,i+a),t.bezierCurveTo(r-s,i+a,r-o,i+h,r-o,i),t.closePath()}}),Ip=Dp.subPixelOptimizeLine,Lp={},Rp=rp.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n,r,i,o;this.subPixelOptimize?(Ip(Lp,e,this.style),n=Lp.x1,r=Lp.y1,i=Lp.x2,o=Lp.y2):(n=e.x1,r=e.y1,i=e.x2,o=e.y2);var a=e.percent;0!==a&&(t.moveTo(n,r),a<1&&(i=n*(1-a)+i*a,o=r*(1-a)+o*a),t.lineTo(i,o))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}}),zp=sh.distance;function Np(t,e,n,r,i,o,a){var s=.5*(n-t),h=.5*(r-e);return(2*(e-n)+s+h)*a+(-3*(e-n)-2*s-h)*o+s*i+e}var Fp=function(t,e){for(var n=t.length,r=[],i=0,o=1;o<n;o++)i+=zp(t[o-1],t[o]);var a=i/2;for(a=a<n?n:a,o=0;o<a;o++){var s,h,l,u=o/(a-1)*(e?n:n-1),c=Math.floor(u),f=u-c,d=t[c%n];e?(s=t[(c-1+n)%n],h=t[(c+1)%n],l=t[(c+2)%n]):(s=t[0===c?c:c-1],h=t[c>n-2?n-1:c+1],l=t[c>n-3?n-1:c+2]);var p=f*f,g=f*p;r.push([Np(s[0],d[0],h[0],l[0],f,p,g),Np(s[1],d[1],h[1],l[1],f,p,g)])}return r},jp=sh.min,Bp=sh.max,Wp=sh.scale,Hp=sh.distance,Gp=sh.add,Yp=sh.clone,Up=sh.sub;var Vp=function(t,e,n,r){var i,o,a,s,h=[],l=[],u=[],c=[];if(r){a=[1/0,1/0],s=[-1/0,-1/0];for(var f=0,d=t.length;f<d;f++)jp(a,a,t[f]),Bp(s,s,t[f]);jp(a,a,r[0]),Bp(s,s,r[1])}for(f=0,d=t.length;f<d;f++){var p=t[f];if(n)i=t[f?f-1:d-1],o=t[(f+1)%d];else{if(0===f||f===d-1){h.push(Yp(t[f]));continue}i=t[f-1],o=t[f+1]}Up(l,o,i),Wp(l,l,e);var g=Hp(p,i),v=Hp(p,o),_=g+v;0!==_&&(g/=_,v/=_),Wp(u,l,-g),Wp(c,l,v);var y=Gp([],p,u),m=Gp([],p,c);r&&(Bp(y,y,a),jp(y,y,s),Bp(m,m,a),jp(m,m,s)),h.push(y),h.push(m)}return n&&h.push(h.shift()),h};var Xp={buildPath:function(t,e,n){var r=e.points,i=e.smooth;if(r&&r.length>=2){if(i&&"spline"!==i){var o=Vp(r,i,n,e.smoothConstraint);t.moveTo(r[0][0],r[0][1]);for(var a=r.length,s=0;s<(n?a:a-1);s++){var h=o[2*s],l=o[2*s+1],u=r[(s+1)%a];t.bezierCurveTo(h[0],h[1],l[0],l[1],u[0],u[1])}}else{"spline"===i&&(r=Fp(r,n)),t.moveTo(r[0][0],r[0][1]);s=1;for(var c=r.length;s<c;s++)t.lineTo(r[s][0],r[s][1])}n&&t.closePath()}}},qp=rp.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){Xp.buildPath(t,e,!0)}}),Zp=rp.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){Xp.buildPath(t,e,!1)}}),Qp=function(t){this.colorStops=t||[]};Qp.prototype={constructor:Qp,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var Kp=Qp,$p=function(t,e,n,r,i,o){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==n?1:n,this.y2=null==r?0:r,this.type="linear",this.global=o||!1,Kp.call(this,i)};$p.prototype={constructor:$p},eh.inherits($p,Kp);var Jp=$p,tg=bp.createFromString,eg=eh.isString,ng=eh.extend,rg=eh.defaults,ig=eh.trim,og=eh.each,ag=/[\s,]+/;function sg(t){eg(t)&&(t=(new DOMParser).parseFromString(t,"text/xml"));for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}function hg(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}hg.prototype.parse=function(t,e){e=e||{};var n=sg(t);if(!n)throw new Error("Illegal svg");var r=new du;this._root=r;var i=n.getAttribute("viewBox")||"",o=parseFloat(n.getAttribute("width")||e.width),a=parseFloat(n.getAttribute("height")||e.height);isNaN(o)&&(o=null),isNaN(a)&&(a=null),pg(n,r,null,!0);for(var s,h,l=n.firstChild;l;)this._parseNode(l,r),l=l.nextSibling;if(i){var u=ig(i).split(ag);u.length>=4&&(s={x:parseFloat(u[0]||0),y:parseFloat(u[1]||0),width:parseFloat(u[2]),height:parseFloat(u[3])})}if(s&&null!=o&&null!=a&&(h=mg(s,o,a),!e.ignoreViewBox)){var c=r;(r=new du).add(c),c.scale=h.scale.slice(),c.position=h.position.slice()}return e.ignoreRootClip||null==o||null==a||r.setClipPath(new Op({shape:{x:0,y:0,width:o,height:a}})),{root:r,width:o,height:a,viewBoxRect:s,viewBoxTransform:h}},hg.prototype._parseNode=function(t,e){var n,r,i=t.nodeName.toLowerCase();if("defs"===i?this._isDefine=!0:"text"===i&&(this._isText=!0),this._isDefine){if(r=ug[i]){var o=r.call(this,t),a=t.getAttribute("id");a&&(this._defs[a]=o)}}else(r=lg[i])&&(n=r.call(this,t,e),e.add(n));for(var s=t.firstChild;s;)1===s.nodeType&&this._parseNode(s,n),3===s.nodeType&&this._isText&&this._parseText(s,n),s=s.nextSibling;"defs"===i?this._isDefine=!1:"text"===i&&(this._isText=!1)},hg.prototype._parseText=function(t,e){if(1===t.nodeType){var n=t.getAttribute("dx")||0,r=t.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(r)}var i=new Mp({style:{text:t.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});cg(e,i),pg(t,i,this._defs);var o=i.style.fontSize;o&&o<9&&(i.style.fontSize=9,i.scale=i.scale||[1,1],i.scale[0]*=o/9,i.scale[1]*=o/9);var a=i.getBoundingRect();return this._textX+=a.width,e.add(i),i};var lg={g:function(t,e){var n=new du;return cg(e,n),pg(t,n,this._defs),n},rect:function(t,e){var n=new Op;return cg(e,n),pg(t,n,this._defs),n.setShape({x:parseFloat(t.getAttribute("x")||0),y:parseFloat(t.getAttribute("y")||0),width:parseFloat(t.getAttribute("width")||0),height:parseFloat(t.getAttribute("height")||0)}),n},circle:function(t,e){var n=new kp;return cg(e,n),pg(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),r:parseFloat(t.getAttribute("r")||0)}),n},line:function(t,e){var n=new Rp;return cg(e,n),pg(t,n,this._defs),n.setShape({x1:parseFloat(t.getAttribute("x1")||0),y1:parseFloat(t.getAttribute("y1")||0),x2:parseFloat(t.getAttribute("x2")||0),y2:parseFloat(t.getAttribute("y2")||0)}),n},ellipse:function(t,e){var n=new Ap;return cg(e,n),pg(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),rx:parseFloat(t.getAttribute("rx")||0),ry:parseFloat(t.getAttribute("ry")||0)}),n},polygon:function(t,e){var n=t.getAttribute("points");n&&(n=fg(n));var r=new qp({shape:{points:n||[]}});return cg(e,r),pg(t,r,this._defs),r},polyline:function(t,e){var n=new rp;cg(e,n),pg(t,n,this._defs);var r=t.getAttribute("points");return r&&(r=fg(r)),new Zp({shape:{points:r||[]}})},image:function(t,e){var n=new tf;return cg(e,n),pg(t,n,this._defs),n.setStyle({image:t.getAttribute("xlink:href"),x:t.getAttribute("x"),y:t.getAttribute("y"),width:t.getAttribute("width"),height:t.getAttribute("height")}),n},text:function(t,e){var n=t.getAttribute("x")||0,r=t.getAttribute("y")||0,i=t.getAttribute("dx")||0,o=t.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(i),this._textY=parseFloat(r)+parseFloat(o);var a=new du;return cg(e,a),pg(t,a,this._defs),a},tspan:function(t,e){var n=t.getAttribute("x"),r=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=r&&(this._textY=parseFloat(r));var i=t.getAttribute("dx")||0,o=t.getAttribute("dy")||0,a=new du;return cg(e,a),pg(t,a,this._defs),this._textX+=i,this._textY+=o,a},path:function(t,e){var n=t.getAttribute("d")||"",r=tg(n);return cg(e,r),pg(t,r,this._defs),r}},ug={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||0,10),n=parseInt(t.getAttribute("y1")||0,10),r=parseInt(t.getAttribute("x2")||10,10),i=parseInt(t.getAttribute("y2")||0,10),o=new Jp(e,n,r,i);return function(t,e){var n=t.firstChild;for(;n;){if(1===n.nodeType){var r=n.getAttribute("offset");r=r.indexOf("%")>0?parseInt(r,10)/100:r?parseFloat(r):0;var i=n.getAttribute("stop-color")||"#000000";e.addColorStop(r,i)}n=n.nextSibling}}(t,o),o},radialgradient:function(t){}};function cg(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),rg(e.__inheritedStyle,t.__inheritedStyle))}function fg(t){for(var e=ig(t).split(ag),n=[],r=0;r<e.length;r+=2){var i=parseFloat(e[r]),o=parseFloat(e[r+1]);n.push([i,o])}return n}var dg={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function pg(t,e,n,r){var i=e.__inheritedStyle||{},o="text"===e.type;if(1===t.nodeType&&(function(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var r=null,i=[];n.replace(_g,(function(t,e,n){i.push(e,n)}));for(var o=i.length-1;o>0;o-=2){var a=i[o],s=i[o-1];switch(r=r||Hh.create(),s){case"translate":a=ig(a).split(ag),Hh.translate(r,r,[parseFloat(a[0]),parseFloat(a[1]||0)]);break;case"scale":a=ig(a).split(ag),Hh.scale(r,r,[parseFloat(a[0]),parseFloat(a[1]||a[0])]);break;case"rotate":a=ig(a).split(ag),Hh.rotate(r,r,parseFloat(a[0]));break;case"skew":a=ig(a).split(ag),console.warn("Skew transform is not supported yet");break;case"matrix":a=ig(a).split(ag);r[0]=parseFloat(a[0]),r[1]=parseFloat(a[1]),r[2]=parseFloat(a[2]),r[3]=parseFloat(a[3]),r[4]=parseFloat(a[4]),r[5]=parseFloat(a[5])}}e.setLocalTransform(r)}}(t,e),ng(i,function(t){var e=t.getAttribute("style"),n={};if(!e)return n;var r,i={};yg.lastIndex=0;for(;null!=(r=yg.exec(e));)i[r[1]]=r[2];for(var o in dg)dg.hasOwnProperty(o)&&null!=i[o]&&(n[dg[o]]=i[o]);return n}(t)),!r))for(var a in dg)if(dg.hasOwnProperty(a)){var s=t.getAttribute(a);null!=s&&(i[dg[a]]=s)}var h=o?"textFill":"fill",l=o?"textStroke":"stroke";e.style=e.style||new Lu;var u=e.style;null!=i.fill&&u.set(h,vg(i.fill,n)),null!=i.stroke&&u.set(l,vg(i.stroke,n)),og(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(t){var e="lineWidth"===t&&o?"textStrokeWidth":t;null!=i[t]&&u.set(e,parseFloat(i[t]))})),i.textBaseline&&"auto"!==i.textBaseline||(i.textBaseline="alphabetic"),"alphabetic"===i.textBaseline&&(i.textBaseline="bottom"),"start"===i.textAlign&&(i.textAlign="left"),"end"===i.textAlign&&(i.textAlign="right"),og(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],(function(t){null!=i[t]&&u.set(t,i[t])})),i.lineDash&&(e.style.lineDash=ig(i.lineDash).split(ag)),u[l]&&"none"!==u[l]&&(e[l]=!0),e.__inheritedStyle=i}var gg=/url\(\s*#(.*?)\)/;function vg(t,e){var n=e&&t&&t.match(gg);return n?e[ig(n[1])]:t}var _g=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g;var yg=/([^\s:;]+)\s*:\s*([^:;]+)/g;function mg(t,e,n){var r=e/t.width,i=n/t.height,o=Math.min(r,i);return{scale:[o,o],position:[-(t.x+t.width/2)*o+e/2,-(t.y+t.height/2)*o+n/2]}}var xg={parseXML:sg,makeViewBoxTransform:mg,parseSVG:function(t,e){return(new hg).parse(t,e)}},bg=rp.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,n=0;n<e.length;n++)t=t||e[n].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1],t[n].segmentIgnoreThreshold)},buildPath:function(t,e){for(var n=e.paths||[],r=0;r<n.length;r++)n[r].buildPath(t,n[r].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),rp.prototype.getBoundingRect.call(this)}}),wg=eh.inherits;function Sg(t){$c.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}Sg.prototype.incremental=!0,Sg.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},Sg.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.dirty()},Sg.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},Sg.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},Sg.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){(e=this._displayables[t]).parent=this,e.update(),e.parent=null}for(t=0;t<this._temporaryDisplayables.length;t++){var e;(e=this._temporaryDisplayables[t]).parent=this,e.update(),e.parent=null}},Sg.prototype.brush=function(t,e){for(var n=this._cursor;n<this._displayables.length;n++){(r=this._displayables[n]).beforeBrush&&r.beforeBrush(t),r.brush(t,n===this._cursor?null:this._displayables[n-1]),r.afterBrush&&r.afterBrush(t)}this._cursor=n;for(n=0;n<this._temporaryDisplayables.length;n++){var r;(r=this._temporaryDisplayables[n]).beforeBrush&&r.beforeBrush(t),r.brush(t,0===n?null:this._temporaryDisplayables[n-1]),r.afterBrush&&r.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0};var Mg=[];Sg.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new cu(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],r=n.getBoundingRect().clone();n.needLocalTransform()&&r.applyTransform(n.getLocalTransform(Mg)),t.union(r)}this._rect=t}return this._rect},Sg.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(n[0],n[1]))for(var r=0;r<this._displayables.length;r++){if(this._displayables[r].contain(t,e))return!0}return!1},wg(Sg,$c);var kg=Sg,Tg=rp.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.cx,r=e.cy,i=Math.max(e.r,0),o=e.startAngle,a=e.endAngle,s=e.clockwise,h=Math.cos(o),l=Math.sin(o);t.moveTo(h*i+n,l*i+r),t.arc(n,r,i,o,a,!s)}}),Eg=ad.quadraticSubdivide,Dg=ad.cubicSubdivide,Pg=ad.quadraticAt,Cg=ad.cubicAt,Og=ad.quadraticDerivativeAt,Ag=ad.cubicDerivativeAt,Ig=[];function Lg(t,e,n){var r=t.cpx2,i=t.cpy2;return null===r||null===i?[(n?Ag:Cg)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?Ag:Cg)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?Og:Pg)(t.x1,t.cpx1,t.x2,e),(n?Og:Pg)(t.y1,t.cpy1,t.y2,e)]}var Rg=rp.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.cpx1,s=e.cpy1,h=e.cpx2,l=e.cpy2,u=e.percent;0!==u&&(t.moveTo(n,r),null==h||null==l?(u<1&&(Eg(n,a,i,u,Ig),a=Ig[1],i=Ig[2],Eg(r,s,o,u,Ig),s=Ig[1],o=Ig[2]),t.quadraticCurveTo(a,s,i,o)):(u<1&&(Dg(n,a,h,i,u,Ig),a=Ig[1],h=Ig[2],i=Ig[3],Dg(r,s,l,o,u,Ig),s=Ig[1],l=Ig[2],o=Ig[3]),t.bezierCurveTo(a,s,h,l,i,o)))},pointAt:function(t){return Lg(this.shape,t,!1)},tangentAt:function(t){var e=Lg(this.shape,t,!0);return sh.normalize(e,e)}}),zg=rp.extend({type:"droplet",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width,o=e.height;t.moveTo(n,r+i),t.bezierCurveTo(n+i,r+i,n+3*i/2,r-i/3,n,r-o),t.bezierCurveTo(n-3*i/2,r-i/3,n-i,r+i,n,r+i),t.closePath()}}),Ng=rp.extend({type:"heart",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width,o=e.height;t.moveTo(n,r),t.bezierCurveTo(n+i/2,r-2*o/3,n+2*i,r+o/3,n,r+o),t.bezierCurveTo(n-2*i,r+o/3,n-i/2,r-2*o/3,n,r)}}),Fg=Math.PI,jg=Math.sin,Bg=Math.cos,Wg=rp.extend({type:"isogon",shape:{x:0,y:0,r:0,n:0},buildPath:function(t,e){var n=e.n;if(n&&!(n<2)){var r=e.x,i=e.y,o=e.r,a=2*Fg/n,s=-Fg/2;t.moveTo(r+o*Bg(s),i+o*jg(s));for(var h=0,l=n-1;h<l;h++)s+=a,t.lineTo(r+o*Bg(s),i+o*jg(s));t.closePath()}}}),Hg=rp.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=2*Math.PI;t.moveTo(n+e.r,r),t.arc(n,r,e.r,0,i,!1),t.moveTo(n+e.r0,r),t.arc(n,r,e.r0,0,i,!0)}}),Gg=Math.sin,Yg=Math.cos,Ug=Math.PI/180,Vg=rp.extend({type:"rose",shape:{cx:0,cy:0,r:[],k:0,n:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n,r,i,o=e.r,a=e.k,s=e.n,h=e.cx,l=e.cy;t.moveTo(h,l);for(var u=0,c=o.length;u<c;u++){i=o[u];for(var f=0;f<=360*s;f++)n=i*Gg(a/s*f%360*Ug)*Yg(f*Ug)+h,r=i*Gg(a/s*f%360*Ug)*Gg(f*Ug)+l,t.lineTo(n,r)}}}),Xg=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];var qg=function(t){return Cs.browser.ie&&Cs.browser.version>=11?function(){var e,n=this.__clipPaths,r=this.style;if(n)for(var i=0;i<n.length;i++){var o=n[i],a=o&&o.shape,s=o&&o.type;if(a&&("sector"===s&&a.startAngle===a.endAngle||"rect"===s&&(!a.width||!a.height))){for(var h=0;h<Xg.length;h++)Xg[h][2]=r[Xg[h][0]],r[Xg[h][0]]=Xg[h][1];e=!0;break}}if(t.apply(this,arguments),e)for(h=0;h<Xg.length;h++)r[Xg[h][0]]=Xg[h][2]}:t},Zg=rp.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:qg(rp.prototype.brush),buildPath:function(t,e){var n=e.cx,r=e.cy,i=Math.max(e.r0||0,0),o=Math.max(e.r,0),a=e.startAngle,s=e.endAngle,h=e.clockwise,l=Math.cos(a),u=Math.sin(a);t.moveTo(l*i+n,u*i+r),t.lineTo(l*o+n,u*o+r),t.arc(n,r,o,a,s,!h),t.lineTo(Math.cos(s)*i+n,Math.sin(s)*i+r),0!==i&&t.arc(n,r,i,s,a,h),t.closePath()}}),Qg=Math.PI,Kg=Math.cos,$g=Math.sin,Jg=rp.extend({type:"star",shape:{cx:0,cy:0,n:3,r0:null,r:0},buildPath:function(t,e){var n=e.n;if(n&&!(n<2)){var r=e.cx,i=e.cy,o=e.r,a=e.r0;null==a&&(a=n>4?o*Kg(2*Qg/n)/Kg(Qg/n):o/3);var s=Qg/n,h=-Qg/2,l=r+o*Kg(h),u=i+o*$g(h);h+=s,t.moveTo(l,u);for(var c,f=0,d=2*n-1;f<d;f++)c=f%2==0?a:o,t.lineTo(r+c*Kg(h),i+c*$g(h)),h+=s;t.closePath()}}}),tv=Math.cos,ev=Math.sin,nv=rp.extend({type:"trochoid",shape:{cx:0,cy:0,r:0,r0:0,d:0,location:"out"},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n,r,i,o,a=e.r,s=e.r0,h=e.d,l=e.cx,u=e.cy,c="out"===e.location?1:-1;if(!(e.location&&a<=s)){var f,d=0,p=1;n=(a+c*s)*tv(0)-c*h*tv(0)+l,r=(a+c*s)*ev(0)-h*ev(0)+u,t.moveTo(n,r);do{d++}while(s*d%(a+c*s)!=0);do{f=Math.PI/180*p,i=(a+c*s)*tv(f)-c*h*tv((a/s+c)*f)+l,o=(a+c*s)*ev(f)-h*ev((a/s+c)*f)+u,t.lineTo(i,o),p++}while(p<=s*d/(a+c*s)*360)}}}),rv=function(t,e,n,r,i){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==n?.5:n,this.type="radial",this.global=i||!1,Kp.call(this,r)};rv.prototype={constructor:rv},eh.inherits(rv,Kp);var iv={util:eh,matrix:Hh,vector:sh,color:kl,path:bp,parseSVG:xg.parseSVG,Group:du,Path:rp,Image:tf,CompoundPath:bg,Text:Mp,IncrementalDisplayable:kg,Arc:Tg,BezierCurve:Rg,Circle:kp,Droplet:zg,Ellipse:Ap,Heart:Ng,Isogon:Wg,Line:Rp,Polygon:qp,Polyline:Zp,Rect:Op,Ring:Hg,Rose:Vg,Sector:Zg,Star:Jg,Trochoid:nv,LinearGradient:Jp,RadialGradient:rv,Pattern:zu,BoundingRect:cu};var ov={createElement:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}},av=ov.createElement,sv=Ad.CMD,hv=Array.prototype.join,lv="none",uv=Math.round,cv=Math.sin,fv=Math.cos,dv=Math.PI,pv=2*Math.PI,gv=180/dv,vv=1e-4;function _v(t){return uv(1e4*t)/1e4}function yv(t){return t<vv&&t>-1e-4}function mv(t,e){e&&xv(t,"transform","matrix("+hv.call(e,",")+")")}function xv(t,e,n){(!n||"linear"!==n.type&&"radial"!==n.type)&&t.setAttribute(e,n)}function bv(t,e,n,r){if(function(t,e){var n=e?t.textFill:t.fill;return null!=n&&n!==lv}(e,n)){var i=n?e.textFill:e.fill;xv(t,"fill",i="transparent"===i?lv:i),xv(t,"fill-opacity",null!=e.fillOpacity?e.fillOpacity*e.opacity:e.opacity)}else xv(t,"fill",lv);if(function(t,e){var n=e?t.textStroke:t.stroke;return null!=n&&n!==lv}(e,n)){var o=n?e.textStroke:e.stroke;xv(t,"stroke",o="transparent"===o?lv:o),xv(t,"stroke-width",(n?e.textStrokeWidth:e.lineWidth)/(!n&&e.strokeNoScale?r.getLineScale():1)),xv(t,"paint-order",n?"stroke":"fill"),xv(t,"stroke-opacity",null!=e.strokeOpacity?e.strokeOpacity:e.opacity),e.lineDash?(xv(t,"stroke-dasharray",e.lineDash.join(",")),xv(t,"stroke-dashoffset",uv(e.lineDashOffset||0))):xv(t,"stroke-dasharray",""),e.lineCap&&xv(t,"stroke-linecap",e.lineCap),e.lineJoin&&xv(t,"stroke-linejoin",e.lineJoin),e.miterLimit&&xv(t,"stroke-miterlimit",e.miterLimit)}else xv(t,"stroke",lv)}var wv={};wv.brush=function(t){var e=t.style,n=t.__svgEl;n||(n=av("path"),t.__svgEl=n),t.path||t.createPathProxy();var r=t.path;if(t.__dirtyPath){r.beginPath(),r.subPixelOptimize=!1,t.buildPath(r,t.shape),t.__dirtyPath=!1;var i=function(t){for(var e=[],n=t.data,r=t.len(),i=0;i<r;){var o="",a=0;switch(n[i++]){case sv.M:o="M",a=2;break;case sv.L:o="L",a=2;break;case sv.Q:o="Q",a=4;break;case sv.C:o="C",a=6;break;case sv.A:var s=n[i++],h=n[i++],l=n[i++],u=n[i++],c=n[i++],f=n[i++],d=n[i++],p=n[i++],g=Math.abs(f),v=yv(g-pv)||(p?f>=pv:-f>=pv),_=f>0?f%pv:f%pv+pv,y=!1;y=!!v||!yv(g)&&_>=dv==!!p;var m=_v(s+l*fv(c)),x=_v(h+u*cv(c));v&&(f=p?pv-1e-4:1e-4-pv,y=!0,9===i&&e.push("M",m,x));var b=_v(s+l*fv(c+f)),w=_v(h+u*cv(c+f));e.push("A",_v(l),_v(u),uv(d*gv),+y,+p,b,w);break;case sv.Z:o="Z";break;case sv.R:b=_v(n[i++]),w=_v(n[i++]);var S=_v(n[i++]),M=_v(n[i++]);e.push("M",b,w,"L",b+S,w,"L",b+S,w+M,"L",b,w+M,"L",b,w)}o&&e.push(o);for(var k=0;k<a;k++)e.push(_v(n[i++]))}return e.join(" ")}(r);i.indexOf("NaN")<0&&xv(n,"d",i)}bv(n,e,!1,t),mv(n,t.transform),null!=e.text?Pv(t,t.getBoundingRect()):Ov(t)};var Sv={brush:function(t){var e=t.style,n=e.image;n instanceof HTMLImageElement&&(n=n.src);if(n){var r=e.x||0,i=e.y||0,o=e.width,a=e.height,s=t.__svgEl;s||(s=av("image"),t.__svgEl=s),n!==t.__imageSrc&&(!function(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}(s,"href",n),t.__imageSrc=n),xv(s,"width",o),xv(s,"height",a),xv(s,"x",r),xv(s,"y",i),mv(s,t.transform),null!=e.text?Pv(t,t.getBoundingRect()):Ov(t)}}},Mv={},kv=new cu,Tv={},Ev=[],Dv={left:"start",right:"end",center:"middle",middle:"middle"},Pv=function(t,e){var n=t.style,r=t.transform,i=t instanceof Mp||n.transformText;t.__dirty&&Vc.normalizeTextStyle(n,!0);var o=n.text;if(null!=o&&(o+=""),Vc.needDrawText(o,n)){null==o&&(o=""),!i&&r&&(kv.copy(e),kv.applyTransform(r),e=kv);var a=t.__textSvgEl;a||(a=av("text"),t.__textSvgEl=a);var s=a.style,h=n.font||vc.DEFAULT_FONT,l=a.__computedFont;h!==a.__styleFont&&(s.font=a.__styleFont=h,l=a.__computedFont=s.font);var u=n.textPadding,c=n.textLineHeight,f=t.__textCotentBlock;f&&!t.__dirtyText||(f=t.__textCotentBlock=vc.parsePlainText(o,l,u,c,n.truncate));var d=f.outerHeight,p=f.lineHeight;Vc.getBoxPosition(Tv,t,n,e);var g=Tv.baseX,v=Tv.baseY,_=Tv.textAlign||"left",y=Tv.textVerticalAlign;!function(t,e,n,r,i,o,a){Hh.identity(Ev),e&&n&&Hh.copy(Ev,n);var s=r.textRotation;if(i&&s){var h=r.textOrigin;"center"===h?(o=i.width/2+i.x,a=i.height/2+i.y):h&&(o=h[0]+i.x,a=h[1]+i.y),Ev[4]-=o,Ev[5]-=a,Hh.rotate(Ev,Ev,s),Ev[4]+=o,Ev[5]+=a}mv(t,Ev)}(a,i,r,n,e,g,v);var m=g,x=vc.adjustTextY(v,d,y);u&&(m=function(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}(g,_,u),x+=u[0]),x+=p/2,bv(a,n,!0,t);var b=f.canCacheByTextString,w=t.__tspanList||(t.__tspanList=[]),S=w.length;if(b&&t.__canCacheByTextString&&t.__text===o){if(t.__dirtyText&&S)for(var M=0;M<S;++M)Cv(w[M],_,m,x+M*p)}else{t.__text=o,t.__canCacheByTextString=b;var k=f.lines,T=k.length;for(M=0;M<T;M++){var E=w[M],D=k[M];E?E.__zrText!==D&&(E.innerHTML="",E.appendChild(document.createTextNode(D))):(E=w[M]=av("tspan"),a.appendChild(E),E.appendChild(document.createTextNode(D))),Cv(E,_,m,x+M*p)}if(S>T){for(;M<S;M++)a.removeChild(w[M]);w.length=T}}}};function Cv(t,e,n,r){xv(t,"dominant-baseline","middle"),xv(t,"text-anchor",Dv[e]),xv(t,"x",n),xv(t,"y",r)}function Ov(t){t&&t.__textSvgEl&&(t.__textSvgEl.parentNode&&t.__textSvgEl.parentNode.removeChild(t.__textSvgEl),t.__textSvgEl=null,t.__tspanList=[],t.__text=null)}Mv.drawRectText=Pv,Mv.brush=function(t){null!=t.style.text?Pv(t,!1):Ov(t)};var Av={path:wv,image:Sv,text:Mv};function Iv(){}function Lv(t,e,n,r){for(var i=0,o=e.length,a=0,s=0;i<o;i++){var h=e[i];if(h.removed){for(l=[],u=s;u<s+h.count;u++)l.push(u);h.indices=l,s+=h.count}else{for(var l=[],u=a;u<a+h.count;u++)l.push(u);h.indices=l,a+=h.count,h.added||(s+=h.count)}}return e}function Rv(t){return{newPos:t.newPos,components:t.components.slice(0)}}Iv.prototype={diff:function(t,e,n){n||(n=function(t,e){return t===e}),this.equals=n;var r=this;t=t.slice();var i=(e=e.slice()).length,o=t.length,a=1,s=i+o,h=[{newPos:-1,components:[]}],l=this.extractCommon(h[0],e,t,0);if(h[0].newPos+1>=i&&l+1>=o){for(var u=[],c=0;c<e.length;c++)u.push(c);return[{indices:u,count:e.length}]}function f(){for(var n=-1*a;n<=a;n+=2){var s,l=h[n-1],u=h[n+1],c=(u?u.newPos:0)-n;l&&(h[n-1]=void 0);var f=l&&l.newPos+1<i,d=u&&0<=c&&c<o;if(f||d){if(!f||d&&l.newPos<u.newPos?(s=Rv(u),r.pushComponent(s.components,void 0,!0)):((s=l).newPos++,r.pushComponent(s.components,!0,void 0)),c=r.extractCommon(s,e,t,n),s.newPos+1>=i&&c+1>=o)return Lv(r,s.components);h[n]=s}else h[n]=void 0}a++}for(;a<=s;){var d=f();if(d)return d}},pushComponent:function(t,e,n){var r=t[t.length-1];r&&r.added===e&&r.removed===n?t[t.length-1]={count:r.count+1,added:e,removed:n}:t.push({count:1,added:e,removed:n})},extractCommon:function(t,e,n,r){for(var i=e.length,o=n.length,a=t.newPos,s=a-r,h=0;a+1<i&&s+1<o&&this.equals(e[a+1],n[s+1]);)a++,s++,h++;return h&&t.components.push({count:h}),t.newPos=a,s},tokenize:function(t){return t.slice()},join:function(t){return t.slice()}};var zv=new Iv;var Nv=function(t,e,n){return zv.diff(t,e,n)},Fv=ov.createElement,jv=Av.path,Bv=Av.image,Wv=Av.text;function Hv(t,e,n,r,i){this._zrId=t,this._svgRoot=e,this._tagNames="string"==typeof n?[n]:n,this._markLabel=r,this._domName=i||"_dom",this.nextId=0}Hv.prototype.createElement=Fv,Hv.prototype.getDefs=function(t){var e=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?t?((n=e.insertBefore(this.createElement("defs"),e.firstChild)).contains||(n.contains=function(t){var e=n.children;if(!e)return!1;for(var r=e.length-1;r>=0;--r)if(e[r]===t)return!0;return!1}),n):null:n[0]},Hv.prototype.update=function(t,e){if(t){var n=this.getDefs(!1);if(t[this._domName]&&n.contains(t[this._domName]))"function"==typeof e&&e(t);else{var r=this.add(t);r&&(t[this._domName]=r)}}},Hv.prototype.addDom=function(t){this.getDefs(!0).appendChild(t)},Hv.prototype.removeDom=function(t){var e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},Hv.prototype.getDoms=function(){var t=this.getDefs(!1);if(!t)return[];var e=[];return eh.each(this._tagNames,(function(n){var r=t.getElementsByTagName(n);e=e.concat([].slice.call(r))})),e},Hv.prototype.markAllUnused=function(){var t=this.getDoms(),e=this;eh.each(t,(function(t){t[e._markLabel]="0"}))},Hv.prototype.markUsed=function(t){t&&(t[this._markLabel]="1")},Hv.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this.getDoms(),n=this;eh.each(e,(function(e){"1"!==e[n._markLabel]&&t.removeChild(e)}))}},Hv.prototype.getSvgProxy=function(t){return t instanceof rp?jv:t instanceof tf?Bv:t instanceof Mp?Wv:jv},Hv.prototype.getTextSvgElement=function(t){return t.__textSvgEl},Hv.prototype.getSvgElement=function(t){return t.__svgEl};var Gv=Hv;function Yv(t,e){Gv.call(this,t,e,["linearGradient","radialGradient"],"__gradient_in_use__")}eh.inherits(Yv,Gv),Yv.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;eh.each(["fill","stroke"],(function(r){if(e.style[r]&&("linear"===e.style[r].type||"radial"===e.style[r].type)){var i,o=e.style[r],a=n.getDefs(!0);o._dom?(i=o._dom,a.contains(o._dom)||n.addDom(i)):i=n.add(o),n.markUsed(e);var s=i.getAttribute("id");t.setAttribute(r,"url(#"+s+")")}}))}},Yv.prototype.add=function(t){var e;if("linear"===t.type)e=this.createElement("linearGradient");else{if("radial"!==t.type)return null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},Yv.prototype.update=function(t){var e=this;Gv.prototype.update.call(this,t,(function(){var n=t.type,r=t._dom.tagName;"linear"===n&&"linearGradient"===r||"radial"===n&&"radialGradient"===r?e.updateDom(t,t._dom):(e.removeDom(t),e.add(t))}))},Yv.prototype.updateDom=function(t,e){if("linear"===t.type)e.setAttribute("x1",t.x),e.setAttribute("y1",t.y),e.setAttribute("x2",t.x2),e.setAttribute("y2",t.y2);else{if("radial"!==t.type)return;e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("r",t.r)}t.global?e.setAttribute("gradientUnits","userSpaceOnUse"):e.setAttribute("gradientUnits","objectBoundingBox"),e.innerHTML="";for(var n=t.colorStops,r=0,i=n.length;r<i;++r){var o=this.createElement("stop");o.setAttribute("offset",100*n[r].offset+"%");var a=n[r].color;if(a.indexOf(!1)){var s=kl.parse(a)[3],h=kl.toHex(a);o.setAttribute("stop-color","#"+h),o.setAttribute("stop-opacity",s)}else o.setAttribute("stop-color",n[r].color);e.appendChild(o)}t._dom=e},Yv.prototype.markUsed=function(t){if(t.style){var e=t.style.fill;e&&e._dom&&Gv.prototype.markUsed.call(this,e._dom),(e=t.style.stroke)&&e._dom&&Gv.prototype.markUsed.call(this,e._dom)}};var Uv=Yv;function Vv(t,e){Gv.call(this,t,e,"clipPath","__clippath_in_use__")}eh.inherits(Vv,Gv),Vv.prototype.update=function(t){var e=this.getSvgElement(t);e&&this.updateDom(e,t.__clipPaths,!1);var n=this.getTextSvgElement(t);n&&this.updateDom(n,t.__clipPaths,!0),this.markUsed(t)},Vv.prototype.updateDom=function(t,e,n){if(e&&e.length>0){var r,i,o=this.getDefs(!0),a=e[0],s=n?"_textDom":"_dom";a[s]?(i=a[s].getAttribute("id"),r=a[s],o.contains(r)||o.appendChild(r)):(i="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(r=this.createElement("clipPath")).setAttribute("id",i),o.appendChild(r),a[s]=r);var h=this.getSvgProxy(a);if(a.transform&&a.parent.invTransform&&!n){var l=Array.prototype.slice.call(a.transform);Hh.mul(a.transform,a.parent.invTransform,a.transform),h.brush(a),a.transform=l}else h.brush(a);var u=this.getSvgElement(a);r.innerHTML="",r.appendChild(u.cloneNode()),t.setAttribute("clip-path","url(#"+i+")"),e.length>1&&this.updateDom(r,e.slice(1),n)}else t&&t.setAttribute("clip-path","none")},Vv.prototype.markUsed=function(t){var e=this;t.__clipPaths&&eh.each(t.__clipPaths,(function(t){t._dom&&Gv.prototype.markUsed.call(e,t._dom),t._textDom&&Gv.prototype.markUsed.call(e,t._textDom)}))};var Xv=Vv;function qv(t,e){Gv.call(this,t,e,["filter"],"__filter_in_use__","_shadowDom")}function Zv(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY||t.textShadowBlur||t.textShadowOffsetX||t.textShadowOffsetY)}eh.inherits(qv,Gv),qv.prototype.addWithoutUpdate=function(t,e){if(e&&Zv(e.style)){var n;if(e._shadowDom)n=e._shadowDom,this.getDefs(!0).contains(e._shadowDom)||this.addDom(n);else n=this.add(e);this.markUsed(e);var r=n.getAttribute("id");t.style.filter="url(#"+r+")"}},qv.prototype.add=function(t){var e=this.createElement("filter");return t._shadowDomId=t._shadowDomId||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-shadow-"+t._shadowDomId),this.updateDom(t,e),this.addDom(e),e},qv.prototype.update=function(t,e){if(Zv(e.style)){var n=this;Gv.prototype.update.call(this,e,(function(){n.updateDom(e,e._shadowDom)}))}else this.remove(t,e)},qv.prototype.remove=function(t,e){null!=e._shadowDomId&&(this.removeDom(t),t.style.filter="")},qv.prototype.updateDom=function(t,e){var n=e.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var r,i,o,a,s=t.style,h=t.scale&&t.scale[0]||1,l=t.scale&&t.scale[1]||1;if(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)r=s.shadowOffsetX||0,i=s.shadowOffsetY||0,o=s.shadowBlur,a=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(e,s);r=s.textShadowOffsetX||0,i=s.textShadowOffsetY||0,o=s.textShadowBlur,a=s.textShadowColor}n.setAttribute("dx",r/h),n.setAttribute("dy",i/l),n.setAttribute("flood-color",a);var u=o/2/h+" "+o/2/l;n.setAttribute("stdDeviation",u),e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width",Math.ceil(o/2*200)+"%"),e.setAttribute("height",Math.ceil(o/2*200)+"%"),e.appendChild(n),t._shadowDom=e},qv.prototype.markUsed=function(t){t._shadowDom&&Gv.prototype.markUsed.call(this,t._shadowDom)};var Qv=qv,Kv=ov.createElement,$v=Av.path,Jv=Av.image,t_=Av.text;function e_(t){return parseInt(t,10)}function n_(t,e){return e&&t&&e.parentNode!==t}function r_(t,e,n){if(n_(t,e)&&n){var r=n.nextSibling;r?t.insertBefore(e,r):t.appendChild(e)}}function i_(t,e){if(n_(t,e)){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}}function o_(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function a_(t){return t.__textSvgEl}function s_(t){return t.__svgEl}var h_=function(t,e,n,r){this.root=t,this.storage=e,this._opts=n=eh.extend({},n||{});var i=Kv("svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("version","1.1"),i.setAttribute("baseProfile","full"),i.style.cssText="user-select:none;position:absolute;left:0;top:0;",this.gradientManager=new Uv(r,i),this.clipPathManager=new Xv(r,i),this.shadowManager=new Qv(r,i);var o=document.createElement("div");o.style.cssText="overflow:hidden;position:relative",this._svgRoot=i,this._viewport=o,t.appendChild(o),o.appendChild(i),this.resize(n.width,n.height),this._visibleList=[]};h_.prototype={constructor:h_,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},setBackgroundColor:function(t){this._viewport.style.background=t},_paintList:function(t){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var e,n,r=this._svgRoot,i=this._visibleList,o=t.length,a=[];for(e=0;e<o;e++){var s=t[e],h=(n=s)instanceof rp?$v:n instanceof tf?Jv:n instanceof Mp?t_:$v,l=s_(s)||a_(s);s.invisible||(s.__dirty&&(h&&h.brush(s),this.clipPathManager.update(s),s.style&&(this.gradientManager.update(s.style.fill),this.gradientManager.update(s.style.stroke),this.shadowManager.update(l,s)),s.__dirty=!1),a.push(s))}var u,c=Nv(i,a);for(e=0;e<c.length;e++){if((p=c[e]).removed)for(var f=0;f<p.count;f++){l=s_(s=i[p.indices[f]]);var d=a_(s);o_(r,l),o_(r,d)}}for(e=0;e<c.length;e++){var p;if((p=c[e]).added)for(f=0;f<p.count;f++){l=s_(s=a[p.indices[f]]),d=a_(s);u?r_(r,l,u):i_(r,l),l?r_(r,d,l):u?r_(r,d,u):i_(r,d),r_(r,d,l),u=d||l||u,this.gradientManager.addWithoutUpdate(l||d,s),this.shadowManager.addWithoutUpdate(l||d,s),this.clipPathManager.markUsed(s)}else if(!p.removed)for(f=0;f<p.count;f++){l=s_(s=a[p.indices[f]]),d=a_(s),l=s_(s),d=a_(s);this.gradientManager.markUsed(s),this.gradientManager.addWithoutUpdate(l||d,s),this.shadowManager.markUsed(s),this.shadowManager.addWithoutUpdate(l||d,s),this.clipPathManager.markUsed(s),d&&r_(r,d,l),u=l||d||u}}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=a},_getDefs:function(t){var e,n=this._svgRoot;return 0===(e=this._svgRoot.getElementsByTagName("defs")).length?t?((e=n.insertBefore(Kv("defs"),n.firstChild)).contains||(e.contains=function(t){var n=e.children;if(!n)return!1;for(var r=n.length-1;r>=0;--r)if(n[r]===t)return!0;return!1}),e):null:e[0]},resize:function(t,e){var n=this._viewport;n.style.display="none";var r=this._opts;if(null!=t&&(r.width=t),null!=e&&(r.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var i=n.style;i.width=t+"px",i.height=e+"px";var o=this._svgRoot;o.setAttribute("width",t),o.setAttribute("height",e)}},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],r=["clientWidth","clientHeight"][t],i=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[r]||e_(s[n])||e_(a.style[n]))-(e_(s[i])||0)-(e_(s[o])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},pathToDataUrl:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+this._svgRoot.outerHTML}},eh.each(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],(function(t){h_.prototype[t]=function(){}}));var l_=h_;(0,Yf.registerPainter)("svg",l_);var u_,c_="urn:schemas-microsoft-com:vml",f_="undefined"==typeof window?null:window,d_=!1,p_=f_&&f_.document;if(p_&&!Cs.canvasSupported)try{!p_.namespaces.zrvml&&p_.namespaces.add("zrvml",c_),u_=function(t){return p_.createElement("<zrvml:"+t+' class="zrvml">')}}catch(t){u_=function(t){return p_.createElement("<"+t+' xmlns="'+c_+'" class="zrvml">')}}var g_={doc:p_,createNode:function(t){return u_(t)},initVML:function(){if(!d_&&p_){d_=!0;var t=p_.styleSheets;t.length<31?p_.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):t[0].addRule(".zrvml","behavior:url(#default#VML)")}}},v_=sh.applyTransform,__=Ad.CMD,y_=Math.round,m_=Math.sqrt,x_=Math.abs,b_=Math.cos,w_=Math.sin,S_=Math.max;if(!Cs.canvasSupported){var M_=",",k_="progid:DXImageTransform.Microsoft",T_=21600,E_=T_/2,D_=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=T_+","+T_,t.coordorigin="0,0"},P_=function(t,e,n){return"rgb("+[t,e,n].join(",")+")"},C_=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},O_=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},A_=function(t,e,n){return 1e5*(parseFloat(t)||0)+1e3*(parseFloat(e)||0)+n},I_=Vc.parsePercent,L_=function(t,e,n){var r=kl.parse(e);n=+n,isNaN(n)&&(n=1),r&&(t.color=P_(r[0],r[1],r[2]),t.opacity=n*r[3])},R_=function(t){var e=kl.parse(t);return[P_(e[0],e[1],e[2]),e[3]]},z_=function(t,e,n,r){var i="fill"===e,o=t.getElementsByTagName(e)[0];null!=n[e]&&"none"!==n[e]&&(i||!i&&n.lineWidth)?(t[i?"filled":"stroked"]="true",n[e]instanceof Kp&&O_(t,o),o||(o=g_.createNode(e)),i?function(t,e,n){var r=e.fill;if(null!=r)if(r instanceof Kp){var i,o=0,a=[0,0],s=0,h=1,l=n.getBoundingRect(),u=l.width,c=l.height;if("linear"===r.type){i="gradient";var f=n.transform,d=[r.x*u,r.y*c],p=[r.x2*u,r.y2*c];f&&(v_(d,d,f),v_(p,p,f));var g=p[0]-d[0],v=p[1]-d[1];(o=180*Math.atan2(g,v)/Math.PI)<0&&(o+=360),o<1e-6&&(o=0)}else{i="gradientradial",d=[r.x*u,r.y*c],f=n.transform;var _=n.scale,y=u,m=c;a=[(d[0]-l.x)/y,(d[1]-l.y)/m],f&&v_(d,d,f),y/=_[0]*T_,m/=_[1]*T_;var x=S_(y,m);s=0/x,h=2*r.r/x-s}var b=r.colorStops.slice();b.sort((function(t,e){return t.offset-e.offset}));for(var w=b.length,S=[],M=[],k=0;k<w;k++){var T=b[k],E=R_(T.color);M.push(T.offset*h+s+" "+E[0]),0!==k&&k!==w-1||S.push(E)}if(w>=2){var D=S[0][0],P=S[1][0],C=S[0][1]*e.opacity,O=S[1][1]*e.opacity;t.type=i,t.method="none",t.focus="100%",t.angle=o,t.color=D,t.color2=P,t.colors=M.join(","),t.opacity=O,t.opacity2=C}"radial"===i&&(t.focusposition=a.join(","))}else L_(t,r,e.opacity)}(o,n,r):function(t,e){e.lineDash&&(t.dashstyle=e.lineDash.join(" ")),null==e.stroke||e.stroke instanceof Kp||L_(t,e.stroke,e.opacity)}(o,n),C_(t,o)):(t[i?"filled":"stroked"]="false",O_(t,o))},N_=[[],[],[]];rp.prototype.brushVML=function(t){var e=this.style,n=this._vmlEl;n||(n=g_.createNode("shape"),D_(n),this._vmlEl=n),z_(n,"fill",e,this),z_(n,"stroke",e,this);var r=this.transform,i=null!=r,o=n.getElementsByTagName("stroke")[0];if(o){var a=e.lineWidth;if(i&&!e.strokeNoScale){var s=r[0]*r[3]-r[1]*r[2];a*=m_(x_(s))}o.weight=a+"px"}var h=this.path||(this.path=new Ad);this.__dirtyPath&&(h.beginPath(),h.subPixelOptimize=!1,this.buildPath(h,this.shape),h.toStatic(),this.__dirtyPath=!1),n.path=function(t,e){var n,r,i,o,a,s,h=__.M,l=__.C,u=__.L,c=__.A,f=__.Q,d=[],p=t.data,g=t.len();for(o=0;o<g;){switch(r="",n=0,i=p[o++]){case h:r=" m ",n=1,a=p[o++],s=p[o++],N_[0][0]=a,N_[0][1]=s;break;case u:r=" l ",n=1,a=p[o++],s=p[o++],N_[0][0]=a,N_[0][1]=s;break;case f:case l:r=" c ",n=3;var v,_,y=p[o++],m=p[o++],x=p[o++],b=p[o++];i===f?(v=x,_=b,x=(x+2*y)/3,b=(b+2*m)/3,y=(a+2*y)/3,m=(s+2*m)/3):(v=p[o++],_=p[o++]),N_[0][0]=y,N_[0][1]=m,N_[1][0]=x,N_[1][1]=b,N_[2][0]=v,N_[2][1]=_,a=v,s=_;break;case c:var w=0,S=0,M=1,k=1,T=0;e&&(w=e[4],S=e[5],M=m_(e[0]*e[0]+e[1]*e[1]),k=m_(e[2]*e[2]+e[3]*e[3]),T=Math.atan2(-e[1]/k,e[0]/M));var E=p[o++],D=p[o++],P=p[o++],C=p[o++],O=p[o++]+T,A=p[o++]+O+T;o++;var I=p[o++],L=E+b_(O)*P,R=D+w_(O)*C,z=(y=E+b_(A)*P,m=D+w_(A)*C,I?" wa ":" at ");Math.abs(L-y)<1e-4&&(Math.abs(A-O)>.01?I&&(L+=270/T_):Math.abs(R-D)<1e-4?I&&L<E||!I&&L>E?m-=270/T_:m+=270/T_:I&&R<D||!I&&R>D?y+=270/T_:y-=270/T_),d.push(z,y_(((E-P)*M+w)*T_-E_),M_,y_(((D-C)*k+S)*T_-E_),M_,y_(((E+P)*M+w)*T_-E_),M_,y_(((D+C)*k+S)*T_-E_),M_,y_((L*M+w)*T_-E_),M_,y_((R*k+S)*T_-E_),M_,y_((y*M+w)*T_-E_),M_,y_((m*k+S)*T_-E_)),a=y,s=m;break;case __.R:var N=N_[0],F=N_[1];N[0]=p[o++],N[1]=p[o++],F[0]=N[0]+p[o++],F[1]=N[1]+p[o++],e&&(v_(N,N,e),v_(F,F,e)),N[0]=y_(N[0]*T_-E_),F[0]=y_(F[0]*T_-E_),N[1]=y_(N[1]*T_-E_),F[1]=y_(F[1]*T_-E_),d.push(" m ",N[0],M_,N[1]," l ",F[0],M_,N[1]," l ",F[0],M_,F[1]," l ",N[0],M_,F[1]);break;case __.Z:d.push(" x ")}if(n>0){d.push(r);for(var j=0;j<n;j++){var B=N_[j];e&&v_(B,B,e),d.push(y_(B[0]*T_-E_),M_,y_(B[1]*T_-E_),j<n-1?M_:"")}}}return d.join("")}(h,this.transform),n.style.zIndex=A_(this.zlevel,this.z,this.z2),C_(t,n),null!=e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},rp.prototype.onRemove=function(t){O_(t,this._vmlEl),this.removeRectText(t)},rp.prototype.onAdd=function(t){C_(t,this._vmlEl),this.appendRectText(t)};tf.prototype.brushVML=function(t){var e,n,r,i=this.style,o=i.image;if("object"==typeof(r=o)&&r.tagName&&"IMG"===r.tagName.toUpperCase()){var a=o.src;if(a===this._imageSrc)e=this._imageWidth,n=this._imageHeight;else{var s=o.runtimeStyle,h=s.width,l=s.height;s.width="auto",s.height="auto",e=o.width,n=o.height,s.width=h,s.height=l,this._imageSrc=a,this._imageWidth=e,this._imageHeight=n}o=a}else o===this._imageSrc&&(e=this._imageWidth,n=this._imageHeight);if(o){var u=i.x||0,c=i.y||0,f=i.width,d=i.height,p=i.sWidth,g=i.sHeight,v=i.sx||0,_=i.sy||0,y=p&&g,m=this._vmlEl;m||(m=g_.doc.createElement("div"),D_(m),this._vmlEl=m);var x,b=m.style,w=!1,S=1,M=1;if(this.transform&&(x=this.transform,S=m_(x[0]*x[0]+x[1]*x[1]),M=m_(x[2]*x[2]+x[3]*x[3]),w=x[1]||x[2]),w){var k=[u,c],T=[u+f,c],E=[u,c+d],D=[u+f,c+d];v_(k,k,x),v_(T,T,x),v_(E,E,x),v_(D,D,x);var P=S_(k[0],T[0],E[0],D[0]),C=S_(k[1],T[1],E[1],D[1]),O=[];O.push("M11=",x[0]/S,M_,"M12=",x[2]/M,M_,"M21=",x[1]/S,M_,"M22=",x[3]/M,M_,"Dx=",y_(u*S+x[4]),M_,"Dy=",y_(c*M+x[5])),b.padding="0 "+y_(P)+"px "+y_(C)+"px 0",b.filter=k_+".Matrix("+O.join("")+", SizingMethod=clip)"}else x&&(u=u*S+x[4],c=c*M+x[5]),b.filter="",b.left=y_(u)+"px",b.top=y_(c)+"px";var A=this._imageEl,I=this._cropEl;A||(A=g_.doc.createElement("div"),this._imageEl=A);var L=A.style;if(y){if(e&&n)L.width=y_(S*e*f/p)+"px",L.height=y_(M*n*d/g)+"px";else{var R=new Image,z=this;R.onload=function(){R.onload=null,e=R.width,n=R.height,L.width=y_(S*e*f/p)+"px",L.height=y_(M*n*d/g)+"px",z._imageWidth=e,z._imageHeight=n,z._imageSrc=o},R.src=o}I||((I=g_.doc.createElement("div")).style.overflow="hidden",this._cropEl=I);var N=I.style;N.width=y_((f+v*f/p)*S),N.height=y_((d+_*d/g)*M),N.filter=k_+".Matrix(Dx="+-v*f/p*S+",Dy="+-_*d/g*M+")",I.parentNode||m.appendChild(I),A.parentNode!==I&&I.appendChild(A)}else L.width=y_(S*f)+"px",L.height=y_(M*d)+"px",m.appendChild(A),I&&I.parentNode&&(m.removeChild(I),this._cropEl=null);var F="",j=i.opacity;j<1&&(F+=".Alpha(opacity="+y_(100*j)+") "),F+=k_+".AlphaImageLoader(src="+o+", SizingMethod=scale)",L.filter=F,m.style.zIndex=A_(this.zlevel,this.z,this.z2),C_(t,m),null!=i.text&&this.drawRectText(t,this.getBoundingRect())}},tf.prototype.onRemove=function(t){O_(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},tf.prototype.onAdd=function(t){C_(t,this._vmlEl),this.appendRectText(t)};var F_,j_="normal",B_={},W_=0,H_=document.createElement("div");vc.$override("measureText",(function(t,e){var n=g_.doc;F_||((F_=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",g_.doc.body.appendChild(F_));try{F_.style.font=e}catch(t){}return F_.innerHTML="",F_.appendChild(n.createTextNode(t)),{width:F_.offsetWidth}}));for(var G_=new cu,Y_=function(t,e,n,r){var i=this.style;this.__dirty&&Vc.normalizeTextStyle(i,!0);var o=i.text;if(null!=o&&(o+=""),o){if(i.rich){var a=vc.parseRichText(o,i);o=[];for(var s=0;s<a.lines.length;s++){for(var h=a.lines[s].tokens,l=[],u=0;u<h.length;u++)l.push(h[u].text);o.push(l.join(""))}o=o.join("\n")}var c,f,d=i.textAlign,p=i.textVerticalAlign,g=function(t){var e=B_[t];if(!e){W_>100&&(W_=0,B_={});var n,r=H_.style;try{r.font=t,n=r.fontFamily.split(",")[0]}catch(t){}e={style:r.fontStyle||j_,variant:r.fontVariant||j_,weight:r.fontWeight||j_,size:0|parseFloat(r.fontSize||12),family:n||"Microsoft YaHei"},B_[t]=e,W_++}return e}(i.font),v=g.style+" "+g.variant+" "+g.weight+" "+g.size+'px "'+g.family+'"';n=n||vc.getBoundingRect(o,v,d,p,i.textPadding,i.textLineHeight);var _=this.transform;if(_&&!r&&(G_.copy(e),G_.applyTransform(_),e=G_),r)c=e.x,f=e.y;else{var y=i.textPosition;if(y instanceof Array)c=e.x+I_(y[0],e.width),f=e.y+I_(y[1],e.height),d=d||"left";else{var m=this.calculateTextPosition?this.calculateTextPosition({},i,e):vc.calculateTextPosition({},i,e);c=m.x,f=m.y,d=d||m.textAlign,p=p||m.textVerticalAlign}}c=vc.adjustTextX(c,n.width,d),f=vc.adjustTextY(f,n.height,p),f+=n.height/2;var x,b,w,S=g_.createNode,M=this._textVmlEl;M?b=(x=(w=M.firstChild).nextSibling).nextSibling:(M=S("line"),x=S("path"),b=S("textpath"),w=S("skew"),b.style["v-text-align"]="left",D_(M),x.textpathok=!0,b.on=!0,M.from="0 0",M.to="1000 0.05",C_(M,w),C_(M,x),C_(M,b),this._textVmlEl=M);var k=[c,f],T=M.style;_&&r?(v_(k,k,_),w.on=!0,w.matrix=_[0].toFixed(3)+M_+_[2].toFixed(3)+M_+_[1].toFixed(3)+M_+_[3].toFixed(3)+",0,0",w.offset=(y_(k[0])||0)+","+(y_(k[1])||0),w.origin="0 0",T.left="0px",T.top="0px"):(w.on=!1,T.left=y_(c)+"px",T.top=y_(f)+"px"),b.string=String(o).replace(/&/g,"&amp;").replace(/"/g,"&quot;");try{b.style.font=v}catch(t){}z_(M,"fill",{fill:i.textFill,opacity:i.opacity},this),z_(M,"stroke",{stroke:i.textStroke,opacity:i.opacity,lineDash:i.lineDash||null},this),M.style.zIndex=A_(this.zlevel,this.z,this.z2),C_(t,M)}},U_=function(t){O_(t,this._textVmlEl),this._textVmlEl=null},V_=function(t){C_(t,this._textVmlEl)},X_=[Qc,$c,tf,rp,Mp],q_=0;q_<X_.length;q_++){var Z_=X_[q_].prototype;Z_.drawRectText=Y_,Z_.removeRectText=U_,Z_.appendRectText=V_}Mp.prototype.brushVML=function(t){var e=this.style;null!=e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},Mp.prototype.onRemove=function(t){this.removeRectText(t)},Mp.prototype.onAdd=function(t){this.appendRectText(t)}}var Q_=eh.each;function K_(t){return parseInt(t,10)}function $_(t,e){g_.initVML(),this.root=t,this.storage=e;var n=document.createElement("div"),r=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",r.style.cssText="position:absolute;left:0;top:0;",t.appendChild(n),this._vmlRoot=r,this._vmlViewport=n,this.resize();var i=e.delFromStorage,o=e.addToStorage;e.delFromStorage=function(t){i.call(e,t),t&&t.onRemove&&t.onRemove(r)},e.addToStorage=function(t){t.onAdd&&t.onAdd(r),o.call(e,t)},this._firstPaint=!0}$_.prototype={constructor:$_,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){for(var e=this._vmlRoot,n=0;n<t.length;n++){var r=t[n];r.invisible||r.ignore?(r.__alreadyNotVisible||r.onRemove(e),r.__alreadyNotVisible=!0):(r.__alreadyNotVisible&&r.onAdd(e),r.__alreadyNotVisible=!1,r.__dirty&&(r.beforeBrush&&r.beforeBrush(),(r.brushVML||r.brush).call(r,e),r.afterBrush&&r.afterBrush())),r.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(t,e){t=null==t?this._getWidth():t,e=null==e?this._getHeight():e;if(this._width!==t||this._height!==e){this._width=t,this._height=e;var n=this._vmlViewport.style;n.width=t+"px",n.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var t=this.root,e=t.currentStyle;return(t.clientWidth||K_(e.width))-K_(e.paddingLeft)-K_(e.paddingRight)|0},_getHeight:function(){var t=this.root,e=t.currentStyle;return(t.clientHeight||K_(e.height))-K_(e.paddingTop)-K_(e.paddingBottom)|0}},Q_(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],(function(t){$_.prototype[t]=function(){}}));var J_=$_;(0,Yf.registerPainter)("vml",J_);var ty,ey=r((function(t,e){!function(){for(var t in Yf){if(null==Yf||!Yf.hasOwnProperty(t)||"default"===t||"__esModule"===t)return;e[t]=Yf[t]}}(),function(){for(var t in iv){if(null==iv||!iv.hasOwnProperty(t)||"default"===t||"__esModule"===t)return;e[t]=iv[t]}}()})),ny=(ty=ey)&&ty.__esModule&&Object.prototype.hasOwnProperty.call(ty,"default")?ty.default:ty,ry=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===iy}(t)}(t)};var iy="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function oy(t,e){var n;return e&&!0===e.clone&&ry(t)?sy((n=t,Array.isArray(n)?[]:{}),t,e):t}function ay(t,e,n){var r=t.slice();return e.forEach((function(e,i){void 0===r[i]?r[i]=oy(e,n):ry(e)?r[i]=sy(t[i],e,n):-1===t.indexOf(e)&&r.push(oy(e,n))})),r}function sy(t,e,n){var r=Array.isArray(e);return r===Array.isArray(t)?r?((n||{arrayMerge:ay}).arrayMerge||ay)(t,e,n):function(t,e,n){var r={};return ry(t)&&Object.keys(t).forEach((function(e){r[e]=oy(t[e],n)})),Object.keys(e).forEach((function(i){ry(e[i])&&t[i]?r[i]=sy(t[i],e[i],n):r[i]=oy(e[i],n)})),r}(t,e,n):oy(e,n)}sy.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return sy(t,n,e)}))};var hy=sy;function ly(){var t=Array.prototype.slice.call(arguments);return hy.all(t,{arrayMerge:function(t,e){return e.length>0?e:t}})}function uy(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}function cy(t,e,n){return(Math.pow(e,2)+Math.pow(n,2)-Math.pow(t,2))/(2*e*n)}function fy(t){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object","[object AsyncFunction]":"async","[object Promise]":"promise"}[Object.prototype.toString.call(t)]}var dy=Object.freeze({__proto__:null,merge:ly,calcHypotenuse:uy,cosA:cy,typeOf:fy,isNumber:function(t){return"number"==fy(t)},isBoolean:function(t){return"boolean"==fy(t)},isFunction:function(t){return"function"==fy(t)},isAsync:function(t){return"async"===fy(t)},isPromise:function(t){return"promise"===fy(t)},isString:function(t){return"string"==fy(t)},isObject:function(t){return"object"==fy(t)},isArray:function(t){return"array"==fy(t)}}),py=0,gy=0,vy=0,_y=0,yy=0,my=function(){function t(){_s(this,t),this.times=1,py=0,gy=0,vy=0,_y=0,yy=0,window.INMARK_DRAWING_RECTANGLE="rectangle",window.INMARK_DRAWING_POLYGON="polygon"}return ms(t,[{key:"open",value:function(){}},{key:"close",value:function(){}},{key:"setEdit",value:function(t){}},{key:"resetAllStyle",value:function(){t.prototype.polygonOverlay&&t.prototype.polygonOverlay.resetShapeStyle(),t.prototype.recOverlay&&t.prototype.recOverlay.resetShapeStyle()}},{key:"_limitAttributes",value:function(t){var e=this.image.getBoundingRect(),n=-e.width+this.ctx.canvasWidth/2,r=this.ctx.canvasWidth/2,i=Math.max(n,Math.min(t.x,r)),o=-e.height+this.ctx.canvasHeight/2,a=this.ctx.canvasHeight/2;return{x:i,y:Math.max(o,Math.min(t.y,a)),scale:Math.max(.05,t.scale)}}},{key:"zoomIn",value:function(){this.times+=.01,this.zoomStage(this.times)}},{key:"zoomOut",value:function(){this.times-=.01,this.zoomStage(this.times)}},{key:"zoomStage",value:function(t){this.setDrawingMode("hander"),1===t?this.group.attr({scale:[1.001,1.001],origin:this.getOrigin()}):this.group.attr({position:[0,0],scale:[t,t],origin:this.getOrigin()});var e=this.group.getLocalTransform();return this.setOffsetM(e[4]),this.setOffsetN(e[5]),this.setScale(t),this}},{key:"zoomSlider",value:function(t){this.setDrawingMode("hander"),1===t?this.group.attr({scale:[1.001,1.001],origin:this.getOrigin()}):this.group.attr({position:[0,0],scale:[t,t],origin:this.getOrigin()});var e=this.group.getLocalTransform();return this.setOffsetM(e[4]),this.setOffsetN(e[5]),this.setScale(t),this}},{key:"rotate",value:function(t){this.setDrawingMode("hander");this.group.scale[0];var e=.003/180*Math.PI;if(0===t)return this.group.attr({rotation:e,position:this._reSetPosition(),origin:this.getOrigin()}),this._option.rotateMouse&&this._option.rotateMouse.attr({rotation:e,position:this._reSetPosition(),origin:this.getOrigin()}),void(this._option.rotate={radians:0,degrees:0});var n,r=t/180*Math.PI,i=this._option.rotate.degrees,o=this._option.rotate.radians;if(0===(i-=t))vy=0,n=e;else{var a=i,s=o-=r;(Math.abs(a)>=360||Math.abs(gy-t)>=360)&&py++,t>0?(gy=_y+a+360*py,vy=yy+s+py*(2*Math.PI)):(gy=_y+a-360*py,vy=yy+s-py*(2*Math.PI)),gy%t!=0&&1===py&&(_y=gy,yy=vy),n=vy,0===vy&&(n=e),py=0}this.group.attr({rotation:n,position:this._reSetPosition(),origin:this.getOrigin()}),this._option.rotate={radians:this.group.rotation===e?0:this.group.rotation,degrees:(this.group.rotation===e?0:this.group.rotation)/Math.PI*180},this._onRotate&&this._onRotate(this.getRotate()),this.handlers._onRotate&&this.handlers._onRotate[0](this.getRotate())}},{key:"_getOffset",value:function(){var t=this.getOrigin(),e=this.getScale(),n=this.getRenderMode(this._option.id);return"auto"===n||"auto-rotate"===n?[0,0]:[-(-t[0]*e+t[0]),-(-t[1]*e+t[1])]}},{key:"_reSetPosition",value:function(){var t=this._getOffset(),e=this.getRenderMode(this._option.id),n=this.getOffsetM(),r=this.getOffsetN();return"auto"===e||"auto-rotate"===e?t:[t[0]+n,t[1]+r]}},{key:"removeSub",value:function(e){var n=this;this.setDrawingMode("hander"),t.prototype.polygonOverlay&&t.prototype.polygonOverlay.removeSub(e),t.prototype.recOverlay&&t.prototype.recOverlay.removeSub(e),this._option.exportData.forEach((function(t,r){t.id===e.id&&n._option.exportData.splice(r,1)}))}},{key:"removeAnnotation",value:function(){var e=this;return t.prototype.polygonOverlay&&t.prototype.polygonOverlay.removeAnnotation(),t.prototype.recOverlay&&t.prototype.recOverlay.removeAnnotation(),this._option.exportData.forEach((function(t,n){t.id===e._option.removeItem.data.id&&e._option.exportData.splice(n,1)})),this.setDrawingMode("hander"),this._option.removeItem}},{key:"removeAll",value:function(){t.prototype.polygonOverlay&&t.prototype.polygonOverlay.removeAll(),t.prototype.recOverlay&&t.prototype.recOverlay.removeAll(),this.setDrawingMode("hander")}},{key:"selected",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"Rectangle"===e.type?t.prototype.recOverlay&&t.prototype.recOverlay.selected(e,n):"Polygon"===e.type&&t.prototype.polygonOverlay&&t.prototype.polygonOverlay.selected(e,n)}},{key:"setPosition",value:function(e){"Rectangle"===e.type?t.prototype.recOverlay&&t.prototype.recOverlay.setPosition(e):"Polygon"===e.type&&t.prototype.polygonOverlay&&t.prototype.polygonOverlay.setPosition(e)}},{key:"getOrigin",value:function(){var t=this.getRenderMode(this._option.id);if("auto"===t||"auto-rotate"===t)this._option.widthImg=this._option.widthImg*this.group.scale[0],this._option.heightImg=this._option.heightImg*this.group.scale[0],this._option.offsetX=(this.ctx.canvasWidth-this._option.widthImg)/2,this._option.offsetY=(this.ctx.canvasHeight-this._option.heightImg)/2,this._option.origin=[this.ctx.canvasWidth/2,this.ctx.canvasHeight/2];else if("original"===t){var e=this.image.getBoundingRect();this._option.widthImg=e.width*this.group.scale[0],this._option.heightImg=e.height*this.group.scale[0],this._option.origin=[this.ctx.canvasWidth/2,this.ctx.canvasHeight/2]}return this._option.origin}},{key:"resetRotate",value:function(){this.rotate(0)}},{key:"_convertImageToCanvas",value:function(t){var e=document.createElement("canvas");e.width=1e3,e.height=1e3;var n=e.getContext("2d"),r={x:this._option.widthImg/2,y:this._option.heightImg/2},i=this._option.rotate.degrees;return e.width=6e3,e.height=6e3,n.rect(0,0,6e3,6e3),n.fillStyle="rgba(255, 255, 255, 1)",n.fill(),n.strokeStyle="green",n.strokeRect(0,0,6e3,6e3),n.translate(r.x,r.y),n.rotate(-this._option.rotate.radians),n.translate(-r.x,-r.y),i>=0&&i<90?n.drawImage(t,0,-this._option.heightImg):i>=90&&i<180?n.drawImage(t,-this._option.widthImg,-this._option.heightImg):(i>=180&&i<270||i>=270&&i<360)&&n.drawImage(t,-this._option.widthImg,0),e}},{key:"exportOut",value:function(){var t=this,e=new Image;e.setAttribute("crossorigin","anonymous"),e.src=this._option.imgUrl,e.width=this._option.widthImg,e.height=this._option.heightImg,e.style.background="#fff",e.onload=function(){var n=t._convertImageToCanvas(e).toDataURL("image/jpeg");t.exportImages(n)}}},{key:"base64ToBlob",value:function(t){for(var e=t.split(";base64,"),n=e[0].split(":")[1],r=window.atob(e[1]),i=r.length,o=new Uint8Array(i),a=0;a<i;++a)o[a]=r.charCodeAt(a);return new Blob([o],{type:n})}},{key:"exportImages",value:function(t){var e=document.createElement("a"),n=this.base64ToBlob(t);document.createEvent("HTMLEvents").initEvent("click",!0,!0),e.download="test.jpg",e.href=URL.createObjectURL(n),e.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}},{key:"exportSimple",value:function(){this.zr.painter.getRenderedCanvas({backgroundColor:"#fff"}).toBlob((function(t){var e=window.URL.createObjectURL(t);window.open(e)}),"image/png")}},{key:"export",value:function(){var t=this.group.getBoundingRect(),e=t.x,n=t.y,r=t.width,i=t.height,o=zrender.init(document.createElement("div"),{width:r,height:i}),a=new zrender.Group;return a.position=[0-e,0-n],this.group.eachChild((function(t){a.add(t)})),o.add(a),o.refreshImmediately(),o.painter.getRenderedCanvas({backgroundColor:"#fff"}).toBlob((function(t){var e=window.URL.createObjectURL(t);window.open(e)}),"image/png")}},{key:"setDrawingMode",value:function(t){this._setDrawingMode(t)}},{key:"getDrawingMode",value:function(){return t.prototype.drawingType}},{key:"_setDrawingMode",value:function(e){this.setDrag(!1),t.prototype.drawingType=e,this.saveInstance(e)}},{key:"saveInstance",value:function(e){switch(e){case window.INMARK_DRAWING_POLYGON:t.prototype.polygonOverlay=this;break;case window.INMARK_DRAWING_RECTANGLE:t.prototype.recOverlay=this;break;case"hander":t.prototype.polygonOverlay&&t.prototype.polygonOverlay.resetShapeStyle(),t.prototype.polygonOverlay&&t.prototype.polygonOverlay.close(),t.prototype.recOverlay&&t.prototype.recOverlay.resetShapeStyle(),t.prototype.recOverlay&&t.prototype.recOverlay.close(),this.setDrag(this._option.draggable)}}},{key:"setDrag",value:function(e){this._option.draggable=e,t.prototype.polygonOverlay&&(t.prototype.polygonOverlay._option.draggable=e),t.prototype.recOverlay&&(t.prototype.recOverlay._option.draggable=e),this.group&&this.group.eachChild((function(t){"IMAGE"===t.data.type&&t.attr({draggable:e,cursor:"pointer"})}))}},{key:"getDrag",value:function(){return this._option.draggable}},{key:"setScale",value:function(e){t.prototype.scale=e}},{key:"getScale",value:function(){return t.prototype.scale}},{key:"setOffsetM",value:function(e){t.prototype.offsetM=e}},{key:"getOffsetM",value:function(){return t.prototype.offsetM}},{key:"setOffsetN",value:function(e){t.prototype.OffsetN=e}},{key:"getOffsetN",value:function(){return t.prototype.OffsetN}},{key:"getRotate",value:function(){return this._option.rotate}},{key:"getOffCanvas",value:function(){return this.zr.painter.getRenderedCanvas({backgroundColor:"#fff"})}},{key:"getType",value:function(){return this.zr.painter.getType()}}]),t}(),xy={},by={},wy={},Sy={};my.prototype.inMarkOption={};var My=function(t){bs(n,t);var e=Es(n);function n(t){var r;return _s(this,n),r=e.call(this),t?(r.setZrender(t.id),r._option=t):r.zr=r.getZrender(),r.zr.dom.oncontextmenu=function(){return!1},r.ctx={},r.ctx.canvasWidth=r.zr.getWidth(),r.ctx.canvasHeight=r.zr.getHeight(),r._zrClick=r._zrClick,r._zrMouseMove=r._zrMouseMove,r._zrMouseDown=r._zrMouseDown,r._zrMouseUp=r._zrMouseUp,r.handlers={},r.image=null,r.tools=new my,r}return ms(n,[{key:"_zrClick",value:function(){}},{key:"_zrMouseMove",value:function(){}},{key:"_zrMouseDown",value:function(){}},{key:"_zrMouseUp",value:function(){}},{key:"_zrDBClick",value:function(){}},{key:"setData",value:function(){}},{key:"getData",value:function(){}},{key:"_bindEvent",value:function(){this.zr.on("click",this._zrClick,this),this.zr.on("mousemove",this._zrMouseMove,this),this.zr.on("mousedown",this._zrMouseDown,this),this.zr.on("mouseup",this._zrMouseUp,this),this.zr.on("dblclick",this._zrDBClick,this)}},{key:"_unBindEvent",value:function(){this.zr&&(this.zr.off("click",this._zrClick),this.zr.off("mousemove",this._zrMouseMove),this.zr.off("mousedown",this._zrMouseDown),this.zr.off("mouseup",this._zrMouseUp),this.zr.off("dblclick",this._zrDBClick))}},{key:"addEventListener",value:function(t,e){var n="_"+t;void 0===this.handlers[n]&&(this.handlers[n]=[]),this.handlers[n].push(e)}},{key:"removeEventListener",value:function(t,e){var n="_"+t;if(this.handlers[n]){var r=this.handlers[n];if(null==e)r.length=0;else if(r.length)for(var i=0;i<r.length;i++)r[i]==e&&this.handlers[n].splice(i,1)}}},{key:"_toGlobal",value:function(t,e){var n=ny.util.clone(t),r=[];return n.forEach((function(t){var n;n=e.transformCoordToGlobal(t[0],t[1]),r.push(n)})),r}},{key:"_toGlobalSave",value:function(t,e){var n=this,r=ny.util.clone(t),i=[];return r.forEach((function(t){var r,o=n.group.scale[0];r=1===o?e.transformCoordToGlobal(t[0],t[1]):[(r=e.transformCoordToGlobal(t[0],t[1]))[0]/o,r[1]/o],i.push(r)})),i}},{key:"_toLocal",value:function(t,e){var n=this,r=ny.util.clone(t),i=[];return r.forEach((function(t){var r;n.group.scale[0];r=e.transformCoordToLocal(t[0],t[1]),i.push(r)})),i}},{key:"disposeMove",value:function(){this.zr.off("mousedown",this._zrMouseDown),this.zr.off("mousemove",this._zrMouseMove),this.zr.off("click",this._zrClick)}},{key:"reset",value:function(){this.zr=null,this.image=null,this.group=null,this.polygon=null}},{key:"clear",value:function(){this.group&&this.group.removeAll(),this._unBindEvent(),this.zr&&this.zr.clear()}},{key:"dispose",value:function(){this.zr&&this.zr.dispose(),this.reset()}},{key:"setZrender",value:function(t){t&&(this.zr=ny.init(document.getElementById(t)),n.prototype.zr=this.zr)}},{key:"getZrender",value:function(){return n.prototype.zr}},{key:"setRenderMode",value:function(t,e){by[t]=e}},{key:"getRenderMode",value:function(t){return by[t]}},{key:"setGroup",value:function(t){var e=new ny.Group;xy[t]=e}},{key:"getGroup",value:function(t){return xy[t]}},{key:"setImage",value:function(t,e){wy[t]=e}},{key:"getImage",value:function(t){return wy[t]}},{key:"setSelectedSub",value:function(t,e){Sy[t]=e}},{key:"getSelectedSub",value:function(t){return Sy[t]}},{key:"setOption",value:function(t,e){my.prototype.inMarkOption[t]=e}},{key:"getOption",value:function(t){return my.prototype.inMarkOption[t]}}]),n}(my);var ky=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};function Ty(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Ey=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ty(Object(n),!0).forEach((function(e){ky(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ty(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t},Dy={line:{stroke:"#408AE7"},circle:{fill:"#408AE7",stroke:"#3071E3",r:6}},Py={shape:{x:0,y:0,width:5,height:5},data:{type:"editRect"},style:{fill:"rgba(255, 255, 255,1)",stroke:"#CC3737",lineWidth:2,strokeNoScale:!0},zlevel:3,draggable:!0},Cy=function(t){bs(n,t);var e=Es(n);function n(t){var r;if(_s(this,n),r=e.call(this,t),t){t&&t.imgUrl&&(r.imgUrl=t.imgUrl),r._option={},r._option.id=t&&t.id,r._option.imgUrl=t&&t.imgUrl;var i=t&&t.mode||"auto";r.setRenderMode(t.id,i),"auto"===i?(r._option.offsetX=0,r._option.offsetY=0,r._option.setRate=0,r._option.imgZoom=2):"auto-rotate"===i?(r._option.offsetX=0,r._option.offsetY=0,r._option.setRate=0):(r.setScale(1),r.setOffsetM(0),r.setOffsetN(0)),r._option.widthImg=0,r._option.heightImg=0,r._option.origin=[0,0],r._option.draggable=!1,r._option.center=[],r._option.rotate={radians:0,degrees:0},r._option.currentShape={},r._option.exportData=[],t.style?r._imgConfig=ly(Dy,t.style):r._imgConfig=Dy}return r.type="IMAGE",r.image=null,r._editWidth=Py.shape.width,r._onImageDrag=t&&t.event&&t.event.onImageDrag,r._onImageDragEnd=t&&t.event&&t.event.onImageDragEnd,r._onLoadComplete=t&&t.event&&t.event.onLoadComplete,r._onRotate=t&&t.event&&t.event.onRotate,r.initialize(),r.setOption(r._option.id,r._option),r}return ms(n,[{key:"initialize",value:function(){this.renderImg(this.imgUrl)}},{key:"renderImg",value:function(t){var e=this;if(t){this.setGroup(this._option.id);var n=new Image;n.setAttribute("crossorigin","anonymous"),n.src=t,n.onload=function(){var t=e.getRenderMode(e._option.id);if("auto"===t){var r=e.ctx.canvasWidth/n.width,i=e.ctx.canvasHeight/n.height;e._option.setRate=r<i?r:i,e._option.setRate>e._option.imgZoom&&(e._option.setRate=e._option.imgZoom),e._option.widthImg=n.width*e._option.setRate,e._option.heightImg=n.height*e._option.setRate,e._option.offsetX=(e.ctx.canvasWidth-e._option.widthImg)/2,e._option.offsetY=(e.ctx.canvasHeight-e._option.heightImg)/2}else if("auto-rotate"===t){var o=e.ctx.canvasWidth/n.width,a=e.ctx.canvasHeight/n.height;e._option.setRate=o<a?o:a,e._option.setRate>e._option.imgZoom&&(e._option.setRate=e._option.imgZoom),e._option.widthImg=n.width*e._option.setRate,e._option.heightImg=n.height*e._option.setRate,e._option.padding=20,e._option.offsetX=(e.ctx.canvasWidth-e._option.widthImg)/2;var s=(e.ctx.canvasHeight-e._option.heightImg)/2;e._option.offsetY=0===s?e._option.padding:parseFloat(s.toFixed(2))+e._option.padding,e._option.heightImg-=2*e._option.padding;var h=new ny.Line({shape:{x1:0,y1:e.ctx.canvasHeight/2,x2:e.ctx.canvasWidth,y2:e.ctx.canvasHeight/2},data:{type:"LINE"},style:e._imgConfig.line,zlevel:2}),l=new ny.Line({shape:{x1:e.ctx.canvasWidth/2,y1:0,x2:e.ctx.canvasWidth/2,y2:e.ctx.canvasHeight},data:{type:"LINE"},style:e._imgConfig.line,zlevel:2}),u=new ny.Circle({shape:{cx:e.ctx.canvasWidth/2,cy:e._option.padding,r:e._imgConfig.circle.r},data:{type:"CIRCLE"},style:e._imgConfig.circle,cursor:"crosshair",draggable:!1,zlevel:2}),c=new ny.Image({style:Ey({image:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjAyOTM4OTgzNjkxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjEwODUiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNOTM0LjQgMjA2LjkzM2MtMTcuMDY3LTQuMjY2LTM0LjEzMyA2LjQtMzguNCAyMy40NjdsLTIzLjQ2NyA4Ny40NjdDNzk3Ljg2NyAxODMuNDY3IDY1NC45MzMgOTYgNDk3LjA2NyA5NmMtMjMyLjUzNCAwLTQyMi40IDE4NS42LTQyMi40IDQxNnMxODkuODY2IDQxNiA0MjIuNCA0MTZjMTc5LjIgMCAzMzkuMi0xMTAuOTMzIDM5OC45MzMtMjc1LjIgNi40LTE3LjA2Ny0yLjEzMy0zNC4xMzMtMTkuMi00MC41MzMtMTcuMDY3LTYuNC0zNC4xMzMgMi4xMzMtNDAuNTMzIDE5LjJDNzg1LjA2NyA3NzAuMTMzIDY0OC41MzMgODY0IDQ5Ny4wNjcgODY0Yy0xOTguNCAwLTM1OC40LTE1Ny44NjctMzU4LjQtMzUyczE2Mi4xMzMtMzUyIDM1OC40LTM1MmMxNDUuMDY2IDAgMjc3LjMzMyA4Ny40NjcgMzMwLjY2NiAyMTcuNmwtMTI4LTM2LjI2N2MtMTcuMDY2LTQuMjY2LTM0LjEzMyA2LjQtMzguNCAyMy40NjctNC4yNjYgMTcuMDY3IDYuNCAzNC4xMzMgMjMuNDY3IDM4LjRsMTg1LjYgNDkuMDY3YzIuMTMzIDAgNi40IDIuMTMzIDguNTMzIDIuMTMzIDYuNCAwIDEwLjY2Ny0yLjEzMyAxNy4wNjctNC4yNjcgNi40LTQuMjY2IDEyLjgtMTAuNjY2IDE0LjkzMy0xOS4yTDk2MCAyNDUuMzMzYzAtMTcuMDY2LTguNTMzLTM0LjEzMy0yNS42LTM4LjR6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIxMDg2Ij48L3BhdGg+PC9zdmc+",x:e.ctx.canvasWidth/2-1.2*e._imgConfig.circle.r/2,y:e._option.padding-1.2*e._imgConfig.circle.r/2,width:1.2*e._imgConfig.circle.r,height:1.2*e._imgConfig.circle.r},e._imgConfig.circle),data:{type:"ROTATEIMAGE"},cursor:"crosshair",draggable:!1,zlevel:3});e.zr.add(h),e.zr.add(l);var f=new ny.Group;f.add(u),f.add(c),e._option.rotateMouse=f,e.zr.add(f),c.on("mousedown",(function(t){e._option.rotateListen=!0})),u.on("mousedown",(function(t){e._option.rotateListen=!0}))}else e._option.setRate=1,e._option.widthImg=n.width,e._option.heightImg=n.height,e._option.offsetX=0,e._option.offsetY=0;var d=new ny.Image({style:{image:n,x:e._option.offsetX,y:e._option.offsetY,width:e._option.widthImg,height:e._option.heightImg},cursor:"default",data:{type:"IMAGE",origin_width:n.width,origin_height:n.height,rate_width:e._option.widthImg,rate_height:e._option.heightImg},zlevel:1});e._option.center=[e._option.offsetX+e._option.widthImg/2,e._option.offsetY+e._option.heightImg/2],e.image=d,e.setImage(e._option.id,d),e.group=e.getGroup(e._option.id),e.group.add(d),e.zr.add(e.group),e.image.on("drag",(function(t){e._onImageDrag&&e._onImageDrag(t),e.handlers._onImageDrag&&e.handlers._onImageDrag[0](t)})),e.image.on("dragend",(function(t){e._onImageDragEnd&&e._onImageDragEnd(t),e.handlers._onImageDragEnd&&e.handlers._onImageDragEnd[0](t)})),e.handlers._onLoadComplete&&e.handlers._onLoadComplete[0](),e._onLoadComplete&&e._onLoadComplete(),e._bindEvent(),e.setDrag(e._option.draggable)}}}},{key:"getData",value:function(){return this._option.exportData}},{key:"_zrClick",value:function(){}},{key:"_zrMouseMove",value:function(t){if(!t.event.target)return this._option.rotate={radians:0,degrees:0},this._onRotate&&this._onRotate(this.getRotate()),void(this.handlers._onRotate&&this.handlers._onRotate[0](this.getRotate()));if(!0===this._option.rotateListen){this.image.attr({cursor:"crosshair"});var e=this.getOrigin(),n=e[0],r=[];t.event.offsetX>=n?r[0]=t.event.offsetX-n:r[0]=-(n-t.event.offsetX),r[1]=t.event.offsetY-this._option.padding;var i=r[0],o=r[1],a=uy(Math.abs(i),Math.abs(o)),s=e[1]-this._option.padding,h=uy(Math.abs(i),Math.abs(s-o));if(!window.isNaN(a)&&!window.isNaN(s)&&!window.isNaN(h)){var l,u=cy(Math.abs(a),Math.abs(s),Math.abs(h)),c=Math.acos(u),f=180*Math.acos(u)/Math.PI;i<=0?(l=360-f,c=-Math.PI-(Math.PI-c)):(l=f,c=-c),this.group.attr({rotation:c,position:this._reSetPosition(),origin:this.getOrigin()}),this._option.rotateMouse.attr({rotation:c,position:this._reSetPosition(),origin:this.getOrigin()}),this._option.rotate={radians:c,degrees:l.toFixed(2)},this._onRotate&&this._onRotate(this.getRotate()),this.handlers._onRotate&&this.handlers._onRotate[0](this.getRotate())}}}},{key:"_zrMouseDown",value:function(t){}},{key:"_zrMouseUp",value:function(t){"auto-rotate"===this.getRenderMode(this._option.id)&&(this.image.attr({cursor:"default"}),this._option.rotateListen=!1)}},{key:"_zrDBClick",value:function(){}},{key:"_reSetCenter",value:function(){var t=this.getScale(),e=this.image.getBoundingRect();return this._option.widthImg=e.width*t,this._option.heightImg=e.height*t,this._option.offsetX=this.getOffsetM(),this._option.offsetY=this.getOffsetN(),this._option.center=[this._option.offsetX+this._option.widthImg/2,this._option.offsetY+this._option.heightImg/2],this._option.center}},{key:"getCenter",value:function(){return this._reSetCenter()}}]),n}(My),Oy={default:{fill:"rgba(24,151,117,0.05)",stroke:"#189775",lineWidth:1,lineDash:[0,0],strokeNoScale:!0,zlevel:2},selected:{fill:"rgba(245,69,69,0.15)",stroke:"#CC3737",lineWidth:1,lineDash:[0,0],strokeNoScale:!0},hover:{fill:"rgba(24,151,117,0.05)",stroke:"#189775",lineWidth:1,lineDash:[0,0],strokeNoScale:!0}},Ay=function(t){bs(n,t);var e=Es(n);function n(t){var r;_s(this,n),(r=e.call(this)).type="RECTANGLE";var i=Object.keys(r.inMarkOption);r._option=r.getOption(t.id||i[0]),r.group=r.getGroup(t.id||i[0]),r.image=r.getImage(t.id||i[0]);var o=r.getRenderMode(t.id||i[0]);return r._option.mode=o||"auto",r._option.currentShape=null,r._option.isOpen=t.isOpen||!1,r._option.exportData=[],r._onCreate=t&&t.event&&t.event.onCreate,r._onCreateComplete=t&&t.event&&t.event.onCreateComplete,r._onRectDrag=t&&t.event&&t.event.onRectDrag,r._onRectDragComplete=t&&t.event&&t.event.onRectDragComplete,r._onEditNodeDrag=t&&t.event&&t.event.onEditNodeDrag,r._onEditNodeDragComplete=t&&t.event&&t.event.onEditNodeDragComplete,r._onSelected=t&&t.event&&t.event.onSelected,r._onHover=t&&t.event&&t.event.onHover,r._unSelect=t&&t.event&&t.event.unSelect,r._onImageDrag=t&&t.event&&t.event.onImageDrag,r._onImageDragEnd=t&&t.event&&t.event.onImageDragEnd,r.data=t.data,r._createLimit=6,r._editWidth=Py.shape.width,t.style?r._styleConfig=ly(Oy,t.style):r._styleConfig=Oy,r._isMouseDown=!1,r._canDrawShape=!1,r._startPoint=[],r._endPoint=[],r._areaShapes=[],r._editNode=[],r._editRectStart=[],r.position=[0,0],r.bgDrag=[],r.graphic=r._createGraphicGroup(),r.tempShape={},r.handlers={},r.zlevel=r._styleConfig.default.zlevel,r.DIYStyle={},r.image&&(r.image.on("drag",(function(t){if(r._onImageDrag&&r._onImageDrag(t),r.handlers._onImageDrag&&r.handlers._onImageDrag[0](t),!0===r.getDrag()){var e=t.target.position;r.graphic.attr({position:e}),r.bgDrag=e}})),r.image.on("dragend",(function(t){r._onImageDragEnd&&r._onImageDragEnd(t),r.handlers._onImageDragEnd&&r.handlers._onImageDragEnd[0](t)}))),"object"===Ms(r.data)&&r.setData(r.data),r}return ms(n,[{key:"open",value:function(){this._option.isOpen=!0,this.resetAllStyle(),this.setDrawingMode(window.INMARK_DRAWING_RECTANGLE),this._bindEvent(),this.setEdit(!0),this.group.eachChild((function(t){"IMAGE"===t.data.type&&t.attr({cursor:"crosshair"})}))}},{key:"close",value:function(){this._option.isOpen=!1,this.setEdit(!1),this.group.eachChild((function(t){"IMAGE"===t.data.type&&t.attr({cursor:"default"})})),"hander"!==this.getDrawingMode()&&this.setDrawingMode("hander")}},{key:"setEdit",value:function(t){t?this._areaShapes.forEach((function(t){t.attr({draggable:!0}),t.bound&&t.bound.eachChild((function(t){t.hide()}))})):this._areaShapes.forEach((function(t){t.attr({draggable:!1}),t.bound&&t.bound.eachChild((function(t){t.hide()}))}))}},{key:"_createGraphicGroup",value:function(t,e){var n=new ny.Group;return n.data={type:"graphicGroup"},n}},{key:"_zrClick",value:function(t){t.target&&"IMAGE"===t.target.data.type&&this.resetShapeStyle()}},{key:"_zrMouseDown",value:function(t){1===t.which&&t.target&&"IMAGE"===t.target.data.type&&this._option.isOpen&&this.getDrawingMode()===window.INMARK_DRAWING_RECTANGLE&&(this.resetShapeStyle(),this._startPoint=this._getDrawPoint(t),this._isMouseDown=!0,this._option.currentShape=null)}},{key:"_getDrawPoint",value:function(t){var e,n,r=this.group.scale[0],i=t.target&&t.target.transform;return t.target&&i?(r=i[0],this.group.scale=[r,r],e=i[4]>0?t.offsetX/r-Math.abs(i[4])/r:t.offsetX/r+Math.abs(i[4])/r,n=i[5]>0?t.offsetY/r-Math.abs(i[5])/r:t.offsetY/r+Math.abs(i[5])/r):(e=t.offsetX/r,n=t.offsetY/r),[e,n]}},{key:"_zrMouseMove",value:function(t){if(this._isMouseDown&&this._startPoint&&t.target){var e=this._getDrawPoint(t),n=Math.abs(this._startPoint[0]-e[0]),r=Math.abs(this._startPoint[1]-e[1]);if(n<this._createLimit&&r<this._createLimit)return this._canDrawShape=!1,void this.setSelectedSub(this._option.id,null);this._endPoint=this._getDrawPoint(t),this._canDrawShape=!0;this.group.scale[0];var i=this._changeToFourPoints(this._startPoint.concat(this._endPoint));this._option.currentShape?this._option.currentShape.attr({shape:{points:i}}):(this._option.currentShape=this._createShape(i,{notes:"",type:"Rectangle"}),this.graphic.add(this._option.currentShape),this._areaShapes.push(this._option.currentShape));var o=this._changeToPoints(i);this.handlers._onCreate&&this.handlers._onCreate[0](t,{notes:"",coordinates:o}),this._onCreate&&this._onCreate(t,{notes:"",coordinates:o})}}},{key:"_zrMouseUp",value:function(t){if(this._isMouseDown&&this._option.currentShape){var e=this._areaShapes.length-1,n=this._option.currentShape.shape.points,r=this._changeToPoints(n),i={type:"Rectangle",notes:"",id:window.btoa(Math.random())};this._areaShapes[e].attr({style:this._styleConfig.selected,data:Ey({},i)}),this._editNode=r,r.length>0&&(this._createEditGroup(n,this._option.currentShape),this._option.exportData.push(Ey(Ey({},i),{},{coordinates:r})),this.setSelectedSub(this._option.id,t.target),this._onCreateComplete&&this._onCreateComplete(t,Ey(Ey({},i),{},{coordinates:r})),this.handlers._onCreateComplete&&this.handlers._onCreateComplete[0](t,{notes:"",coordinates:r}))}this._isMouseDown=!1,this._canDrawShape=!1,this._startPoint=[],this._endPoint=[]}},{key:"setData",value:function(t){this.setMarkers(t),this.saveInstance(window.INMARK_DRAWING_RECTANGLE)}},{key:"getData",value:function(){return this._option.exportData}},{key:"setZIndex",value:function(t){this.zlevel=t}},{key:"_filterImage",value:function(){this._areaShapes.splice(0);var t=[];this.group.eachChild((function(e){"IMAGE"===e.data.type&&t.push(e)})),this.group.removeAll(),this.group.add(t[0]),this.zr.add(this.group)}},{key:"setMarkers",value:function(t){var e=this;this.removeAll(),this._option.exportData=ny.util.clone(t),t.length>0&&t.forEach((function(t){if("Rectangle"===t.type&&"object"===Ms(t.coordinates)){var n=e._calculateToRelationpix(t.coordinates),r=e._createShape(n,t);if(0===n.length)throw new Error("此图形没有坐标数据,请删除此图形"+JSON.stringify(t));n.length>0&&(e._createEditGroup(n,r),e._areaShapes.push(r),e.graphic.add(r))}})),this.group.add(this.graphic),this.setEdit(!1)}},{key:"setSelectedStyle",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.attr({style:ly(this._styleConfig.selected,n)}),this._option.isOpen){t.attr({draggable:!0});var r=this._editWidth/this.group.scale[0];t.bound&&t.bound.eachChild((function(n,i){n.show(),n.attr({shape:{x:t.shape.points[i][0]-r/2,y:t.shape.points[i][1]-r/2,width:r,height:r},zlevel:e.zlevel+1})}))}}},{key:"selected",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._option.isOpen||(this.resetAllStyle(),this._areaShapes.forEach((function(r){if(r.data.id===t.id){e._option.currentShape=r;var i=e._option.currentShape.shape.points,o=e._changeToPoints(i);e._editNode=o,e.setSelectedStyle(r,n)}})))}},{key:"setPosition",value:function(t){if(!this._option.isOpen&&4===t.coordinates.length){var e,n,r=this._calculateToRelationpix(t.coordinates),i=[(r[0][0]+r[1][0])/2,(r[0][1]+r[3][1])/2],o=this.group.scale[0],a=this.zr.painter._width,s=this.zr.painter._height;0===this.bgDrag.length?(e=0,n=0):(e=this.bgDrag[0],n=this.bgDrag[1]),this.group.attr({position:[(-i[0]-e)*o+a/2*o,(-i[1]-n)*o+s/2*o]})}}},{key:"_createEditGroup",value:function(t,e){var n=new ny.Group;return n.data={type:"EditGroup"},n.bound=e,this._createEditPoint(t,n),e.bound=n,this.graphic.add(n),n}},{key:"_toShapeDragEnd",value:function(t,e){var n,r,i=[],o=ny.util.clone(t.target.shape.points),a=t.target.transform;0===this.bgDrag.length?(n=0,r=0):(n=this.bgDrag[0],r=this.bgDrag[1]);var s=this.getOffsetM(),h=this.getOffsetN();return o.forEach((function(t){var e;a&&(a[4]-s>0?t[0]=t[0]+Math.abs(a[4]-s)/a[0]:t[0]=t[0]-Math.abs(a[4]-s)/a[0],a[5]-h>0?t[1]=t[1]+Math.abs(a[5]-h)/a[0]:t[1]=t[1]-Math.abs(a[5]-h)/a[0]),e=[t[0]-n,t[1]-r],i.push(e)})),i}},{key:"_createShape",value:function(t,e){var n=this,r=new ny.Polygon({shape:{points:t,smooth:0},data:e,cursor:"default",draggable:!1,style:this._styleConfig.default,zlevel:this.zlevel});return r.on("click",(function(t){"rectangle"===n.getDrawingMode()&&1===t.which&&(n._editNode=n._toShapeDragEnd(t,t.target))})),r.on("dragstart",(function(t){"rectangle"===n.getDrawingMode()&&1===t.which&&(n._option.currentShape=r,n.tempShape=t.target)})),r.on("drag",(function(t){if("rectangle"===n.getDrawingMode()){var e=r.bound;e.attr({position:e.bound.position}),e.eachChild((function(t){t.hide()})),n._editNode=n._toShapeDragEnd(t,t.target),n._option.currentShape=t.target;var i=n._toGlobal(t.target.shape.points,r),o=n._changeToPoints(i);n.handlers._onRectDrag&&n.handlers._onRectDrag[0](t,Ey(Ey({},t.target.data),{},{coordinates:o})),n._onRectDrag&&n._onRectDrag(t,Ey(Ey({},t.target.data),{},{coordinates:o}))}})),r.on("dragend",(function(t){if("rectangle"===n.getDrawingMode()&&1===t.which){var e=t.target;n.position=ny.util.clone(e.position);var r=n._toShapeDragEnd(t,e);n._option.currentShape=e,n._reCreatePoints(r);var i=n._changeToPoints(r);n._option.exportData.forEach((function(e){e.id===t.target.data.id&&(e.coordinates=i)})),n.handlers._onRectDragComplete&&n.handlers._onRectDragComplete[0](t,Ey(Ey({},t.target.data),{},{coordinates:i})),n._onRectDragComplete&&n._onRectDragComplete(t,Ey(Ey({},t.target.data),{},{coordinates:i}))}})),r.on("mousemove",(function(t){"rectangle"===n.getDrawingMode()&&n._option.isOpen&&(r.attr({cursor:"default"}),n.tempShape=t.target)})),r.on("mouseover",(function(t){if("polygon"!==n.getDrawingMode()){if(n._option.isOpen)return r.attr({cursor:"default"}),void(!1===n._canDrawShape&&!1===n._isMouseDown&&(n.tempShape=t.target,n._unBindEvent()));var e=n._toGlobal(t.target.shape.points,r),i=n._changeToPoints(e);n.handlers._onHover&&n.handlers._onHover[0](t,Ey(Ey({},t.target.data),{},{coordinates:i})),n._onHover&&n._onHover(t,Ey(Ey({},t.target.data),{},{coordinates:i}))}})),r.on("mouseout",(function(t){"polygon"!==n.getDrawingMode()&&n._option.isOpen&&n._bindEvent()})),r.on("mousedown",(function(t){if("polygon"!==n.getDrawingMode())if(3!==t.which){if(!(my.prototype.polygonOverlay&&my.prototype.polygonOverlay._isMouseDown||1!==t.which)){n._option.currentShape=t.target,n.tempShape=t.target,n.setSelectedSub(n._option.id,r),n.resetAllStyle(),n.setSelectedStyle(t.target);var e=n._toGlobal(t.target.shape.points,r),i=n._changeToPoints(e);n.handlers._onSelected&&n.handlers._onSelected[0](t,Ey(Ey({},t.target.data),{},{coordinates:i})),n._onSelected&&n._onSelected(t,Ey(Ey({},t.target.data),{},{coordinates:i}))}}else r.attr({draggable:!1})})),r.on("mouseup",(function(t){if("rectangle"===n.getDrawingMode()){var e=n.getSelectedSub(n._option.id);n._option.isOpen&&e&&1===t.which&&(n._startPoint=[],n._option.currentShape.bound&&n._option.currentShape.bound.eachChild((function(t){t.show()})),n._bindEvent())}})),r}},{key:"_reCreatePoints",value:function(t){var e=this,n=this._createShape(t,this._option.currentShape.data);this.graphic.remove(this._option.currentShape.bound),this.graphic.remove(this._option.currentShape),this._areaShapes.forEach((function(t,n){t.data.id===e._option.currentShape.data.id&&e._areaShapes.splice(n,1)})),this._option.currentShape=n,this._createEditGroup(t,n),this.setSelectedSub(this._option.id,n),this._areaShapes.push(n),this.graphic.add(n),this.setSelectedStyle(n),this._startPoint=[]}},{key:"_editElementEvent",value:function(t,e){var n=this;t.on("mouseover",(function(t){})),t.on("mouseout",(function(t){})),t.on("mouseup",(function(t){})),t.on("dragstart",(function(t){if(!my.prototype.polygonOverlay||!my.prototype.polygonOverlay._isMouseDown)if(1===t.which){if(1===t.which){n._option.currentShape.transform;var r=n._option.currentShape.shape.points,i=ny.util.clone(r);n.oldPoint=i;var o=i[1][0]-i[0][0],a=i[2][1]-i[1][1];n.obj={width:o,height:a},n.m=ny.util.clone(n._option.currentShape.transform||[])}}else e.eachChild((function(t){t.hide()}))})),t.on("drag",(function(t){if(1===t.which){if(!(my.prototype.polygonOverlay&&my.prototype.polygonOverlay._isMouseDown||"CANVAS"!==t.event.target.tagName||1!==t.which)){var r,i,o=ny.util.clone(n._option.currentShape.shape.points),a=n.m,s=t.target.data._side;a[0]||(a[0]=1,a[4]=0,a[5]=0),0===n.bgDrag.length?(r=0,i=0):(r=n.bgDrag[0],i=n.bgDrag[1]);var h=[],l=0,u=0,c=(n.obj.width,n.obj.height,n.getOffsetM()),f=n.getOffsetN();switch(s){case"tl":l=t.event.offsetX,u=t.event.offsetY,h=[[(l-c)/a[0]-r,(u-f)/a[0]-i],[o[1][0],(u-f)/a[0]-i],o[2],[(l-c)/a[0]-r,o[3][1]]];break;case"tr":l=t.event.offsetX,u=t.event.offsetY,h=[[o[0][0],(u-f)/a[0]-i],[(l-c)/a[0]-r,(u-f)/a[0]-i],[(l-c)/a[0]-r,o[3][1]],o[3]];break;case"br":l=t.event.offsetX,u=t.event.offsetY,h=[o[0],[(l-c)/a[0]-r,o[0][1]],[(l-c)/a[0]-r,(u-f)/a[0]-i],[o[0][0],(u-f)/a[0]-i]];break;case"bl":l=t.event.offsetX,u=t.event.offsetY,h=[[(l-c)/a[0]-r,o[0][1]],o[1],[o[2][0],(u-f)/a[0]-i],[(l-c)/a[0]-r,(u-f)/a[0]-i]]}e.removeAll(),e.attr({position:[0,0],scale:[1,1]}),n._option.currentShape.attr({scale:[1,1],shape:{points:h},position:[0,0]}),n._editNode=h;var d=n._changeToPoints(h);n.handlers._onEditNodeDrag&&n.handlers._onEditNodeDrag[0](t,Ey(Ey({},e.bound.data),{},{coordinates:d})),n._onEditNodeDrag&&n._onEditNodeDrag(t,Ey(Ey({},e.bound.data),{},{coordinates:d})),n._createEditPoint(h,e)}}else e.eachChild((function(t){t.hide()}))})),t.on("dragend",(function(t){if((!my.prototype.polygonOverlay||!my.prototype.polygonOverlay._isMouseDown)&&n._editNode.length>0){n._reCreatePoints(n._editNode);var r=n._changeToPoints(n._editNode);n._option.exportData.forEach((function(t){t.id===e.bound.data.id&&(t.coordinates=r)})),n.handlers._onEditNodeDragComplete&&n.handlers._onEditNodeDragComplete[0](t,Ey(Ey({},e.bound.data),{},{coordinates:r})),n._onEditNodeDragComplete&&n._onEditNodeDragComplete(t,Ey(Ey({},e.bound.data),{},{coordinates:r}))}}))}},{key:"_createEditPoint",value:function(t,e){var n=this,r=[];r.push({_side:"tl",points:t[0]}),r.push({_side:"tr",points:t[1]}),r.push({_side:"br",points:t[2]}),r.push({_side:"bl",points:t[3]}),r.forEach((function(t){var r=n._editWidth/n.group.scale[0],i=new ny.Rect(ly(Py,{shape:{x:t.points[0]-r/2,y:t.points[1]-r/2,width:r,height:r},data:{_side:t._side},zlevel:n.zlevel+1}));n._editElementEvent(i,e),e.add(i)}))}},{key:"setSilent",value:function(t){}},{key:"setOptionStyle",value:function(t,e){var n=this;this.DIYStyle=t,e&&(this._styleConfig.selected=e),this._areaShapes.forEach((function(e){"Rectangle"===e.data.type&&e.attr({style:Ey(Ey({},n._styleConfig.default),t)})}))}},{key:"resetShapeStyle",value:function(){var t=this;this._areaShapes.forEach((function(e){"Rectangle"===e.data.type&&(e.attr({style:Ey(Ey({},t._styleConfig.default),t.DIYStyle),draggable:!1}),e.bound&&e.bound.eachChild((function(t){t.hide()})))}))}},{key:"removeAnnotation",value:function(){var t,e=this,n=this.getSelectedSub(this._option.id);if(n)return this._areaShapes.forEach((function(r,i){r.data.id===n.data.id&&(t=r,e._areaShapes.splice(i,1))})),t&&(this.graphic.remove(t.bound),t.bound=null,this.graphic.remove(n),this.setSelectedSub(this._option.id,null)),this._option.removeItem=t,this._option.removeItem}},{key:"removeSub",value:function(t){var e,n=t.id;this._areaShapes.forEach((function(t,r){t.data.id===n&&(e=r)}));var r=this._areaShapes[e];r&&(this._areaShapes.splice(e,1),this.graphic.remove(r.bound),r.bound=null,this.graphic.remove(r))}},{key:"removeAll",value:function(){var t=this;this._areaShapes.length>0&&this._areaShapes.forEach((function(e){e.bound&&(t.graphic.remove(e.bound),e.bound=null),t.graphic.remove(e),e=null})),this._areaShapes.splice(0),this._option.exportData.splice(0)}},{key:"_calculateToRelationpix",value:function(t){var e=this,n=[];return t.forEach((function(t){var r=t[0]*e._option.setRate+e._option.offsetX,i=t[1]*e._option.setRate+e._option.offsetY;n.push([r,i])})),n}},{key:"_changeToTowPoints",value:function(t){return[(t[0][0]-this._option.offsetX)/this._option.setRate,(t[0][1]-this._option.offsetY)/this._option.setRate,(t[2][0]-this._option.offsetX)/this._option.setRate,(t[2][1]-this._option.offsetY)/this._option.setRate]}},{key:"_changeToPoints",value:function(t){var e=this,n=[];return t.forEach((function(t){n.push([(t[0]-e._option.offsetX)/e._option.setRate,(t[1]-e._option.offsetY)/e._option.setRate])})),n}},{key:"_changeToFourScalePoints",value:function(t,e){var n=[];return n[0]=[t[0]/e,t[1]/e],n[1]=[t[2]/e,t[1]/e],n[2]=[t[2]/e,t[3]/e],n[3]=[t[0]/e,t[3]/e],n}},{key:"_changeToFourPoints",value:function(t){var e=[];return t[0]<=t[2]&&t[1]<=t[3]?(e[0]=[t[0],t[1]],e[1]=[t[2],t[1]],e[2]=[t[2],t[3]],e[3]=[t[0],t[3]]):t[0]>=t[2]&&t[1]<=t[3]?(e[0]=[t[2],t[1]],e[1]=[t[0],t[1]],e[2]=[t[0],t[3]],e[3]=[t[2],t[3]]):t[0]>t[2]&&t[1]>t[3]?(e[0]=[t[2],t[3]],e[1]=[t[0],t[3]],e[2]=[t[0],t[1]],e[3]=[t[2],t[1]]):t[0]<t[2]&&t[1]>t[3]&&(e[0]=[t[0],t[3]],e[1]=[t[2],t[3]],e[2]=[t[2],t[1]],e[3]=[t[0],t[1]]),e}},{key:"addHover",value:function(t){for(var e=0;e<this._areaShapes.length;e++){var n=this._areaShapes[e];if(n.data.id==t.id){this.zr.addHover(n,t.style);break}}}},{key:"removeHover",value:function(t){for(var e=0;e<this._areaShapes.length;e++){var n=this._areaShapes[e];if(n.data.id==t.id){this.zr.removeHover(n);break}}}},{key:"reset",value:function(){}}]),n}(My),Iy=function(t){bs(n,t);var e=Es(n);function n(t){var r;_s(this,n),(r=e.call(this,t)).type="POLYGON";var i=Object.keys(r.inMarkOption);r._option=r.getOption(t.id||i[0]),r.group=r.getGroup(t.id||i[0]),r.image=r.getImage(t.id||i[0]);var o=r.getRenderMode(t.id||i[0]);return r._option.mode=o||"auto",r._option.currentShape=null,r._option.isOpen=t.isOpen||!1,r._option.exportData=[],r._onCreate=t&&t.event&&t.event.onCreate,r._onCreateComplete=t&&t.event&&t.event.onCreateComplete,r._onRectDrag=t&&t.event&&t.event.onRectDrag,r._onRectDragComplete=t&&t.event&&t.event.onRectDragComplete,r._onEditNodeDrag=t&&t.event&&t.event.onEditNodeDrag,r._onEditNodeDragComplete=t&&t.event&&t.event.onEditNodeDragComplete,r._onSelected=t&&t.event&&t.event.onSelected,r._onHover=t&&t.event&&t.event.onHover,r._unSelect=t&&t.event&&t.event.unSelect,r._onImageDrag=t&&t.event&&t.event.onImageDrag,r._onImageDragEnd=t&&t.event&&t.event.onImageDragEnd,r.data=t.data,r._editWidth=Py.shape.width,t.style?r._styleConfig=ly(Oy,t.style):r._styleConfig=Oy,r._isMouseDown=!1,r._startPoint=[],r._endPoint=[],r._areaShapes=[],r._editNode=[],r._editRectStart=[],r.position=[0,0],r.bgDrag=[],r.graphic=r._createGraphicGroup(),r.tempShape=[],r.creatCount=0,r.handlers={},r.zlevel=r._styleConfig.default.zlevel,r.DIYStyle={},r.image&&(r.image.on("drag",(function(t){if(r._onImageDrag&&r._onImageDrag(t),!0===r.getDrag()){var e=t.target.position;r.graphic.attr({position:e}),r.bgDrag=e}})),r.image.on("dragend",(function(t){r._onImageDragEnd&&r._onImageDragEnd(t)}))),"object"===Ms(r.data)&&r.setData(r.data),r}return ms(n,[{key:"open",value:function(){this._option.isOpen=!0,this.resetAllStyle(),this.setDrawingMode(window.INMARK_DRAWING_POLYGON),this._bindEvent(),this.setEdit(!0),this.group.eachChild((function(t){"IMAGE"===t.data.type&&t.attr({cursor:"crosshair"})}))}},{key:"close",value:function(){this._option.isOpen=!1,this.creatCount=0,this.setEdit(!1),this.group.eachChild((function(t){"IMAGE"===t.data.type&&t.attr({cursor:"default"})})),"hander"!==this.getDrawingMode()&&this.setDrawingMode("hander")}},{key:"setEdit",value:function(t){t?this._areaShapes.forEach((function(t){t.attr({draggable:!0}),t.bound&&t.bound.eachChild((function(t){t.hide()}))})):this._areaShapes.forEach((function(t){t.attr({draggable:!1}),t.bound&&t.bound.eachChild((function(t){t.hide()}))}))}},{key:"addEventListener",value:function(t,e){var n="_"+t;void 0===this.handlers[n]&&(this.handlers[n]=[]),this.handlers[n].push(e)}},{key:"removeEventListener",value:function(t,e){var n="_"+t;if(this.handlers[n]){var r=this.handlers[n];if(null==e)r.length=0;else if(r.length)for(var i=0;i<r.length;i++)r[i]==e&&this.handlers[n].splice(i,1)}}},{key:"_createGraphicGroup",value:function(t,e){var n=new ny.Group;return n.data={type:"graphicGroup"},n}},{key:"_zrClick",value:function(t){t.target&&"IMAGE"===t.target.data.type&&this.resetShapeStyle()}},{key:"_zrMouseDown",value:function(t){1===t.which&&t.target&&this._option.isOpen&&this.getDrawingMode()===window.INMARK_DRAWING_POLYGON&&(0!==this.creatCount&&!0===this._isMouseDown&&(this.creatCount++,this._startPoint.push(this._getDrawPoint(t))),0===this.creatCount&&!1===this._isMouseDown&&"IMAGE"===t.target.data.type&&(this.resetShapeStyle(),this._startPoint[this.creatCount]=this._getDrawPoint(t),this.creatCount++,this._isMouseDown=!0,this._option.currentShape=null))}},{key:"_zrMouseMove",value:function(t){if(this._isMouseDown&&this._startPoint&&t.target){var e;if(this._endPoint=this._getDrawPoint(t),1===this.creatCount)e=[[this._startPoint[0][0]/this._option.setRate,this._startPoint[0][1]/this._option.setRate],[this._endPoint[0]/this._option.setRate,this._endPoint[1]/this._option.setRate]];else{var n=ny.util.clone(this._startPoint),r=n.length-1;JSON.stringify(n[r])!==JSON.stringify(this._endPoint)&&n.push(this._endPoint),e=this._changeToPoints(n)}this._option.currentShape?this._option.currentShape.attr({shape:{points:e}}):(this._option.currentShape=this._createShape(e,{notes:"",type:"Polygon"}),this.graphic.add(this._option.currentShape),this._areaShapes.push(this._option.currentShape));var i=this._changeToPoints(e);this.handlers._onCreate&&this.handlers._onCreate[0](t,{notes:"",coordinates:i}),this._onCreate&&this._onCreate(t,{notes:"",coordinates:i})}}},{key:"_zrDBClick",value:function(t){if(this.creatCount<=3&&!0===this._isMouseDown)return this.creatCount--,void this._startPoint.splice(this._startPoint.length-1);if(t.target&&this._isMouseDown&&this._option.currentShape){var e=this._areaShapes.length-1,n=this._option.currentShape.shape.points,r=this._changeToPoints(n),i={type:"Polygon",notes:"",id:window.btoa(Math.random())};this._areaShapes[e].attr({style:this._styleConfig.selected,data:Ey({},i)}),this._editNode=r,r.length>0&&(this._createEditGroup(r,this._option.currentShape),this._option.exportData.push(Ey(Ey({},i),{},{coordinates:r})),this.setSelectedSub(this._option.id,t.target),this._onCreateComplete&&this._onCreateComplete(t,Ey(Ey({},i),{},{coordinates:r})),this.handlers._onCreateComplete&&this.handlers._onCreateComplete[0](t,Ey(Ey({},i),{},{coordinates:r}))),this._isMouseDown=!1,this._startPoint=[],this._endPoint=[],this.creatCount=0}}},{key:"_zrMouseUp",value:function(t){}},{key:"_resetPoints",value:function(t){if(t[0][0]<=t[1][0])return t;var e=t[0],n=[],r=t.length-1;for(t.length;r>0;r--)n.push(t[r]);return n.unshift(e),n}},{key:"_getDrawPoint",value:function(t){var e,n,r=this.group.scale[0],i=t.target&&t.target.transform;return t.target&&i?(r=i[0],this.group.scale=[r,r],e=i[4]>0?t.offsetX/r-Math.abs(i[4])/r:t.offsetX/r+Math.abs(i[4])/r,n=i[5]>0?t.offsetY/r-Math.abs(i[5])/r:t.offsetY/r+Math.abs(i[5])/r):(e=t.offsetX/r,n=t.offsetY/r),[e,n]}},{key:"setData",value:function(t){this.setMarkers(t),this.saveInstance(window.INMARK_DRAWING_POLYGON)}},{key:"getData",value:function(){return this._option.exportData}},{key:"setZIndex",value:function(t){this.zlevel=t}},{key:"_filterImage",value:function(){this._areaShapes.splice(0);var t=[];this.group.eachChild((function(e){"IMAGE"===e.data.type&&t.push(e)})),this.group.removeAll(),this.group.add(t[0]),this.zr.add(this.group)}},{key:"setMarkers",value:function(t){var e=this;this.removeAll(),this._option.exportData=ny.util.clone(t),t.length>0&&t.forEach((function(t){if("Polygon"===t.type&&"object"===Ms(t.coordinates)){var n=e._calculateToRelationpix(t.coordinates),r=e._createShape(n,t);if(0===n.length)throw new Error("此图形没有坐标数据,请删除此图形"+JSON.stringify(t));n.length>0&&(e._createEditGroup(n,r),e._areaShapes.push(r),e.graphic.add(r))}})),this.group.add(this.graphic),this.setEdit(!1)}},{key:"setSelectedStyle",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.attr({style:ly(this._styleConfig.selected,n)}),this._option.isOpen){t.attr({draggable:!0});var r=this._editWidth/this.group.scale[0];t.bound&&t.bound.eachChild((function(n,i){n.show(),n.attr({shape:{x:t.shape.points[i][0]-r/2,y:t.shape.points[i][1]-r/2,width:r,height:r},zlevel:e.zlevel+1})}))}}},{key:"selected",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._option.isOpen||(this.resetAllStyle(),this._areaShapes.forEach((function(r){if(r.data.id===t.id){e._option.currentShape=r;var i=e._option.currentShape.shape.points,o=e._changeToPoints(i);e._editNode=o,e.setSelectedStyle(r,n)}})))}},{key:"setPosition",value:function(t){if(!this._option.isOpen&&0!==t.coordinates.length){var e=this._calculateToRelationpix(t.coordinates),n=0,r=0,i=0,o=0;e.forEach((function(t){r<=t[0]&&(r=t[0]),o<=t[1]&&(o=t[1])})),n=r,i=o,e.forEach((function(t){t[0]<n&&(n=t[0]),t[1]<i&&(i=t[1])}));var a,s,h=[(r+n)/2,(o+i)/2],l=this.group.scale[0],u=this.zr.painter._width,c=this.zr.painter._height;0===this.bgDrag.length?(a=0,s=0):(a=this.bgDrag[0],s=this.bgDrag[1]),this.group.attr({position:[(-h[0]-a)*l+u/2*l,(-h[1]-s)*l+c/2*l]})}}},{key:"_createEditGroup",value:function(t,e){var n=new ny.Group;return n.data={type:"EditGroup"},n.bound=e,this._createEditPoint(t,n),e.bound=n,this.graphic.add(n),n}},{key:"_toShapeDragEnd",value:function(t,e){var n,r,i=[],o=ny.util.clone(t.target.shape.points),a=t.target.transform;0===this.bgDrag.length?(n=0,r=0):(n=this.bgDrag[0],r=this.bgDrag[1]);var s=this.getOffsetM(),h=this.getOffsetN();return o.forEach((function(t){var e;a&&(a[4]-s>0?t[0]=t[0]+Math.abs(a[4]-s)/a[0]:t[0]=t[0]-Math.abs(a[4]-s)/a[0],a[5]-h>0?t[1]=t[1]+Math.abs(a[5]-h)/a[0]:t[1]=t[1]-Math.abs(a[5]-h)/a[0]),e=[t[0]-n,t[1]-r],i.push(e)})),i}},{key:"_createShape",value:function(t,e){var n=this,r=new ny.Polygon({shape:{points:t,smooth:this._styleConfig.smooth,smoothConstraint:this._styleConfig.constraint},data:e,cursor:"default",draggable:!1,style:this._styleConfig.default,zlevel:this.zlevel});return r.on("click",(function(t){"polygon"===n.getDrawingMode()&&1===t.which&&(n._editNode=n._toShapeDragEnd(t,t.target))})),r.on("dragstart",(function(t){"polygon"===n.getDrawingMode()&&1===t.which&&(n._option.currentShape=r,n.tempShape=t.target)})),r.on("drag",(function(t){if("polygon"===n.getDrawingMode()&&!1===n._isMouseDown){var e=r.bound;e.attr({position:e.bound.position}),e.eachChild((function(t){t.hide()})),n._editNode=n._toShapeDragEnd(t,t.target),n._option.currentShape=t.target;var i=n._toGlobal(t.target.shape.points,r),o=n._changeToPoints(i);n.handlers._onRectDrag&&n.handlers._onRectDrag[0](t,Ey(Ey({},t.target.data),{},{coordinates:o})),n._onRectDrag&&n._onRectDrag(t,Ey(Ey({},t.target.data),{},{coordinates:o}))}})),r.on("dragend",(function(t){if("polygon"===n.getDrawingMode()&&1===t.which&&!1===n._isMouseDown){var e=t.target;n.position=ny.util.clone(e.position);var r=n._toShapeDragEnd(t,e);n._option.currentShape=e,n._reCreatePoints(r);var i=n._changeToPoints(r);n._option.exportData.forEach((function(e){e.id===t.target.data.id&&(e.coordinates=i)})),n.handlers._onRectDragComplete&&n.handlers._onRectDragComplete[0](t,Ey(Ey({},t.target.data),{},{coordinates:i})),n._onRectDragComplete&&n._onRectDragComplete(t,Ey(Ey({},t.target.data),{},{coordinates:i}))}})),r.on("mousemove",(function(t){"polygon"===n.getDrawingMode()&&n._option.isOpen&&(r.attr({cursor:"default"}),n.tempShape=t.target)})),r.on("mouseover",(function(t){if("polygon"===n.getDrawingMode()){if(n._option.isOpen)return r.attr({cursor:"default"}),void(!1===n._isMouseDown&&(n.tempShape=t.target,n._unBindEvent()));var e=n._toGlobal(t.target.shape.points,r),i=n._changeToPoints(e);n.handlers._onHover&&n.handlers._onHover[0](t,Ey(Ey({},t.target.data),{},{coordinates:i})),n._onHover&&n._onHover(t,Ey(Ey({},t.target.data),{},{coordinates:i}))}})),r.on("mouseout",(function(t){"polygon"===n.getDrawingMode()&&n._option.isOpen&&n._bindEvent()})),r.on("mousedown",(function(t){if("rectangle"!==n.getDrawingMode())if(3!==t.which){if(1===t.which&&!1===n._isMouseDown){n._option.currentShape=t.target,n.tempShape=t.target,n.setSelectedSub(n._option.id,r),n.resetAllStyle(),n.setSelectedStyle(t.target);var e=n._toGlobal(t.target.shape.points,r),i=n._changeToPoints(e);n.handlers._onSelected&&n.handlers._onSelected[0](t,Ey(Ey({},t.target.data),{},{coordinates:i})),n._onSelected&&n._onSelected(t,Ey(Ey({},t.target.data),{},{coordinates:i}))}}else r.attr({draggable:!1})})),r.on("dblclick",(function(t){n.getDrawingMode()})),r.on("mouseup",(function(t){if("polygon"===n.getDrawingMode()){var e=n.getSelectedSub(n._option.id);n._option.isOpen&&e&&1===t.which&&(n._option.currentShape.bound&&n._option.currentShape.bound.eachChild((function(t){t.show()})),n._bindEvent())}})),r}},{key:"_reCreatePoints",value:function(t){var e=this,n=this._createShape(t,this._option.currentShape.data);this.graphic.remove(this._option.currentShape.bound),this.graphic.remove(this._option.currentShape),this._areaShapes.forEach((function(t,n){t.data.id===e._option.currentShape.data.id&&e._areaShapes.splice(n,1)})),this._option.currentShape=n,this._createEditGroup(t,n),this.setSelectedSub(this._option.id,n),this._areaShapes.push(n),this.graphic.add(n),this.setSelectedStyle(n),this._startPoint=[]}},{key:"_editElementEvent",value:function(t,e){var n=this;t.on("mouseover",(function(t){})),t.on("mouseout",(function(t){})),t.on("mouseup",(function(t){})),t.on("dragstart",(function(t){if(3!==t.which){if(1===t.which){n._option.currentShape.transform;var r=n._option.currentShape.shape.points,i=ny.util.clone(r);n.oldPoint=i,n.m=ny.util.clone(n._option.currentShape.transform||[])}}else e.eachChild((function(t){t.hide()}))})),t.on("drag",(function(t){if("CANVAS"===t.event.target.tagName&&1===t.which){var r,i,o=ny.util.clone(n._option.currentShape.shape.points),a=n.m,s=(t.target.data._side,t.target.data._index);t.target.data._afterIndex,t.target.data._beforeIndex;a[0]||(a[0]=1,a[4]=0,a[5]=0),0===n.bgDrag.length?(r=0,i=0):(r=n.bgDrag[0],i=n.bgDrag[1]);var h,l,u;l=t.event.offsetX,u=t.event.offsetY;var c=n.getOffsetM(),f=n.getOffsetN();o[s]=[(l-c)/a[0]-r,(u-f)/a[0]-i],h=o,e.removeAll(),e.attr({position:[0,0],scale:[1,1]}),n._option.currentShape.attr({scale:[1,1],shape:{points:h},position:[0,0]}),n._editNode=h;var d=n._changeToPoints(h);n.handlers._onEditNodeDrag&&n.handlers._onEditNodeDrag[0](t,Ey(Ey({},e.bound.data),{},{coordinates:d})),n._onEditNodeDrag&&n._onEditNodeDrag(t,Ey(Ey({},e.bound.data),{},{coordinates:d})),n._createEditPoint(h,e)}})),t.on("dragend",(function(t){if(n._editNode.length>0){n._reCreatePoints(n._editNode);var r=n._changeToPoints(n._editNode);n._option.exportData.forEach((function(t){t.id===e.bound.data.id&&(t.coordinates=r)})),n.handlers._onEditNodeDragComplete&&n.handlers._onEditNodeDragComplete[0](t,Ey(Ey({},e.bound.data),{},{coordinates:r})),n._onEditNodeDragComplete&&n._onEditNodeDragComplete(t,Ey(Ey({},e.bound.data),{},{coordinates:r}))}}))}},{key:"_createEditPoint",value:function(t,e){var n=this,r=[];t.forEach((function(e,n){var i=n;r.push({_side:"editNode_"+n,_index:n,_beforeIndex:0===n?t.length-1:--i,_afterIndex:n===t.length-1?0:++i,points:t[n]})})),r.forEach((function(t){var r=n._editWidth/n.group.scale[0],i=new ny.Rect(ly(Py,{shape:{x:t.points[0]-r/2,y:t.points[1]-r/2,width:r,height:r},data:{_side:t._side,_index:t._index,_beforeIndex:t._beforeIndex,_afterIndex:t._afterIndex},zlevel:n.zlevel+1}));n._editElementEvent(i,e),e.add(i)}))}},{key:"setSilent",value:function(t){}},{key:"setOptionStyle",value:function(t,e){var n=this;this.DIYStyle=t,e&&(this._styleConfig.selected=e),this._areaShapes.forEach((function(e){"POLYGON"===e.data.type&&e.attr({style:Ey(Ey({},n._styleConfig.default),t)})}))}},{key:"resetShapeStyle",value:function(){var t=this;this._areaShapes.forEach((function(e){"Polygon"===e.data.type&&(e.attr({style:Ey(Ey({},t._styleConfig.default),t.DIYStyle),draggable:!1}),e.bound&&e.bound.eachChild((function(t){t.hide()})))}))}},{key:"removeAnnotation",value:function(){var t,e=this,n=this.getSelectedSub(this._option.id);if(n)return this._areaShapes.forEach((function(r,i){r.data.id===n.data.id&&(t=r,e._areaShapes.splice(i,1))})),t&&(this.graphic.remove(t.bound),t.bound=null,this.graphic.remove(n),this.setSelectedSub(this._option.id,null)),this._option.removeItem=t,this._option.removeItem}},{key:"removeSub",value:function(t){var e,n=t.id;this._areaShapes.forEach((function(t,r){t.data.id===n&&(e=r)}));var r=this._areaShapes[e];r&&(this._areaShapes.splice(e,1),this.graphic.remove(r.bound),r.bound=null,this.graphic.remove(r))}},{key:"removeAll",value:function(){var t=this;this._areaShapes.length>0&&this._areaShapes.forEach((function(e){e.bound&&(t.graphic.remove(e.bound),e.bound=null),t.graphic.remove(e),e=null})),this._areaShapes.splice(0),this._option.exportData.splice(0)}},{key:"_calculateToRelationpix",value:function(t){var e=this,n=[];return t.forEach((function(t){var r=t[0]*e._option.setRate+e._option.offsetX,i=t[1]*e._option.setRate+e._option.offsetY;n.push([r,i])})),n}},{key:"_changeToPoints",value:function(t){var e=this,n=[];return t.forEach((function(t){n.push([(t[0]-e._option.offsetX)/e._option.setRate,(t[1]-e._option.offsetY)/e._option.setRate])})),this._resetPoints(n)}},{key:"addHover",value:function(t){for(var e=0;e<this._areaShapes.length;e++){var n=this._areaShapes[e];if(n.data.id==t.id){this.zr.addHover(n,t.style);break}}}},{key:"removeHover",value:function(t){for(var e=0;e<this._areaShapes.length;e++){var n=this._areaShapes[e];if(n.data.id==t.id){this.zr.removeHover(n);break}}}},{key:"reset",value:function(){}}]),n}(My),Ly={default:{textAlign:"left",textPosition:"top",fontSize:12,fontFamily:"serif",fontWeight:"normal",textFill:"#000000",zlevel:2}},Ry=function(t){bs(n,t);var e=Es(n);function n(t){var r;_s(this,n),(r=e.call(this)).type="TextOverlay";var i=Object.keys(r.inMarkOption);r._option=r.getOption(t.id||i[0]),r.group=r.getGroup(t.id||i[0]),r.image=r.getImage(t.id||i[0]);var o=r.getRenderMode(t.id||i[0]);return r._option.mode=o||"auto",r._option.isOpen=t.isOpen||!1,r._option.exportData=[],r._option.draggable=!0,r.graphic=r._createGraphicGroup(),r._areaShapes=[],r._onHover=t&&t.event&&t.event.onHover,r._onImageDrag=t&&t.event&&t.event.onImageDrag,r._onImageDragEnd=t&&t.event&&t.event.onImageDragEnd,r._onSelected=t&&t.event&&t.event.onSelected,r.data=t.data,t.style?r._styleConfig=ly(Ly.default,t.style):r._styleConfig=Ly.default,r.zlevel=r._styleConfig.zlevel,r.handlers={},r.DIYStyle={},r.image&&(r.image.on("drag",(function(t){if(r._onImageDrag&&r._onImageDrag(t),r.handlers._onImageDrag&&r.handlers._onImageDrag[0](t),!0===r.getDrag()){var e=t.target.position;r.graphic.attr({position:e}),r.bgDrag=e}})),r.image.on("dragend",(function(t){r._onImageDragEnd&&r._onImageDragEnd(t),r.handlers._onImageDragEnd&&r.handlers._onImageDragEnd[0](t)}))),"object"===Ms(r.data)&&r.setData(r.data),r}return ms(n,[{key:"open",value:function(){}},{key:"close",value:function(){}},{key:"addEventListener",value:function(t,e){var n="_"+t;void 0===this.handlers[n]&&(this.handlers[n]=[]),this.handlers[n].push(e)}},{key:"removeEventListener",value:function(t,e){var n="_"+t;if(this.handlers[n]){var r=this.handlers[n];if(null==e)r.length=0;else if(r.length)for(var i=0;i<r.length;i++)r[i]==e&&this.handlers[n].splice(i,1)}}},{key:"_createGraphicGroup",value:function(t,e){var n=new ny.Group;return n.data={type:"TextGroup"},n}},{key:"setData",value:function(t){this._setTexts(t)}},{key:"_setTexts",value:function(t){var e=this;this.removeAll(),t.forEach((function(t){if("Text"===t.type){var n=e._setShapeWidth(t);n.on("mouseover",(function(t){e.handlers._onHover&&e.handlers._onHover[0](t,Ey({},t.target.data)),e._onHover&&e._onHover(t,Ey({},t.target.data))})),n.on("mousedown",(function(t){e.handlers._onSelected&&e.handlers._onSelected[0](t,Ey({},t.target.data)),e._onSelected&&e._onSelected(t,Ey({},t.target.data))})),e._setShapeHeight(n,t),e._areaShapes.push(n),e.graphic.add(n)}})),this.group.add(this.graphic),this.zr.add(this.group)}},{key:"setZIndex",value:function(t){this.zlevel=t}},{key:"removeAll",value:function(){var t=this;this._areaShapes.length>0&&this._areaShapes.forEach((function(e){t.graphic.remove(e),e=null})),this._areaShapes.splice(0),this._option.exportData.splice(0)}},{key:"setOptionStyle",value:function(t,e){var n=this;this.DIYStyle=t,this._styleConfig.selected=e,this._areaShapes.forEach((function(e){"Text"===e.data.type&&e.attr({style:Ey(Ey({},n._styleConfig.default),t)})}))}},{key:"resetShapeStyle",value:function(){var t=this;this._areaShapes.forEach((function(e){"Text"===e.data.type&&e.attr({style:Ey(Ey({},t._styleConfig.default),t.DIYStyle),draggable:!1})}))}},{key:"_setShapeHeight",value:function(t,e){var n=t.getBoundingRect(),r=t.position;e.height>=n.height&&t.attr({position:[r[0],r[1]+(e.height-n.height)/2]})}},{key:"_setShapeWidth",value:function(t,e){var n=this._computeFontSize(t,e);t.fontSize=n;var r=this._createText(t);return r.getBoundingRect().width>=t.width?this._setShapeWidth(t,"minus"):r}},{key:"_computeFontSize",value:function(t,e){return e?(t.tHeight--,t.tHeight):t.height&&t.word?(t.tHeight=t.height,t.height):void 0}},{key:"_createText",value:function(t){return new ny.Text({style:Ey(Ey({},this._styleConfig),{},{text:t.word,fontSize:t.fontSize}),data:t,position:t.position,zlevel:this.zlevel})}}]),n}(My),zy="1.2.4";console.log("inMark v".concat(zy));var Ny={version:zy,utils:dy,AbstractRender:My,Image:Cy,Rect:Ay,Polygon:Iy,Text:Ry};t.AbstractRender=My,t.Image=Cy,t.Polygon=Iy,t.Rect=Ay,t.Text=Ry,t.default=Ny,t.utils=dy,t.version=zy,Object.defineProperty(t,"__esModule",{value:!0})}));
